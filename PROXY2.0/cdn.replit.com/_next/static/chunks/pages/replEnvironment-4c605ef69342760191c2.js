(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7363,9718],{9545:function(e,t,n){"use strict";n.d(t,{$:function(){return k},Z:function(){return Z}});var r=n(79056),i=n(92809),a=n(10219),o=n(67294),s=n(42992),l=n(34940),c=n(55412),u=n(53567),d=n(25517),p=n(32930),f=n(49722),m=n(45631),h=n(61850),g=n(35944),v=["innerRef"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x={dark:p.V2.replitDark,light:p.V2.replitLight,spooky:p.V2.replitSpooky},w="monaco_admin_fallback";function k(){return Boolean(f.Z.get(w))}function Z(e){var t=e.isAdmin,n=(0,h.Z)("flag-spooky-theme"),r=(0,m.Z)(),i=r.preferences,o=r.update,l=r.loading;return(0,g.BX)(u.gC,{wrap:"nowrap",spacing:4,align:"stretch",children:[(0,g.BX)(u.Ug,{justify:"space-between",children:[(0,g.tZ)(d.Z,{children:"Theme"}),(0,g.tZ)(s.Z,{items:Object.keys(x).filter((function(e){return n||"spooky"!==e})),onClick:function(e){l||o({theme:x[e]})},renderAnchorComponent:function(e){var t=e.innerRef,n=(0,a.Z)(e,v);return(0,g.BX)(d.Z,y(y({},n),{},{ref:t,style:{cursor:"pointer",userSelect:"none"},children:[Object.keys(x).find((function(e){return x[e]===i.theme}))," ",(0,g.tZ)(c.Z,{})]}))},renderItemChildComponent:function(e){return(0,g.tZ)(d.Z,{children:e})}})]}),t?(0,g.tZ)(j,{}):null]})}function j(){var e=o.useState(k()),t=(0,r.Z)(e,2),n=t[0],i=t[1];return o.useEffect((function(){f.Z.set(w,n)}),[n]),(0,g.BX)(u.Ug,{justify:"space-between",children:[(0,g.tZ)(d.Z,{children:"Use Monaco"}),(0,g.tZ)(l.Z,{isOn:n,onChange:function(){i((function(e){return!e}))}})]})}},61967:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(65988),i=(n(67294),n(94184)),a=n.n(i),o=n(35944);function s(e){var t=e.unreadDot,n=e.size,i=void 0===n?12:n,s=e.count,l=void 0===s?null:s,c=l&&l>99,u=c?"99+":null===l||void 0===l?void 0:l.toString();return(0,o.BX)("span",{className:"jsx-2595643267",children:[(0,o.tZ)("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},xmlns:"http://www.w3.org/2000/svg",className:"jsx-2595643267",children:(0,o.tZ)("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-2595643267"})}),t&&(0,o.tZ)("div",{className:"jsx-2595643267 unread-indicator"}),Boolean(l)&&(0,o.tZ)("div",{className:"jsx-2595643267 "+(a()("count",{overflow:c})||""),children:u}),(0,o.tZ)(r.default,{id:"2595643267",children:["span.jsx-2595643267{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}",".unread-indicator.jsx-2595643267{width:5px;height:5px;border-radius:10px;background-color:var(--accent-red-default);-webkit-transform:translate(8px,-1px);-ms-transform:translate(8px,-1px);transform:translate(8px,-1px);position:absolute;}",".count.jsx-2595643267{border-radius:10px;background-color:var(--accent-negative-default);-webkit-transform:translate(50%,-50%);-ms-transform:translate(50%,-50%);transform:translate(50%,-50%);position:absolute;min-width:16px;padding:2px 3px;height:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:white;font-size:var(--font-size-small);}",".overflow.jsx-2595643267{-webkit-transform:translate(25%,-50%);-ms-transform:translate(25%,-50%);transform:translate(25%,-50%);}"]})]})}},68924:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var r=n(92809),i=n(79056),a=n(65988),o=n(67294),s=n(71371),l=n(3480),c=n(54194),u=n(86780),d=n(97131),p=n(80723),f=n(32201);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){var t=e.root,n=e.initialValue,r=void 0===n?"":n,a=e.isOpen,s=o.useRef(null),l=o.useState(Boolean(r)),c=(0,i.Z)(l,2),u=c[0],m=c[1],g=o.useState(r),v=(0,i.Z)(g,2),b=v[0],y=v[1],x=o.useRef(r),w=o.useRef(""),k=o.useState(null),Z=(0,i.Z)(k,2),j=Z[0],O=Z[1],E=o.useState((function(){var e={command:t,token:{value:"",start:0,end:0},parent:null,meta:{match:!0,searchValue:""}};return{options:[],value:r,index:r.length,searchValue:"",matchedAncestors:[e],rootNode:e}})),_=(0,i.Z)(E,2),C=_[0],S=_[1],P=o.useState(C.matchedAncestors.slice(1)),N=(0,i.Z)(P,2),T=N[0],I=N[1],R=o.useRef(null);o.useEffect((function(){R.current=(0,f.Z)({root:t,onUpdate:function(e){x.current&&(x.current=""),S(e),m(!1)}})}),[t,r]);var D=o.useMemo((function(){return[].concat((0,d.Z)(T.map((function(e){return e.token.value}))),[b]).join(" ")}),[T,b]);o.useEffect((function(){if(!R.current)throw new Error("Expected completerRef. Did you pass in a root command?");m(!0),R.current({value:D,index:D.length})}),[t,D]);var A=(0,p.Kb)({isOpen:a,inputValue:b,initialHighlightedIndex:0,defaultHighlightedIndex:0,itemToString:function(e){return e?e.value:""},items:C.options,stateReducer:function(e,t){var n=t.type,r=t.changes;switch(n){case p.Kb.stateChangeTypes.MenuMouseLeave:return h(h({},r),{},{highlightedIndex:-1===e.highlightedIndex?0:e.highlightedIndex});case p.Kb.stateChangeTypes.InputKeyDownEscape:case p.Kb.stateChangeTypes.InputBlur:return h(h({},r),{},{highlightedIndex:0,selectedItem:null});default:return r}},onSelectedItemChange:function(e){e.selectedItem&&(I(e.selectedItem.path.slice(1)),y(""),A.reset(),s.current&&s.current.focus())}});o.useEffect((function(){w.current&&T.length&&(y(w.current),w.current="")}),[C,T]);return{getMenuProps:A.getMenuProps,getToggleButtonProps:A.getToggleButtonProps,getComboboxProps:A.getComboboxProps,getItemProps:A.getItemProps,highlightedIndex:A.highlightedIndex,selectItem:A.selectItem,getInputProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return A.getInputProps(h(h({},e),{},{spellCheck:!1,autoComplete:"off",ref:function(t){"function"===typeof e.ref&&e.ref(t),s.current=t},onChange:function(t){x.current||(e.onChange&&e.onChange(t),j&&O(null),y(t.currentTarget.value))},onKeyDown:function(e){if(x.current&&1===e.key.length)w.current+=e.key;else{if(!R.current)throw new Error("Expceted completerRef. Did you pass in a root command?");if("Escape"!==e.key)if("a"===e.key&&T.length&&e.metaKey)O({start:0,end:T.length});else{if("Backspace"===e.key&&j&&j.start<T.length){O(null),I(T.slice(0,j.start));var t=e.currentTarget,n=t.selectionStart,r=t.selectionEnd;if("number"!==typeof n||"number"!==typeof r)return;return y(e.currentTarget.value.slice(r)),void setTimeout((function(){s.current&&s.current.setSelectionRange(n,n)}))}if("Backspace"===e.key&&0===e.currentTarget.selectionStart&&T.length)I(T.slice(0,T.length-1));else if("ArrowLeft"===e.key&&e.shiftKey&&e.metaKey)O({start:0,end:T.length});else if("ArrowLeft"===e.key&&e.shiftKey&&0===e.currentTarget.selectionStart&&T.length){var i=j?Math.max(j.start-1,0):T.length-1;O({start:i,end:T.length})}else if("ArrowLeft"!==e.key||j||0!==e.currentTarget.selectionStart||!T.length){if("ArrowRight"!==e.key||!e.shiftKey||!j){var a="number"===typeof A.highlightedIndex&&A.highlightedIndex<C.options.length?C.options[A.highlightedIndex]:null;return" "===e.key&&a&&1===C.options.length&&a.token.value===b?(A.selectItem(a),void e.preventDefault()):"ArrowRight"===e.key?(j&&O(null),void(a&&A.selectItem(a))):"Tab"===e.key&&a?(e.preventDefault(),void A.selectItem(a)):void("Enter"===e.key&&a&&A.selectItem(a))}var o=j.start+1;O(o===j.end?null:{start:o,end:j.end})}else I(T.slice(0,T.length-1))}else e.currentTarget.blur()}}}))},isLoading:u,virtualSelection:j,completer:C,matchedBlocks:T,setMatchedBlocks:I,inputValue:b,clear:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.focus;I([]),y(""),A.reset(),t&&setTimeout((function(){s.current&&s.current.focus()}))}}}var v=n(11163),b=n(41371),y=n(98731),x=n(83587),w=n(47655),k=n(88834),Z=n(95211),j=n(32324),O=n(35944);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e){var t=e.root,n=e.indentOptions,r=e.onIsOpenChange,d=e.initialValue,p=e.renderOutput,f=e.disableKeyboardShortcut,m=e.autoFocus,h=o.useState(!1),E=(0,i.Z)(h,2),C=E[0],S=E[1];o.useEffect((function(){S(!0)}),[]);var P=o.useState(!1),N=(0,i.Z)(P,2),T=N[0],I=N[1],R=g({root:t,isOpen:T,initialValue:d}),D=R.getMenuProps,A=R.getInputProps,L=R.getComboboxProps,B=R.highlightedIndex,M=R.completer,U=R.getItemProps,X=R.matchedBlocks,F=R.setMatchedBlocks,z=R.virtualSelection,V=R.inputValue,H=R.selectItem,G=R.clear,W=o.useRef(G);o.useEffect((function(){W.current=G}),[G]);var q=o.useRef(Boolean(d)),K=o.useRef(r),Y=o.useRef(null),Q=o.useRef(null),$=(0,v.useRouter)();o.useEffect((function(){K.current=r}),[r]),o.useEffect((function(){K.current&&K.current(T)}),[T]),o.useEffect((function(){if(!f){var e=function(e){(0,y.b)(e),"Escape"!==e.key?Y.current&&!e.altKey&&!e.shiftKey&&(0,x.jh)(e)&&(x.V5?"k"===e.key.toLowerCase():"."===e.key.toLowerCase())&&(e.preventDefault(),document.activeElement===Y.current?(Y.current.blur(),I(!1),Q.current&&Q.current.focus()):(Q.current=document.activeElement&&document.activeElement!==Y.current&&"function"===typeof document.activeElement.focus?document.activeElement:null,Y.current.focus())):I(!1)};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}}),[f]);var J=(0,b.Z)((function(){I(!1)}),[]);o.useEffect((function(){M.errors&&M.errors.forEach((function(e){s.$e((function(t){t.setTag("completer","true"),s.Tb(e)}))}))}),[M.errors]),o.useEffect((function(){if(d&&q.current&&M.options.length&&d===M.options[0].value){var e;q.current=!1;var t=(0,i.Z)(M.options,1)[0];if(!("basic"===(null===(e=t.command.data)||void 0===e?void 0:e.type)))return;H(t)}}),[d,M.options,H]);var ee=Boolean(V||X.length),te=X.length?X[X.length-1]:M.rootNode,ne=te.command&&"data"in te.command&&te.command.data&&"description"in te.command.data?te.command.data.description:void 0,re=o.useRef(p);return o.useEffect((function(){re.current=p}),[p]),o.useEffect((function(){var e,t,n,r=te.command;if("link"===(null===(e=r.data)||void 0===e?void 0:e.type)){var i=r.data.link;$.push(i.href,i.as)}else"action"===(null===(t=r.data)||void 0===t?void 0:t.type)?(r.data.run(),W.current(),I(!1),Y.current&&Y.current.blur()):"output"===(null===(n=r.data)||void 0===n?void 0:n.type)&&re.current&&(I(!1),re.current(r.data.output()),Y.current&&Y.current.blur())}),[te,$]),(0,O.BX)("div",{ref:J,className:a.default.dynamic([["2157069700",[j.j.tabletMin]]]),children:[(0,O.BX)("div",_(_({},L()),{},{className:a.default.dynamic([["2157069700",[j.j.tabletMin]]])+" root-wrap",children:[(0,O.BX)("div",{className:a.default.dynamic([["2157069700",[j.j.tabletMin]]])+" input-row",children:[X.length?X.map((function(e,t){var n=Boolean(z&&t>=z.start&&t<z.end);return(0,O.tZ)("div",{className:a.default.dynamic([["2157069700",[j.j.tabletMin]]])+" block-wrap",children:(0,O.tZ)(l.Z,{node:e,isSelected:n,onClick:function(){F(X.slice(0,t+1))}})},e.token.value+t)})):(0,O.tZ)("div",{className:a.default.dynamic([["2157069700",[j.j.tabletMin]]])+" prompt-icon",children:(0,O.tZ)(u.Z,{size:16,filled:!0,color:"var(--foreground-dimmest)"})}),(0,O.tZ)("input",_(_({},A({autoFocus:m,placeholder:ne,ref:function(e){Y.current=e},onFocus:function(){I(!0)}})),{},{className:a.default.dynamic([["2157069700",[j.j.tabletMin]]])})),!C||ee||f?null:(0,O.tZ)("div",{className:a.default.dynamic([["2157069700",[j.j.tabletMin]]])+" keyboard-shortcut-container",children:(0,O.tZ)(w.Z,{shortcut:{cmdOrCtrlKey:!0,key:x.V5?"k":"."}})}),ee?(0,O.tZ)(k.Z,{Icon:Z.Z,border:!1,filled:!1,onClick:function(){G({focus:!0})}}):null]}),(0,O.tZ)("div",_(_({},D()),{},{className:a.default.dynamic([["2157069700",[j.j.tabletMin]]]),children:T&&M.options.length?(0,O.tZ)("div",{className:a.default.dynamic([["2157069700",[j.j.tabletMin]]])+" menu",children:(0,O.tZ)("ul",{className:a.default.dynamic([["2157069700",[j.j.tabletMin]]]),children:M.options.map((function(e,t){var r=B===t;return(0,O.tZ)("li",_(_({},U({key:e.value,item:e,index:t})),{},{className:a.default.dynamic([["2157069700",[j.j.tabletMin]]]),children:(0,O.tZ)(c.Z,{indentOptions:n,isActive:r,option:e,matchedBlocks:X})}))}))})}):null}))]})),(0,O.tZ)(a.default,{id:"2157069700",dynamic:[j.j.tabletMin],children:[".root-wrap.__jsx-style-dynamic-selector{font-size:var(--font-size-default);position:relative;}",".input-row.__jsx-style-dynamic-selector{border:1px solid transparent;border-radius:var(--border-radius-8) var(--border-radius-8) 0 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:42px;padding-left:var(--space-8);padding-right:var(--space-4);z-index:1;position:relative;color:var(--foreground-default);}","input.__jsx-style-dynamic-selector{font-size:var(--font-size-default);background-color:transparent;border:0 none;outline:0 none;padding:var(--space-8);padding-left:0;display:block;width:100%;color:var(--foreground-default);}","input.__jsx-style-dynamic-selector::-webkit-input-placeholder{color:var(--foreground-dimmest);}","input.__jsx-style-dynamic-selector::-moz-placeholder{color:var(--foreground-dimmest);}","input.__jsx-style-dynamic-selector:-ms-input-placeholder{color:var(--foreground-dimmest);}","input.__jsx-style-dynamic-selector::placeholder{color:var(--foreground-dimmest);}","input.__jsx-style-dynamic-selector:focus.__jsx-style-dynamic-selector::-webkit-input-placeholder{color:var(--foreground-dimmer);}","input.__jsx-style-dynamic-selector:focus.__jsx-style-dynamic-selector::-moz-placeholder{color:var(--foreground-dimmer);}","input.__jsx-style-dynamic-selector:focus.__jsx-style-dynamic-selector:-ms-input-placeholder{color:var(--foreground-dimmer);}","input.__jsx-style-dynamic-selector:focus.__jsx-style-dynamic-selector::placeholder{color:var(--foreground-dimmer);}","input.__jsx-style-dynamic-selector::selection{background-color:var(--accent-primary-dimmest);}",".prompt-icon.__jsx-style-dynamic-selector{margin-right:var(--space-8);height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".block-wrap.__jsx-style-dynamic-selector{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;padding-right:var(--space-8);}",".menu.__jsx-style-dynamic-selector{padding-top:40px;position:absolute;left:0;top:0;width:100%;background-color:var(--background-higher);border-radius:var(--border-radius-8);max-height:500px;overflow-y:auto;}","li.__jsx-style-dynamic-selector:last-child>div{border-bottom-right-radius:var(--border-radius-8);border-bottom-left-radius:var(--border-radius-8);}",".keyboard-shortcut-container.__jsx-style-dynamic-selector{display:none;}","@media screen and (min-width:".concat(j.j.tabletMin,"px){.keyboard-shortcut-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;}}")]})]})}},48887:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(65988),i=n(88834),a=n(84476),o=n(53567),s=n(25517),l=n(35944);function c(e){var t=e.prompt,n=e.desc,c=e.confirmText,u=e.loading,d=void 0!==u&&u,p=e.onCancel,f=e.onConfirm,m=e.danger,h=e.padding,g=void 0===h?32:h;return(0,l.BX)("div",{className:r.default.dynamic([["1057179245",[g]]])+" content",children:[(0,l.BX)(o.gC,{spacing:4,children:[(0,l.BX)(o.gC,{spacing:1,children:[(0,l.tZ)(a.Z,{level:3,children:t}),(0,l.tZ)(s.Z,{foreground:2,children:n})]}),(0,l.BX)(o.Ug,{spacing:1,children:[p&&(0,l.tZ)(i.Z,{autoFocus:!0,loading:d,onClick:p,children:"Cancel"}),(0,l.tZ)(i.Z,{color:m?"negative":"primary",filled:!0,loading:d,onClick:f,children:c||"Ok"})]})]}),(0,l.tZ)(r.default,{id:"1057179245",dynamic:[g],children:[".content.__jsx-style-dynamic-selector{padding:var(--space- ".concat(g,");}")]})]})}},5862:function(e,t,n){"use strict";var r=n(92809),i=n(10219),a=n(68216),o=n(25997),s=n(91077),l=n(30268),c=n(92953),u=n(65988),d=n(67294),p=n(47121),f=n(85893),m=["inputTriggerProps","tall"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var b=function(e){(0,s.Z)(n,e);var t=v(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.props.autoFocus&&this.focus()}},{key:"focus",value:function(){this.el&&this.el.focus()}},{key:"blur",value:function(){this.el&&this.el.blur()}},{key:"select",value:function(){this.el&&this.el.select()}},{key:"render",value:function(){var e=this,t=this.props,n=t.inputTriggerProps,r=t.tall,a=(0,i.Z)(t,m),o=n?function(e){return(0,f.jsx)(p.Z,g(g({},n),{},{children:e}))}:function(e){return e};return(0,f.jsxs)(f.Fragment,{children:[o((0,f.jsx)("textarea",g(g({ref:function(t){return e.el=t}},a),{},{className:"jsx-2349401589 "+u.default.dynamic([["3738306157",[r?250:60]]])+" form-textarea"}))),(0,f.jsx)(u.default,{id:"2349401589",children:[".form-textarea.jsx-2349401589{resize:vertical;background-color:var(--background-default);color:var(--foreground-default);}",".form-textarea.jsx-2349401589:focus{border-color:var(--accent-primary-default);}",".form-textarea[disabled].jsx-2349401589{background-color:var(--background-root);color:var(--foreground-dimmer);opacity:0.5;}"]}),(0,f.jsx)(u.default,{id:"3738306157",dynamic:[r?250:60],children:[".form-textarea.__jsx-style-dynamic-selector{color:var(--foreground-default);width:100%;max-width:100%;min-width:100%;min-height:".concat(r?250:60,"px;height:100%;box-sizing:border-box;padding:var(--space-8);outline:0px;font-size:15px;border:1px solid var(--foreground-dimmest);line-height:1.4;border-radius:var(--border-radius-4);}"),".form-textarea.__jsx-style-dynamic-selector:focus{outline:0 none;}",".form-textarea[readonly].__jsx-style-dynamic-selector{cursor:not-allowed;}"]})]})}}]),n}(d.Component);b.defaultProps={autoComplete:"off",required:!1},t.Z=b},47127:function(e,t,n){"use strict";n.d(t,{Aw:function(){return x},ck:function(){return w}});var r=n(92809),i=n(97131),a=n(79056),o=n(65988),s=n(67294),l=n(80723),c=n(94184),u=n.n(c),d=n(7977),p=n.n(d),f=n(45187),m=n(16264),h=n(38934),g=n(55104),v=n(35944);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e){var t=e.children;return(0,v.BX)("div",{className:"jsx-2063872532",children:[t,(0,v.tZ)(o.default,{id:"2063872532",children:["div.jsx-2063872532{padding:var(--space-4) var(--space-8);color:var(--foreground-dimmest);font-size:var(--font-size-small);text-transform:uppercase;font-weight:var(--font-weight-medium);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-letter-spacing:1px;-moz-letter-spacing:1px;-ms-letter-spacing:1px;letter-spacing:1px;}"]})]})}function w(e){var t=e.title,n=e.iconUrl,r=e.filter,i=e.isNew,a=e.active;return(0,v.BX)("div",{className:"jsx-69768995 "+(u()("item",{active:a})||""),children:[n?(0,v.tZ)("div",{className:"jsx-69768995 item-icon",children:(0,v.tZ)(g.Z,{iconUrl:n,size:16,alt:t})}):null,(0,v.tZ)("div",{className:"jsx-69768995 item-text",children:r?(0,v.tZ)(m.fs,{source:t,match:r}):t}),i?(0,v.tZ)("div",{className:"jsx-69768995 new",children:"new"}):null,(0,v.tZ)(o.default,{id:"69768995",children:[".item.jsx-69768995{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;font-size:var(--font-size-subhead-default);padding:var(--space-8);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;height:40px;overflow:hidden;border-radius:var(--border-radius-4);}",".item-icon.jsx-69768995{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--space-8);}",".item-text.jsx-69768995{-webkit-flex:0 1 auto;-ms-flex:0 1 auto;flex:0 1 auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}",".active.jsx-69768995{background-color:var(--background-highest);}",".new.jsx-69768995{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;margin-left:4px;border-radius:var(--border-radius-4);font-size:var(--font-size-small);padding:2px 6px;color:var(--white);background-color:var(--accent-primary-default);}"]})]})}t.ZP=function(e){var t=s.useState(e.initialSelectedItem),n=(0,a.Z)(t,2),r=n[0],c=n[1],d="";e.initialSelectedItem&&(d=e.initialSelectedItem.key);var g=s.useState(d),b=(0,a.Z)(g,2),k=b[0],Z=b[1],j=(0,f.STr)({variables:{includeInterestedIn:!0},skip:!e.withMostUsed}).data,O=s.useCallback((function(e){Z(e)}),[Z]),E=s.useMemo((function(){return j&&j.currentUser&&j.currentUser.languages?j.currentUser.languages.slice(0,7).map((function(e){return p().get(e.key)})):[]}),[j]),_=s.useMemo((function(){if(k)return p().search(k).slice(0,5);var e=p().allSupportedByPopularity({includeAliases:!0});return[].concat((0,i.Z)(E),(0,i.Z)(e.filter((function(e){return!E.find((function(t){return t.key===e.key&&t.displayName===e.displayName}))}))))}),[k,E]),C=s.useMemo((function(){var t=(0,i.Z)(_);return e.filterResults?t.filter(e.filterResults):t}),[_,e.filterResults]),S=s.useMemo((function(){return r?"key"in r?{src:r.icon||void 0,alt:r.displayName}:void 0:null}),[r]),P=s.useRef(null);return s.useEffect((function(){e.autoFocus&&P.current&&!r&&P.current.focus()}),[e.autoFocus]),(0,v.tZ)(l.ZP,{id:"languageSelector",initialHighlightedIndex:0,defaultHighlightedIndex:0,initialSelectedItem:r,selectedItem:r,itemToString:function(e){return e?e.displayName:""},onInputValueChange:O,onOuterClick:function(e){return(0,e.closeMenu)()},onChange:function(t){t&&(P.current&&P.current.blur(),c(t),e.onSelect(t))},children:function(t){var n=t.getInputProps,r=t.getMenuProps,i=t.getItemProps,a=t.highlightedIndex,l=t.isOpen,c=t.openMenu,d=t.closeMenu,p=t.inputValue,f=t.clearSelection;return(0,v.BX)("div",{className:"jsx-2121670637 "+(u()("language-selector",{"is-open":l,"has-error":e.hasError})||""),children:[(0,v.BX)("div",{className:"jsx-2121670637 input-wrap",children:[S&&(0,v.tZ)("img",y(y({},S),{},{width:18,className:"jsx-2121670637 selected-icon"})),(0,v.tZ)("input",y(y({},n({ref:P,placeholder:e.placeholder||"Search for a language",disabled:e.disabled,onFocus:function(e){e.target.value&&e.target.select(),Z(""),c()},onBlur:e.onBlur,onChange:function(e){""===e.target.value&&f()}})),{},{className:"jsx-2121670637"})),(0,v.tZ)("div",{onClick:function(e){(0,h.track)(h.events.CREATION_FLOW_LANGUAGE_DROPDOWN_ARROW_CLICKED),l?d():P.current&&P.current.focus()},className:"jsx-2121670637 arrow-icon-wrap",children:(0,v.tZ)(m.e0,{color:"var(--foreground-default)",flipped:l})})]}),(0,v.tZ)("div",y(y({},r()),{},{className:"jsx-2121670637 menu-anchor",children:l&&(0,v.tZ)("div",{className:"jsx-2121670637 menu",children:C?(0,v.tZ)("ul",{className:"jsx-2121670637",children:C.map((function(e,t){var n=a===t;return(0,v.BX)(s.Fragment,{children:[!p&&0===t&&E.length?(0,v.tZ)(x,{children:"favorites"}):null,!p&&E.length&&t===E.length-1?(0,v.tZ)(x,{children:"all languages"}):null,(0,v.tZ)("li",y(y({},i({index:t,item:e})),{},{className:"jsx-2121670637",children:(0,v.tZ)(w,{isNew:Boolean(e.isNew),iconUrl:e.icon,title:e.displayName,active:n,filter:p||void 0})}))]},e.key+e.displayName)}))}):null})})),(0,v.tZ)(o.default,{id:"2121670637",children:[".language-selector.jsx-2121670637{width:100%;position:relative;border-radius:var(--border-radius-4);}",".input-wrap.jsx-2121670637{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}",".selected-icon.jsx-2121670637{position:absolute;left:8px;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);pointer-events:none;}",".arrow-icon-wrap.jsx-2121670637{position:absolute;right:0;top:0;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 10px;width:30px;cursor:pointer;}",".arrow-icon-wrap.jsx-2121670637>svg{display:block;width:100%;height:auto;}","input.jsx-2121670637{-webkit-appearance:none;-moz-appearance:none;appearance:none;font-size:var(--font-size-subhead-default);display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;width:100%;outline:0 none;background-color:transparent;border:1px solid var(--background-highest);margin:0;color:inherit;padding:var(--space-8);border-radius:var(--border-radius-4);-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}","input[disabled].jsx-2121670637{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.5;}","input.jsx-2121670637:focus{border-color:var(--accent-primary-default);}",".selected-icon.jsx-2121670637+input.jsx-2121670637{padding-left:32px;}",".has-error.jsx-2121670637 input.jsx-2121670637:not(:focus){border-color:var(--accent-negative-default);}",".is-open.jsx-2121670637 input.jsx-2121670637{border-bottom-right-radius:0;border-bottom-left-radius:0;border-bottom-color:transparent;}","ul.jsx-2121670637{list-style:none;}",".menu-anchor.jsx-2121670637{position:absolute;width:100%;height:0;bottom:0;z-index:1000;}",".menu.jsx-2121670637{position:absolute;top:0;left:0;width:100%;background-color:var(--background-default);border:1px solid var(--accent-primary-default);border-top:0 none;max-height:320px;overflow-y:auto;border-bottom-left-radius:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);padding:var(--space-8);z-index:9999;}","li.jsx-2121670637{cursor:pointer;}"]})]})}})}},50133:function(e,t,n){"use strict";n.d(t,{Y:function(){return s}});var r=n(79056),i=n(67294),a=n(91296),o=n.n(a);function s(e,t){var n=i.useState(!1),a=(0,r.Z)(n,2),s=a[0],l=a[1],c=i.useState(e),u=(0,r.Z)(c,2),d=u[0],p=u[1],f=i.useState(null),m=(0,r.Z)(f,2),h=m[0],g=m[1],v=i.useState(!1),b=(0,r.Z)(v,2),y=b[0],x=b[1],w=i.useRef(null),k=i.useRef(d);function Z(){var e=k.current,n=t(e);return n?(n instanceof Promise?n.then((function(t){k.current===e&&(t?g(t):(g(null),x(!0)))})):g({message:n.message}),n):(g(null),x(!0),n)}var j=i.useRef(o()((function(){return Z()}),200));var O=i.useCallback((function(e){j.current(),j.current.flush()}),[d]);return i.useEffect((function(){return j.current.cancel}),[]),{value:d,error:h,touched:s,setValue:function(e){k.current=e,x(!1),g(null),l(!0),p(e),j.current()},handleBlur:O,validate:Z,isValid:y,setError:function(e){return g({message:e})},ref:w}}},45642:function(e,t,n){"use strict";var r=n(30266),i=n(809),a=n.n(i),o=n(91682);t.Z=function(){var e=(0,r.Z)(a().mark((function e(t,n){var r,i,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}r=t.user,e.next=13;break;case 4:if(!((i=n.getState().user)&&i.userInfo.isLoggedIn&&i.userInfo)){e.next=9;break}r=i.userInfo,e.next=13;break;case 9:return e.next=11,(0,o.LK)("/is_authenticated");case 11:(s=e.sent).success&&(r=s.user);case 13:return r&&(t&&(r=JSON.parse(JSON.stringify(r))),n.dispatch({type:"FETCH_USER_INFO_SUCCESS",user:r})),e.abrupt("return",{user:r});case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},72262:function(e,t,n){"use strict";var r=n(30266),i=n(809),a=n.n(i),o=n(83868),s=n.n(o),l=n(93235),c=n.n(l),u=n(91682);t.Z={isValidEmail:function(){var e=(0,r.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{message:"Must include valid email address"});case 2:if(s()(t)){e.next=4;break}return e.abrupt("return",{message:"Invalid email address"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),email:function(){var e=(0,r.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if(s()(t)){e.next=4;break}return e.abrupt("return",{message:"Invalid email address"});case 4:return e.next=6,(0,u.uz)("/data/user/exists",{email:t});case 6:if(n=e.sent,!n.exists){e.next=10;break}return e.abrupt("return",{message:"Email already in use"});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),username:function(){var e=(0,r.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if(c()(t,{min:2,max:15})){e.next=4;break}return e.abrupt("return",{message:"Your username must be between 2 and 15 characters"});case 4:if(t.match(/^[0-9a-zA-Z]+$/)){e.next=6;break}return e.abrupt("return",{message:"Your username can only contain alphanumeric characters (letters A-Z, numbers 0-9)"});case 6:return e.next=8,(0,u.uz)("/data/user/exists",{username:t});case 8:if(n=e.sent,!n.exists){e.next=12;break}return e.abrupt("return",{message:"Username is taken"});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),teamUsername:function(){var e=(0,r.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if(c()(t,{min:2,max:28})){e.next=4;break}return e.abrupt("return",{message:"Your username must be between 2 and 28 characters"});case 4:if(t.match(/^[0-9a-zA-Z-]+$/)){e.next=6;break}return e.abrupt("return",{message:"Username can only contain alphanumeric characters (letters A-Z, numbers 0-9) and hyphens."});case 6:if(!t.match(/^-.*|.*-$|.*--.*/)){e.next=8;break}return e.abrupt("return",{message:"A username can not start or end with hyphens, or contain two consecutive hyphens."});case 8:return e.next=10,(0,u.uz)("/data/user/exists",{username:t});case 10:if(n=e.sent,!n.exists){e.next=14;break}return e.abrupt("return",{message:"Username is taken"});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),password:function(e){return e?c()(e,{min:8,max:255})?/[A-Z]+/.test(e)?/[a-z]+/.test(e)?/[0-9]+/.test(e)?/.*[^0-9a-zA-Z\s].*/.test(e)?void 0:{message:"Your password must contain a special character"}:{message:"Your password must contain a number"}:{message:"Your password must contain a lowercase character"}:{message:"Your password must contain an uppercase character"}:{message:"Your password must be at least 8 characters long"}:null},school:function(e){return null}}},30525:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(79056),i=n(65988),a=n(67294),o=n(38934),s=n(88834),l=n(25517),c=n(51444),u=n(45187),d=n(41649),p=n(53567),f=n(31056),m=n(95211),h=n(35195),g=n(35944);function v(e){var t,n,v,b=e.replId,y=(0,c.Z)(),x=y.showConfirm,w=y.showError,k=(0,u.hA$)({variables:{replId:b}}),Z=k.data,j=k.loading,O=k.error,E=(0,u.QNZ)({variables:{replId:b},onError:function(e){return w(e.message)}}),_=(0,r.Z)(E,2),C=_[0],S=_[1],P=(0,u.ooK)({variables:{replId:b},optimisticResponse:{deleteMultiplayerInviteLink:{id:b,inviteUrl:null,__typename:"Repl"},__typename:"RootMutationType"},onError:function(e){return w(e.message)},onCompleted:function(e){"UserError"!==e.deleteMultiplayerInviteLink.__typename?"Repl"===e.deleteMultiplayerInviteLink.__typename&&x("Join link deleted"):w(e.deleteMultiplayerInviteLink.message)}}),N=(0,r.Z)(P,2),T=N[0],I=N[1],R=S.loading||I.loading,D=a.useRef(null),A="Repl"===(null===Z||void 0===Z||null===(t=Z.repl)||void 0===t?void 0:t.__typename)&&"Team"===(null===(n=Z.repl.owner)||void 0===n?void 0:n.__typename),L="Repl"===(null===Z||void 0===Z||null===(v=Z.repl)||void 0===v?void 0:v.__typename)&&Z.repl.inviteUrl?window.location.origin+Z.repl.inviteUrl:null;a.useEffect((function(){S.error&&w(S.error.message),S.data&&(0,o.track)(o.events.MP2_REFRESHED_LINK,{replId:b})}),[S.error,S.data,b,w]);var B=function(){D&&D.current&&D.current.select()},M=function(){return(0,g.BX)("div",{"aria-label":"Anyone on the internet with this link can join and edit this repl","data-microtip-position":"top","data-microtip-size":"medium",role:"tooltip","data-micro":!0,className:"jsx-3457399722 information-icon-container",children:[(0,g.tZ)(f.Z,{}),(0,g.tZ)(i.default,{id:"3457399722",children:[".information-icon-container.jsx-3457399722{margin-left:5px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-align:center;}"]})]})};return j?(0,g.tZ)(l.Z,{children:"loading..."}):O?(0,g.tZ)(l.Z,{children:"Error: please contact support"}):L?(0,g.BX)(p.gC,{align:"stretch",spacing:1,children:[(0,g.tZ)(l.Z,{foreground:2,size:"small",children:(0,g.BX)(p.Ug,{align:"center",children:["Invite ",A?"guests":"friends"," with a join link",M()]})}),(0,g.BX)(p.Ug,{wrap:"nowrap",align:"center",spacing:1,children:[(0,g.tZ)("div",{className:"jsx-4139552869 input-link",children:(0,g.tZ)(d.ZP,{ref:D,readOnly:!0,onChange:function(){return null},value:R?"loading...":L,onClick:B})}),(0,g.tZ)("div",{"aria-label":"Copy","data-microtip-position":"bottom",role:"tooltip",className:"jsx-4139552869",children:(0,g.tZ)(s.Z,{color:"primary",Icon:h.Z,onClick:function(){B(),document.execCommand("copy"),x("Link copied")}})}),(0,g.tZ)("div",{"aria-label":"Delete link","data-microtip-position":"bottom",role:"tooltip",className:"jsx-4139552869",children:(0,g.tZ)(s.Z,{color:"red",Icon:m.Z,onClick:function(e){e.preventDefault(),R||T()}})})]}),(0,g.BX)(l.Z,{size:"small",foreground:2,children:[(0,g.tZ)("a",{onClick:function(e){e.preventDefault(),R||C()},className:"jsx-4139552869",children:"Generate a new link"})," ","(The current one will stop working)"]}),(0,g.tZ)(i.default,{id:"4139552869",children:[".input-link.jsx-4139552869{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}",".input-link.jsx-4139552869 input{cursor:text !important;}"]})]}):(0,g.tZ)("div",{style:{marginTop:"var(--space-8)"},children:(0,g.tZ)(s.Z,{fullWidth:!0,color:"default",onClick:function(){R||C()},children:(0,g.BX)(p.Ug,{align:"center",children:["Generate a join link",M()]})})})}},23872:function(e,t,n){"use strict";n.d(t,{rM:function(){return m},G5:function(){return h},h$:function(){return g}});var r,i=n(10219),a=n(52209),o=n(56869),s=n.n(o),l=n(44119),c=n.n(l),u=n(23495),d=n(51218),p=["config"],f=c()(r||(r=(0,a.Z)(["\n  mutation ReduxUpdateReplMutation($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        title\n        description\n        language\n        url\n        config {\n          isServer\n          isVnc\n        }\n        isPrivate\n        isStarred\n      }\n    }\n  }\n"])));function m(e,t){return function(n){n({type:"UPDATE_REPL_REQUEST",id:e,updates:t});var r=(0,u.Y8)(t);if(Array.isArray(r)||"string"===typeof r)throw new Error("Repl updates should be an object");var a=t.config,o=(0,i.Z)(t,p);a&&("undefined"!==typeof a.isServer&&(o.isServer=a.isServer),"undefined"!==typeof a.isVnc&&(o.isVnc=a.isVnc)),o.id=e,d.l.mutate({mutation:f,variables:{input:o}}).then((function(t){var r=t.data,i=t.errors;i&&i.length||!r.updateRepl||!r.updateRepl.repl?n({type:"UPDATE_REPL_FAILURE",id:e}):n({type:"UPDATE_REPL_SUCCESS",repl:r.updateRepl.repl})}))}}function h(e){return function(t){return t({type:"UPDATE_REPL_SUCCESS",repl:e})}}function g(e){return{type:"FETCH_REPL_SUCCESS",repl:s()(e)}}},31107:function(e,t,n){"use strict";var r=n(97131),i=n(92809),a=n(89807),o=n(84647);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}a.Z.register("repls",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_REPL_SUCCESS":return l(l({},e),{},{data:l(l({},e.data),{},(0,i.Z)({},t.repl.id,t.repl))});case"UPDATE_REPL_SUCCESS":return l(l({},e),{},{data:l(l({},e.data),{},(0,i.Z)({},t.repl.id,l(l({},e.data[t.repl.id]),t.repl)))});case"ENSURE_FILE":var n=(0,o.Uo)(t.path),a=(0,o.Xp)(t.path),s=e.data[n];return!s||s.fileNames.includes(a)?e:l(l({},e),{},{data:l(l({},e.data),{},(0,i.Z)({},n,l(l({},s),{},{fileNames:[].concat((0,r.Z)(s.fileNames),[a])})))});case"MOVE_FILE_SUCCESS":var c=(0,o.Uo)(t.to),u=e.data[c];if(!u||c!==(0,o.Uo)(t.from))return e;var d=(0,o.Xp)(t.from),p=(0,o.Xp)(t.to);return l(l({},e),{},{data:l(l({},e.data),{},(0,i.Z)({},c,l(l({},u),{},{fileNames:[].concat((0,r.Z)(u.fileNames.filter((function(e){return e!==d}))),[p])})))});case"DELETE_FILE_SUCCESS":var f=(0,o.Uo)(t.path),m=(0,o.Xp)(t.path),h=e.data[f];return h?l(l({},e),{},{data:l(l({},e.data),{},(0,i.Z)({},f,l(l({},h),{},{fileNames:h.fileNames.filter((function(e){return e!==m}))})))}):e}return e})),a.Z.register("replsByUrl",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_REPL_SUCCESS":case"FETCH_REPL_SUCCESS":return l(l({},e),{},(0,i.Z)({},t.repl.url,t.repl.id))}return e})),a.Z.register("replsByUser",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_REPL_SUCCESS":return e[t.repl.userId]&&e[t.repl.userId].includes(t.repl.id)?e:l(l({},e),{},(0,i.Z)({},t.repl.userId,(e[t.repl.userId]||[]).concat([t.repl.id])))}return e}))},57456:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var r=n(92809),i=n(30266),a=n(79056),o=n(809),s=n.n(o),l=n(67294),c=n(39499),u=n.n(c),d=n(10257),p=n(63258),f=n(61850);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){if(6!==e.length)throw new Error("Received unexpected output from resource tracking command: ".concat(e));var n={wallTimeNanos:u().BigInt(0),cpuTimeNanos:u().BigInt(0),cpuUtilPercent:0,memoryUsageBytes:0,memoryLimitBytes:0,storageUsedBytes:0,storageTotalBytes:1073741824},r=e.map((function(e){return parseInt(e,10)}));if(r.includes(NaN))throw new Error("Unexpected output: ".concat(e));var i=u().BigInt(e[0]),a=u().BigInt(e[1]),o=r[2],s=r[3],l=r[4],c=r[5];if(!(l>=0&&c>0))throw new Error("Unexpected output: ".concat(e));if(n.memoryUsageBytes=l,n.memoryLimitBytes=c,u().GT(t.wallTimeNanos,0)&&u().GT(t.cpuTimeNanos,0)){var d=u().toNumber(u().subtract(i,t.wallTimeNanos)),p=u().toNumber(u().subtract(a,t.cpuTimeNanos));if(!(d>0&&p>=0&&o>0&&s>0))throw new Error("Unexpected output: ".concat(e));var f=o/s;n.cpuUtilPercent=100*p/d/f}return n.wallTimeNanos=i,n.cpuTimeNanos=a,n}function v(e){if(2!==e.length)throw new Error("Received unexpected output from storage command: ".concat(e));var t=parseInt(e[0],10),n=parseInt(e[1],10);if(isNaN(t)||isNaN(n))throw new Error("Unexpected storage output: ".concat(e));return{storageUsedBytes:t,storageTotalBytes:n}}function b(){var e=(0,d.Z)(),t=e.container,n=e.session,r=l.useState(!1),o=(0,a.Z)(r,2),c=o[0],m=o[1],b=l.useState(p.u),y=(0,a.Z)(b,2),x=y[0],w=y[1],k=(0,f.Z)("flag-monitor-repl-resources");l.useEffect((function(){if(k){var e=n.getResourceMonitoringState();null!==e&&(w(e.interval),m(e.isMonitoring));var r=n.onResourceMonitoringStateChanged((function(e){m(e.isMonitoring),w(e.interval)})),a={wallTimeNanos:u().BigInt(0),cpuTimeNanos:u().BigInt(0),cpuUtilPercent:0,memoryUsageBytes:0,memoryLimitBytes:0,storageUsedBytes:0,storageTotalBytes:0},o=function(){var e=(0,i.Z)(s().mark((function e(){var r,i,l,u,d,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.exec("bash","-c","date '+%s%N' && cat /sys/fs/cgroup/cpu/cpuacct.usage /sys/fs/cgroup/cpu/cpu.cfs_quota_us /sys/fs/cgroup/cpu/cpu.cfs_period_us /sys/fs/cgroup/memory/memory.usage_in_bytes /sys/fs/cgroup/memory/memory.limit_in_bytes ");case 4:if(null===(r=e.sent).error){e.next=7;break}throw new Error("Error running resource tracking command: ".concat(r.error));case 7:return i=r.output.trim().split("\n"),l=g(i,a),e.next=11,t.exec("bash","-c","cat /repl/stats/subvolume_usage_bytes /repl/stats/subvolume_total_bytes");case 11:if(null===(u=e.sent).error){e.next=17;break}if(null!==(d=u.output)&&void 0!==d&&d.includes("No such file or directory")){e.next=15;break}throw new Error("Error running storage command: ".concat(u.error));case 15:e.next=20;break;case 17:p=v(u.output.trim().split("\n")),l.storageUsedBytes=p.storageUsedBytes,l.storageTotalBytes=p.storageTotalBytes;case 20:a=h({},l),n.setResourceMonitoringState({utilization:l,isMonitoring:c,interval:x}),setTimeout(o,x);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o(),function(){clearTimeout(undefined),r()}}}),[c,x,k,t,n])}},28993:function(e,t,n){"use strict";n.d(t,{xd:function(){return c},sX:function(){return u},EZ:function(){return p},or:function(){return f},Sy:function(){return m}});var r=n(79056),i=n(97131),a=n(26470),o=n(12195),s="/repls",l="folder",c=function(e){return{as:a.join.apply(void 0,[s].concat((0,i.Z)(e.pathnames.map((function(e,t){return 0===t&&e.startsWith("@")?e:encodeURIComponent(e)}))))),href:"/replsDashboard"}},u=function(e){if(e.startsWith(s)&&e.length>s.length){var t=e.split("?"),n=(0,r.Z)(t,1)[0];return decodeURIComponent(n.substr(s.length+1))}return""},d={pathnames:[""],text:"(home)"},p=function(e){switch(e){case"":return[d];case"multiplayer":return[d,{text:"Multiplayer repls",pathnames:["",e]}];default:return e.startsWith("@")?[d].concat((0,i.Z)(e.split("/").map((function(e,t,n){return{pathnames:(0,i.Z)(n.slice(0,t+1)),text:e}})))):[d].concat((0,i.Z)(e.split("/").filter((function(e){return e!==l})).map((function(e,t,n){return{pathnames:[l].concat((0,i.Z)(n.slice(0,t+1))),text:e}}))))}},f=function(e){var t=e.bytes/1e3;return t<1e3?"".concat(Math.round(t)," KB"):"".concat((t/1e3).toFixed(1)," MB")},m=function(e){return(0,o.Z)(e,new Date,{addSuffix:!0})}},73349:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(79056),i=n(67294),a=n(10257);function o(){var e=(0,a.Z)().session,t=i.useState(e.getPreviewedFile()),n=(0,r.Z)(t,2),o=n[0],s=n[1];return i.useEffect((function(){return s(e.getPreviewedFile()),e.onPreviewedFileChanged(s)}),[e]),o}},58710:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(65988),i=(n(67294),n(25517)),a=n(35944);function o(e){var t=e.label;return(0,a.BX)(i.Z,{size:"xsmall",children:[(0,a.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":t,className:"jsx-3345761734 help",children:"?"}),(0,a.tZ)(r.default,{id:"3345761734",children:[".help.jsx-3345761734{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border:1px solid var(--background-higher);border-radius:100%;width:var(--space-16);height:var(--space-16);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;}"]})]})}},62887:function(e,t,n){"use strict";var r=n(79056),i=n(65988),a=n(67294),o=n(98960),s=n(35944);t.Z=function(e){var t=e.id,n=e.isOn,l=e.onChange,c=a.useState(t),u=(0,r.Z)(c,2),d=u[0],p=u[1];return a.useEffect((function(){p(t||Math.random().toString(36).split(".")[1])}),[t]),(0,s.BX)("label",{htmlFor:d,className:"jsx-2525248183 checkbox",children:[(0,s.tZ)("input",{id:d,onChange:l,type:"checkbox",checked:n,className:"jsx-2525248183"}),(0,s.tZ)("div",{className:"jsx-2525248183 overlay",children:(0,s.tZ)("div",{className:"jsx-2525248183 icon",children:(0,s.tZ)(o.Z,{})})}),(0,s.tZ)(i.default,{id:"2525248183",children:[".checkbox.jsx-2525248183 input.jsx-2525248183{position:absolute;opacity:0;}",".overlay.jsx-2525248183{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:relative;height:16px;width:16px;background-color:var(--background-higher);border:1px solid var(--outline-dimmest);border-radius:var(--border-radius-4);-webkit-transition:background-color 0.2s;transition:background-color 0.2s;color:var(--foreground-dimmer);cursor:pointer;}",".overlay.jsx-2525248183:hover{background-color:var(--background-higher);}",".icon.jsx-2525248183{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;opacity:0;-webkit-transition:opacity 0.1s;transition:opacity 0.1s;}",".overlay.jsx-2525248183:hover .icon.jsx-2525248183{opacity:1;}",".overlay.jsx-2525248183:active{background-color:var(--background-highest);}",".checkbox.jsx-2525248183 input.jsx-2525248183:checked~.overlay.jsx-2525248183{background-color:var(--accent-primary-default);opacity:1;border-color:var(--accent-primary-default);color:var(--white);}",".checkbox.jsx-2525248183 input.jsx-2525248183:checked~.overlay.jsx-2525248183 .icon.jsx-2525248183{opacity:1;}"]})]})}},41649:function(e,t,n){"use strict";n.d(t,{QE:function(){return E},ZP:function(){return _},P3:function(){return j}});var r=n(92809),i=n(79056),a=n(10219),o=n(65988),s=n(67294),l=n(94184),c=n.n(l),u=n(96622),d=n(35944);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e){return(0,d.tZ)(u.Z,f(f({filled:!0},e),{},{children:(0,d.tZ)("circle",{cx:"12",cy:"12",r:"4"})}))}var h=n(98960),g=n(18618),v=n(25517),b=n(53567),y=n(26331),x=n(56180),w=["label","description","icon","onChange","large","placeholder","validationResults"];function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j={default:"default",loading:"default",error:"negative",success:"positive"},O=s.forwardRef((function(e,t){var n,r,l,u=e.label,p=e.description,f=e.icon,m=e.onChange,k=e.large,O=e.placeholder,_=void 0===O?"":O,C=e.validationResults,S=(0,a.Z)(e,w),P=s.useState(!1),N=(0,i.Z)(P,2),T=N[0],I=N[1];null!==C&&void 0!==C&&C.some((function(e){return"loading"===e.state}))?(n="loading",r=(0,d.tZ)(x.Z,{style:{width:"24px",height:"24px"}})):null!==C&&void 0!==C&&C.some((function(e){return"error"===e.state}))?(n="error",l="var(--accent-negative-default)",r=(0,d.tZ)(g.Z,{})):null!==C&&void 0!==C&&C.every((function(e){return"success"===e.state}))?(n="success",l="var(--accent-positive-default)",r=(0,d.tZ)(h.Z,{})):n="default";var R=j[n],D=k?"var(--font-size-subhead-default)":"var(--font-size-default)";return(0,d.BX)("div",{className:o.default.dynamic([["1522973450",[l,D,S.monospace?"var(--font-family-code)":"var(--font-family-default)",D,f?"var(--space-24)":"auto"]]])+" container",children:[u&&(0,d.BX)(d.HY,{children:[S.required?(0,d.BX)(b.Ug,{spacing:"2px",children:[(0,d.tZ)(v.Z,{tag:"label",foreground:T?1:2,size:k?"small":"xsmall",children:u}),(0,d.tZ)("span",{className:o.default.dynamic([["1522973450",[l,D,S.monospace?"var(--font-family-code)":"var(--font-family-default)",D,f?"var(--space-24)":"auto"]]])+" required",children:"*"})]}):(0,d.tZ)(v.Z,{tag:"label",foreground:T?1:2,size:k?"small":"xsmall",children:u}),(0,d.tZ)(y.Z,{height:"4px"})]}),(0,d.BX)("div",{className:o.default.dynamic([["1522973450",[l,D,S.monospace?"var(--font-family-code)":"var(--font-family-default)",D,f?"var(--space-24)":"auto"]]])+" input-container",children:[f&&(0,d.tZ)("div",{className:o.default.dynamic([["1522973450",[l,D,S.monospace?"var(--font-family-code)":"var(--font-family-default)",D,f?"var(--space-24)":"auto"]]])+" icon-container left",children:f}),(0,d.tZ)("input",Z(Z({ref:t,"aria-label":u||"input",role:S.role||"search",required:S.required||!1,onChange:m,placeholder:_},S),{},{onFocus:function(e){I(!0),S.onFocus&&S.onFocus(e)},onBlur:function(e){I(!1),S.onBlur&&S.onBlur(e)},className:o.default.dynamic([["1522973450",[l,D,S.monospace?"var(--font-family-code)":"var(--font-family-default)",D,f?"var(--space-24)":"auto"]]])+" "+(c()(R,S.className)||"")})),r&&(0,d.tZ)("div",{onMouseEnter:function(){return I(!0)},onMouseLeave:function(){return I(!1)},className:o.default.dynamic([["1522973450",[l,D,S.monospace?"var(--font-family-code)":"var(--font-family-default)",D,f?"var(--space-24)":"auto"]]])+" icon-container right",children:r})]}),p&&(0,d.BX)(d.HY,{children:[(0,d.tZ)(y.Z,{height:"4px"}),(0,d.tZ)(v.Z,{tag:"span",foreground:3,size:k?"medium":"small",children:p})]}),(null===C||void 0===C?void 0:C.some((function(e){return!!e.message})))&&T&&(0,d.tZ)(E,{validationResults:C}),(0,d.tZ)(o.default,{id:"1522973450",dynamic:[l,D,S.monospace?"var(--font-family-code)":"var(--font-family-default)",D,f?"var(--space-24)":"auto"],children:[".container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;}",".required.__jsx-style-dynamic-selector{color:var(--accent-negative-default);font-size:var(--font-size-small);}",".spacer.row.__jsx-style-dynamic-selector{width:var(--space-4);}",".spacer.col.__jsx-style-dynamic-selector{height:var(--space-4);}",".input-container.__jsx-style-dynamic-selector{position:relative;}",".icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);background-color:var(--background-default);border-radius:100%;padding:var(--space-4);}",".icon-container.right.__jsx-style-dynamic-selector{right:var(--space-8);color:".concat(l,";}"),".icon-container.left.__jsx-style-dynamic-selector{left:var(--space-4);background-color:transparent;color:var(--foreground-dimmest);}","input.__jsx-style-dynamic-selector{font-size:".concat(D,";font-family:").concat(S.monospace?"var(--font-family-code)":"var(--font-family-default)",";line-height:").concat(D,";background-color:var(--background-default);color:var(--foreground-default);padding:var(--space-8);padding-left:").concat(f?"var(--space-24)":"auto",";border:1px solid var(--outline-dimmest);border-radius:var(--border-radius-4);outline:none;width:100%;box-sizing:border-box;-webkit-transition:color 0.1s,background-color 0.1s;transition:color 0.1s,background-color 0.1s;}"),"input.__jsx-style-dynamic-selector:disabled{opacity:0.5;}","input.default.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer);}","input.success.__jsx-style-dynamic-selector{border-color:var(--accent-positive-stronger);}","input.success.__jsx-style-dynamic-selector:hover{border-color:var(--accent-positive-dimmer);}","input.negative.__jsx-style-dynamic-selector{border-color:var(--accent-negative-default);}","input.negative.__jsx-style-dynamic-selector:hover{border-color:var(--accent-negative-dimmer);}","input.__jsx-style-dynamic-selector:active,input.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default);}"]})]})})),E=function(e){var t=e.validationResults;return(0,d.BX)("div",{className:"jsx-3642677892 container",children:[t.map((function(e,t){var n;switch(e.state){case"success":n=(0,d.tZ)(h.Z,{color:"var(--accent-positive-default)"});break;case"error":n=(0,d.tZ)(g.Z,{color:"var(--accent-negative-default)"});break;default:n=(0,d.tZ)(m,{color:"var(--foreground-dimmest)"})}return(0,d.BX)("div",{className:"jsx-3642677892 validation-row",children:[(0,d.tZ)("div",{className:"jsx-3642677892 validation-icon-container",children:n}),(0,d.tZ)(y.Z,{width:"4px"}),(0,d.tZ)(v.Z,{foreground:2,size:"small",children:e.message})]},e.state+t.toString())})),(0,d.tZ)(o.default,{id:"3642677892",children:[".container.jsx-3642677892{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:absolute;top:calc(100% + var(--space-4));background-color:var(--background-default);padding:var(--space-8);border-radius:var(--border-radius-4);z-index:9999;box-shadow:var(--shadow-2);}",".validation-row.jsx-3642677892{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;width:100%;padding-bottom:var(--space-4);}",".validation-icon-container.jsx-3642677892{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;padding-right:var(--space-4);}"]})]})},_=O},35195:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(92809),i=(n(67294),n(96622)),a=n(35944);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){return(0,a.BX)(i.Z,s(s({},e),{},{children:[(0,a.tZ)("path",{d:"M10 13c.4295.5741.9774 1.0491 1.6066 1.3929.6291.3438 1.3249.5482 2.0401.5994.7151.0512 1.4329-.052 2.1046-.3026.6718-.2505 1.2818-.6427 1.7887-1.1497l3-3c.9108-.94305 1.4148-2.20606 1.4034-3.51704-.0114-1.31098-.5373-2.56505-1.4643-3.49209-.927-.92704-2.1811-1.45288-3.4921-1.46427-1.311-.0114-2.574.49258-3.517 1.40337l-1.72 1.71",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.tZ)("path",{d:"M14.0002 11.0002c-.4295-.5741-.9774-1.04916-1.6066-1.39291-.6291-.34376-1.3249-.54818-2.0401-.5994-.71509-.05122-1.43289.05197-2.10465.30255-.67175.25059-1.28176.64272-1.78865 1.14976l-3 3c-.91079.943-1.41476 2.206-1.40337 3.517.01139 1.311.53724 2.5651 1.46428 3.4921.92704.9271 2.1811 1.4529 3.49208 1.4643 1.31099.0114 2.574-.4926 3.51701-1.4034l1.71-1.71",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}))}},67526:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(92809),i=(n(67294),n(96622)),a=n(35944);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){return(0,a.tZ)(i.Z,s(s({},e),{},{children:(0,a.tZ)("path",{d:"M22 5L16.5 10L14 7.72727M22 13L16.5 18L14 15.7273M3 8H9M3 16H9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}},90234:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(92809),i=(n(67294),n(96622)),a=n(35944);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){return(0,a.BX)(i.Z,s(s({},e),{},{children:[(0,a.tZ)("path",{d:"M18 21C19.6569 21 21 19.6569 21 18C21 16.3431 19.6569 15 18 15C16.3431 15 15 16.3431 15 18C15 19.6569 16.3431 21 18 21Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.tZ)("path",{d:"M6 9C7.65685 9 9 7.65685 9 6C9 4.34315 7.65685 3 6 3C4.34315 3 3 4.34315 3 6C3 7.65685 4.34315 9 6 9Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.tZ)("path",{d:"M13 6H16C16.5304 6 17.0391 6.21071 17.4142 6.58579C17.7893 6.96086 18 7.46957 18 8V15",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.tZ)("path",{d:"M6 9V21",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}))}},59663:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(92809),i=(n(67294),n(96622)),a=n(35944);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){return(0,a.BX)(i.Z,s(s({strokeWidth:2},e),{},{children:[(0,a.tZ)("path",{d:"M23 4v6h-6M1 20v-6h6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.tZ)("path",{d:"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15",strokeLinecap:"round",strokeLinejoin:"round"})]}))}},20900:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(92809),i=(n(67294),n(96622)),a=n(35944);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){return(0,a.BX)(i.Z,s(s({},e),{},{children:[(0,a.tZ)("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.tZ)("path",{d:"M19.4 15C19.2669 15.3016 19.2272 15.6362 19.286 15.9606C19.3448 16.285 19.4995 16.5843 19.73 16.82L19.79 16.88C19.976 17.0657 20.1235 17.2863 20.2241 17.5291C20.3248 17.7719 20.3766 18.0322 20.3766 18.295C20.3766 18.5578 20.3248 18.8181 20.2241 19.0609C20.1235 19.3037 19.976 19.5243 19.79 19.71C19.6043 19.896 19.3837 20.0435 19.1409 20.1441C18.8981 20.2448 18.6378 20.2966 18.375 20.2966C18.1122 20.2966 17.8519 20.2448 17.6091 20.1441C17.3663 20.0435 17.1457 19.896 16.96 19.71L16.9 19.65C16.6643 19.4195 16.365 19.2648 16.0406 19.206C15.7162 19.1472 15.3816 19.1869 15.08 19.32C14.7842 19.4468 14.532 19.6572 14.3543 19.9255C14.1766 20.1938 14.0813 20.5082 14.08 20.83V21C14.08 21.5304 13.8693 22.0391 13.4942 22.4142C13.1191 22.7893 12.6104 23 12.08 23C11.5496 23 11.0409 22.7893 10.6658 22.4142C10.2907 22.0391 10.08 21.5304 10.08 21V20.91C10.0723 20.579 9.96512 20.258 9.77251 19.9887C9.5799 19.7194 9.31074 19.5143 9 19.4C8.69838 19.2669 8.36381 19.2272 8.03941 19.286C7.71502 19.3448 7.41568 19.4995 7.18 19.73L7.12 19.79C6.93425 19.976 6.71368 20.1235 6.47088 20.2241C6.22808 20.3248 5.96783 20.3766 5.705 20.3766C5.44217 20.3766 5.18192 20.3248 4.93912 20.2241C4.69632 20.1235 4.47575 19.976 4.29 19.79C4.10405 19.6043 3.95653 19.3837 3.85588 19.1409C3.75523 18.8981 3.70343 18.6378 3.70343 18.375C3.70343 18.1122 3.75523 17.8519 3.85588 17.6091C3.95653 17.3663 4.10405 17.1457 4.29 16.96L4.35 16.9C4.58054 16.6643 4.73519 16.365 4.794 16.0406C4.85282 15.7162 4.81312 15.3816 4.68 15.08C4.55324 14.7842 4.34276 14.532 4.07447 14.3543C3.80618 14.1766 3.49179 14.0813 3.17 14.08H3C2.46957 14.08 1.96086 13.8693 1.58579 13.4942C1.21071 13.1191 1 12.6104 1 12.08C1 11.5496 1.21071 11.0409 1.58579 10.6658C1.96086 10.2907 2.46957 10.08 3 10.08H3.09C3.42099 10.0723 3.742 9.96512 4.0113 9.77251C4.28059 9.5799 4.48572 9.31074 4.6 9C4.73312 8.69838 4.77282 8.36381 4.714 8.03941C4.65519 7.71502 4.50054 7.41568 4.27 7.18L4.21 7.12C4.02405 6.93425 3.87653 6.71368 3.77588 6.47088C3.67523 6.22808 3.62343 5.96783 3.62343 5.705C3.62343 5.44217 3.67523 5.18192 3.77588 4.93912C3.87653 4.69632 4.02405 4.47575 4.21 4.29C4.39575 4.10405 4.61632 3.95653 4.85912 3.85588C5.10192 3.75523 5.36217 3.70343 5.625 3.70343C5.88783 3.70343 6.14808 3.75523 6.39088 3.85588C6.63368 3.95653 6.85425 4.10405 7.04 4.29L7.1 4.35C7.33568 4.58054 7.63502 4.73519 7.95941 4.794C8.28381 4.85282 8.61838 4.81312 8.92 4.68H9C9.29577 4.55324 9.54802 4.34276 9.72569 4.07447C9.90337 3.80618 9.99872 3.49179 10 3.17V3C10 2.46957 10.2107 1.96086 10.5858 1.58579C10.9609 1.21071 11.4696 1 12 1C12.5304 1 13.0391 1.21071 13.4142 1.58579C13.7893 1.96086 14 2.46957 14 3V3.09C14.0013 3.41179 14.0966 3.72618 14.2743 3.99447C14.452 4.26276 14.7042 4.47324 15 4.6C15.3016 4.73312 15.6362 4.77282 15.9606 4.714C16.285 4.65519 16.5843 4.50054 16.82 4.27L16.88 4.21C17.0657 4.02405 17.2863 3.87653 17.5291 3.77588C17.7719 3.67523 18.0322 3.62343 18.295 3.62343C18.5578 3.62343 18.8181 3.67523 19.0609 3.77588C19.3037 3.87653 19.5243 4.02405 19.71 4.21C19.896 4.39575 20.0435 4.61632 20.1441 4.85912C20.2448 5.10192 20.2966 5.36217 20.2966 5.625C20.2966 5.88783 20.2448 6.14808 20.1441 6.39088C20.0435 6.63368 19.896 6.85425 19.71 7.04L19.65 7.1C19.4195 7.33568 19.2648 7.63502 19.206 7.95941C19.1472 8.28381 19.1869 8.61838 19.32 8.92V9C19.4468 9.29577 19.6572 9.54802 19.9255 9.72569C20.1938 9.90337 20.5082 9.99872 20.83 10H21C21.5304 10 22.0391 10.2107 22.4142 10.5858C22.7893 10.9609 23 11.4696 23 12C23 12.5304 22.7893 13.0391 22.4142 13.4142C22.0391 13.7893 21.5304 14 21 14H20.91C20.5882 14.0013 20.2738 14.0966 20.0055 14.2743C19.7372 14.452 19.5268 14.7042 19.4 15V15Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}))}},98136:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(92809),i=(n(67294),n(96622)),a=n(35944);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){return(0,a.tZ)(i.Z,s(s({},e),{},{children:(0,a.tZ)("path",{d:"M16 21V19C16 17.9391 15.5786 16.9217 14.8284 16.1716C14.0783 15.4214 13.0609 15 12 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21M20 8V14M23 11H17M12.5 7C12.5 9.20914 10.7091 11 8.5 11C6.29086 11 4.5 9.20914 4.5 7C4.5 4.79086 6.29086 3 8.5 3C10.7091 3 12.5 4.79086 12.5 7Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}},18618:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(92809),i=(n(67294),n(96622)),a=n(35944);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){return(0,a.tZ)(i.Z,s(s({},e),{},{children:(0,a.tZ)("path",{d:"M12.043 9.10254V13.1025M12.043 17.1025H12.053M3.00149 20.75H21.188C21.9578 20.75 22.439 19.9167 22.0541 19.25L12.9608 3.5C12.5759 2.83333 11.6136 2.83333 11.2287 3.5L2.13547 19.25C1.75057 19.9167 2.23169 20.75 3.00149 20.75Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}},22526:function(e,t,n){"use strict";var r=n(5152);t.Z=(0,r.default)((function(){return Promise.all([n.e(4885),n.e(6346),n.e(9710),n.e(7539),n.e(6063),n.e(9965)]).then(n.bind(n,89671)).then((function(e){return e.EditReplTemplate}))}),{loadableGenerated:{webpack:function(){return[89671]},modules:["../app/workspace/plugins/header/ReplTemplateFormDynamic.tsx -> ./ReplTemplateForm"]}})},83457:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(92809),i=(n(67294),n(65988)),a=n(32324),o=n(35944),s=function(e){var t=e.type,n=void 0===t?"default":t,r=e.onClick,s=e.label,l=e.icon,c=e.lite,u=e.cyName,d="run"===n?{backgroundColor:"var(--accent-positive-dimmest)",backgroundColorHover:"var(--accent-positive-default)",backgroundColorActive:"var(--accent-positive-dimmer)",borderColorActive:"var(--accent-positive-stronger)",textColor:"var(--accent-positive-stronger)",textColorHover:"var(--white)"}:{backgroundColor:"var(--background-higher)",backgroundColorHover:"var(--background-highest)",backgroundColorActive:"var(--outline-dimmest)",borderColorActive:"var(--outline-default)",textColor:"var(--foreground-dimmer)",textColorHover:"var(--foreground-default)"},p=d.backgroundColor,f=d.backgroundColorHover,m=d.backgroundColorActive,h=d.borderColorActive,g=d.textColor,v=d.textColorHover;return(0,o.BX)("div",{role:"button","data-cy":u,onClick:r,className:i.default.dynamic([["3775718333",[p,p,g,f,v,h,m,m,a.j.tabletMax,c?"100px":"60px",c?"100px":"60px"]]])+" ws-header-cta",children:[(0,o.tZ)("div",{className:i.default.dynamic([["3775718333",[p,p,g,f,v,h,m,m,a.j.tabletMax,c?"100px":"60px",c?"100px":"60px"]]])+" ws-header-cta-icon",children:l}),(0,o.tZ)("span",{className:i.default.dynamic([["3775718333",[p,p,g,f,v,h,m,m,a.j.tabletMax,c?"100px":"60px",c?"100px":"60px"]]])+" ws-header-cta-label",children:s}),(0,o.tZ)(i.default,{id:"3775718333",dynamic:[p,p,g,f,v,h,m,m,a.j.tabletMax,c?"100px":"60px",c?"100px":"60px"],children:[".ws-header-cta.__jsx-style-dynamic-selector{border:1px solid ".concat(p,";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:100%;width:100px;cursor:pointer;position:relative;-webkit-transition:color 0.2s,background-color 0.2s;transition:color 0.2s,background-color 0.2s;z-index:1;border-radius:var(--border-radius-8);background-color:").concat(p,";color:").concat(g,";font-weight:var(--font-weight-medium);font-size:var(--font-size-subhead-default);}"),".ws-header-cta.__jsx-style-dynamic-selector:hover{background-color:".concat(f,";color:").concat(v,";}"),".ws-header-cta.__jsx-style-dynamic-selector:active{border:1px solid ".concat(h,";background-color:").concat(m,";}"),".ws-header-cta.__jsx-style-dynamic-selector:focus{box-shadow:0 0 0 2px ".concat(m,";}"),".ws-header-cta-label.__jsx-style-dynamic-selector{vertical-align:middle;text-align:center;line-height:100%;text-transform:capitalize;}",".ws-header-cta-icon.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-right:var(--space-8);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}","@media screen and (max-width:".concat(a.j.tabletMax,"px){.ws-header-cta.__jsx-style-dynamic-selector{max-width:").concat(c?"100px":"60px",";min-width:").concat(c?"100px":"60px",";}.ws-header-cta-label.__jsx-style-dynamic-selector{display:none;}.ws-header-cta-icon.__jsx-style-dynamic-selector{margin-right:0;}}")]})]})},l=n(11069),c=n(38708),u=n(16733);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){var t=e.runState,n=e.onClick,i=e.lite,a=function(e){switch(e){case"loading":return{label:"working",icon:(0,o.tZ)(l.Z,{})};case"idle":return{label:"run",type:"run",icon:(0,o.tZ)(c.Z,{filled:!0})};case"running":return{label:"stop",icon:(0,o.tZ)(u.Z,{filled:!0})};case"stopping":return{label:"stopping",icon:(0,o.tZ)(l.Z,{})}}}(t),p="idle"===t?"language-page-run-button":void 0;return(0,o.tZ)(s,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({lite:i,onClick:n,cyName:p},a),a.label)}},53997:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(79056),i=n(67294),a=n(50361),o=n(38934),s=n(82672),l=n(25286);function c(e){var t=e.autoFocus,n=e.onShellKey,c=e.container,u=e.createXtermProps,d=(0,s.Z)({createXtermProps:u}),p=(0,r.Z)(d,2),f=p[0],m=p[1],h=(0,a.Z)({service:"shell",container:c});return i.useEffect((function(){if(h.channel&&f){var e=f.onKey((function(e){var t=e.key,r=e.domEvent;"\r"===t&&(0,o.track)(o.events.SHELL_COMMAND_EVALED),n&&n(r)})),t=f.onData((function(e){if(h.channel&&"closed"!==h.channel.status){var t=(0,l.I)(e);h.channel.send({input:t})}}));h.channel.onCommand((function(e){e.output&&f.write(e.output)}));var r=function(){h.channel&&"open"===h.channel.status&&h.channel.send({resizeTerm:f.getSize()})},i=f.onResize(r);return r(),function(){e.dispose(),t.dispose(),i.dispose()}}}),[h.channel,f,n]),i.useEffect((function(){t&&f&&f.focus()}),[t,f]),[f,m]}},27217:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Hv}});var r={};n.r(r),n.d(r,{Component:function(){return ar},reducer:function(){return ir}});var i={};n.r(i),n.d(i,{Component:function(){return jr},createOtOpsForEdits:function(){return gr},parseDotReplit:function(){return hr}});var a={};n.r(a),n.d(a,{Component:function(){return Rr},reciever:function(){return Lr},reducer:function(){return Br}});var o={};n.r(o),n.d(o,{Component:function(){return li},reducer:function(){return ci}});var s={};n.r(s),n.d(s,{Component:function(){return la},reciever:function(){return ta},reducer:function(){return ca}});var l={};n.r(l),n.d(l,{Component:function(){return ha}});var c={};n.r(c),n.d(c,{Component:function(){return ka},reducer:function(){return wa}});var u={};n.r(u),n.d(u,{Component:function(){return _a}});var d={};n.r(d),n.d(d,{Component:function(){return Va},receiver:function(){return Fa},reducer:function(){return Ha}});var p={};n.r(p),n.d(p,{Component:function(){return Wa},reducer:function(){return qa}});var f={};n.r(f),n.d(f,{Component:function(){return io}});var m={};n.r(m),n.d(m,{Component:function(){return Bo},receiver:function(){return Lo},reducer:function(){return Ao}});var h={};n.r(h),n.d(h,{Component:function(){return zo},default:function(){return Ho},receiver:function(){return Ho},reducer:function(){return Vo}});var g={};n.r(g),n.d(g,{Component:function(){return Yo},reducer:function(){return Ko}});var v={};n.r(v),n.d(v,{Component:function(){return rs},receiver:function(){return ts}});var b={};n.r(b),n.d(b,{Component:function(){return ls}});var y={};n.r(y),n.d(y,{Component:function(){return ys},receiver:function(){return vs}});var x={};n.r(x),n.d(x,{Component:function(){return Ls},receiver:function(){return Ds}});var w={};n.r(w),n.d(w,{Component:function(){return Us}});var k={};n.r(k),n.d(k,{Component:function(){return _l}});var Z={};n.r(Z),n.d(Z,{Component:function(){return $u},receiver:function(){return Wu}});var j={};n.r(j),n.d(j,{Component:function(){return ud},receiver:function(){return fd}});var O={};n.r(O),n.d(O,{Component:function(){return pf},receiver:function(){return xf},reducer:function(){return wf}});var E={};n.r(E),n.d(E,{Component:function(){return kf}});var _={};n.r(_),n.d(_,{Component:function(){return cm}});var C={};n.r(C),n.d(C,{Component:function(){return Wm}});var S={};n.r(S),n.d(S,{Component:function(){return th}});var P={};n.r(P),n.d(P,{Component:function(){return Hh},receiver:function(){return zh}});var N={};n.r(N),n.d(N,{Component:function(){return mg}});var T={};n.r(T),n.d(T,{Component:function(){return Mg}});var I={};n.r(I),n.d(I,{Component:function(){return zg}});var R={};n.r(R),n.d(R,{Component:function(){return Hg}});var D=n(79056),A=n(30266),L=n(68216),B=n(25997),M=n(14695),U=n(91077),X=n(30268),F=n(92953),z=n(92809),V=n(65988),H=n(809),G=n.n(H);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(89807).Z.register("replEnvironment",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isForking:!1,activeReplId:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_REPL_ID":return q(q({},e),{},{activeReplId:t.replId});case"SET_IS_FORKING":return q(q({},e),{},{isForking:t.isForking});default:return e}}));n(31107);var K=n(67294),Y=n(63805),Q=n(8679),$=n.n(Q),J=n(14890),ee=n(11163),te=n(30881);function ne(e){return{type:"SET_ACTIVE_REPL_ID",replId:e.replId}}var re=n(9329),ie=n(71171),ae=n.n(ie),oe=n(7977),se=n.n(oe),le=n(32324),ce=n(88834),ue=n(25517),de=n(53567),pe=n(82106),fe=n(60356),me=n(45187),he=n(49722),ge=n(35944);function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=function(e){var t,n,r=e.isVisible,i=e.children,a=e.onDismiss,o=e.tooltipProps,s=(0,fe.Z)(),l=(0,me.CHr)({variables:{replId:s}}),c=l.data,u=l.loading,d="io-tests-popover-dismissed-".concat(s),p=he.Z.get(d);if(!c||u)return null;var f="Repl"===(null===c||void 0===c||null===(t=c.repl)||void 0===t?void 0:t.__typename)?c.repl:null;if(!f)return null;var m=f.isProjectFork,h=f.ioTests,g=f.owner,v=null!==(n=f.unitTests)&&void 0!==n&&n.tests?f.unitTests.tests:[],b="Team"===(null===g||void 0===g?void 0:g.__typename)&&(null===g||void 0===g?void 0:g.isAdmin),y=h.length>0||v.length>0,x=!b&&m&&!p&&y&&r;return(0,ge.BX)("div",be(be({},x?{}:o),{},{className:"jsx-1536060807 wrapper",children:[(0,ge.tZ)(pe.Popover,{isOpen:x,align:"center",positions:["right"],padding:10,content:function(e){return(0,ge.tZ)(pe.ArrowContainer,be(be({},e),{},{arrowSize:15,arrowColor:"var(--accent-purple-default)",className:"autograder-popover",children:(0,ge.BX)("div",{onClick:function(){he.Z.set(d,!0),a()},className:"jsx-1536060807 popover-content",children:[(0,ge.tZ)("div",{className:"jsx-1536060807 popover-text",children:(0,ge.BX)(de.gC,{spacing:1,children:[h.length>0?(0,ge.BX)(ue.Z,{size:"small",children:["This project has ",(0,ge.tZ)("strong",{className:"jsx-1536060807",children:h.length})," ","input/output ",h.length>1?"tests":"test","."]}):(0,ge.BX)(ue.Z,{size:"small",children:["This project has ",(0,ge.tZ)("strong",{className:"jsx-1536060807",children:v.length})," unit"," ",v.length>1?"tests":"test","."]}),(0,ge.tZ)(ue.Z,{size:"small",children:"Run tests to check your work!"})]})}),(0,ge.tZ)(de.Ug,{justify:"end",children:(0,ge.tZ)(ce.Z,{onClick:function(e){e.stopPropagation(),he.Z.set(d,!0),a()},children:"dismiss"})})]})}))},children:i}),(0,ge.tZ)(V.default,{id:"1536060807",children:[".wrapper.jsx-1536060807{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".popover-content.jsx-1536060807{cursor:pointer;width:300px;color:var(--white);padding:var(--space-16);background:white;border-radius:var(--border-radius-4);background:var(--accent-purple-default);box-shadow:var(--shadow-2);}",".popover-text.jsx-1536060807{padding-bottom:var(--space-16);}",".popover-text.jsx-1536060807 span{color:var(--white);}"]})]}))},xe=n(96622);function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ze(e){return(0,ge.tZ)(xe.Z,ke(ke({},e),{},{children:(0,ge.tZ)("path",{d:"M3 5V19C3 20.66 7 22 12 22C17 22 21 20.66 21 19V5M3 5C3 6.65685 7.02944 8 12 8C16.9706 8 21 6.65685 21 5M3 5C3 3.34315 7.02944 2 12 2C16.9706 2 21 3.34315 21 5M21 12C21 13.66 17 15 12 15C7 15 3 13.66 3 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}var je=n(4431),Oe=n(10257),Ee=n(84476),_e=n(54749);function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pe=function(e){var t=e.isVisible,n=e.children,r=e.onDismiss,i=e.tooltipProps,a=(0,fe.Z)(),o=(0,Oe.Z)().fs,s=(0,_e.Z)("workspace","enveditorintro"),l=s.shouldDisplay,c=s.register,u=s.dismiss,d=K.useState(),p=(0,D.Z)(d,2),f=p[0],m=p[1];K.useEffect((function(){var e=document.querySelector(".replit-ui-theme-root");if(!e)throw new Error("Expected theme root");m(e)}),[]),K.useEffect((function(){var e=!1;return function(){var n=(0,A.Z)(G().mark((function n(){var r;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.readFile(".env");case 2:if(r=n.sent,!e){n.next=5;break}return n.abrupt("return");case 5:if(!r.error){n.next=7;break}return n.abrupt("return");case 7:t&&c();case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()(),function(){e=!0}}),[a,o,t,c]);var h=l&&Boolean(f);return(0,ge.BX)("div",Se(Se({},h?{}:i),{},{className:"jsx-340849484 wrapper",children:[(0,ge.tZ)(pe.Popover,{isOpen:h,containerParent:f,align:"center",positions:["right"],padding:10,content:function(e){return(0,ge.tZ)(pe.ArrowContainer,Se(Se({},e),{},{arrowSize:15,arrowColor:"var(--background-root)",children:(0,ge.tZ)("div",{className:"jsx-340849484 popover-content",children:(0,ge.BX)(de.gC,{spacing:1,align:"stretch",children:[(0,ge.tZ)(Ee.Z,{level:4,children:"Looking for your .env file?"}),(0,ge.tZ)(ue.Z,{size:"small",children:"Your environment moved here, click on the icon to the left to check it out and edit your environment."}),(0,ge.tZ)(de.Ug,{justify:"end",children:(0,ge.tZ)(ce.Z,{color:"primary",onClick:function(e){e.stopPropagation(),u(),r()},children:"dismiss"})})]})})}))},children:n}),(0,ge.tZ)(V.default,{id:"340849484",children:[".wrapper.jsx-340849484{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".popover-content.jsx-340849484{width:300px;padding:var(--space-16);background:var(--background-root);border:1px solid var(--background-higher);border-radius:var(--border-radius-4);}",".popover-text.jsx-340849484{padding-bottom:var(--space-16);}"]})]}))},Ne=n(41667);function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Re(e){return(0,ge.tZ)(xe.Z,Ie(Ie({},e),{},{children:(0,ge.tZ)("path",{d:"M22.0005 12.4999V8.50012H20.001V6.49987H18V5.50012H20.001V2.50012H17.001V4.49962H15V6.49987H9V4.49962H7.0005V2.50012H4.0005V5.50012H6V6.49987H4.0005V8.50012H2.001V12.4999H0V19.4996H3V15.4999H4.0005V19.4996H6V21.4999H11.001V18.4999H7.0005V17.5001H17.001V18.4999H13.0005V21.4999H18V19.4996H20.001V15.4999H21V19.4996H24V12.4999H22.0005ZM9 11.5001H6V8.50012H9V11.5001ZM18 11.5001H15V8.50012H18V11.5001Z",fill:"currentColor",stroke:"none"})}))}function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(e){return(0,ge.tZ)(xe.Z,Ae(Ae({},e),{},{children:(0,ge.tZ)("path",{d:"M21.8008 7.99963C21.8008 7.99963 21.6055 6.62073 21.0039 6.01526C20.2422 5.21838 19.3906 5.21448 19 5.1676C16.2031 4.96448 12.0039 4.96448 12.0039 4.96448H11.9961C11.9961 4.96448 7.79687 4.96448 5 5.1676C4.60938 5.21448 3.75781 5.21838 2.99609 6.01526C2.39453 6.62073 2.20312 7.99963 2.20312 7.99963C2.20312 7.99963 2 9.62073 2 11.2379V12.7535C2 14.3707 2.19922 15.9918 2.19922 15.9918C2.19922 15.9918 2.39453 17.3707 2.99219 17.9762C3.75391 18.7731 4.75391 18.7457 5.19922 18.8317C6.80078 18.984 12 19.0309 12 19.0309C12 19.0309 16.2031 19.0231 19 18.8239C19.3906 18.777 20.2422 18.7731 21.0039 17.9762C21.6055 17.3707 21.8008 15.9918 21.8008 15.9918C21.8008 15.9918 22 14.3746 22 12.7535V11.2379C22 9.62073 21.8008 7.99963 21.8008 7.99963ZM9.93359 14.5934V8.97229L15.3359 11.7926L9.93359 14.5934Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}var Be=n(40403),Me=n(62748);function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fe(e){var t=e.children,n=e.isVisible,r=e.onDismiss,i=e.tooltipProps,a=(0,_e.Z)("announcement","youtube-in-the-ws"),o=a.shouldDisplay,s=a.register,l=a.dismiss,c=K.useState(!1),u=(0,D.Z)(c,2),d=u[0],p=u[1];K.useEffect((function(){s()}),[s]);var f=o&&n;return(0,ge.BX)("div",Xe(Xe({},i),{},{className:"jsx-3674292327 "+(i&&null!=i.className&&i.className||"wrapper"),children:[(0,ge.BX)(Be.Z,{onClickOutside:function(){return r()},positions:["right"],align:"center",isOpen:f,showArrow:!0,arrowOverrides:{arrowSize:12,arrowColor:"var(--accent-negative-default)"},children:[t,(0,ge.tZ)("div",{className:"jsx-3674292327 youtube-popover",children:(0,ge.BX)(de.gC,{spacing:2,align:"stretch",children:[(0,ge.BX)(de.Ug,{spacing:1,children:[(0,ge.tZ)(Me.Z,{color:"var(--accent-negative-default)"}),(0,ge.tZ)(Ee.Z,{level:5,children:"Code with YouTube tutorials"})]}),(0,ge.tZ)(ue.Z,{children:"Choose from a list of recommended tutorials to code along to"}),(0,ge.tZ)(de.Ug,{spacing:1,justify:"end",children:(0,ge.tZ)(ce.Z,{loading:d,onClick:function(){p(!0),r(),l()},children:"Got it"})})]})})]}),(0,ge.tZ)(V.default,{id:"3674292327",children:[".wrapper.jsx-3674292327{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".youtube-popover.jsx-3674292327{border:1px solid var(--accent-negative-default);border-radius:var(--border-radius-4);background:var(--background-root);padding:var(--space-16);max-width:300px;position:relative;pointer-events:auto;}"]})]}))}function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e){return(0,ge.tZ)(xe.Z,Ve(Ve({},e),{},{children:(0,ge.tZ)("path",{d:"M16 6C16 7.65685 17.3431 9 19 9C20.6569 9 22 7.65685 22 6C22 4.34315 20.6569 3 19 3C17.3431 3 16 4.34315 16 6ZM16 6L12 6C10.8954 6 10 6.89543 10 8L10 16C10 17.1046 10.8954 18 12 18L16 18M16 18C16 19.6569 17.3431 21 19 21C20.6569 21 22 19.6569 22 18C22 16.3431 20.6569 15 19 15C17.3431 15 16 16.3431 16 18ZM2 12L10 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}var Ge=n(2739),We=n(20900),qe=n(98960),Ke=n(42409),Ye=n(44064);function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Je(e){var t,n,r,i=e.lang,a=e.lite,o=e.outputonly,s=e.sharing,l=e.isMobile,c=e.preferences,u=e.isServer,d=e.isVnc,p=e.inspector,f=e.gitRemoteUrl,m=e.showShareToTalkPromo,h=e.shouldShowMPInviteTour,g=e.isWindowingEnabled,v=e.hasAudioContext,b=e.preventFocusOnTerminal,y=e.isCluiCurlEnabled,x=e.shouldLoadAdminPanel,w=e.shouldShowEducationPane,k=e.shouldShowAutograderPane,Z=e.shouldShowUnitTestPane,j=e.isLoggedIn,O=e.shouldLoadYoutubePane,E=se().get(i),_=!a;if("react_native"===E.key)return{language:i,layout:{floating:[],tiling:{type:"split",fixed:!0,leftSize:a?48:68,hideHandle:!0,stacked:!0,left:{type:"pane",pud:"header"},right:{type:"pane",pud:"output"}}},files:[],plugins:{header:{type:"header",title:"header",state:{lite:a,showShareToTalkPromo:m,shouldShowMPInviteTour:h}},output:{type:"snack",title:"console"},infoprovider:{type:"infoprovider",title:"infoprovider"}},preferences:c,activeFile:void 0};var C={libs:{type:"libsearch",title:"library search",isClosable:g,isDraggable:g}};se().get(i).hasUPM&&(C={packager:{type:"packager",title:"packages",isClosable:g,isDraggable:g}});var S=$e($e({fileviewercontroller:{type:"fileviewercontroller"},analytics:{type:"analytics"},replupdater:{type:"replupdater"},replforker:{type:"replforker"}},C),{},{header:{type:"header",title:"header",state:{lite:a,showShareToTalkPromo:m,shouldShowMPInviteTour:h}},fileheader:{type:"fileheader",title:"fileheader"},infoprovider:{type:"infoprovider",title:"infoprovider"},markdownviewer:{type:"markdownviewer",title:"markdown"},instructionsviewer2:{type:"instructionsviewer2",title:"instructions"},hackerupgradeprompt:{type:"hackerupgradeprompt"},browsernotifications:{type:"browsernotifications"},services:{type:"services"},commandbar:{type:"commandbar"},fsreduxbridge:{type:"fsreduxbridge"}});o&&(delete S.fileviewercontroller,delete S.commandbar),v&&(S=$e($e({},S),{},{audio:{type:"audio"}})),_&&(S=$e($e({},S),{},{annotations:{type:"annotations"}})),y&&(S=$e($e({},S),{},{cluicurl:{type:"cluicurl",title:"HTTP"}})),p&&(S=$e($e({},S),{},{inspector:{type:"inspector",title:"inspector"}})),x&&(S=$e($e({},S),{},{adminpanel:{type:"adminpanel",title:"adminpanel"}}));var P,N=[];w&&(N.push({pud:"educationpane",pluginType:"educationpane",tooltip:"Teams for Education",icon:Ye.Z}),S.educationpane={type:"educationpane",title:"Education Pane",isClosable:g,isDraggable:g}),se().supportsGit(i)&&!s&&(N.push({pud:"git",pluginType:"git",tooltip:"Version control",icon:He}),S.git={type:"git",title:"git",isClosable:g,isDraggable:g,state:{gitRemoteUrl:f}}),se().supportsDAP(i)&&(N.push({pud:"debugpanel",pluginType:"debugpanel",tooltip:"Debugger",icon:Ge.Z}),S.debugpanel={type:"debugpanel",title:"debugpanel",isClosable:g,isDraggable:g}),S.config={type:"config",title:"config",isClosable:!0,isDraggable:!1},S.lock={type:"lock",title:"lock"},se().supportsPackager3(i)?N.push({pud:"packager",icon:je.Z,pluginType:"packager",tooltip:"Packages"}):"html"===i&&N.push({pud:"libs",pluginType:"libsearch",tooltip:"Packages",icon:je.Z}),s||"replbox"===E.engine||(S.enveditor={type:"enveditor",title:"enveditor"},N.push({pud:"enveditor",pluginType:"enveditor",tooltip:"Secrets (Environment variables)",icon:Ne.Z,iconWrapper:Pe})),a||(S=$e($e({},S),{},{prefs:{type:"preferences",title:"preferences",isClosable:g,isDraggable:g},help:{type:"help",title:"help",isClosable:g,isDraggable:g},floatingrun:{type:"floatingrun",title:"floatingrun",state:{maxWidthBreakpoint:le.j.mobileMax+100}}}),(i.startsWith("nix")||E.hasLanguageServer)&&(S=$e($e({},S),{},{langserver:{type:i.startsWith("nix")?"langserver2":"langserver"}}))),P=$e($e({},P=se().usesTerminal2(i)?{type:"terminal2",title:"console",state:{kind:se().usesInterpreter(i)?"interp":"output",lite:a,preventFocus:b}}:{type:"goval"!==E.engine?"replboxconsole":"console",title:"console"}),{},{isDraggable:g}),S=se().hasReplboxWebview(E.key)&&!se().hasReplboxUrlBar(E.key)?$e($e({},S),{},{output:{type:"replboxdisplay2",title:"output"},console:{type:"replboxconsole",title:"console"}}):se().hasReplboxWebview(E.key)?$e($e({},S),{},{output:{type:"replboxdisplay2",title:"output",state:{canBeClosed:!1}},console:{type:"replboxconsole",title:"console"}}):$e($e({},S),{},{output:P}),!a&&j&&N.push({pud:"prefs",pluginType:"preferences",tooltip:"Settings",icon:We.Z}),"replbox"!==E.engine&&(N.push({pud:"database",icon:Ze,pluginType:"database",tooltip:"Database"}),S.database={type:"database",title:"Database",isClosable:g,isDraggable:g}),k?(N.push({pud:"autograder",icon:qe.Z,pluginType:"autograder",tooltip:"Tests",iconWrapper:ye}),S.autograder={type:"autograder",title:"Autograder",isClosable:g,isDraggable:g}):Z&&(N.push({pud:"unittests",icon:qe.Z,pluginType:"unittests",tooltip:"Unit tests"}),S.unittests={type:"unittests",title:"unittests",isClosable:g,isDraggable:g});var T,I=se().supportsFiles(E.key)||"web_project"===E.key||"kaboom"===E.key||"html"===E.key,R="filetree";S=$e($e({},S),{},(0,z.Z)({},R,{type:R,title:"filetree",isClosable:g,isDraggable:g,state:void 0})),O&&(S.youtube={type:"youtube",title:"Youtube",isClosable:g,isDraggable:g},S.youtubepreview={type:"youtubepreview",title:"Youtube Preview",isClosable:g,isDraggable:g},N.push({pud:"youtube",pluginType:"youtube",tooltip:"Youtube",icon:Le,iconWrapper:Fe})),x&&N.push({pud:"adminpanel",pluginType:"adminpanel",tooltip:"Crosis Logs",svg:"Alien"}),I&&N.unshift({pud:R,pluginType:R,tooltip:"Files",icon:Ke.Z}),"kaboom"===E.key&&(N.unshift({pud:"kaboombar",pluginType:"kaboombar",tooltip:"Kaboom",icon:Re}),S.kaboombar={type:"kaboombar",title:"kaboombar",isClosable:g,isDraggable:g}),I?(S[t="file-".concat(ae()())]={type:"blank",title:"empty",isDraggable:g},T={type:"pane",pud:t}):(S[t="main-editor"]={type:"blank",title:"empty",isDraggable:g},T={type:"pane",pud:t});var D,A=[{type:"pane",pud:"output"},{type:"pane",pud:"shell"}];if("web_project"===E.key||"python_turtle"===E.key||"html"===E.key||"kaboom"===E.key||"basic"===E.key)if(l)D={type:"tabs",active:0,tabs:[{type:"pane",pud:"output"},{type:"pane",pud:"console"}]};else{D={type:"split",stacked:!c.isLayoutStacked,position:65,left:{type:"pane",pud:"output"},right:{type:"tabs",active:0,tabs:[{type:"pane",pud:"console"},{type:"pane",pud:"shell"}]}}}else if(u&&s){n="webview";var L={type:"tabs",active:0,tabs:A};S=$e($e({},S),{},(0,z.Z)({},n,{type:"webview",title:"webview",isDraggable:g,state:{canBeClosed:!0}})),D={type:"split",stacked:!(l||a||c.isLayoutStacked),fixed:!1,left:{type:"pane",pud:n},right:L}}else if(d){r="vnc",S=$e($e({},S),{},(0,z.Z)({},r,{type:"vnc",title:"vnc",state:{}}));var B={type:"tabs",active:0,tabs:A};D={type:"split",stacked:!(l||a||c.isLayoutStacked),fixed:!1,left:{type:"pane",pud:r},right:B}}else D={type:"tabs",active:0,tabs:A};var M,U,X=o?D:{type:"split",stacked:l||a||c.isLayoutStacked,fixed:!1,left:{type:"split",stacked:!0,leftSize:32,left:{type:"pane",pud:"fileheader"},right:T},right:D};(g&&(X=o?D:{type:"split",left:$e($e({},T),{},{header:{type:"pane",pud:"fileheader",height:32}}),right:D}),!N.length||o)?M=X:(l||!I||a||(U="filetree"),"kaboom"===E.key&&(U="kaboombar"),w&&(U="educationpane"),S=$e($e({},S),{},{sidenav:{type:"sidenav",title:"side navigation",state:{navItems:N,activePanePuds:U?[U]:[]}}}),M={type:"split",stacked:!1,leftSize:50,left:{type:"pane",pud:"sidenav"},right:U?{type:"split",stacked:!1,position:15,left:{type:"pane",pud:U},right:X}:X});var F={floating:a?[]:["floatingrun","help","hackerupgradeprompt","browsernotifications","commandbar"],tiling:{type:"split",leftSize:a?48:68,stacked:!0,left:{type:"pane",pud:"header"},right:p?{type:"split",left:M,right:{type:"pane",pud:"inspector"}}:M}};return S.langserver&&F.floating.push("langserver"),F.floating.push("desktoplayout"),F.floating.push("analytics"),F.floating.push("fileviewercontroller"),F.floating.push("fsreduxbridge"),v&&!a&&F.floating.push("audio"),_&&F.floating.push("annotations"),S.bsoder={type:"bsoder",title:"bsoder"},S.desktoplayout={type:"desktoplayout"},S.shell={type:"shell",title:"shell"},S.loadingresolver={type:"loadingresolver",title:"loadingresolver"},S.goval={type:"goval",title:"goval",state:{isOwner:!s,lite:a}},S.deeplink={type:"deeplink"},F.floating.push("deeplink"),{language:i,layout:F,files:[],plugins:S,preferences:c,activeFile:void 0,editorPud:t,webviewPud:n,vncPud:r,sideNavItems:N}}var et=n(82100),tt=n(91682),nt=n(66532),rt=n(23872),it=n(42567),at=n(51595),ot=n(11262),st=n(71371),lt=n(45642),ct=n(38934),ut=n(56568),dt=n(28955),pt=n(51911),ft=n(67180),mt=n(52973),ht=n(7444),gt=n(94876),vt=n(19802),bt=n(20138),yt=n(41664),xt=n(50025),wt=n(60461);function kt(e){var t=e.username,n=e.id,r=e.image,i=e.color,a=e.size,o=e.onClick,s=e.canClick,l=function(e){var t=e.color;return{styles:(0,ge.tZ)(V.default,{id:"2893583400",dynamic:[t],children:[".avatar.__jsx-style-dynamic-selector{-webkit-transition:all 0.2s ease;transition:all 0.2s ease;border:2px solid ".concat(t,";}"),".avatar.__jsx-style-dynamic-selector:hover{-webkit-filter:brightness(95%);filter:brightness(95%);box-shadow:var(--shadow-1);}"]}),className:V.default.dynamic([["2893583400",[t]]])}}({color:i});return(0,ge.BX)("div",{"aria-label":"Observe ".concat(t),"data-microtip-position":"bottom",role:"tooltip",onClick:function(){s&&o&&o({username:t,id:n})},className:V.default.dynamic([["3626111683",[s?"pointer":"auto"]]])+" presence-avatar",children:[(0,ge.tZ)(wt.Z,{className:l.className,size:a||35,title:t,src:r,alt:"avatar for ".concat(t)}),l.styles,(0,ge.tZ)(V.default,{id:"3626111683",dynamic:[s?"pointer":"auto"],children:[".presence-avatar.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:".concat(s?"pointer":"auto",";}")]})]})}var Zt=n(94184),jt=n.n(Zt),Ot=n(45971),Et=n(56180);function _t(){var e=(0,Oe.Z)(),t=e.session,n=e.presence;return K.useCallback((function(e){var r=e.username,i=e.id,a=n.getFollowedUser();if((null===a||void 0===a?void 0:a.username)!==r){n.followUser(r);var o=n.getActiveFileForUser(i),s=t.getActiveFile();o&&o!==s&&t.openFile(o)}else n.unfollowUser()}),[t,n])}function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pt(e){var t=e.hideModal,n=e.onUserClick,r=e.isOpen,i=(0,fe.Z)(),a=(0,Oe.Z)().presence,o=(0,xt.Z)({presence:a});return(0,ge.tZ)(Ot.Z,{isOpen:r,onRequestClose:t,children:(0,ge.tZ)(Tt,{replId:i,onUserClick:n,activeUsers:o,hideModal:t})})}function Nt(e,t){return t.some((function(t){return t.id===e}))}function Tt(e){var t=e.replId,n=e.activeUsers,r=e.onUserClick,i=e.hideModal,a=(0,me.Flq)({variables:{replId:t}}),o=a.data,s=a.loading,l=a.error;if(s)return(0,ge.BX)("div",{className:"jsx-1405322551 user-list-loader",children:[(0,ge.tZ)(Et.Z,{style:{width:"50px"}}),(0,ge.tZ)(V.default,{id:"1405322551",children:[".user-list-loader.jsx-1405322551{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;min-height:200px;}"]})]});if(l)return(0,ge.tZ)("div",{children:l.message});if("Repl"===(null===o||void 0===o?void 0:o.repl.__typename)){var c=o.repl,u=o.currentUser,d=c.user,p=d&&n.find((function(e){return e.username===d.username})),f=c.permissions.filter((function(e){var t=e.user;return t&&Nt(t.id,n)})),m=c.permissions.filter((function(e){var t=e.user;return t&&!Nt(t.id,n)}));return(0,ge.BX)("div",{className:"jsx-3569279364 user-list-modal",children:[(0,ge.tZ)(Ee.Z,{level:2,children:"Multiplayers"}),(0,ge.tZ)(Ee.Z,{level:5,children:"Users can interact with this repl in real time."}),(0,ge.tZ)("div",{className:"jsx-3569279364 user-list",children:(0,ge.BX)("div",{className:"jsx-3569279364",children:[d?(0,ge.tZ)(Rt,St(St({},d),{},{onClick:r,isOnline:Boolean(p),color:p?p.color:"transparent",isOwner:!0,hideModal:i,canClickAvatar:Boolean(p)&&d.id!==(null===u||void 0===u?void 0:u.id),type:me.aQH.Rw})):null,f.map((function(e){var t=e.type,a=e.user;if(!a)throw new Error("Expected user");var o=n.find((function(e){return e.username===a.username}));if(!o)throw new Error("Expected user online");var s=a.id!==(null===u||void 0===u?void 0:u.id);return(0,ge.tZ)(Rt,St(St({onClick:r,type:t},a),{},{isOnline:!0,canClickAvatar:s,color:o.color,hideModal:i,isOwner:!1}),"chat-user-list-".concat(a.username))})),m.map((function(e){var t=e.type,n=e.user;if(!n)throw new Error("Expected user");return(0,ge.tZ)(Rt,St(St({onClick:r,type:t},n),{},{canClickAvatar:!1,isOnline:!1,color:"transparent",hideModal:i,isOwner:!1}),"chat-user-list-".concat(n.username))}))]})}),(0,ge.tZ)(V.default,{id:"3569279364",children:[".user-list-modal.jsx-3569279364{color:var(--foreground-default);padding:var(--space-32);display:grid;grid-template-rows:auto auto 1fr;grid-gap:var(--space-16);}",".user-list.jsx-3569279364{max-height:330px;overflow-y:auto;}"]})]})}return"ReplRedirect"===(null===o||void 0===o?void 0:o.repl.__typename)?(0,ge.BX)("div",{children:["This repl has moved to"," ",(0,ge.tZ)("a",{href:o.repl.replUrl,children:o.repl.replUrl})]}):"SubscriptionExpiredError"===(null===o||void 0===o?void 0:o.repl.__typename)?(0,ge.BX)("div",{children:["Your subscition has expired.",(0,ge.tZ)("a",{href:"/site/pricing",children:"Upgrade here"})]}):null}var It={r:"read only",rw:"can edit"};function Rt(e){var t=e.type,n=e.id,r=e.username,i=e.image,a=e.isOnline,o=e.isOwner,s=e.color,l=e.onClick,c=e.hideModal,u=e.canClickAvatar,d=_t();return(0,ge.BX)("div",{className:V.default.dynamic([["1309780427",[u?"pointer":"auto",s]]])+" "+(jt()("user-list-item-wrapper",{online:a})||""),children:[(0,ge.tZ)("div",{onClick:function(){u&&(d({username:r,id:n}),c())},className:V.default.dynamic([["1309780427",[u?"pointer":"auto",s]]])+" image",children:(0,ge.tZ)("img",{src:i,className:V.default.dynamic([["1309780427",[u?"pointer":"auto",s]]])+" "+((a?"":"offline")||"")})}),(0,ge.BX)("div",{className:V.default.dynamic([["1309780427",[u?"pointer":"auto",s]]])+" info",children:[(0,ge.BX)("div",{className:V.default.dynamic([["1309780427",[u?"pointer":"auto",s]]]),children:[(0,ge.BX)("a",{href:"/@".concat(r),target:"_blank",onClick:l,className:V.default.dynamic([["1309780427",[u?"pointer":"auto",s]]]),children:["@",r]}),!a&&" (offline)"]}),(0,ge.tZ)("div",{className:V.default.dynamic([["1309780427",[u?"pointer":"auto",s]]]),children:o?"owner":It[t]})]}),(0,ge.tZ)(V.default,{id:"1309780427",dynamic:[u?"pointer":"auto",s],children:[".user-list-item-wrapper.__jsx-style-dynamic-selector{padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-order:1;-ms-flex-order:1;order:1;}",".image.__jsx-style-dynamic-selector{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;cursor:".concat(u?"pointer":"auto",";}"),"img.__jsx-style-dynamic-selector{width:40px;height:40px;border-radius:20px;border:3px solid ".concat(s,";background:white;object-fit:cover;}"),".info.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-left:var(--space-8);}","img.offline.__jsx-style-dynamic-selector{-webkit-filter:grayscale(100%);filter:grayscale(100%);}",".user-list-item-wrapper.online.__jsx-style-dynamic-selector{-webkit-order:0;-ms-flex-order:0;order:0;}"]})]})}function Dt(e){var t=K.useState(!1),n=(0,D.Z)(t,2),r=n[0],i=n[1],a=(0,fe.Z)(),o=_t(),s=(0,me.qC4)({variables:{ids:e.users.map((function(e){return e.id}))},ssr:!1,skip:!e.users.length}),l=s.data,c=s.loading,u=s.error,d=e.users.reduce((function(e,t){return e[t.id]=t.color,e}),{});if(c)return null;if(u)return null;if(null===l||void 0===l||!l.currentUser)return null;var p=l.usersByIds,f=l.currentUser,m=p.filter((function(e){return e.id!==f.id})),h=m.length-3;return(0,ge.BX)("div",{className:V.default.dynamic([["3417583604",[le.j.mobileMax+100]]])+" multiplayer-users-container",children:[(0,ge.BX)(de.Ug,{wrap:"nowrap",spacing:1,align:"center",children:[h>0?(0,ge.tZ)("div",{className:V.default.dynamic([["3417583604",[le.j.mobileMax+100]]]),children:(0,ge.BX)(ce.Z,{filled:!1,border:!1,onClick:function(){return i(!0)},children:["+ ",h]})}):null,m.slice(0,3).map((function(e){return(0,ge.tZ)("div",{className:V.default.dynamic([["3417583604",[le.j.mobileMax+100]]]),children:(0,ge.tZ)(kt,{id:e.id,username:e.username,image:e.image,color:d[e.id],onClick:o,canClick:!0})},e.id)})),(0,ge.tZ)(Pt,{isOpen:r,hideModal:function(){return i(!1)},onUserClick:function(){(0,ct.track)(ct.events.MP2_VISITED_PROFILE,{replId:a,from:"OnlineUsers"})}})]}),(0,ge.tZ)(V.default,{id:"3417583604",dynamic:[le.j.mobileMax+100],children:[".multiplayer-users-container.__jsx-style-dynamic-selector{padding:0 var(--space-8);}","@media only screen and (max-width:".concat(le.j.mobileMax+100,"px){.multiplayer-users-container.__jsx-style-dynamic-selector{display:none;}}")]})]})}var At=n(65393),Lt=n(98136),Bt=n(97131),Mt=n(6552),Ut=n(74834),Xt=n(68724),Ft=n(51444),zt=n(95211),Vt=n(85231),Ht=n(41649),Gt=n(16264),Wt=n(50255),qt=n(80723),Kt=n(32046);function Yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $t(e){var t=e.onSubmit,n=e.existingUsernames,r=e.isDisabled,i=e.onChange,a=e.placeholder,o=K.useState(""),s=(0,D.Z)(o,2),l=s[0],c=s[1],u=!!l.match(/.+@.+/),d=(0,Kt.Z)(l.trim().replace(/^@/,""),250),p=(0,me.skk)({skip:!d||u,variables:{query:d,limit:6}}),f=p.data,m=p.loading,h=p.error,g=(0,Ft.Z)().showError;K.useEffect((function(){h&&g(h.message)}),[h,g]);var v=null===f||void 0===f?void 0:f.usernameSearch;return(0,ge.BX)("form",{onSubmit:function(e){e.preventDefault(),t(l),c("")},className:"jsx-1273575788",children:[(0,ge.BX)("div",{className:"jsx-1273575788 form-content",children:[(0,ge.tZ)(qt.ZP,{onChange:function(e){e&&c(e.username)},itemToString:function(e){return(null===e||void 0===e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var r=e.getInputProps,o=e.getItemProps,s=e.getMenuProps,u=e.isOpen,d=e.highlightedIndex;return(0,ge.BX)("div",{className:"jsx-1273575788 dropdown",children:[(0,ge.tZ)(Ht.ZP,Qt({},r({ref:null,value:l,onChange:function(e){c(e.currentTarget.value),null===i||void 0===i||i(e.currentTarget.value)},placeholder:null!==a&&void 0!==a?a:"Search by username or invite by email",autoComplete:"off",onKeyDown:function(e){"Enter"===e.key&&l.match(/.+@.+/)&&(t(l),c(""),e.currentTarget.blur())}}))),(0,ge.BX)("div",Qt(Qt({},s()),{},{className:"jsx-1273575788",children:[u&&v&&v.length?(0,ge.tZ)("div",{className:"jsx-1273575788 dropdown-menu",children:v.map((function(e,t){return(0,ge.tZ)("div",Qt(Qt({},o({item:e,index:t})),{},{className:"jsx-1273575788 "+(jt()("result",{"is-active":d===t})||""),children:(0,ge.BX)(de.Ug,{align:"center",spacing:1,children:[(0,ge.tZ)(Xt.Z,{size:"s",url:e.image}),(0,ge.tZ)("div",{className:"jsx-1273575788",children:e.username}),n.includes(e.username)?(0,ge.tZ)("div",{className:"jsx-1273575788 check-icon",children:(0,ge.tZ)(qe.Z,{})}):null]})}),e.username)}))}):null,u&&m?(0,ge.tZ)("div",{className:"jsx-1273575788 dropdown-menu is-loading",children:"loading..."}):null,u&&v&&0===v.length?(0,ge.BX)("div",{className:"jsx-1273575788 dropdown-menu is-empty",children:['no results found for "',l,'"']}):null]}))]})}}),(0,ge.tZ)("div",{className:"jsx-1273575788",children:(0,ge.tZ)(ce.Z,{color:"primary",type:"submit",filled:!0,disabled:r||!l,children:"Invite"})})]}),(0,ge.tZ)(V.default,{id:"1273575788",children:[".form-content.jsx-1273575788{display:grid;position:relative;width:100%;grid-template-columns:1fr auto;grid-column-gap:var(--space-8);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".dropdown.jsx-1273575788{position:relative;z-index:5;}",".dropdown-menu.jsx-1273575788{position:absolute;z-index:1;top:100%;left:0;width:100%;background-color:var(--background-default);border:1px solid var(--foreground-dimmest);border-top:0 none;border-radius:var(--border-radius-4);max-height:300px;overflow:auto;}",".dropdown-menu.is-loading.jsx-1273575788,.dropdown-menu.is-empty.jsx-1273575788{color:var(--foreground-dimmer);padding:var(--space-8);}",".dropdown.jsx-1273575788:focus-within .dropdown-menu.jsx-1273575788{border-color:var(--accent-primary-default);}",".spacer.jsx-1273575788{width:var(--space-8);pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",".result.jsx-1273575788{cursor:pointer;padding:var(--space-8) var(--space-16);}",".result.jsx-1273575788:hover,.is-active.jsx-1273575788{background-color:var(--accent-primary-dimmer);}",".check-icon.jsx-1273575788{margin-left:auto;color:var(--accent-positive-default);}"]})]})}function Jt(e){var t=e.value,n=e.onButtonPress,r=e.statusText,i=void 0===r?"":r,a=e.image,o=e.filterValue,s=e.type,l=e.Icon;return(0,ge.BX)("div",{className:"jsx-1343607787 "+(jt()("multiplayer-item",{"is-editable":!!n})||""),children:[(0,ge.BX)(de.Ug,{align:"center",spacing:1,children:[(0,ge.tZ)(Xt.Z,{size:"s",url:null!==a&&void 0!==a?a:""}),(0,ge.tZ)("div",{className:"jsx-1343607787 label",children:o?(0,ge.tZ)(Gt.gr,{source:t,match:o}):"".concat(t," ").concat(i)}),!!n&&(0,ge.tZ)(ce.Z,{className:"remove-button",border:!1,filled:!1,"aria-label":"Remove ".concat(s||"email invite"),role:"tooltip","data-microtip-position":"left",onClick:n,children:l&&(0,ge.tZ)(l,{size:12,className:"jsx-1343607787"})})]}),(0,ge.tZ)(V.default,{id:"1343607787",children:[".multiplayer-item.jsx-1343607787{padding:var(--space-4) var(--space-16);}",".multiplayer-item.is-editable.jsx-1343607787{padding-right:var(--space-8);}",".multiplayer-item.is-editable.jsx-1343607787:hover{background-color:var(--background-root);}",".label.jsx-1343607787{margin-right:auto;}"]})]})}var en=n(31056);function tn(e){var t=e.email,n=e.onInvite,r=e.onCancel;return(0,ge.BX)("div",{className:"jsx-861027202 root",children:[(0,ge.tZ)(Ee.Z,{level:3,align:"center",children:"Are you sure?"}),(0,ge.BX)(ue.Z,{align:"center",children:[(0,ge.tZ)("p",{className:"jsx-861027202 message",children:"Adding an external user as a guest to this repl will give the user read and write access. Please confirm the below email address before inviting the user as a guest."}),(0,ge.tZ)("p",{className:"jsx-861027202 email",children:t})]}),(0,ge.BX)("div",{className:"jsx-861027202 controls",children:[(0,ge.tZ)(ce.Z,{onClick:r,children:"Cancel"}),(0,ge.tZ)(ce.Z,{filled:!0,color:"primary",onClick:n,children:"Invite"})]}),(0,ge.tZ)(V.default,{id:"861027202",children:[".root.jsx-861027202{color:var(--foreground-default);padding:var(--space-24);display:grid;grid-gap:var(--space-24);}",".controls.jsx-861027202{display:grid;grid-gap:var(--space-8);grid-auto-flow:column;}",".message.jsx-861027202{padding-bottom:var(--space-16);}"]})]})}var nn=n(30525),rn=n(51966);function an(e){var t,n,r,i,a=e.replId,o=(0,me.JT6)({variables:{replId:a}}),s=o.data,l=o.loading,c=(0,et.v9)((function(e){return e.user.userInfo.id})),u=(0,Ft.Z)(),d=u.showConfirm,p=u.showError,f=K.useState(""),m=(0,D.Z)(f,2),h=m[0],g=m[1],v=(0,me.fSO)({onError:function(e){return p(e.message)},onCompleted:function(e){var t=e.addMultiplayerUser.user;(0,ct.track)(ct.events.MULTIPLAYER_INVITED,{replId:a,inviteMethod:"username"});var n=t?"@".concat(t.username):"Member";d("".concat(n," added"))}}),b=(0,D.Z)(v,2),y=b[0],x=b[1],w=(0,me.HMU)({onError:function(e){return p(e.message)},onCompleted:function(e){var t=e.removeMultiplayerUser.user,n=t?"@".concat(t.username):"Member";d("".concat(n," removed"))}}),k=(0,D.Z)(w,2),Z=k[0],j=k[1],O="Repl"===(null===s||void 0===s?void 0:s.repl.__typename)?s.repl:null,E=(0,me.SvR)({onError:function(e){p(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createMultiplayerInvite2;if(r)if("UserError"!==r.__typename){if("MultiplayerInvite"===r.__typename){var i=r.email;return(0,ct.track)(ct.events.MULTIPLAYER_INVITED,{replId:a,inviteMethod:"email"}),void d("Invited ".concat(i," via email"))}if("ReplPermission"===r.__typename){e.modify({id:e.identify({__typename:"Repl",id:a}),fields:{permissions:function(t){var n=e.writeFragment({data:r,fragment:me.L13});return[].concat((0,Bt.Z)(t),[n])}}});var o=r.user;(0,ct.track)(ct.events.MULTIPLAYER_INVITED,{replId:a,inviteMethod:"email"});var s=o?"@".concat(o.username):"Member";d("".concat(s," added"))}}else p(r.message)}}),_=(0,D.Z)(E,2),C=_[0],S=_[1],P=(0,me.Ejz)({onError:function(e){return p(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var t=e.deleteMultiplayerInvite.email;(0,ct.track)(ct.events.MP2_REMOVED_EMAIL_INVITE,{replId:a,email:t}),d("Invite for ".concat(t," deleted"))}}else p(e.deleteMultiplayerInvite.message)}}),N=(0,D.Z)(P,2),T=N[0],I=N[1];if(O&&!O.owner)throw new Error("Cannot manage members on anon repls");if(null!==O&&void 0!==O&&O.owner&&"Team"!==(null===O||void 0===O?void 0:O.owner.__typename))throw new Error("Expect repl owned by a team");var R="Team"===(null===O||void 0===O||null===(t=O.owner)||void 0===t?void 0:t.__typename)?O.owner:null,A=null!==(n=null===O||void 0===O?void 0:O.permissions.reduce((function(e,t){return t.user?[].concat((0,Bt.Z)(e),[t.user.username]):e}),[]))&&void 0!==n?n:[],L=null===O||void 0===O?void 0:O.permissions.reduce((function(e,t){if(!t.user)return e;var n=t.user;return!h||Wt.Z.filter(h,[n.username]).length>0?(null!==R&&void 0!==R&&R.members.some((function(e){var t;return(null===(t=e.user)||void 0===t?void 0:t.id)===n.id}))||e.users.push(n),e):e}),{users:[]}),B=null===O||void 0===O?void 0:O.multiplayerInvites.filter((function(e){return!h||Wt.Z.filter(h,[e.email]).length>0})),M=null===R||void 0===R?void 0:R.members.reduce((function(e,t){if(!t.user)return e;var n=t.user;if(!(!h||Wt.Z.filter(h,[n.username]).length>0))return e;var r=t.permissions&&t.permissions!==me.SV1.Member,i=null===O||void 0===O?void 0:O.permissions.find((function(e){var t;return e.user&&(null===(t=e.user)||void 0===t?void 0:t.id)===n.id}));return r?e.teamAdmins.push(n):null!==i&&void 0!==i&&i.type?e.withPermisison.push(n):e.withoutPermisison.push(n),e}),{teamAdmins:[],withPermisison:[],withoutPermisison:[]}),U=null===M||void 0===M?void 0:M.teamAdmins.some((function(e){return e.id===c})),X=(null!==(r=null===L||void 0===L?void 0:L.users.length)&&void 0!==r?r:0)+(null!==(i=null===B||void 0===B?void 0:B.length)&&void 0!==i?i:0),F=null===O||void 0===O?void 0:O.currentUserPermissions.editMultiplayers,z=null===O||void 0===O?void 0:O.currentUserPermissions.inviteGuests,H=Boolean(M&&!M.teamAdmins.length&&!M.withPermisison.length&&(!(null!==L&&void 0!==L&&L.users.length)&&!(null!==B&&void 0!==B&&B.length)&&z||!z&&!M.withoutPermisison.length)),G=K.useState(null),W=(0,D.Z)(G,2),q=W[0],Y=W[1];return(0,ge.BX)("div",{className:V.default.dynamic([["754813262",[le.j.mobileMax]]])+" root",children:[(0,ge.BX)(de.gC,{spacing:2,align:"stretch",children:[(0,ge.BX)(de.Ug,{children:[(0,ge.BX)(Ee.Z,{level:5,foreground:l?3:1,children:[F?"Add or remove members from this repl":null,l?"Loading...":null]}),F&&z&&!l&&(0,ge.tZ)("div",{"aria-label":"  Add team members or invite external guests via email or username","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip",className:V.default.dynamic([["754813262",[le.j.mobileMax]]])+" information-icon-container",children:(0,ge.tZ)(en.Z,{})})]}),z?(0,ge.tZ)($t,{existingUsernames:A,onSubmit:function(e){!!e.match(/.+@.+/)&&!S.loading?Y(e):x.loading||y({variables:{username:e,replId:a,type:"rw"}}),g("")},placeholder:F?"Search for users or invite guests":"Filter users",isDisabled:l,onChange:function(e){return g(e)}}):(0,ge.tZ)(Ht.ZP,{disabled:l,value:h,onChange:function(e){return g(e.currentTarget.value)},placeholder:F?"Filter team members to add or remove":"Filter team members"}),(0,ge.tZ)(Ot.Z,{isOpen:!!q,onRequestClose:function(){return Y(null)},children:q?(0,ge.tZ)(tn,{email:q,onInvite:function(){C({variables:{email:q,replId:a,type:"rw"}}),Y(null)},onCancel:function(){return Y(null)}}):null}),(0,ge.BX)("div",{className:V.default.dynamic([["754813262",[le.j.mobileMax]]])+" "+(jt()("multiplayers-list",{"is-empty":H})||""),children:[null!==M&&void 0!==M&&M.withPermisison.length?(0,ge.tZ)("div",{className:V.default.dynamic([["754813262",[le.j.mobileMax]]])+" list-heading",children:(0,ge.BX)(de.Ug,{align:"center",spacing:1,children:[(0,ge.tZ)(Mt.Z,{size:12}),(0,ge.BX)(ue.Z,{foreground:2,size:"small",children:[null===M||void 0===M?void 0:M.withPermisison.length," member",1===(null===M||void 0===M?void 0:M.withPermisison.length)?"":"s"," with access"]})]})}):null,null===M||void 0===M?void 0:M.withPermisison.map((function(e){return(0,ge.tZ)(Jt,{value:e.username,image:e.image,statusText:"(can edit)",type:"member",onButtonPress:U?function(){j.loading||Z({variables:{replId:a,username:e.username}})}:void 0,Icon:zt.Z},e.id)})),!!X&&(0,ge.tZ)("div",{className:V.default.dynamic([["754813262",[le.j.mobileMax]]])+" list-heading",children:(0,ge.BX)(de.Ug,{align:"center",spacing:1,children:[(0,ge.tZ)(Mt.Z,{size:12}),(0,ge.BX)(ue.Z,{foreground:2,size:"small",children:[(0,rn.Z)("guest",X,!0),"with access"]})]})}),null===L||void 0===L?void 0:L.users.map((function(e){return(0,ge.tZ)(Jt,{value:e.username,image:e.image,statusText:"(can edit)",type:"guest",onButtonPress:U?function(){j.loading||Z({variables:{replId:a,username:e.username}})}:void 0,Icon:zt.Z},e.id)})),null===B||void 0===B?void 0:B.map((function(e){return(0,ge.tZ)(Jt,{value:e.email,statusText:"(pending)",onButtonPress:U?function(){I.loading||T({variables:{replId:a,email:e.email}})}:void 0,Icon:zt.Z},e.email)})),!z&&null!==M&&void 0!==M&&M.withoutPermisison.length?(0,ge.tZ)("div",{className:V.default.dynamic([["754813262",[le.j.mobileMax]]])+" list-heading",children:(0,ge.BX)(de.Ug,{align:"center",spacing:1,children:[(0,ge.tZ)(Ut.Z,{size:12}),(0,ge.BX)(ue.Z,{foreground:2,size:"small",children:[(0,rn.Z)("member",null===M||void 0===M?void 0:M.withoutPermisison.length,!0),"without access"]})]})}):null,!z&&(null===M||void 0===M?void 0:M.withoutPermisison.map((function(e){return(0,ge.tZ)(Jt,{value:e.username,image:e.image,type:"member",onButtonPress:F?function(){x.loading||y({variables:{replId:a,username:e.username,type:"rw"}})}:void 0,Icon:Vt.Z},e.id)}))),null!==M&&void 0!==M&&M.teamAdmins.length?(0,ge.tZ)("div",{className:V.default.dynamic([["754813262",[le.j.mobileMax]]])+" list-heading",children:(0,ge.BX)(de.Ug,{align:"center",spacing:1,children:[(0,ge.tZ)(Ne.Z,{size:12}),(0,ge.tZ)(ue.Z,{foreground:2,size:"small",children:"Team admins cannot be removed from repls"})]})}):null,null===M||void 0===M?void 0:M.teamAdmins.map((function(e){return(0,ge.tZ)("div",{className:V.default.dynamic([["754813262",[le.j.mobileMax]]])+" "+(jt()("multiplayer-item",{"is-editable":F})||""),children:(0,ge.BX)(de.Ug,{align:"center",spacing:1,children:[(0,ge.tZ)(Xt.Z,{size:"s",url:e.image}),(0,ge.tZ)("div",{className:V.default.dynamic([["754813262",[le.j.mobileMax]]])+" label",children:h?(0,ge.tZ)(Gt.gr,{source:e.username,match:h}):e.username})]})},e.id)})),H?(0,ge.BX)(ue.Z,{foreground:2,align:"center",children:['No members matching "',h,'" found']}):null]}),F||l?null:(0,ge.tZ)(ue.Z,{foreground:2,size:"small",children:"Only admins can add and remove members to multiplayer"}),F&&z&&(0,ge.tZ)(nn.Z,{replId:a})]}),(0,ge.tZ)(V.default,{id:"754813262",dynamic:[le.j.mobileMax],children:[".root.__jsx-style-dynamic-selector{padding:var(--space-16);color:var(--foreground-default);}",".multiplayers-list.__jsx-style-dynamic-selector{background-color:var(--background-root);border-radius:var(--border-radius-4);height:300px;overflow-y:auto;}",".multiplayers-list.is-empty.__jsx-style-dynamic-selector{display:grid;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-16);word-break:break-word;}",".multiplayer-item.__jsx-style-dynamic-selector{padding:var(--space-4) var(--space-16);}",".multiplayer-item.is-editable.__jsx-style-dynamic-selector{padding-right:var(--space-8);}",".multiplayer-item.is-editable.__jsx-style-dynamic-selector:hover{background-color:var(--background-root);}",".list-heading.__jsx-style-dynamic-selector{padding:var(--space-16) var(--space-16) 0;}",".label.__jsx-style-dynamic-selector{margin-right:auto;}",".information-icon-container.__jsx-style-dynamic-selector{margin-left:5px;}","@media screen and (min-width:".concat(le.j.mobileMax,"px){.root.__jsx-style-dynamic-selector{padding:var(--space-48);}}")]})]})}var on=n(2876),sn=n(22526);function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function un(e){var t,n,r,i,a=e.replId,o=e.onDone,s=e.isResubmit,l=e.lastUpdated,c=e.wid,u=e.pud,d=(0,et.I0)(),p=(0,Oe.Z)().iotester,f=(0,bt.J)(c,u,"header"),m=(0,D.Z)(f,1)[0].autograder,h=(0,me.CHr)({variables:{replId:a}}),g=null!==(t="Repl"===(null===(n=h.data)||void 0===n?void 0:n.repl.__typename)&&"Team"===(null===(r=h.data.repl.owner)||void 0===r?void 0:r.__typename)&&h.data.repl.owner.hasIOTestingV2)&&void 0!==t&&t,v=g?p.lastRunAt.getTime()>l:m.currentTest===m.tests.length&&m.tests.every((function(e){return e.results})),b=(0,me.xhi)({variables:{replId:a}}).data,y="Repl"===(null===b||void 0===b?void 0:b.repl.__typename)?b.repl:null,x=(null===y||void 0===y?void 0:y.template)||null,w=(null===x||void 0===x?void 0:x.dueDate)||null,k=(new Date).toISOString();K.useEffect((function(){if(h.data&&!h.loading){var e=h.data.repl;"Repl"!==e.__typename||g||d({type:"AUTOGRADER_TESTS_RECEIVED",tests:e.ioTests.map((function(e){return cn(cn({},e),{},{expectedOutput:e.output})})),wid:c})}}),[d,h,c,g]);var Z=(0,Ft.Z)(),j=Z.showConfirm,O=Z.showError,E=(0,me.xAQ)({variables:{replId:a},onCompleted:function(e){var t=e.submitRepl;"UserError"!==t.__typename?"Repl"===t.__typename&&(j("Repl submitted"),o()):O(t.message)},onError:function(e){O(e.message)}}),_=(0,D.Z)(E,2),C=_[0],S=_[1],P=g?v&&p.lastRunDidPass:!m.running&&m.currentTest===m.tests.length&&m.tests.every((function(e){var t;return null===(t=e.results)||void 0===t?void 0:t.passed}));return(g?"Repl"===(null===(i=h.data)||void 0===i?void 0:i.repl.__typename)&&h.data.repl.ioTests.length>0:m.tests.length>0)&&!P?(0,ge.BX)("div",{className:"jsx-3151227623 root",children:[(0,ge.tZ)(Ee.Z,{level:3,align:"center",children:v?"Fix test failures before submitting":"Run tests before submitting"}),(0,ge.tZ)(ue.Z,{align:"center",children:v?"Input/Output tests did not pass.":"Input/Output tests have not been run since this repl was last changed."}),(0,ge.BX)("div",{className:"jsx-3151227623 controls",children:[(0,ge.tZ)(ce.Z,{disabled:S.loading,filled:!0,color:"primary",onClick:function(){d({type:"OPEN_SIDEPANE_BY_TYPE",wid:c,paneType:"autograder"}),o()},children:"View tests"}),(0,ge.tZ)(ce.Z,{disabled:S.loading,onClick:function(){return C()},children:"Submit anyway"})]}),(0,ge.tZ)(V.default,{id:"3151227623",children:[".root.jsx-3151227623{color:var(--foreground-default);padding:var(--space-24);display:grid;grid-gap:var(--space-24);}",".controls.jsx-3151227623{display:grid;grid-gap:var(--space-8);grid-auto-flow:column;}"]})]}):(0,ge.BX)("div",{className:"jsx-1002234268 root",children:[(0,ge.tZ)(Ee.Z,{level:3,align:"center",children:s?" Resubmit this repl":"Submit this repl"}),(0,ge.tZ)(ue.Z,{align:"center",children:s?"This will re-notify team admins about your submission.":"This will submit your repl for review and notify the team's admins."}),w&&w<k&&(0,ge.tZ)(ue.Z,{align:"center",children:(0,ge.tZ)("div",{className:"jsx-1002234268 late",children:"Note: Your submission is past the due date and will be marked late."})}),(0,ge.BX)("div",{className:"jsx-1002234268 controls",children:[(0,ge.tZ)(ce.Z,{disabled:S.loading,onClick:o,children:"Cancel"}),(0,ge.tZ)(ce.Z,{filled:!0,color:"primary",disabled:S.loading,onClick:function(){return C()},children:s?"Submit again":"Submit"})]}),(0,ge.tZ)(V.default,{id:"1002234268",children:[".root.jsx-1002234268{color:var(--foreground-default);padding:var(--space-24);display:grid;grid-gap:var(--space-24);}",".controls.jsx-1002234268{display:grid;grid-gap:var(--space-8);grid-auto-flow:column;}",".late.jsx-1002234268{color:var(--accent-negative-default);}"]})]})}function dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fn="https://docs.replit.com/misc/annotations";function mn(e){return(0,ge.BX)(Ot.Z,pn(pn({},e),{},{children:[(0,ge.BX)("div",{className:"jsx-343567331 container",children:[(0,ge.tZ)("h1",{className:"jsx-343567331",children:"Introducing Annotations"}),(0,ge.tZ)("p",{className:"jsx-343567331",children:"Annotations is a new feature that lets you leave detailed feedback on a student's code!"}),(0,ge.tZ)("div",{className:"jsx-343567331 loom-video-container",children:(0,ge.tZ)("iframe",{src:"https://www.loom.com/embed/955fb177889c4838b9332224067d4be0?autoplay=1",frameBorder:"0",allowFullScreen:!0,webkitallowfullscreen:!0,mozallowfullscreen:!0,className:"jsx-343567331 loom-video"})}),(0,ge.BX)("p",{className:"jsx-343567331",children:["To learn more, check out the"," ",(0,ge.tZ)("a",{href:fn,target:"_blank",className:"jsx-343567331",children:"docs"})]}),(0,ge.BX)("div",{className:"jsx-343567331 buttons",children:[(0,ge.tZ)("a",{href:fn,target:"_blank",className:"jsx-343567331",children:(0,ge.tZ)(ce.Z,{children:"Learn More"})}),(0,ge.tZ)(ce.Z,{color:"primary",onClick:e.onRequestClose,children:"Okay"})]})]}),(0,ge.tZ)(V.default,{id:"343567331",children:[".container.jsx-343567331{padding:var(--space-48);display:grid;grid-auto-flow:row;grid-row-gap:var(--space-16);}",".container.jsx-343567331 h1.jsx-343567331{padding:var(--space-16) 0;color:var(--foreground-default);}",".container.jsx-343567331 p.jsx-343567331{color:var(--foreground-default);}",".buttons.jsx-343567331{display:grid;grid-auto-flow:column;-webkit-box-pack:end;-webkit-justify-content:end;-ms-flex-pack:end;justify-content:end;grid-column-gap:var(--space-8);}",".buttons.jsx-343567331 a.jsx-343567331{-webkit-text-decoration:none;text-decoration:none;}",".loom-video-container.jsx-343567331{position:relative;padding-bottom:56.25%;height:0;}",".loom-video.jsx-343567331{position:absolute;top:0;left:0;width:100%;height:100%;}"]})]}))}var hn=n(68047),gn=n(56023),vn=n(84647),bn=n(37424),yn=n(49512),xn=n(223),wn=n(17513),kn=n(54916),Zn=n(82457),jn=n(70414);var On,En={name:"fjhvt3",styles:"text-decoration:italic"},_n={name:"yvwru5",styles:"align-items:start"},Cn=function(e){var t,n,r,i,a,o,s,l,c,u=e.replId,d=e.onDone,p=(0,Ft.Z)(),f=p.showConfirm,m=p.showError,h=(0,me.fuF)({variables:{replId:u},onCompleted:function(e){var t,n,r=e.repl;"Repl"===r.__typename&&null!==(t=r.origin)&&void 0!==t&&null!==(n=t.template)&&void 0!==n&&n.modelSolution&&"ReplTemplateModelSolution"===r.origin.template.modelSolution.__typename&&(O(r.origin.template.modelSolution.visibleAfterSubmitting),S(r.origin.template.modelSolution.visibleAfterPassingTests),I(r.origin.template.modelSolution.visibleAfterDueDate))}}),g=h.data,v=h.loading,b=(0,me.GA6)({onError:function(e){return m(e)},onCompleted:function(){f("Updated solution"),d()}}),y=(0,D.Z)(b,2),x=y[0],w=y[1],k=K.useState(!1),Z=(0,D.Z)(k,2),j=Z[0],O=Z[1],E=K.useState(!1),_=(0,D.Z)(E,2),C=_[0],S=_[1],P=K.useState(!1),N=(0,D.Z)(P,2),T=N[0],I=N[1],R=K.useState(),A=(0,D.Z)(R,2),L=A[0],B=A[1],M=(0,bn.H)();if(K.useEffect((function(){var e="Students can ";if(j||T||C){e+="view the solution after";var t=[];j&&t.push("submitting their project"),C&&t.push("passing all tests"),T&&t.push("the due date has passed");for(var n=0;n<t.length;n++)n>0&&(e+=",",n===t.length-1&&(e+=" and")),e+=" "+t[n];e+="."}else e+="never view the solution.";B(e)}),[j,C,T]),v)return(0,ge.tZ)(yn.Z,{css:[Zn.l0.center,"",""],children:(0,ge.tZ)(Et.Z,{})});var U="Repl"===(null===g||void 0===g?void 0:g.repl.__typename)&&"Team"===(null===(t=g.repl.owner)||void 0===t?void 0:t.__typename)&&(null===(n=g.repl.owner)||void 0===n?void 0:n.id),X="Repl"===(null===g||void 0===g?void 0:g.repl.__typename)&&(null===(r=g.repl.origin)||void 0===r||null===(i=r.template)||void 0===i?void 0:i.modelSolution);if(!X)return null;var F=X.id,z="Repl"===(null===g||void 0===g?void 0:g.repl.__typename)&&((null===(a=g.repl.origin)||void 0===a?void 0:a.ioTests.length)||(null===(o=g.repl.origin)||void 0===o||null===(s=o.unitTests)||void 0===s?void 0:s.tests.length)),V="Repl"===(null===g||void 0===g?void 0:g.repl.__typename)&&(null===(l=g.repl.origin)||void 0===l||null===(c=l.template)||void 0===c?void 0:c.dueDate);return(0,ge.tZ)("form",{onSubmit:function(e){e.preventDefault(),U&&F&&x({variables:{input:{teamId:U,solutionId:F,visibleAfterSubmitting:j,visibleAfterPassingTests:C,visibleAfterDueDate:T}}})},children:(0,ge.BX)(yn.Z,{css:[Zn.l0.colWithGap(32),Zn.l0.p(24),"",""],children:[(0,ge.tZ)(xn.h,{level:2,variant:"headerDefault",children:"Update solution"}),(0,ge.BX)(yn.Z,{css:[Zn.l0.colWithGap(16),"",""],children:[(0,ge.BX)(yn.Z,{css:[Zn.l0.rowWithGap(8),"",""],children:[(0,ge.tZ)(kn.Z,{id:M("availableAfterSubmitting"),checked:j,onChange:function(){return O(!j)}}),(0,ge.tZ)("label",{htmlFor:M("availableAfterSubmitting"),children:(0,ge.tZ)(xn.x,{children:"Available after submitting"})})]}),(0,ge.BX)(yn.Z,{css:[Zn.l0.rowWithGap(8),"",""],children:[(0,ge.tZ)(kn.Z,{id:M("availableAfterPassingTests"),checked:C,onChange:function(){return S(!C)}}),(0,ge.tZ)("label",{htmlFor:M("availableAfterPassingTests"),children:(0,ge.BX)(yn.Z,{css:[Zn.l0.rowWithGap(4),"",""],children:[(0,ge.tZ)(xn.x,{children:"Available after passing tests"}),(0,ge.BX)(xn.x,{children:["(",z?"".concat(z," ").concat((0,rn.Z)("test",z)," defined"):"no tests exist yet",")"]})]})})]}),(0,ge.BX)(yn.Z,{css:[Zn.l0.rowWithGap(8),"vertical-align:baseline;",""],children:[(0,ge.tZ)(kn.Z,{id:M("availableAfterDueDate"),checked:T,onChange:function(){return I(!T)}}),(0,ge.tZ)("label",{htmlFor:M("availableAfterDueDate"),children:(0,ge.BX)(yn.Z,{css:[Zn.l0.rowWithGap(4),"",""],children:[(0,ge.tZ)(xn.x,{children:"Available after due date"}),(0,ge.BX)(xn.x,{css:En,children:["(",V?(0,jn.p)(V):"no due date set yet",")"]})]})})]})]}),(0,ge.tZ)(yn.Z,{css:[j||C||T?Zn.l0.backgroundColor.accentPositiveDimmest:Zn.l0.backgroundColor.accentNegativeDimmest,Zn.l0.p(8),Zn.l0.borderRadius(8),"",""],children:L}),(0,ge.tZ)(yn.Z,{css:_n,children:(0,ge.tZ)(wn.zx,{stretch:!1,colorway:"primary",text:"Save",disabled:w.loading})})]})})},Sn=(On={},(0,z.Z)(On,me.Sy.PublishTemplate,"Publish project"),(0,z.Z)(On,me.Sy.EditTemplate,"Edit project"),(0,z.Z)(On,me.Sy.Submit,"Submit"),(0,z.Z)(On,me.Sy.Resubmit,"Resubmit"),(0,z.Z)(On,me.Sy.UpdateModelSolution,"Update solution"),On);function Pn(e){var t=e.cta,n=e.replId,r=e.isGroupProject,i=e.wid,a=e.pud,o=K.useState(null),s=(0,D.Z)(o,2),l=s[0],c=s[1],u=function(){return c(null)},d=(0,hn.Z)(),p=(0,Oe.Z)().fs,f=K.useState(0),m=(0,D.Z)(f,2),h=m[0],g=m[1];K.useEffect((function(){if(d&&!(0,vn.T3)(d)&&!(0,vn.sL)(d))return p.watchOtFile(d,{onChange:function(e){e.changeSource===gn.Fl.Local&&g(Date.now())}})}),[d,p,g]);var v=Boolean(l&&[me.Sy.PublishTemplate,me.Sy.EditTemplate].includes(l));return K.useEffect((function(){t===me.Sy.ReviewSubmission&&(window.localStorage.getItem("annotations/educationModalDismissed")||(c(t),window.localStorage.setItem("annotations/educationModalDismissed","true")))}),[t]),(0,ge.BX)(ge.HY,{children:[Sn[t]&&(0,ge.tZ)(ce.Z,{filled:!0,border:!1,onClick:function(){return c(t)},children:Sn[t]}),(0,ge.tZ)(Ot.Z,{isOpen:l===me.Sy.Submit||l===me.Sy.Resubmit,onRequestClose:u,children:(0,ge.tZ)(un,{replId:n,onDone:u,isResubmit:l===me.Sy.Resubmit,lastUpdated:h,wid:i,pud:a})}),(0,ge.tZ)(Ot.Z,{preventClose:!0,isOpen:v,onRequestClose:u,width:r?"large":"medium",children:(0,ge.tZ)(sn.Z,{replId:n,onDone:u})}),(0,ge.tZ)(on.Z,{isOpen:l===me.Sy.UpdateModelSolution,onRequestClose:u,maxWidth:600,children:(0,ge.tZ)(Cn,{replId:n,onDone:u})}),(0,ge.tZ)(mn,{isOpen:l===me.Sy.ReviewSubmission,onRequestClose:u})]})}var Nn=n(92362),Tn=n(91431),In=n(83457),Rn=n(47655),Dn=n(10277),An=n(70565);function Ln(){var e=(0,Oe.Z)().session;return(0,ge.tZ)("div",{className:"button-wrapper",children:(0,ge.tZ)(An.Z,{size:28,onClick:function(){e.setIsCommandBarOpen(!0)},tooltipDelay:500,alt:"Search & run commands",tooltipPlacement:"bottom-end",children:(0,ge.tZ)(Dn.Z,{})})})}var Bn=n(73073);function Mn(e){var t=e.replId,n=(0,me.X6F)({variables:{replId:t},pollInterval:8e3}),r=n.data,i=n.loading,a=(0,Ft.Z)(),o=a.showConfirm,s=a.showError,l=K.useState(!1),c=(0,D.Z)(l,2),u=c[0],d=c[1],p=(0,me.QNh)({onCompleted:function(e){var n,r=null===(n=e.addMultiplayerUser.user)||void 0===n?void 0:n.username;r&&((0,ct.track)(ct.events.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"username"}),o("Added @".concat(r)))}}),f=(0,D.Z)(p,2),m=f[0],h=f[1],g=(0,me.GkG)({onError:function(e){return s(e.message)},onCompleted:function(e){var n,r=null===(n=e.removeMultiplayerUser.user)||void 0===n?void 0:n.username;r&&((0,ct.track)(ct.events.MP2_REMOVED_USER_PERMISSION,{replId:t,username:r}),o("".concat(r," removed")))}}),v=(0,D.Z)(g,2),b=v[0],y=v[1],x=(0,me.SvR)({update:function(e,n){var r,i=null===(r=n.data)||void 0===r?void 0:r.createMultiplayerInvite2;if(i)if("UserError"!==i.__typename){if("MultiplayerInvite"===i.__typename){var a=i.email;return(0,ct.track)(ct.events.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"email"}),void o("Invited ".concat(a," via email"))}if("ReplPermission"===i.__typename){var l;e.modify({id:e.identify({__typename:"Repl",id:t}),fields:{permissions:function(t){var n=e.writeFragment({data:i,fragment:me.L13});return[].concat((0,Bt.Z)(t),[n])}}});var c=null===(l=i.user)||void 0===l?void 0:l.username;if(!c)return;(0,ct.track)(ct.events.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"email"}),o("Invited @".concat(c))}}else s(i.message)}}),w=(0,D.Z)(x,2),k=w[0],Z=w[1],j=(0,me.Ejz)({onError:function(e){return s(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var n=e.deleteMultiplayerInvite.email;(0,ct.track)(ct.events.MP2_REMOVED_EMAIL_INVITE,{replId:t,email:n}),o("invite for ".concat(n," deleted"))}}else s(e.deleteMultiplayerInvite.message)}}),O=(0,D.Z)(j,2),E=O[0],_=O[1];K.useEffect((function(){var e=h.error||Z.error;e&&(e.message.includes("reached the limit")?d(!0):s(e.message))}),[h.error,Z.error,s]);var C="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl:null,S=null===r||void 0===r?void 0:r.currentUser,P=null===C||void 0===C?void 0:C.permissions.reduce((function(e,t){return t.user?[].concat((0,Bt.Z)(e),[t.user.username]):e}),[]),N=null===C||void 0===C?void 0:C.currentUserPermissions.editMultiplayers,T=Boolean(C&&!C.permissions.length&&!C.multiplayerInvites.length),I=null!==C&&void 0!==C&&C.permissions?C.permissions.length:null;return(0,ge.BX)("div",{className:"jsx-1434523738 root",children:[(0,ge.BX)(de.gC,{spacing:2,align:"stretch",children:[N&&P&&C?(0,ge.tZ)("div",{className:"jsx-1434523738",children:(0,ge.tZ)($t,{existingUsernames:P,onSubmit:function(e){!!!e.match(/.+@.+/)||Z.loading?h.loading||m({variables:{username:e,replId:C.id,type:"rw"}}):k({variables:{email:e,replId:C.id,type:"rw"}})}})}):null,(0,ge.BX)("div",{className:"jsx-1434523738",children:[(0,ge.BX)(Ee.Z,{level:5,foreground:i?3:1,children:[null!==I&&null!==S&&void 0!==S&&S.isSubscribed?"".concat((0,rn.Z)("multiplayer",I,!0)):null,null===I||null!==S&&void 0!==S&&S.isSubscribed?null:"".concat(I,"/").concat(50," ").concat((0,rn.Z)("multiplayer",I)),i?"Loading...":null]}),!i&&!(null!==S&&void 0!==S&&S.isSubscribed)&&(0,ge.BX)(ue.Z,{size:"small",tag:"div",foreground:2,children:["Due to COVID-19, we're temporarily increasing the free multiplayer limit."," ",(0,ge.tZ)("a",{onClick:function(){return d(!0)},"aria-label":"Click to upgrade for unlimited invites","data-microtip-position":"top",role:"tooltip",className:"jsx-1434523738 info-tooltip",children:(0,ge.tZ)(en.Z,{})})]})]}),T?(0,ge.tZ)("div",{className:"jsx-1434523738 empty-list",children:(0,ge.BX)(de.Ug,{align:"center",justify:"center",children:[(0,ge.tZ)("div",{className:"jsx-1434523738",children:"No one is here"}),(0,ge.tZ)("div",{className:"jsx-1434523738",children:(0,ge.tZ)("img",{src:"/public/images/rainy-computer.png",className:"jsx-1434523738"})})]})}):(0,ge.BX)("div",{className:"jsx-1434523738 multiplayers-list",children:[null===C||void 0===C?void 0:C.permissions.map((function(e){var n=e.user,r=e.type;return n?(0,ge.BX)("div",{className:"jsx-1434523738 "+(jt()("multiplayer-item",{"is-editable":C.currentUserPermissions.editMultiplayers})||""),children:[(0,ge.tZ)(Xt.Z,{size:"s",url:n.image}),(0,ge.BX)("div",{className:"jsx-1434523738 label",children:[n.username," ",r===me.aQH.Rw?" (can edit)":null]}),C.currentUserPermissions.editMultiplayers?(0,ge.tZ)(ce.Z,{border:!1,filled:!1,"aria-label":"Remove member",role:"tooltip","data-microtip-position":"left",onClick:function(){y.loading||b({variables:{replId:t,username:n.username}})},children:(0,ge.tZ)(zt.Z,{size:12})}):null]},n.id):null})),null===C||void 0===C?void 0:C.multiplayerInvites.map((function(e){return(0,ge.BX)("div",{className:"jsx-1434523738 "+(jt()("multiplayer-item",{"is-editable":N})||""),children:[(0,ge.tZ)(Xt.Z,{size:"s"}),(0,ge.BX)("div",{className:"jsx-1434523738 label",children:[e.email," (pending)"]}),N?(0,ge.tZ)(ce.Z,{border:!1,filled:!1,"aria-label":"Remove email invite",role:"tooltip","data-microtip-position":"left",onClick:function(){_.loading||E({variables:{replId:t,email:e.email}})},children:(0,ge.tZ)(zt.Z,{size:12})}):null]},e.email)}))]})]}),(0,ge.tZ)(Bn.Z,{isOpen:u,onClose:function(){return d(!1)},trackingInfo:{context:"workspace-multiplayer-header"}}),(0,ge.tZ)(V.default,{id:"1434523738",children:[".root.jsx-1434523738{color:var(--foreground-default);}",".multiplayers-list.jsx-1434523738,.empty-list.jsx-1434523738{background-color:var(--background-root);border-radius:var(--border-radius-4);height:200px;}",".multiplayers-list.jsx-1434523738{overflow-y:auto;padding:var(--space-8) 0;}",".multiplayer-item.jsx-1434523738{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:var(--space-4) var(--space-16);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".multiplayer-item.is-editable.jsx-1434523738{padding-right:var(--space-8);}",".multiplayer-item.is-editable.jsx-1434523738:hover{background-color:var(--background-root);}",".label.jsx-1434523738{margin-right:auto;padding-left:var(--space-8);}",".info-tooltip.jsx-1434523738{display:inline-block;}",".info-tooltip.jsx-1434523738,.info-tooltip.jsx-1434523738:hover,.info-tooltip.jsx-1434523738:focus{color:var(--foreground-default);border:none;outline:none;}",".empty-list.jsx-1434523738 img.jsx-1434523738{display:block;height:200px;opacity:60%;}"]})]})}function Un(e){var t=e.replId;return(0,ge.BX)("div",{className:V.default.dynamic([["1419674637",[le.j.mobileMax]]]),children:[(0,ge.BX)(de.gC,{spacing:2,align:"stretch",children:[(0,ge.tZ)(Ee.Z,{level:4,children:"Invite"}),(0,ge.tZ)(Mn,{replId:t}),(0,ge.tZ)(nn.Z,{replId:t})]}),(0,ge.tZ)(V.default,{id:"1419674637",dynamic:[le.j.mobileMax],children:["div.__jsx-style-dynamic-selector{padding:var(--space-16);}","@media screen and (min-width:".concat(le.j.mobileMax,"px){div.__jsx-style-dynamic-selector{padding:var(--space-32);}}")]})]})}var Xn=function(e){var t=e.children,n=e.showPopover,r=(0,_e.Z)("announcement","add-guest-new-user"),i=r.shouldDisplay,a=r.register,o=r.dismiss,s=K.useState(!1),l=(0,D.Z)(s,2),c=l[0],u=l[1],d=K.useState(!1),p=(0,D.Z)(d,2),f=p[0],m=p[1];K.useEffect((function(){n&&!f&&a()}),[f,a,n]);var h=i&&!f;return(0,ge.BX)(Be.Z,{padding:-3,onClickOutside:function(){return m(!0)},positions:["bottom"],align:"center",isOpen:!!h,showArrow:!0,arrowOverrides:{arrowSize:12,arrowColor:"var(--accent-purple-default)"},children:[t,(0,ge.BX)("div",{className:"jsx-1336263942 add-guest-popover",children:[(0,ge.BX)(de.gC,{spacing:2,align:"stretch",children:[(0,ge.BX)(de.Ug,{spacing:1,children:[(0,ge.tZ)(Me.Z,{}),(0,ge.tZ)(Ee.Z,{level:5,children:"Invite guests to your repl!"})]}),(0,ge.BX)(ue.Z,{children:[" ","Add external guests to your repl for interviews and collaborative projects."," "]}),(0,ge.tZ)(de.Ug,{spacing:1,justify:"end",children:(0,ge.tZ)(ce.Z,{loading:c,onClick:function(){u(!0),(0,ct.track)(ct.events.ADD_GUEST_POPOVER_DISMISSED),o()},children:"Got it"})})]}),(0,ge.tZ)(V.default,{id:"1336263942",children:[".add-guest-popover.jsx-1336263942{border:1px solid var(--accent-purple-default);border-radius:var(--border-radius-4);background:var(--background-root);padding:var(--space-16);max-width:300px;position:relative;pointer-events:auto;}",".add-guest-popover.jsx-1336263942 [title='new']{background:var(--accent-purple-default);}",".add-guest-popover.jsx-1336263942:global([title='new']){background:var(--accent-purple-default);}"]})]})]})},Fn=n(20536),zn=n(3239),Vn=n(72922),Hn=n(92937),Gn=n(14900),Wn=n(39084),qn=n(16482);function Kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kn(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qn=60;function $n(e){var t,n,r,i,a=e.wid,o=e.pud,s=(0,et.I0)(),l=(0,ee.useRouter)(),c=(0,fe.Z)(),u=(0,Wn.e$)(qn.H.Run),d=(0,Wn.e$)(qn.H.Share),p=K.useRef(null),f=K.useState(null),m=(0,D.Z)(f,2),h=m[0],g=m[1];!function(){var e=(0,Oe.Z)().fs,t=(0,et.I0)(),n=(0,Hn.Z)();K.useEffect((function(){e.onStatusChange((function(e){e!==gn.kO.Clean&&t({type:"RESET_AUTOGRADER_DATA",wid:n})}))}),[e,n,t])}();var v=K.useState(!1),b=(0,D.Z)(v,2),y=b[0],x=b[1],w=K.useRef(y&&(null===d||void 0===d?void 0:d.isActive));K.useEffect((function(){!w.current||null!==d&&void 0!==d&&d.isActive||x(!1),w.current=y&&(null===d||void 0===d?void 0:d.isActive)}),[d,y]),K.useEffect((function(){null!==d&&void 0!==d&&d.isActive&&(y&&h?null===d||void 0===d||d.delegateTooltip(h):d.delegateTooltip(p.current))}),[d,y,h]);var k=(0,bt.J)(a,o,"header"),Z=(0,D.Z)(k,1)[0],j=Z.runstate,O=Z.loading,E=(0,Oe.Z)(),_=E.presence,C=E.replbox,S=E.debuggest,P=(0,xt.Z)({presence:_}),N=(0,zn.Z)({replbox:C}),T=K.useCallback((function(){_.getFollowedUser()&&_.unfollowUser()}),[_]),I=(0,Vn.Z)(S.mainClient),R=(0,Vn.Z)(null===I||void 0===I?void 0:I.state),A=(0,me.ggE)({variables:{id:c}}),L=A.data,B=A.refetch;if("Repl"!==(null===L||void 0===L?void 0:L.repl.__typename))return(0,ge.tZ)("header",{className:"jsx-1293497615",children:(0,ge.tZ)(V.default,{id:"1293497615",children:["header.jsx-1293497615{background-color:var(--background-default);height:".concat(Qn,"px;}")]})},"loading-header");var M=L.currentUser,U=L.repl,X=null;X="replbox"===U.lang.engine?(0,ge.tZ)(In.Z,{runState:(0,zn._)(N.runState),onClick:function(){T(),N.runState!==Fn.A.RUNNING?N.runState===Fn.A.IDLE&&((0,ct.track)(ct.events.RUN_BUTTON_CLICKED,{context:"workspace"}),N.run(),(0,ct.track)(ct.events.PROJECT_RAN,{wid:a,language:null===U||void 0===U?void 0:U.lang.id,replId:c,replTitle:null===U||void 0===U?void 0:U.title})):N.stopRun()}}):O?(0,ge.tZ)(In.Z,{runState:"loading",onClick:function(){return null}}):"stopping"===j||I&&"stopping"===R?(0,ge.tZ)(In.Z,{runState:"stopping",onClick:function(){return null}}):I&&"terminated"!==R?(0,ge.tZ)(In.Z,{runState:"running",onClick:function(){T(),I.stop()}}):"running"===j?(0,ge.tZ)(In.Z,{runState:"running",onClick:function(){T(),s({type:"STOP_EVAL",wid:a})}}):(0,ge.tZ)(In.Z,{runState:"idle",onClick:function(){(0,ct.track)(ct.events.RUN_BUTTON_CLICKED,{context:"workspace"}),T(),s({type:"RUN_REPL",wid:a})}});var F="Team"===(null===(t=U.owner)||void 0===t?void 0:t.__typename),z=Boolean("Team"===(null===(n=U.owner)||void 0===n?void 0:n.__typename)&&(null===(r=U.owner.capabilities)||void 0===r?void 0:r.isEducationPlan)),H=U.workspaceCta&&[me.Sy.Submit,me.Sy.Resubmit,me.Sy.UpdateModelSolution,me.Sy.PublishTemplate,me.Sy.EditTemplate,me.Sy.ReviewSubmission].includes(U.workspaceCta)?U.workspaceCta:null,G=!z&&U.currentUserPermissions.editMultiplayers;return(0,ge.BX)("header",{className:V.default.dynamic([["3751443095",[Qn,le.j.tabletMax,gt.X,le.j.tabletMax,le.j.mobileMax+100,le.j.mobileMax]]]),children:[(0,ge.BX)(Gn.Z,{background:"default",css:[Zn.l0.align.center,Zn.l0.flex.row,Zn.l0.height("100%"),"",""],children:[(0,ge.BX)("div",{className:V.default.dynamic([["3751443095",[Qn,le.j.tabletMax,gt.X,le.j.tabletMax,le.j.mobileMax+100,le.j.mobileMax]]])+" left",children:[(0,ge.tZ)(yt.default,{as:"/~",href:"/home",children:(0,ge.tZ)("a",{className:V.default.dynamic([["3751443095",[Qn,le.j.tabletMax,gt.X,le.j.tabletMax,le.j.mobileMax+100,le.j.mobileMax]]])+" logo-link",children:(0,ge.tZ)(vt.Z,{})})}),(0,ge.tZ)(At.Z,{repl:U,refetch:B,onUpdateRepl:function(e){var t=!!e.title&&e.title!==U.title;if(s({type:"REPL_UPDATED",wid:a,updates:e}),t){var n=(0,pt.Z)(l.query);l.push({pathname:"/replEnvironment",query:Yn(Yn({},l.query),{},{replUrl:U.url})},{pathname:U.url,query:n},{shallow:!0})}}}),(0,ge.tZ)(Tn.Z,{repl:U,canEdit:U.currentUserPermissions.containerAttach})]}),(0,ge.tZ)("div",{className:V.default.dynamic([["3751443095",[Qn,le.j.tabletMax,gt.X,le.j.tabletMax,le.j.mobileMax+100,le.j.mobileMax]]])+" center",children:(0,ge.BX)("div",{"data-cy":"ws-run-btn",className:V.default.dynamic([["3751443095",[Qn,le.j.tabletMax,gt.X,le.j.tabletMax,le.j.mobileMax+100,le.j.mobileMax]]])+" run-button-container",children:[(0,ge.tZ)("div",{ref:null===u||void 0===u?void 0:u.delegateTooltip,onClick:function(){null!==u&&void 0!==u&&u.isActive&&u.next()},className:V.default.dynamic([["3751443095",[Qn,le.j.tabletMax,gt.X,le.j.tabletMax,le.j.mobileMax+100,le.j.mobileMax]]])+" run-button-content",children:X}),null!==u&&void 0!==u&&u.isActive?null:(0,ge.tZ)("div",{className:V.default.dynamic([["3751443095",[Qn,le.j.tabletMax,gt.X,le.j.tabletMax,le.j.mobileMax+100,le.j.mobileMax]]])+" run-button-tooltip-container",children:(0,ge.tZ)("div",{className:V.default.dynamic([["3751443095",[Qn,le.j.tabletMax,gt.X,le.j.tabletMax,le.j.mobileMax+100,le.j.mobileMax]]])+" run-button-tooltip-content",children:(0,ge.tZ)(Rn.Z,{shortcut:{cmdOrCtrlKey:!0,key:"Enter"}})})})]})}),(0,ge.BX)("div",{className:V.default.dynamic([["3751443095",[Qn,le.j.tabletMax,gt.X,le.j.tabletMax,le.j.mobileMax+100,le.j.mobileMax]]])+" right",children:[P&&P.length>0?(0,ge.tZ)(Dt,{users:P}):null,null!==M&&void 0!==M&&M.isExplorer?(0,ge.tZ)("a",{href:"/account#roles",target:"_blank",className:V.default.dynamic([["3751443095",[Qn,le.j.tabletMax,gt.X,le.j.tabletMax,le.j.mobileMax+100,le.j.mobileMax]]])+" explorer-badge",children:(0,ge.tZ)(An.Z,{colorway:"negative",size:28,alt:"You are an explorer. You may see bugs or other surprising behavior!",tooltipPlacement:"bottom-end",tooltipDelay:500,children:(0,ge.tZ)(Nn.Z,{})})}):null,H?(0,ge.tZ)(Pn,{cta:H,replId:U.id,isGroupProject:!(null===(i=U.template)||void 0===i||!i.isGroupProject),wid:a,pud:o}):null,G?(0,ge.tZ)("div",{ref:p,className:V.default.dynamic([["3751443095",[Qn,le.j.tabletMax,gt.X,le.j.tabletMax,le.j.mobileMax+100,le.j.mobileMax]]]),children:(0,ge.tZ)(Xn,{showPopover:U.currentUserPermissions.inviteGuests,children:(0,ge.tZ)(wn.ZP,{onClick:function(){(0,ct.track)(ct.events.INVITE_MODAL_OPENED,{wid:a,language:U.lang.id,replId:U.id,source:"replEnvironment"}),x(!0)},iconLeft:(0,ge.tZ)(Lt.Z,{}),text:"Invite"})})}):null,(0,ge.tZ)(Ln,{})]})]}),(0,ge.tZ)(Ot.Z,{isOpen:y,onRequestClose:function(){return x(!1)},children:(0,ge.tZ)("div",{ref:g,className:V.default.dynamic([["3751443095",[Qn,le.j.tabletMax,gt.X,le.j.tabletMax,le.j.mobileMax+100,le.j.mobileMax]]]),children:F?(0,ge.tZ)(an,{replId:U.id}):(0,ge.tZ)(Un,{replId:U.id})})}),(0,ge.tZ)(V.default,{id:"3751443095",dynamic:[Qn,le.j.tabletMax,gt.X,le.j.tabletMax,le.j.mobileMax+100,le.j.mobileMax],children:["header.__jsx-style-dynamic-selector{position:fixed;top:0px;left:0px;width:100%;height:".concat(Qn,"px;z-index:101;background-color:var(--background-default);border-bottom:0.5px solid var(--background-highest);--button-width:60px;--center-width:var(--button-width);}"),"@media screen and (min-width:".concat(le.j.tabletMax,"px){header.__jsx-style-dynamic-selector{--button-width:96px;}}"),".logo-link.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:var(--foreground-default);width:32px;height:32px;}",".left.__jsx-style-dynamic-selector,.right.__jsx-style-dynamic-selector{height:100%;padding:0 var(--space-8);display:grid;grid-auto-flow:column;grid-column-gap:var(--space-8);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".left.__jsx-style-dynamic-selector{padding-left:".concat(gt.X,"px;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;}"),".right.__jsx-style-dynamic-selector{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}",".center.__jsx-style-dynamic-selector{display:none;width:var(--center-width);position:absolute;top:0;left:50%;height:100%;-webkit-transform:translatex(-50%);-ms-transform:translatex(-50%);transform:translatex(-50%);grid-auto-flow:column;grid-column-gap:var(--space-16);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".run-button-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:absolute;height:100%;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".run-cta.__jsx-style-dynamic-selector{padding:var(--space-16);color:var(--white);}",".run-button-content.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:100%;position:absolute;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-8) 0;}",".run-button-container.__jsx-style-dynamic-selector:hover .run-button-tooltip-container.__jsx-style-dynamic-selector{opacity:1;visibility:visible;-webkit-transform:translate(0,56px);-ms-transform:translate(0,56px);transform:translate(0,56px);-webkit-transition:all 0.2s ease-in-out 0.2s;transition:all 0.2s ease-in-out 0.2s;}",".run-button-tooltip-container.__jsx-style-dynamic-selector{position:relative;right:18px;-webkit-transform:translate(0,48px);-ms-transform:translate(0,48px);transform:translate(0,48px);width:100px;visibility:hidden;opacity:0;-webkit-transition:all 0.18s ease-in-out 0.05s;transition:all 0.18s ease-in-out 0.05s;}",".run-button-tooltip-content.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-8) var(--space-4);border-radius:var(--border-radius-8);background:var(--background-highest);border:1px solid var(--outline-dimmer);color:var(--foreground-default);box-shadow:var(--shadow-1);}","@media screen and (min-width:".concat(le.j.tabletMax,"px){.run-button-tooltip-container.__jsx-style-dynamic-selector{right:0px;}}"),".center.__jsx-style-dynamic-selector>div,.left.__jsx-style-dynamic-selector>div{margin:0 !important;}",".explorer-badge.__jsx-style-dynamic-selector{display:none;}","@media screen and (min-width:".concat(le.j.mobileMax+100,"px){.left.__jsx-style-dynamic-selector,.right.__jsx-style-dynamic-selector{width:50%;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;}.center.__jsx-style-dynamic-selector{display:grid;}.left.__jsx-style-dynamic-selector{padding-right:calc(var(--center-width) / 2 + var(--space-8));}.right.__jsx-style-dynamic-selector{padding-left:calc(var(--center-width) / 2 + var(--space-8));}}"),"@media screen and (min-width:".concat(le.j.mobileMax,"px){.explorer-badge.__jsx-style-dynamic-selector{display:unset;color:var(--foreground-default);border-radius:var(--border-radius-8);background-color:var(--accent-negative-dimmest);height:28px;}}")]})]})}function Jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tr(e){var t=e.wid,n=e.pud,r=e.style,i=(0,et.I0)(),a=(0,fe.Z)(),o=(0,ee.useRouter)(),s=(0,bt.J)(t,n,"header"),l=(0,D.Z)(s,1)[0],c=l.runstate,u=l.loading,d=(0,me.f7Y)({variables:{id:a}}).data,p=(0,Oe.Z)().replbox,f=(0,zn.Z)({replbox:p});if("Repl"!==(null===d||void 0===d?void 0:d.repl.__typename))return(0,ge.BX)("div",{style:r,className:"jsx-3273477858 lite-header",children:[(0,ge.BX)("div",{className:"jsx-3273477858 lite-header-cta",children:[(0,ge.tZ)(In.Z,{runState:"loading",onClick:function(){return null},lite:!0}),";"]}),(0,ge.tZ)(V.default,{id:"3273477858",children:[".lite-header.jsx-3273477858{background:var(--background-default);border-bottom:1px solid var(--outline-dimmest);height:40px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;}",".lite-header-cta.jsx-3273477858{margin-left:auto;margin-right:auto;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;width:100px;padding:var(--space-4) 0;}"]})]});var m=null,h=d.repl;m="replbox"===h.lang.engine?(0,ge.tZ)(In.Z,{lite:!0,runState:(0,zn._)(f.runState),onClick:function(){f.runState!==Fn.A.RUNNING?f.runState===Fn.A.IDLE&&(f.run(),(0,ct.track)(ct.events.PROJECT_RAN,{wid:t,language:null===h||void 0===h?void 0:h.lang.id,replId:a,replTitle:null===h||void 0===h?void 0:h.title})):f.stopRun()}}):u?(0,ge.tZ)(In.Z,{runState:"loading",onClick:function(){return null},lite:!0}):"stopping"===c?(0,ge.tZ)(In.Z,{runState:"stopping",onClick:function(){return null},lite:!0}):"running"===c?(0,ge.tZ)(In.Z,{runState:"running",onClick:function(){return i({type:"STOP_EVAL",wid:t})},lite:!0}):(0,ge.tZ)(In.Z,{runState:"idle",onClick:function(){return i({type:"RUN_REPL",wid:t})},lite:!0});var g={href:"https://replit.com".concat(h.url),target:"_blank",title:"open ".concat(h.title)},v=o.query.lite,b=h.lang,y=b.displayName,x=b.icon;return(0,ge.BX)("div",{style:r,className:"jsx-1667408490 lite-header",children:[(0,ge.tZ)("div",{className:"jsx-1667408490 lite-header-left",children:v.includes("icon")||v.includes("title")?(0,ge.BX)("a",er(er({},g),{},{className:"jsx-1667408490 "+(g&&null!=g.className&&g.className||"lite-header-title-link"),children:[v.includes("icon")?(0,ge.tZ)("img",{alt:y,title:y,src:x||void 0,className:"jsx-1667408490 lite-header-lang-icon"}):null,v.includes("title")?(0,ge.tZ)("div",{className:"jsx-1667408490 lite-header-title",children:(0,ge.tZ)("div",{className:"jsx-1667408490",children:h.title})}):null]})):null}),(0,ge.tZ)("div",{className:"jsx-1667408490 lite-header-cta",children:m}),(0,ge.tZ)("div",{className:"jsx-1667408490 lite-header-right",children:v.includes("nologo")?(0,ge.tZ)("a",er(er({},g),{},{className:"jsx-1667408490 "+(g&&null!=g.className&&g.className||"lite-header-open-link"),children:"open"})):(0,ge.BX)("a",er(er({},g),{},{className:"jsx-1667408490 "+(g&&null!=g.className&&g.className||"lite-header-logo-link"),children:["open in"," ",(0,ge.tZ)("img",{src:"/public/images/logo-small.png",className:"jsx-1667408490 lite-header-logo"})]}))}),(0,ge.tZ)(V.default,{id:"1667408490",children:[".lite-header.jsx-1667408490{background:var(--background-root);border-bottom:1px solid var(--outline-dimmest);height:40px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;}",".lite-header-title-link.jsx-1667408490{font-size:12px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;position:relative;-webkit-text-decoration:none;text-decoration:none;}",".lite-header-title.jsx-1667408490{position:relative;top:1px;display:none;max-width:100%;overflow:hidden;-webkit-text-decoration:none;text-decoration:none;}",".lite-header-title.jsx-1667408490>div.jsx-1667408490{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}",".lite-header-title-link.jsx-1667408490:hover .lite-header-title.jsx-1667408490{border-color:var(--accent-primary-default);}",".lite-header-cta.jsx-1667408490{margin-left:auto;margin-right:auto;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;width:100px;padding:var(--space-4) 0;}",".lite-header-cta.jsx-1667408490>div{margin-left:0px;height:100%;border-bottom:0 none;}",".lite-header-lang-icon.jsx-1667408490{width:20px;margin-right:4px;}",".lite-header-left.jsx-1667408490,.lite-header-right.jsx-1667408490{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;width:calc(50% - 50px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:10px;padding-right:10px;}",".lite-header-right.jsx-1667408490{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}",".lite-header-logo-link.jsx-1667408490{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;border-bottom:none;color:var(--foreground-dimmest);font-size:14px;-webkit-text-decoration:none;text-decoration:none;}",".lite-header-logo-link.jsx-1667408490:hover{color:var(--accent-primary-default);}",".lite-header-logo.jsx-1667408490{width:60px;margin-left:4px;}","@media screen and (min-width:400px){.lite-header-title.jsx-1667408490{display:block;}.lite-header-logo.jsx-1667408490{width:80px;margin-left:8px;}}"]})]})}function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ir=(0,mt.$)({primary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0,autograder:{running:!1,currentTest:0,tests:[]}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ft.qg:return rr(rr({},e),t.initialState);case ft.hq:return rr(rr({},e),{},{loading:!0});case ft.FG:return rr(rr({},e),{},{loading:!1});case"WORKSPACE_WILL_UNMOUNT":return rr({},e);case"SET_AUTOGRADER_TESTS":return t.tests?rr(rr({},e),{},{autograder:rr(rr({},e.autograder),{},{tests:t.tests})}):e;case"AUTOGRADER_STARTED":return rr(rr({},e),{},{autograder:rr(rr({},e.autograder),{},{running:!0,currentTest:0})});case"AUTOGRADER_STOPPED":return rr(rr({},e),{},{autograder:rr(rr({},e.autograder),{},{running:!1})});case"AUTOGRADER_TEST_COMPLETED":return rr(rr({},e),{},{autograder:rr(rr({},e.autograder),{},{tests:t.IOTests||e.autograder.tests,currentTest:e.autograder.currentTest+1})});case"RESET_AUTOGRADER_DATA":return rr(rr({},e),{},{autograder:rr(rr({},e.autograder),{},{currentTest:0})});default:return e}},runstate:ht.Z});function ar(e){return(0,ee.useRouter)().query.lite?(0,ge.tZ)(tr,rr({},e)):(0,ge.tZ)($n,rr({},e))}var or=n(70917),sr=n(21145),lr=n(11111),cr=n(47127),ur=n(24243),dr=n(50133),pr=n(18618);var fr=/(^.*language.*=.*?)(".*").*$/m,mr=/(^.*run.*=.*?)(".*").*$/m;function hr(e){if(!e.match(fr)||!e.match(mr))return null;var t=fr.exec(e),n=mr.exec(e);if(!t||!n)return null;var r,i,a=(0,D.Z)(t,3),o=a[1],s=a[2],l=(0,D.Z)(n,3),c=l[1],u=l[2];try{r=JSON.parse(s),i=JSON.parse(u)}catch(d){return null}return"string"!==typeof r||"string"!==typeof i?null:{languageBefore:o,language:r,languageIndex:t.index,runBefore:c,run:i,runIndex:n.index}}function gr(e){var t=e.contents,n=e.language,r=e.run,i=hr(t);if(!i)throw new Error("Parse error");var a=[];a.push(i.languageIndex+i.languageBefore.length+1),i.language.length&&a.push({d:i.language.length}),a.push(n);var o=[];return o.push(i.runIndex+i.runBefore.length+1),i.run.length&&o.push({d:i.run.length}),o.push(r),i.runIndex>i.languageIndex?sr.type.compose(o,a):sr.type.compose(a,o)}function vr(e){return br.apply(this,arguments)}function br(){return(br=(0,A.Z)(G().mark((function e(t){var n,r,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fs,r=t.run,i=t.language,e.abrupt("return",new Promise((function(e,t){var a=n.watchOtFile(".replit",{onReady:function(n){var o=n.initialContent,s=n.writeOps,l=o.toString("utf8");if(!hr(l))return t(new Error("Parse error")),void a();s(gr({contents:l,run:r,language:i})),e(a)},onError:t})})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yr(e){var t=e.children;return(0,ge.BX)(yn.Z,{css:(0,or.iv)({width:"100% ",height:"100%",backgroundColor:"var(--background-default)",color:Zn.TV.foregroundDefault,fontSize:Zn.TV.fontSizeDefault,overflowY:"auto"},"",""),children:[(0,ge.tZ)(yn.Z,{css:[Zn.l0.flex.row,"",""],children:(0,ge.BX)(yn.Z,{css:[Zn.l0.flex.row,Zn.l0.align.center,Zn.l0.p(4),"font-family:var(--font-family-code);background-color:var(--accent-primary-dimmest);color:var(--accent-primary-default);",""],children:[(0,ge.tZ)("img",{css:[Zn.l0.mr(8),"height:10px;width:8px;",""],src:"/public/images/prompt.png"}),(0,ge.tZ)(ue.Z,{size:"small",children:".replit"})]})}),(0,ge.tZ)(yn.Z,{css:[Zn.l0.p(16),"flex:1 1 auto;overflow-y:auto;",""],children:t})]})}var xr={name:"1ww443i",styles:"max-width:200px"};function wr(e){var t=e.isApplyingConfig,n=K.useState("Unknown"===se().get(e.initialLanguage).displayName?"bash":e.initialLanguage),r=(0,D.Z)(n,2),i=r[0],a=r[1],o=(0,dr.Y)(e.initialRun,(function(e){if(!e)return{message:"add a run command"}}));return(0,ge.BX)("form",{css:(0,or.iv)({fontFamily:Zn.TV.fontFamilyCode},"",""),onSubmit:function(t){t.preventDefault(),o.value?e.onSubmit({language:i,run:o.value}):o.validate()},children:[(0,ge.BX)(yn.Z,{css:[Zn.l0.pt(16),"",""],children:[(0,ge.tZ)("label",{css:[Zn.l0.pb(8),"",""],htmlFor:"lang-sel",children:"select language"}),(0,ge.tZ)(yn.Z,{css:xr,children:(0,ge.tZ)(cr.ZP,{disabled:t,initialSelectedItem:se().get(i),placeholder:"Language",onSelect:function(e){e&&a(e.key)}})})]}),(0,ge.BX)(yn.Z,{css:["max-width:400px;",Zn.l0.pt(32),Zn.l0.colWithGap(8),"",""],children:[(0,ge.tZ)("label",{htmlFor:"run-sel",children:"configure the run button"}),(0,ge.tZ)(Ht.ZP,{disabled:t,id:"run-sel",type:"text",value:o.value,style:{padding:"8px",fontFamily:Zn.TV.fontFamilyCode},placeholder:"enter command",onChange:function(e){o.setValue(e.currentTarget.value)}}),o.error?(0,ge.BX)(yn.Z,{css:[{color:"var(--accent-negative-default)",fontSize:Zn.TV.fontSizeSmall},Zn.l0.rowWithGap(4),Zn.l0.align.center,"",""],children:[(0,ge.tZ)(pr.Z,{size:12}),(0,ge.tZ)(yn.Z,{children:o.error.message})]}):null,(0,ge.tZ)("a",{css:[{fontSize:Zn.TV.fontSizeSmall},"",""],target:"_blank",href:"https://docs.replit.com/repls/dot-replit",children:"not sure what to do?"})]}),(0,ge.tZ)(yn.Z,{css:[Zn.l0.flex.row,Zn.l0.pt(32),"",""],children:(0,ge.tZ)(ce.Z,{color:"primary",type:"submit",disabled:t||Boolean(o.error),children:t?"saving...":"done"})}),(0,ge.tZ)(Ot.Z,{isOpen:!1,preventClose:!0,onRequestClose:function(){},children:(0,ge.tZ)(yn.Z,{css:[Zn.l0.borderRadius(16),Zn.l0.p(32),"background-color:var(--background-default);",""],children:(0,ge.BX)(de.gC,{align:"center",spacing:1,children:[(0,ge.tZ)(Et.Z,{}),(0,ge.BX)(ue.Z,{children:["Upgrading to ",se().get(i).displayName]})]})})})]})}function kr(){return(0,ge.BX)(yn.Z,{css:(0,or.iv)({fontFamily:Zn.TV.fontFamilyCode},"",""),children:[(0,ge.tZ)(yn.Z,{children:".replit looks a lil messed up :/"}),(0,ge.tZ)("a",{css:[Zn.l0.pt(8),{fontSize:Zn.TV.fontSizeSmall},"",""],target:"_blank",href:"https://docs.replit.com/repls/dot-replit",children:"view docs"})]})}function Zr(){return(0,ge.tZ)(yn.Z,{children:(0,ge.BX)("p",{css:(0,or.iv)({fontFamily:Zn.TV.fontFamilyCode},"",""),children:["initializing run configuration",(0,ge.tZ)(lr.Z,{style:{color:"var(--foreground-default)"}})]})})}var jr=function(){var e,t=(0,fe.Z)(),n=(0,Oe.Z)().fs,r=(0,me.HmU)({variables:{replId:t}}),i="Repl"===(null===(e=r.data)||void 0===e?void 0:e.repl.__typename)?r.data.repl:null,a=function(e,t){var n=K.useState(null),r=(0,D.Z)(n,2),i=r[0],a=r[1];return K.useEffect((function(){var n=!1;return e.readFile(t).then((function(e){n||a(e)})),function(){n=!0}}),[e,t]),i}(n,".replit"),o=K.useState(!1),s=(0,D.Z)(o,2),l=s[0],c=s[1],u=(0,me.Fn2)(),d=(0,D.Z)(u,1)[0],p=function(){var e=(0,A.Z)(G().mark((function e(r){var i,a,o,s,l;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.language,a=r.run,c(!0),(0,ct.track)(ct.events.REPL_FROM_REPO_RUN_CONFIG_COMPLETED),e.next=5,n.readFile(".replit");case 5:if(o=e.sent,s=function(){},!o.error){e.next=12;break}return e.next=10,n.writeFile(".replit",ur.Z.from(['language = "'.concat(i,'"'),'run = "'.concat(a,'"')].join("\n")));case 10:e.next=15;break;case 12:return e.next=14,vr({fs:n,run:a,language:i});case 14:s=e.sent;case 15:return e.next=17,n.flush();case 17:return e.next=19,n.persist({skipDebounce:!0});case 19:return s(),l={id:t,language:i},e.next=23,d({variables:{input:l}});case 23:window.location.replace(window.location.pathname);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(!i||!a)return(0,ge.tZ)(yr,{children:(0,ge.tZ)(Zr,{})});if(null!==a&&void 0!==a&&a.error)return(0,ge.tZ)(yr,{children:(0,ge.tZ)(kr,{})});var f=hr(a.content.toString("utf8"));return f?(0,ge.tZ)(yr,{children:(0,ge.tZ)(wr,{initialLanguage:f.language,initialRun:f.run,isApplyingConfig:l,onSubmit:p})}):(0,ge.tZ)(yr,{children:(0,ge.tZ)(kr,{})})},Or=n(38320);function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cr=function(e){var t=e.navItems,n=e.activePanePuds;return K.useEffect((function(){var e=document.body;e&&e.classList&&(t.some((function(e){return n.includes(e.pud)}))?e.classList.remove("sidenav-closed"):e.classList.add("sidenav-closed"))}),[t,n]),(0,ge.BX)("div",{className:"jsx-3085448894 side-nav",children:[(0,ge.tZ)("div",{className:"jsx-3085448894 side-nav-options",children:t.map((function(e){return(0,ge.tZ)(Sr,_r({},e),e.type)}))}),(0,ge.tZ)(V.default,{id:"3085448894",children:[".side-nav.jsx-3085448894{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;background-color:var(--background-default);border-top-left-radius:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);border-right:1px solid var(--background-higher);}",".side-nav-options.jsx-3085448894{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;height:100%;padding:var(--space-4) 0;}",".side-nav-active-pane.jsx-3085448894{-webkit-flex:1;-ms-flex:1;flex:1;height:100%;overflow:hidden;}"]})]})},Sr=function(e){var t=e.icon?e.icon:Or[e.svg],n=e.iconWrapper,r=K.useState(!0),i=(0,D.Z)(r,2),a=i[0],o=i[1],s={"data-testid":"sidenav-".concat(e.type),"aria-label":e.tooltip,"data-microtip-position":"right",role:"tooltip"};return(0,ge.BX)("div",_r(_r({onClick:function(){e.onClick()}},n?{}:s),{},{className:"jsx-1201232229 "+(jt()("side-nav-item",{"side-nav-item-active":e.isActive})||""),children:[n?(0,ge.tZ)(n,{pud:e.pud,wid:e.wid,isVisible:a,onDismiss:function(){return o(!1)},tooltipProps:s,className:"jsx-1201232229",children:(0,ge.tZ)("div",{onClick:function(){return o(!1)},className:"jsx-1201232229 side-nav-item-img",children:(0,ge.tZ)(t,{className:"jsx-1201232229"})})}):(0,ge.tZ)("div",{className:"jsx-1201232229 side-nav-item-img",children:(0,ge.tZ)(t,{className:"jsx-1201232229"})}),(0,ge.tZ)(V.default,{id:"1201232229",children:[".side-nav-item.jsx-1201232229{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;border-radius:var(--border-radius-4);height:calc(var(--space-48) - var(--space-8));width:calc(var(--space-48) - var(--space-8));margin-bottom:var(--space-4);}",".side-nav-item.jsx-1201232229:hover{background:var(--background-higher);}",".side-nav-item.jsx-1201232229:active{background:var(--background-higher);}",".side-nav-item-active.jsx-1201232229{background:var(--accent-primary-dimmest);color:var(--foreground-default);}",".side-nav-item-img.jsx-1201232229{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:20px;width:20px;color:var(--foreground-dimmest);}",".side-nav-item-img.jsx-1201232229 svg.jsx-1201232229{height:100%;width:100%;}",".side-nav-item.jsx-1201232229:hover .side-nav-item-img.jsx-1201232229,.side-nav-item-active.jsx-1201232229 .side-nav-item-img.jsx-1201232229{color:var(--accent-primary-strongest);}"]})]}))};function Pr(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Nr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nr(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ir(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tr(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rr=function(e){var t=e.wid,n=e.pud,r=(0,bt.J)(t,n,"sidenav"),i=(0,D.Z)(r,1)[0],a=i.activePanePuds,o=i.navItems,s=(0,et.I0)();return(0,ge.tZ)(Cr,{activePanePuds:a,navItems:o.map((function(e){return{type:e.pluginType,wid:t,pud:e.pud,onClick:function(){return s(function(e){var t=e.wid,n=e.pud,r=e.forPud;return function(e,i){i().workspace[t].plugins[n].state.activePanePuds.includes(r)?e(Dr({wid:t,pud:n,forPud:r})):e(Ar({wid:t,pud:n,forPud:r}))}}({wid:t,pud:n,forPud:e.pud}))},isActive:a.includes(e.pud),svg:e.svg,tooltip:e.tooltip,icon:e.icon,iconWrapper:e.iconWrapper}}))})};function Dr(e){var t=e.wid,n=e.pud,r=e.forPud;return function(e,i){var a=i().workspace[t].layout;e((0,ft.fc)(Ir({property:void 0,wid:t},dt.Od(a,r)))),e({type:"ON_SIDEPANE_CLOSE",wid:t,pud:n,forPud:r})}}function Ar(e){var t=e.wid,n=e.pud,r=e.forPud;return function(e,i){var a=i().workspace[t].layout,o=i().workspace[t].plugins[n].state.activePanePuds,s=dt.Bp(a,n);if(s){for(var l=dt.QK(a,dt.J9(s));"split"===l.type;)l=l.left;"pud"in l&&o.includes(l.pud)&&e(Dr({wid:t,pud:n,forPud:l.pud})),a=i().workspace[t].layout;var c=i().workspace[t].plugins[n].state.savedPos;e((0,ft.fc)(Ir({property:void 0,wid:t},dt.$T(a,r,"leftOf",dt.J9(s),{position:c})))),(0,ct.track)(ct.events.SIDEPANE_PLUGIN_OPENED,{plugin:r}),e({type:"ON_SIDEPANE_OPEN",wid:t,activePanePud:r})}}}function Lr(e,t,n){switch(n.type){case ft.tK:return function(e){var t=e.wid,n=e.pud,r=e.paneType;return function(e,i){var a,o=Pr(i().workspace[t].plugins[n].state.navItems);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(s.pluginType===r)return void e(Ar({wid:t,pud:n,forPud:s.pud}))}}catch(l){o.e(l)}finally{o.f()}}}({wid:e,pud:t,paneType:n.paneType});case"SET_SPLIT_POSITION":return function(e){var t=e.wid,n=e.pud,r=e.position,i=e.path;return 0===r?function(e,r){var a=r().workspace[t],o=a.layout,s=a.plugins[n].state,l=dt.QK(o,i);"left"in l&&"pud"in l.left&&s.activePanePuds.includes(l.left.pud)&&e(Dr({wid:t,pud:n,forPud:l.left.pud}))}:100===r?function(e,r){var a=r().workspace[t],o=a.layout,s=a.plugins[n].state,l=dt.QK(o,i);"right"in l&&"pud"in l.right&&s.activePanePuds.includes(l.right.pud)&&e(Dr({wid:t,pud:n,forPud:l.right.pud}))}:function(e,a){var o=a().workspace[t],s=o.layout,l=o.plugins[n].state,c=dt.QK(s,i);"left"in c&&"pud"in c.left&&l.activePanePuds.includes(c.left.pud)&&e({type:"SET_SAVED_POSITION",position:r,pud:n,wid:t})}}({wid:e,pud:t,position:n.position,path:n.path});case"OPEN_SIDE_NAV_ITEM":return Ar({wid:e,pud:t,forPud:n.navItem.pud});case"REMOVE_SIDE_NAV_ITEM":return function(r,i){(0,bt.Z)(i(),e,t,"sidenav").activePanePuds.includes(n.navItemPud)&&r(Dr({wid:e,pud:t,forPud:n.navItemPud}))};default:return null}}function Br(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{navItems:[],activePanePuds:[],savedPos:15},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ft.qg:return Ir(Ir({},e),t.initialState);case"PLUGIN_CLOSED":var n=t.closedPud;return Ir(Ir({},e),{},{activePanePuds:e.activePanePuds.filter((function(e){return e!==n}))});case"ON_SIDEPANE_CLOSE":var r=t.forPud;return Ir(Ir({},e),{},{activePanePuds:e.activePanePuds.filter((function(e){return e!==r}))});case"ON_SIDEPANE_OPEN":return e.activePanePuds.includes(t.activePanePud)?e:Ir(Ir({},e),{},{activePanePuds:[].concat((0,Bt.Z)(e.activePanePuds),[t.activePanePud])});case"SET_SAVED_POSITION":return Ir(Ir({},e),{},{savedPos:t.position});case"ADD_SIDE_NAV_ITEM":if(e.navItems.some((function(e){return e.pud===t.navItem.pud})))return e;if("index"in t){if(t.index>e.navItems.length)throw new Error("Sidenav index out of range");return Ir(Ir({},e),{},{navItems:[].concat((0,Bt.Z)(e.navItems.slice(0,t.index)),[t.navItem],(0,Bt.Z)(e.navItems.slice(t.index)))})}return Ir(Ir({},e),{},{navItems:[].concat((0,Bt.Z)(e.navItems),[t.navItem])});case"REMOVE_SIDE_NAV_ITEM":var i=e.navItems.filter((function(e){return e.pud!==t.navItemPud}));return i.length===e.navItems.length?e:Ir(Ir({},e),{},{navItems:i});default:return e}}var Mr=n(35334),Ur=n(91772),Xr=n(1861),Fr=n(31711),zr=n(60314),Vr=n(44116),Hr=n(29179),Gr=n(18890);var Wr=function(e){var t=e.wid,n=e.language,r=e.tabIndex,i=e.filePath,a=e.onClick,o=e.onClose,s=e.isActiveFile,l=(0,Oe.Z)(),c=l.session,u=l.fs,d=(0,Vr.c)({item:{type:zr.z.FileHeaderTab,path:i,isFolder:!1},type:zr.z.FileHeaderTab}),p=(0,D.Z)(d,2)[1],f=(0,Ur.L)({accept:[gn.Tv.File,zr.z.FileNode,zr.z.FileHeaderTab],collect:function(e){var t,n=null===(t=e.getItem())||void 0===t?void 0:t.isFolder;return{isOver:e.isOver()&&!n}},drop:function(e){if(e&&!e.isFolder){var a=e.path;a!==i&&(c.openFile(a,{tabIndex:r}),(0,ct.track)(ct.events.FILE_HEADER_TAB_REPLACED,{wid:t,language:n,tabIndex:r}))}}}),m=(0,D.Z)(f,2),h=m[0],g=m[1],v=function(e,t){return e?"var(--background-default)":t?"var(--background-higher)":"var(--background-root)"}(s,h.isOver),b=K.useState(!1),y=(0,D.Z)(b,2),x=y[0],w=y[1],k=i.split("/"),Z=k.pop(),j=k.join("/"),O=function(e){var t=e.path,n=e.initialExpanded,r=(0,Oe.Z)().fs;return(0,Gr.Z)({path:t,initialExpanded:n,fs:r})}({path:j.length>0?j:".",initialExpanded:!0}).children,E=null===O||void 0===O?void 0:O.filter((function(e){return e.filename!==Z}));return(0,ge.BX)("div",{ref:function(e){p(e),g(e)},onClick:a,className:V.default.dynamic([["3231529517",[v,s?"var(--foreground-default)":"var(--foreground-dimmer)",s?"var(--shadow-1)":"none",s?"auto":"var(--background-root)"]]])+" "+(jt()("file-header-tab",{first:0===r})||""),children:[(0,ge.tZ)("span",{onDoubleClick:function(){w(!0)},className:V.default.dynamic([["3231529517",[v,s?"var(--foreground-default)":"var(--foreground-dimmer)",s?"var(--shadow-1)":"none",s?"auto":"var(--background-root)"]]])+" file-path",children:x?(0,ge.tZ)(Hr.Z,{onSubmit:function(e){var t=j.length>0?j+"/"+e:e;u.moveFile(i,t),w(!1)},onCancel:function(){w(!1)},loading:!1,siblings:E||[],parentPath:j,type:gn.Tv.File,initialValue:Z,rename:!0}):i}),(0,ge.tZ)(ce.Z,{className:"close-file-button",size:"small",border:!1,filled:!1,Icon:zt.Z,onClick:o}),(0,ge.tZ)(V.default,{id:"3231529517",dynamic:[v,s?"var(--foreground-default)":"var(--foreground-dimmer)",s?"var(--shadow-1)":"none",s?"auto":"var(--background-root)"],children:[".file-header-tab.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:0 var(--space-24) 0 var(--space-8);cursor:pointer;height:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:relative;background-color:".concat(v,";color:").concat(s?"var(--foreground-default)":"var(--foreground-dimmer)",";box-shadow:").concat(s?"var(--shadow-1)":"none",";min-width:var(--space-80);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;border-top-right-radius:var(--border-radius-4);border-top-left-radius:var(--border-radius-4);}"),".sidenav-closed .file-header-tab.first{border-top-left-radius:0px;}",".close-file-button{opacity:0.7;position:absolute;right:var(--space-4);padding:2px !important;color:var(--foreground-dimmer) !important;}",".file-header-tab.__jsx-style-dynamic-selector:hover{background-color:".concat(s?"auto":"var(--background-root)",";color:var(--foreground-default);}"),".file-header-tab.__jsx-style-dynamic-selector:hover .file-path{color:var(--foreground-default);}",".file-header-tab.__jsx-style-dynamic-selector:hover .close-file-button{opacity:1;}",".close-file-button:hover{color:var(--foreground-default) !important;}",".file-path.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;}",".spacer.__jsx-style-dynamic-selector{width:var(--space-8);}"]})]})},qr=function(e){var t=e.text;return(0,ge.BX)("div",{className:"jsx-2757879686 empty",children:[(0,ge.tZ)(ue.Z,{size:"small",foreground:2,children:t}),(0,ge.tZ)(V.default,{id:"2757879686",children:[".empty.jsx-2757879686{background-color:var(--background-default);height:100%;min-width:var(--space-80);padding:var(--space-8) var(--space-16);border-top-right-radius:var(--border-radius-4);border-top-left-radius:var(--border-radius-4);}"]})]})},Kr=n(32930),Yr=n(54619),Qr=n(34940);function $r(e){var t=e.isOn,n=e.onChange;return(0,ge.BX)("div",{className:"jsx-814415010 toggle-container",children:[(0,ge.BX)(de.Ug,{spacing:1,align:"center",wrap:"nowrap",children:[(0,ge.tZ)(ue.Z,{size:"small",children:"Preview"}),(0,ge.tZ)(Qr.Z,{isOn:t,onChange:n})]}),(0,ge.tZ)(V.default,{id:"814415010",children:[".toggle-container.jsx-814415010{background-color:var(--background-default);padding:4px var(--space-8);border-top-left-radius:var(--border-radius-4);border-top-right-radius:var(--border-radius-4);}"]})]})}var Jr=n(73349),ei=n(81529),ti=n(35604),ni=n(68563);function ri(e){var t=e.id,n=e.username,r=e.color,i=(0,Oe.Z)().presence,a=(0,me.qC4)({variables:{ids:[t]},ssr:!1}).data;if(!a)return null;var o=a.usersByIds,s=(0,D.Z)(o,1)[0].image;return(0,ge.BX)("div",{className:V.default.dynamic([["2308562916",[r]]])+" following-indicator",children:[(0,ge.BX)(de.Ug,{wrap:"nowrap",className:"stack",spacing:"var(--space-4)",children:[(0,ge.tZ)(de.gC,{className:"stack",align:"center",justify:"center",children:(0,ge.tZ)(kt,{id:t,username:n,image:s,color:r,size:22})}),(0,ge.tZ)(de.gC,{className:"text-container",align:"center",justify:"center",children:(0,ge.BX)(ue.Z,{className:"following-text",children:["Observing ",n]})}),(0,ge.tZ)(de.gC,{className:"stack",align:"center",justify:"center",children:(0,ge.tZ)(ce.Z,{size:"small",filled:!1,border:!1,textColor:r,onClick:function(){i.unfollowUser()},children:(0,ge.tZ)(zt.Z,{})})})]}),(0,ge.tZ)(V.default,{id:"2308562916",dynamic:[r],children:[".following-indicator.__jsx-style-dynamic-selector{height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8);}",".following-indicator.__jsx-style-dynamic-selector .stack{height:100%;max-width:100%;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;overflow:clip;}",".following-indicator.__jsx-style-dynamic-selector .text-container{height:100%;margin-right:-2px;}",".following-indicator.__jsx-style-dynamic-selector .following-text{color:".concat(r,";white-space:nowrap;}")]})]})}function ii(){var e=function(){var e=(0,Oe.Z)().presence,t=K.useState(e.getFollowingUsers()),n=(0,D.Z)(t,2),r=n[0],i=n[1];return K.useEffect((function(){return i(e.getFollowingUsers()),e.onFollowingUsersChanged((function(e){i(e.followingUsers)}))}),[e]),r}();return 0===e.length?null:1===e.length?(0,ge.tZ)(ai,{user:e[0]}):(0,ge.BX)("div",{className:"jsx-2812325962 followed-indicator",children:[(0,ge.BX)(ue.Z,{children:[e.length," users are observing you"]}),(0,ge.tZ)(V.default,{id:"2812325962",children:[".followed-indicator.jsx-2812325962{white-space:nowrap;height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}"]})]})}function ai(e){var t=e.user,n=(0,me.qC4)({variables:{ids:[t.id]},ssr:!1}).data;if(!n)return null;var r=n.usersByIds,i=(0,D.Z)(r,1)[0].image,a=t.id,o=t.username,s=t.color;return(0,ge.BX)("div",{className:"jsx-1146426626 followed-indicator",children:[(0,ge.BX)(de.Ug,{wrap:"nowrap",align:"center",className:"stack",spacing:"var(--space-4)",children:[(0,ge.tZ)(kt,{id:a,username:o,image:i,color:s,size:22}),(0,ge.tZ)(ue.Z,{className:"username",children:o}),(0,ge.tZ)("div",{className:"jsx-1146426626 text",children:(0,ge.tZ)(ue.Z,{children:"is observing you"})})]}),(0,ge.tZ)(V.default,{id:"1146426626",children:[".followed-indicator.jsx-1146426626{height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8);}",".text.jsx-1146426626{white-space:nowrap;}",".followed-indicator.jsx-1146426626 .stack{height:100%;}",".followed-indicator.jsx-1146426626 .username{overflow:clip;max-width:150px;display:inline-block;text-overflow:ellipsis;}"]})]})}var oi=n(24541),si=n(68270),li=function(e){var t,n=e.style,r=e.wid,i=e.pud,a=(0,Kr.Fg)(),o=(0,fe.Z)(),s=(0,Oe.Z)(),l=s.session,c=s.fs,u=s.presence,d=(0,Yr.Z)().openFiles,p=(0,hn.Z)(),f=(0,Jr.Z)(),m=(0,ni.Z)(),h=(0,ti.Z)(),g=(0,Gr.Z)({fs:c,path:ei.Q,initialExpanded:!0}).loading,v=(0,me.IqK)({variables:{replId:o}}).data,b="Repl"===(null===v||void 0===v?void 0:v.repl.__typename)?v.repl.language:"",y=(0,et.v9)((function(e){var t=(0,bt.Z)(e,r,i,"fileheader").filestatus;if(!p||!b)return!0;var n=t[p];return n===Fr.t.Unloaded||n===Fr.t.Loading})),x="md"===(0,vn.r6)(p||""),w=K.useCallback((function(){(0,ct.track)(ct.events.MARKDOWN_PREVIEW_TOGGLE_CLICKED,{isOn:Boolean(f)}),l.setPreviewedFile(f?null:p)}),[l,f,p]),k=d.map((function(e,t){return(0,ge.tZ)(Wr,{wid:r,language:b,filePath:e,tabIndex:t,onClick:function(){e!==p&&(l.openFile(e),m&&u.unfollowUser())},onClose:function(e){e.stopPropagation(),l.closeTab(t),(0,ct.track)(ct.events.FILE_HEADER_TAB_CLOSED,{wid:r,language:b})},isActiveFile:e===p},t)})),Z=K.useRef(null),j=null===(t=Z.current)||void 0===t?void 0:t.osInstance(),O=K.useRef(0),E=K.useRef(0),_=(0,Ur.L)({accept:[gn.Tv.File,zr.z.FileNode,zr.z.FileHeaderTab],collect:function(e){var t,n=null===(t=e.getItem())||void 0===t?void 0:t.isFolder;return{isOver:e.isOver({shallow:!0})&&!n}},canDrop:function(e){return!e.isFolder},drop:function(e,t){if(e&&!e.isFolder&&!t.didDrop()){var n=d.length;l.openFile(e.path,{tabIndex:n}),(0,si.Z)({replId:o,action:"newTab",source:"dragdrop"})}}}),C=(0,D.Z)(_,2),S=C[0],P=C[1],N=a===Kr.V2.replitLight?"os-theme-dark":"os-theme-light",T=g?"Loading files...":"No files open";return(0,ge.BX)("div",{ref:P,style:n,className:V.default.dynamic([["2059541836",[S.isOver?"var(--background-higher)":"var(--background-root)",h?"0 0 0 3px ".concat(h):"0",m?"inset(-4px -4px 0px -4px)":"none",S.isOver?"var(--background-higher)":"var(--background-root)"]]])+" file-header",children:[(0,ge.tZ)(Xr.E,{className:N,options:{overflowBehavior:{y:"hidden"},scrollbars:{autoHide:"leave"}},onWheel:function(e){if(j&&0!==e.deltaY&&0===e.deltaX){var t=e.deltaY<0?-1:1,n=E.current!==t?j.scroll().position.x:O.current,r=25*t,i=j.scroll().max.x;O.current=Math.max(0,Math.min(i,n-r)),E.current=t;window.requestAnimationFrame((function e(){if(j){var t=j.scroll().position.x,n=O.current-t,r=Math.round(t+n/10);0!==n&&(j.scroll({x:r}),window.requestAnimationFrame(e))}}))}},ref:Z,children:(0,ge.tZ)("div",{className:V.default.dynamic([["2059541836",[S.isOver?"var(--background-higher)":"var(--background-root)",h?"0 0 0 3px ".concat(h):"0",m?"inset(-4px -4px 0px -4px)":"none",S.isOver?"var(--background-higher)":"var(--background-root)"]]])+" file-header-name",children:k.length>0?k:(0,ge.tZ)(qr,{text:T})})}),y&&(0,ge.tZ)("div",{className:V.default.dynamic([["2059541836",[S.isOver?"var(--background-higher)":"var(--background-root)",h?"0 0 0 3px ".concat(h):"0",m?"inset(-4px -4px 0px -4px)":"none",S.isOver?"var(--background-higher)":"var(--background-root)"]]])+" loading-wrapper",children:(0,ge.tZ)("div",{className:V.default.dynamic([["2059541836",[S.isOver?"var(--background-higher)":"var(--background-root)",h?"0 0 0 3px ".concat(h):"0",m?"inset(-4px -4px 0px -4px)":"none",S.isOver?"var(--background-higher)":"var(--background-root)"]]])+" file-header-loading-bar"})}),m?null:(0,ge.tZ)(ii,{}),y||!p||m?null:(0,ge.tZ)(oi.Z,{filePath:p,replLanguage:b}),m?(0,ge.tZ)(ri,{id:m.id,username:m.username,color:m.color}):null,x&&!m?(0,ge.tZ)($r,{isOn:Boolean(f),onChange:w}):null,(0,ge.tZ)(V.default,{id:"2059541836",dynamic:[S.isOver?"var(--background-higher)":"var(--background-root)",h?"0 0 0 3px ".concat(h):"0",m?"inset(-4px -4px 0px -4px)":"none",S.isOver?"var(--background-higher)":"var(--background-root)"],children:[".file-header.__jsx-style-dynamic-selector{position:relative;z-index:10;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:48px;width:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;background-color:".concat(S.isOver?"var(--background-higher)":"var(--background-root)",";border-top-right-radius:var(--border-radius-4);border-top-left-radius:var(--border-radius-4);box-shadow:").concat(h?"0 0 0 3px ".concat(h):"0",";-webkit-clip-path:").concat(m?"inset(-4px -4px 0px -4px)":"none",";clip-path:").concat(m?"inset(-4px -4px 0px -4px)":"none",";}"),".file-header.__jsx-style-dynamic-selector .os-host{height:100%;-webkit-flex:auto;-ms-flex:auto;flex:auto;min-width:0;}",".os-content-glue{height:50px !important;}",".file-header.__jsx-style-dynamic-selector .os-scrollbar-handle{max-width:300px;}",".file-header-name.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;background-color:".concat(S.isOver?"var(--background-higher)":"var(--background-root)",";color:var(--foreground-dimmer);font-size:var(--font-size-default);height:100%;text-align:center;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;}"),".loading-wrapper.__jsx-style-dynamic-selector{position:absolute;bottom:0;left:0;right:0;height:2px;overflow:hidden;}",".file-header-loading-bar.__jsx-style-dynamic-selector{width:40px;height:2px;position:absolute;bottom:0;left:0;background:var(--background-higher);-webkit-animation:loading-bar-move-__jsx-style-dynamic-selector 2.5s ease-in-out 0s infinite;animation:loading-bar-move-__jsx-style-dynamic-selector 2.5s ease-in-out 0s infinite;-webkit-animation-fill-mode:forward;animation-fill-mode:forward;}","@-webkit-keyframes loading-bar-move-__jsx-style-dynamic-selector{0%{left:-7%;}100%{left:105%;}}","@keyframes loading-bar-move-__jsx-style-dynamic-selector{0%{left:-7%;}100%{left:105%;}}"]})]})},ci=(0,mt.$)({filestatus:Fr.Z}),ui=n(73935),di=n(91296),pi=n.n(di),fi=n(93096),mi=n.n(fi),hi=n(74298),gi=n(20552),vi=n(14147);function bi(e){if(null!==e)return vi.Z.get(e)}function yi(e){if(null!==e)return vi.Z.get(e)}function xi(e){return vi.Z.safeGet(e)}var wi=n(25514),ki=n(74029),Zi=n(89107),ji=n(20493);function Oi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ei(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oi(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _i=(0,mt.$)({primary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{activeLineDecorations:[],didDisconnect:!1,editorHandle:null,externalCursors:{},filePath:void 0,keyModeHandle:null,lite:!1,modelHandle:null,peekDefinitionResolvers:{},statusBarHandle:null,viewState:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ft.qg:return Ei(Ei({},e),t.initialState);case"MOVE_FILE":return e.filePath?e.filePath===t.path?Ei(Ei({},e),{},{filePath:t.to}):(0,hi.yr)(t.path,e.filePath)?Ei(Ei({},e),{},{filePath:(0,hi.hk)(t.path,t.to,e.filePath)}):e:e;case"REGISTER_MODEL_HANDLE":return t.filePath!==e.filePath?e:Ei(Ei({},e),{},{modelHandle:t.modelHandle});case"SAVE_VIEW_STATE":return Ei(Ei({},e),{},{viewState:t.viewState});case"REGISTER_MONACO_EDITOR_HANDLE":return Ei(Ei({},e),{},{editorHandle:t.editorHandle});case"REGISTER_STATUS_BAR_HANDLE":return Ei(Ei({},e),{},{statusBarHandle:t.statusBarHandle});case"REGISTER_KEYMODE_HANDLE":return Ei(Ei({},e),{},{keyModeHandle:t.keyModeHandle});case"FILE_LOADED":return Ei(Ei({},e),{},{didDisconnect:!1});case"LOADING_GOVAL_STARTED":return Ei(Ei({},e),{},{didDisconnect:!0});case"SET_ACTIVE_LINE_DECORATIONS":return Ei(Ei({},e),{},{activeLineDecorations:t.decorations});case"REGISTER_PEEK_DEFINITION_RESOLVER":return Ei(Ei({},e),{},{peekDefinitionResolvers:Ei(Ei({},e.peekDefinitionResolvers),{},(0,z.Z)({},t.path,t.resolver))});case"ADD_FILE_CURSOR":return t.path!==e.filePath?e:Ei(Ei({},e),{},{externalCursors:Ei(Ei({},e.externalCursors),{},(0,z.Z)({},t.cursor.id,t.cursor))});case"REMOVE_FILE_CURSOR":if(t.path!==e.filePath)return e;var n=Ei({},e.externalCursors);return delete n[t.id],Ei(Ei({},e),{},{externalCursors:n});case"FILE_UNLOAD":return Ei(Ei({},e),{},{externalCursors:{}});default:return e}},preferences:wi.c,files:Zi.Z,repl:ki.E,workingDirectory:ji.Y,runstate:ht.Z,filesSnapshot:function(e,t){return"OT_FILE_OP"===t.type?e:(0,Zi.Z)(e,"MONACO_CONFIRM_OT"===t.type?{type:"OT_FILE_OP",op:t.op,path:t.path,wid:t.wid,changeSource:"editor"}:t)}}),Ci=n(97510),Si=n(11395),Pi=n(40447);function Ni(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ti(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ti(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ii(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ri(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ii(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ii(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Di(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,F.Z)(e);if(t){var i=(0,F.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,X.Z)(this,n)}}var Ai=Ci.Z,Li=Promise.resolve();Li=Promise.all([n.e(3662),n.e(3608),n.e(5144)]).then(n.bind(n,85144)).then((function(e){Ai=e.default}));var Bi="REGISTER_MODEL_HANDLE",Mi="REGISTER_STATUS_BAR_HANDLE",Ui=!1,Xi=function(e,t){return Math.round((t?1.5:1.35)*e)},Fi=function(e){return 50+3*(e-8)},zi=function(e){var t;return(t={},(0,z.Z)(t,Kr.V2.replitLight,"replit-light"),(0,z.Z)(t,Kr.V2.replitSpooky,"replit-spooky"),(0,z.Z)(t,Kr.V2.replitDark,"replit-dark"),t)[e]||"replit-dark"},Vi=function(e){(0,U.Z)(n,e);var t=Di(n);function n(e){var r;return(0,L.Z)(this,n),r=t.call(this,e),(0,z.Z)((0,M.Z)(r),"rootRef",void 0),(0,z.Z)((0,M.Z)(r),"mouseMoveTimeout",void 0),(0,z.Z)((0,M.Z)(r),"_editorRan",void 0),(0,z.Z)((0,M.Z)(r),"handleWindowResize",pi()((function(){var e=r.props.editorHandle,t=vi.Z.get(e);t&&t.layout&&t.layout()}),250)),(0,z.Z)((0,M.Z)(r),"handleUnfollowEvent",pi()((function(){var e=r.props.presence;e.getFollowedUser()&&e.unfollowUser()}),250)),(0,z.Z)((0,M.Z)(r),"EditorComponent",Ai),(0,z.Z)((0,M.Z)(r),"registerEditor",(function(e){var t=r.props,n=t.wid,i=t.preferences,a=t.editorHandle,o=t.filePath,s=vi.Z.get(a);s&&s.dispose&&s.dispose(),r.props.dispatch(function(e){var t=e.wid,n=e.editorHandle;return{type:ft.yL,wid:t,editorHandle:n}}({wid:n,editorHandle:e?vi.Z.getHandle(e):null})),e&&(window.monaco.editor.setTheme(zi((0,Kr.gz)())),e.updateOptions({fontSize:i.fontSize,wordWrap:i.wrapping?"on":"off",quickSuggestions:i.codeIntelligence}),e.onDidFocusEditorWidget((function(){Ui=!0})),e.onDidChangeCursorSelection((function(t){if(e){var i=e.getModel();r.props.dispatch({wid:n,type:"UPDATE_FILE_CURSORS",path:o,selections:e.getSelections().map((function(e){var t=e.getPosition(),n=t.column,r=t.lineNumber;return{position:i.getOffsetAt(t),rawPosition:{column:n,lineNumber:r},selectionStart:i.getOffsetAt(e.getStartPosition()),selectionEnd:i.getOffsetAt(e.getEndPosition())}}))})}})))})),(0,z.Z)((0,M.Z)(r),"registerStatusBarHandle",(function(e){var t=r.props,n=t.wid,i=t.pud,a=t.preferences;r.props.dispatch(function(e){var t=e.wid,n=e.statusBarHandle;return{type:Mi,wid:t,statusBarHandle:n}}({wid:n,statusBarHandle:e?vi.Z.getHandle(e):null})),e&&r.props.dispatch(Ki({wid:n,pud:i,keyboardHandler:a.keyboardHandler}))})),(0,z.Z)((0,M.Z)(r),"openEditor",(function(e){var t=r.props,n=t.editorHandle,i=t.wid,a=t.filePath,o=t.workingDirectory,s=vi.Z.get(n);if(!s)throw new Error("Editor not registered");if(!e.resource.path.startsWith(o))return s;var l=e.resource.path.replace(o+"/","");l!==a&&r.props.dispatch((0,ft.ZB)({wid:i,path:l,newTab:void 0}));var c=Ri(Ri({},s.saveViewState()),{},{cursorState:{inSelectionMode:e.options.selection.startLineNumber!==e.options.selection.endLineNumber||e.options.selection.startColumn!==e.options.selection.endColumn,selectionStart:{lineNumber:e.options.selection.startLineNumber,column:e.options.selection.startColumn},position:{lineNumber:e.options.selection.endLineNumber,column:e.options.selection.endColumn}}});return s.restoreViewState(c),s.revealLine(e.options.selection.startLineNumber),s})),r.rootRef=K.createRef(),r}return(0,B.Z)(n,[{key:"componentDidMount",value:function(){var e=this;if(window.addEventListener("resize",this.handleWindowResize),!this.rootRef.current)throw new Error("Expected editor ref");this.rootRef.current.addEventListener("wheel",this.handleUnfollowEvent),this.rootRef.current.addEventListener("keydown",this.handleUnfollowEvent),this.rootRef.current.addEventListener("click",this.handleUnfollowEvent),this.EditorComponent===Ci.Z&&Li.then((function(){e.EditorComponent=Ai,e.forceUpdate()}))}},{key:"componentWillUnmount",value:function(){if(window.removeEventListener("resize",this.handleWindowResize),!this.rootRef.current)throw new Error("Expected editor ref");this.rootRef.current.removeEventListener("wheel",this.handleUnfollowEvent),this.rootRef.current.removeEventListener("keydown",this.handleUnfollowEvent),this.rootRef.current.removeEventListener("click",this.handleUnfollowEvent)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if("running"===this.props.runstate&&"running"===e.runstate&&this._editorRan){var t=this.props.editorHandle,n=vi.Z.get(t);n&&n.focus&&n.focus(),this._editorRan=!1}}},{key:"render",value:function(){var e=this,t=this.props,n=t.style,r=t.wid,i=t.pud,a=t.followedUsersColor,o=t.showExamplesPlaceholder,s=t.preferences,l=t.isMac,c=t.fileLoaded,u=t.filePath,d=t.didDisconnect,p=t.hasDAP,f=this.EditorComponent;return(0,ge.tZ)(Wn.xW,{stepId:qn.H.Editor,children:(0,ge.BX)("div",{style:n,ref:this.rootRef,className:V.default.dynamic([["1218996329",[a?"0 3px 0 3px ".concat(a):"0",s.keyboardHandler?"auto":"none",s.fontSize,Fi(s.fontSize)+(p?24:0),Xi(s.fontSize,l)]]])+" monaco-editor-plugin",children:[o&&(0,ge.tZ)("div",{className:V.default.dynamic([["1218996329",[a?"0 3px 0 3px ".concat(a):"0",s.keyboardHandler?"auto":"none",s.fontSize,Fi(s.fontSize)+(p?24:0),Xi(s.fontSize,l)]]])+" placeholder",children:(0,ge.tZ)(Si.Z,{})}),(0,ge.tZ)("div",{className:V.default.dynamic([["1218996329",[a?"0 3px 0 3px ".concat(a):"0",s.keyboardHandler?"auto":"none",s.fontSize,Fi(s.fontSize)+(p?24:0),Xi(s.fontSize,l)]]])+" monaco-editor-plugin-wrapper",children:(0,ge.tZ)(f,{openShell:function(){e.props.dispatch({type:"OPEN_SHELL",wid:e.props.wid})},pud:i,registerEditor:this.registerEditor,onRun:function(){e._editorRan=!0},openEditor:this.openEditor,getModelFromUri:function(t){return e.props.dispatch(function(e){var t=e.wid,n=e.pud,r=e.uri;return function(e,i){var a=window.monaco.editor.getModel(r);return a?Promise.resolve({model:a,shouldDispose:function(){var e,a=(0,bt.Z)(i(),t,n,"editor").monaco;return!(null!==(e=a.files[Hi(a.workingDirectory,r)])&&void 0!==e&&e.loaded)}}):new Promise((function(i,a){e({type:"REGISTER_PEEK_DEFINITION_RESOLVER",wid:t,pud:n,path:r.path,resolver:{resolve:i,reject:a}}),e({type:"DOWNLOAD_FILE_CONTENT_REQUEST",wid:t,path:r.path})}))}}({wid:r,pud:i,uri:t}))},createAnnotation:function(t){var n=t.indexStart,r=t.indexEnd;e.props.dispatch({type:"CREATE_ANNOTATION",wid:e.props.wid,indexStart:n,indexEnd:r,path:u})},className:V.default.dynamic([["1218996329",[a?"0 3px 0 3px ".concat(a):"0",s.keyboardHandler?"auto":"none",s.fontSize,Fi(s.fontSize)+(p?24:0),Xi(s.fontSize,l)]]])},r+"-monaco")}),!c&&!d&&(0,ge.tZ)(Ci.Z,{}),c&&this.props.editorHandle?(0,ge.tZ)("div",{ref:this.registerStatusBarHandle,className:V.default.dynamic([["1218996329",[a?"0 3px 0 3px ".concat(a):"0",s.keyboardHandler?"auto":"none",s.fontSize,Fi(s.fontSize)+(p?24:0),Xi(s.fontSize,l)]]])+" monaco-editor-plugin-keybinds-status"}):null,(0,ge.tZ)(Kr.Tv,{onChange:function(e){window.monaco&&window.monaco.editor.setTheme(zi(e))}}),(0,ge.tZ)(V.default,{id:"1218996329",dynamic:[a?"0 3px 0 3px ".concat(a):"0",s.keyboardHandler?"auto":"none",s.fontSize,Fi(s.fontSize)+(p?24:0),Xi(s.fontSize,l)],children:[".monaco-editor-plugin.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;z-index:3;box-shadow:".concat(a?"0 3px 0 3px ".concat(a):"0",";}"),".monaco-editor-plugin-wrapper.__jsx-style-dynamic-selector{position:relative;height:100%;width:100%;}",".monaco-editor-plugin.__jsx-style-dynamic-selector .toggle-container{opacity:0;-webkit-transition:opacity 0.3s ease-in;transition:opacity 0.3s ease-in;}",".monaco-editor-plugin-keybinds-status.__jsx-style-dynamic-selector{display:".concat(s.keyboardHandler?"auto":"none",";font-family:'PT Mono',monospace;font-weight:bold;background-color:var(--background-default);color:var(--foreground-default);}"),".monaco-editor-plugin-keybinds-status.__jsx-style-dynamic-selector input{outline:none;border:none;background:transparent;color:var(--foreground-default);font-family:'PT Mono',monospace;}",".editor-wrapper.__jsx-style-dynamic-selector{height:100%;width:100%;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:inline;-ms-flex-direction:inline;flex-direction:inline;}",".placeholder.__jsx-style-dynamic-selector{position:absolute;z-index:1;font-size:".concat(s.fontSize,"px;left:").concat(Fi(s.fontSize)+(p?24:0),"px;line-height:").concat(Xi(s.fontSize,l),"px;right:0;top:2px;pointer-events:none;overflow:hidden;}"),".editor-loading-overlay.__jsx-style-dynamic-selector{position:absolute;right:0;top:0;height:100%;width:100%;background-color:var(--background-root);overflow:hidden;padding:30px;}",".editor-loading-overlay.__jsx-style-dynamic-selector>svg{max-width:640px;min-width:500px;height:auto;}"]})]})})}}]),n}(K.Component);function Hi(e,t){return decodeURIComponent(t.path.replace(new RegExp("^".concat(e,"/")),""))}function Gi(e){return{type:"SAVE_VIEW_STATE",wid:e.wid,pud:e.pud,viewState:e.viewState}}function Wi(e){return{type:"REGISTER_KEYMODE_HANDLE",wid:e.wid,keyModeHandle:e.keyModeHandle}}function qi(e){var t=e.wid,n=e.pud,r=e.activeLine;return function(e,i){var a=(0,bt.Z)(i(),t,n,"editor").monaco,o=a.modelHandle,s=a.editorHandle,l=a.activeLineDecorations,c=bi(s),u=yi(o);if(u&&c){var d=u.deltaDecorations(l,r?[{range:new window.monaco.Range(r,1,r,1),options:{inlineClassName:"replit-monaco-editor-debugger",isWholeLine:!0}}]:[]);e({type:"SET_ACTIVE_LINE_DECORATIONS",wid:t,pud:n,decorations:d})}}}function Ki(e){var t=e.wid,r=e.pud,i=e.keyboardHandler;return function(e,a){var o=(0,bt.Z)(a(),t,r,"editor").monaco,s=o.editorHandle,l=o.statusBarHandle,c=o.keyModeHandle,u=bi(s);if(!u)throw new Error("expected editor to be loaded");var d=ui.findDOMNode(vi.Z.safeGet(l));if(!d)throw new Error("expected statusbar to be rendered");d.textContent="";var p=c&&vi.Z.get(c);p&&p.dispose(),null===i?e(Wi({wid:t,keyModeHandle:null})):"vim"===i?Promise.all([n.e(5092),n.e(3608),n.e(6993)]).then(n.bind(n,46447)).then((function(n){var r=n.initVimMode(u,d);e(Wi({wid:t,keyModeHandle:vi.Z.getHandle(r)}))})):"emacs"===i&&Promise.all([n.e(3608),n.e(3238)]).then(n.bind(n,23238)).then((function(n){var r=new n.EmacsExtension(u);r.onDidMarkChange((function(e){d.textContent=e?"Mark Set!":"Mark Unset"})),r.onDidChangeKey((function(e){d.textContent=e})),r.start(),e(Wi({wid:t,keyModeHandle:vi.Z.getHandle(r)}))}))}}function Yi(e){var t=e.wid,n=e.pud,r=e.path;return function(e,i){var a=(0,bt.Z)(i(),t,n,"editor").monaco,o=a.modelHandle,s=a.filePath;if(s&&(s===r||(0,hi.yr)(r,s))){var l=yi(o);l&&!l.isDisposed()&&(l.dispose(),e({type:Bi,wid:t,filePath:s,modelHandle:null}))}}}function Qi(e){var t=e.wid,n=e.pud,r=e.activeFile;return function(e,i){var a,o=i().workspace[t].plugins,s=(0,bt.Z)(i(),t,n,"editor").monaco,l=s.filePath,c=s.viewState,u=s.modelHandle,d=s.editorHandle,p=s.lite,f=s.files;if(l===r){var m=bi(d);if(m){var h=yi(u);if(h){for(var g=0,v=Object.keys(o);g<v.length;g++){var b=v[g],y=o[b];if("editor"===y.type&&y.state.monaco.modelHandle){var x=vi.Z.get(y.state.monaco.modelHandle);if(x&&m.getModel()===x){e(Gi({wid:t,pud:b,viewState:m.saveViewState()}));break}}}m.setModel(h),c&&m.restoreViewState(c);var w=l&&(null===(a=f[l])||void 0===a?void 0:a.loaded);m.updateOptions({readOnly:!w}),p&&!Ui||setTimeout((function(){return m.focus()}))}}}}}function $i(e){var t=e.wid,n=e.pud;return function(e,r){var i=r().workspace[t].activeFile,a=(0,bt.Z)(r(),t,n,"editor").monaco,o=a.filePath,s=a.modelHandle,l=a.editorHandle,c=a.preferences,u=a.files,d=a.externalCursors,p=a.repl,f=a.workingDirectory;if(o&&bi(l)){var m=yi(s);if(!m||m.isDisposed()){var h="",g=u[o];null!==g&&void 0!==g&&g.loaded&&(h=ur.Z.from(g.content).toString());var v=window.monaco.Uri.from({scheme:"file",path:"".concat(f,"/").concat(o)}),b=window.monaco.editor.getModel(v);b&&b.dispose();var y=se().get(p.language),x=null,w=(0,vn.r6)(o);["ts","tsx"].includes(w)?x=y.hasLanguageServer||p.language.startsWith("nix")?"replit-ts":"typescript":"js"===w&&(x="nodejs"===p.language||p.language.startsWith("nix")?"replit-js-v".concat(gi.E9):"javascript"),(b=window.monaco.editor.createModel(h,x||void 0,v)).setEOL(0);var k=mi()((function(){e((0,ft.R$)({wid:t,eventKey:"WS_TYPED",properties:{fileExt:w},trackOnce:!1})),window.__SOCIAL_VIEW_FORK&&(window.__SOCIAL_VIEW_FORK=void 0,(0,ct.track)(ct.events.SOCIAL_VIEW_FORK_MODIFIED,{language:p.language,replId:p.id}))}),6e4),Z=b.getValue(),j=b.onDidChangeContent((function(i){var a=i.changes;if(b.__externalChange)Z=b.getValue();else{var o,s=Ni(a);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=(0,bt.Z)(r(),t,n,"editor").monaco,u=c.files,d=c.filePath;if(!d)return;var p="",f=u[d];null!==f&&void 0!==f&&f.loaded&&(p=ur.Z.from(f.content).toString());var m=[],h=0;if(l.rangeOffset>0){for(var g=Z.slice(0,l.rangeOffset).split(b.getEOL()),v=0;v<g.length&&(h+=g[v].length,v!==g.length-1);v++){h+="\r\n"===p.slice(h,h+2)?2:1}m.push(h)}if(l.rangeLength>0){for(var y=Z.slice(l.rangeOffset,l.rangeOffset+l.rangeLength).split(b.getEOL()),x=h,w=0;w<y.length&&(h+=y[w].length,w!==y.length-1);w++){h+="\r\n"===p.slice(h,h+2)?2:1}m.push({d:h-x})}l.text&&m.push(l.text),na({monacoChanges:a,changeIndex:a.indexOf(l),filePath:d,fileContent:p,monacoContent:b.getValue(),prevMonacoValue:Z,ops:m}),k(),e({wid:t,type:"OT_FILE_OP",op:m,path:d,changeSource:"editor"}),Z=Z.slice(0,l.rangeOffset)+l.text+Z.slice(l.rangeOffset+l.rangeLength)}}catch(j){s.e(j)}finally{s.f()}Z!==b.getValue()&&st.$e((function(e){e.setExtras({monacoChanges:a,prevValue:Z,monacoContent:b.getValue()}),st.Tb(new Error("Expected prevValue to match model.getValue"))}))}})),O=b.dispose.bind(b);b.dispose=function(){j.dispose(),O()},b.updateOptions({insertSpaces:c.indentIsSpaces,tabSize:c.indentSize});var E=vi.Z.getHandle(b);e({type:Bi,wid:t,filePath:o,modelHandle:E}),i===o&&e(Qi({wid:t,pud:n,activeFile:i}));for(var _=0,C=Object.values(d);_<C.length;_++){var S=C[_];e(ea({wid:t,pud:n,path:o,cursor:S}))}return b}i===o&&e(Qi({wid:t,pud:n,activeFile:i}))}}}var Ji={};function ea(e){var t=e.wid,n=e.pud,r=e.cursor,i=e.path;return function(e,a){var o,s=a().services.presence,l=(0,bt.Z)(a(),t,n,"editor").monaco,c=l.modelHandle,u=l.editorHandle;if(l.filePath===i&&c&&u){if("string"!==typeof r.id)throw new Error("Expected cursor ID to be defined");var d=xi(c),p=function(e){return vi.Z.safeGet(e)}(u);d._replit_cursorDecorations=d._replit_cursorDecorations||{};var f=d._replit_cursorDecorations,m=d.getPositionAt(r.position||0),h=f[r.id]||[],g=(null===r||void 0===r||null===(o=r.user)||void 0===o?void 0:o.name)||"",v=s.getFollowedUser();v&&v.username===g&&p.revealPositionInCenter(m,window.monaco.editor.ScrollType.Smooth);var b=[{range:window.monaco.Range.fromPositions(m),options:{className:"cursor-"+g.replace(/_/g,"-"),hoverMessage:{value:g,isTrusted:!1},stickiness:window.monaco.editor.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges}}],y=Ji[g],x=Date.now()-y,w=!y||x>3e4||x<2e3;if(w&&(b.push({range:window.monaco.Range.fromPositions(m),options:{className:"cursor-tag-"+g.replace(/_/g,"-"),stickiness:window.monaco.editor.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges}}),(!y||x>3e4)&&(Ji[g]=Date.now())),r.selectionStart===r.position&&r.selectionEnd===r.position||"number"!==typeof r.selectionStart||"number"!==typeof r.selectionEnd||b.push({range:window.monaco.Range.fromPositions(d.getPositionAt(r.selectionStart),d.getPositionAt(r.selectionEnd)),options:{className:"selection-"+g.replace(/_/g,"-"),stickiness:window.monaco.editor.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges}}),d._replit_cursorDecorations[r.id]=d.deltaDecorations(h,b),w){var k=d._replit_cursorDecorations[r.id][1];setTimeout((function(){d.isDisposed()||d.deltaDecorations([k],[])}),2e3)}}}}function ta(e,t,n){return n.type===ft.i7||n.type===ft.Rm||"RESIZE_EDITOR"===n.type?function(e){var t=e.wid,n=e.pud;return function(e,r){var i=bi((0,bt.Z)(r(),t,n,"editor").monaco.editorHandle);i&&i.layout&&(i.layout(),setTimeout((function(){return i.layout()}),50))}}({wid:e,pud:t}):"UPDATE_WORKING_DIRECTORY"===n.type?function(e){var t=e.wid,n=e.pud;return function(e,r){var i=r().workspace[t],a=i.plugins,o=i.activeFile,s=a[n].state.monaco,l=s.editorHandle,c=s.modelHandle,u=s.filePath,d=s.workingDirectory,p=bi(l),f=yi(c);if(f&&p&&f.uri.path.replace(new RegExp("/".concat(u,"$")),"")!==d){o===u&&e(Gi({wid:t,pud:n,viewState:p.saveViewState()}));var m=f._commandManager;f.dispose(),e({type:Bi,wid:t,filePath:u,modelHandle:null});var h=e($i({wid:t,pud:n}))._commandManager;h.currentOpenStackElement=m.currentOpenStackElement,h.past=m.past,h.future=m.future}}}({wid:e,pud:t}):n.type===ft.zT?function(e){var t=e.wid,n=e.pud;return function(e,r){var i=(0,bt.Z)(r(),t,n,"editor").monaco.filePath;i&&e(Yi({wid:t,pud:n,path:i}))}}({wid:e,pud:t}):n.type===ft.yL?$i({wid:e,pud:t}):"OPEN_FILE"===n.type?Qi({wid:e,pud:t,activeFile:n.path}):"FILE_LOADED"===n.type||"FILE_CACHE_HIT"===n.type||"SCROLL_TO_FOLLOWED_USERS_CURSOR"===n.type?function(e){var t=e.wid,n=e.pud,r=e.path;return function(e,i){var a=i(),o=a.workspace,s=a.services,l=o[t].activeFile,c=(0,bt.Z)(i(),t,n,"editor").monaco,u=c.editorHandle,d=c.modelHandle,p=c.filePath,f=c.files,m=c.externalCursors;if(r===p){var h=yi(d);if(h){h.__externalChange=!0;var g="",v=f[p];null!==v&&void 0!==v&&v.loaded&&(g=ur.Z.from(v.content).toString("utf8")),h.applyEdits([{forceMoveMarkers:!1,range:h.getFullModelRange(),text:g}]),h.__externalChange=!1;var b=bi(u);if(b&&p===l){b.setSelection({startColumn:1,startLineNumber:1,endColumn:1,endLineNumber:1}),b.updateOptions({readOnly:!1});var y=s.presence.getFollowedUser();if(!y)return;for(var x=0,w=Object.values(m);x<w.length;x++){var k,Z=w[x];if((null===Z||void 0===Z||null===(k=Z.user)||void 0===k?void 0:k.name)===y.username){var j=h.getPositionAt(Z.position||0);return void b.revealPositionInCenter(j,window.monaco.editor.ScrollType.Smooth)}}}}}}}({wid:e,pud:t,path:n.path}):"FILE_UNLOAD"===n.type?function(e){var t=e.wid,n=e.pud,r=e.path;return function(e,i){var a=i().workspace[t].activeFile,o=(0,bt.Z)(i(),t,n,"editor").monaco,s=o.editorHandle,l=o.modelHandle,c=o.filePath;if(r===c){var u=yi(l);if(u){if(u._replit_cursorDecorations&&Object.keys(u._replit_cursorDecorations).length)for(var d=0,p=Object.keys(u._replit_cursorDecorations);d<p.length;d++){var f=p[d];u.deltaDecorations(u._replit_cursorDecorations[f],[]),delete u._replit_cursorDecorations[f]}e($i({wid:t,pud:n}));var m=bi(s);m&&c===a&&(m.setSelection({startColumn:1,startLineNumber:1,endColumn:1,endLineNumber:1}),m.updateOptions({readOnly:!0}))}}}}({wid:e,pud:t,path:n.path}):"OT_FILE_OP"===n.type?"editor"===n.changeSource?function(r,i){(0,bt.Z)(i(),e,t,"editor").monaco.filePath===n.path&&r(Ri(Ri({},n),{},{type:"MONACO_CONFIRM_OT"}))}:function(e){var t=e.wid,n=e.pud,r=e.path,i=e.op;return function(e,a){var o=(0,bt.Z)(a(),t,n,"editor").monaco,s=o.filePath,l=o.modelHandle,c=o.filesSnapshot,u=o.editorHandle;if(s===r&&l){var d="",p=c[s];null!==p&&void 0!==p&&p.loaded&&(d=ur.Z.from(p.content).toString());var f=xi(l),m=(0,Bt.Z)(i),h=0,g=0;for(f.__externalChange=!0;m.length>0;){var v=m.shift();if("number"===typeof v){var b=d.slice(g,g+v).split(/\r\n/g).length-1;g+=v,h+=v-b}else if("object"===typeof v){var y=f.getPositionAt(h),x=d.slice(g,g+v.d).split(/\r\n/g).length-1,w=f.getPositionAt(h+v.d-x);f.applyEdits([{range:new window.monaco.Range(y.lineNumber,y.column,w.lineNumber,w.column),text:"",forceMoveMarkers:!0}]),d=d.slice(0,g)+d.slice(g+v.d)}else{if("string"!==typeof v)throw new Error("Unexpected TextOp");!function(){var e=f.getPositionAt(h),t=bi(u),n=null;t&&t.getModel()===f&&(n=t.getSelections()),f.applyEdits([{range:new window.monaco.Range(e.lineNumber,e.column,e.lineNumber,e.column),text:v,forceMoveMarkers:!0}]),d=d.slice(0,g)+v+d.slice(g),g+=v.length;var r=v.split(/\r\n/g).length-1;if(h+=v.length-r,t&&n&&n.length){var i=t.getSelections(),a=!1,o=n.map((function(t,n){return t.getEndPosition().equals(e)?(a=!0,t):i[n]}));a&&t.setSelections(o)}}()}}f.__externalChange=!1,e({type:"MONACO_CONFIRM_OT",wid:t,pud:n,path:r,op:i})}}}({wid:e,pud:t,path:n.path,op:n.op}):"ADD_FILE_CURSOR"===n.type?ea(Ri({wid:e,pud:t},n)):"REMOVE_FILE_CURSOR"===n.type?function(r,i){var a=(0,bt.Z)(i(),e,t,"editor").monaco,o=a.modelHandle,s=a.filePath,l=n.id;if(s===n.path&&o){var c=vi.Z.safeGet(o);c._replit_cursorDecorations&&c._replit_cursorDecorations[l]&&(c.deltaDecorations(c._replit_cursorDecorations[l],[]),delete c._replit_cursorDecorations[l])}}:"DELETE_FILE"===n.type?Yi({wid:e,pud:t,path:n.path}):"MOVE_FILE"===n.type?function(e){var t=e.wid,n=e.pud,r=e.to;return function(e,i){var a=i().workspace[t].activeFile,o=(0,bt.Z)(i(),t,n,"editor").monaco,s=o.editorHandle,l=o.modelHandle,c=o.filePath;if(c&&!c.startsWith(r)){var u=bi(s),d=yi(l);if(d&&u){a===c&&e(Gi({wid:t,pud:n,viewState:u.saveViewState()}));var p=d._commandManager;d.dispose(),e({type:Bi,wid:t,filePath:c,modelHandle:null});var f=e($i({wid:t,pud:n}))._commandManager;f.currentOpenStackElement=p.currentOpenStackElement,f.past=p.past,f.future=p.future}}}}({wid:e,pud:t,to:n.to}):n.type===ft.Dq?function(e){var t=e.wid,n=e.pud,r=e.updates;return function(e,i){var a=i().workspace[t].activeFile,o=(0,bt.Z)(i(),t,n,"editor").monaco,s=o.modelHandle,l=o.editorHandle,c=o.filePath,u=o.preferences,d=bi(l),p=yi(s);p&&d&&(void 0===r.indentIsSpaces&&void 0===r.indentSize||p.updateOptions({insertSpaces:u.indentIsSpaces,tabSize:u.indentSize}),c===a&&(void 0===r.fontSize&&void 0===r.wrapping&&void 0===r.codeIntelligence||d.updateOptions({fontSize:u.fontSize,wordWrap:u.wrapping?"on":"off",quickSuggestions:u.codeIntelligence}),void 0!==r.keyboardHandler&&e(Ki({wid:t,pud:n,keyboardHandler:r.keyboardHandler}))))}}({wid:e,pud:t,updates:n.updates}):n.type===ft.O1?qi({wid:e,pud:t,activeLine:n.line}):n.type===ft.Lt?function(e){var t=e.wid,n=e.pud,r=e.path,i=e.range;return function(e,a){var o=a().workspace[t].activeFile,s=(0,bt.Z)(a(),t,n,"editor").monaco,l=s.modelHandle,c=bi(s.editorHandle);yi(l)&&c&&r===o&&(c.focus(),c.setSelection(i),c.revealRangeInCenterIfOutsideViewport(i))}}({wid:e,pud:t,path:n.path,range:n.range}):"SELECT_EDITOR_POSITION"===n.type?function(e){var t=e.wid,n=e.pud,r=e.path,i=e.position;return function(e,a){var o=a().workspace[t].activeFile,s=(0,bt.Z)(a(),t,n,"editor").monaco,l=s.modelHandle,c=bi(s.editorHandle);yi(l)&&c&&r===o&&(c.focus(),c.setPosition(i),c.revealPositionInCenterIfOutsideViewport(i))}}({wid:e,pud:t,path:n.path,position:n.position}):"SELECT_MODEL_INDEX"===n.type?function(e){var t=e.wid,n=e.pud,r=e.path,i=e.indexStart,a=e.indexEnd;return function(e,o){var s=o().workspace[t].activeFile,l=o().workspace[t].plugins[n].state,c=l.monaco,u=l.filePath,d=c.modelHandle,p=bi(c.editorHandle),f=yi(d);if(f&&p&&r===s&&u===r){a||(a=i),p.focus();var m=f.getPositionAt(i),h=f.getPositionAt(a);p.setPosition(m),p.revealRangeInCenter({startLineNumber:m.lineNumber,startColumn:m.column,endColumn:h.column,endLineNumber:h.lineNumber})}}}({wid:e,pud:t,path:n.path,indexStart:n.indexStart,indexEnd:n.indexEnd}):n.type===ft.gJ?function(e){var t=e.wid,n=e.pud;return function(e,r){var i=r().workspace[t].activeFile,a=(0,bt.Z)(r(),t,n,"editor").monaco,o=a.filePath,s=a.editorHandle;if(i===o){var l=bi(s);l&&l.getAction("editor.action.formatDocument").run()}}}({wid:e,pud:t}):"DEBUG_STACK"===n.type?qi({wid:e,pud:t,activeLine:n.stack.length?n.stack[n.stack.length-1].lineno:null}):"DEBUG_ENDED"===n.type?qi({wid:e,pud:t,activeLine:null}):"DOWNLOAD_FILE_CONTENT_SUCCESS"===n.type?function(r,i){var a=(0,bt.Z)(i(),e,t,"editor").monaco.peekDefinitionResolvers;if(a[n.path]){var o=window.monaco.Uri.from({scheme:"file",path:n.path}),s=window.monaco.editor.getModel(o);s||(s=window.monaco.editor.createModel(n.content.toString(),void 0,o)),r({type:"REGISTER_PEEK_DEFINITION_RESOLVER",path:n.path,resolver:null}),a[n.path].resolve({model:s,shouldDispose:function(){var n,r=(0,bt.Z)(i(),e,t,"editor").monaco;return!(null!==(n=r.files[Hi(r.workingDirectory,o)])&&void 0!==n&&n.loaded)}})}}:"DOWNLOAD_FILE_CONTENT_FAILURE"===n.type?function(r,i){var a=(0,bt.Z)(i(),e,t,"editor").monaco.peekDefinitionResolvers;a[n.path]&&(a[n.path].reject(n.error),r({type:"REGISTER_PEEK_DEFINITION_RESOLVER",path:n.path,resolver:null}))}:null}function na(e){var t,n=e.monacoChanges,r=e.changeIndex,i=e.filePath,a=e.fileContent,o=e.monacoContent,s=e.prevMonacoValue,l=e.ops,c=!1,u=a,d=0,p=Ni(l);try{for(p.s();!(t=p.n()).done;){var f=t.value;if("string"===typeof f)u=u.slice(0,d)+f+u.slice(d),d+=f.length;else if("object"===typeof f&&"number"===typeof f.d)d+f.d>u.length&&(c=!0),u=u.slice(0,d)+u.slice(d+f.d);else if("number"===typeof f&&(d+=f)>u.length){c=!0;break}}}catch(m){p.e(m)}finally{p.f()}c&&st.$e((function(e){e.setExtras({filePath:i,currentContent:JSON.stringify(a),monacoContent:JSON.stringify(o),prevMonacoValue:JSON.stringify(s),monacoChanges:JSON.stringify(n),changeIndex:r,ops:JSON.stringify(l)}),st.Tb(new Error("Bad ot op :("))}))}var ra=(0,et.$j)((function(e,t){var n=e.workspace[t.wid].plugins[t.pud].state,r=n.monaco,i=n.isMac,a=r.filePath,o=r.editorHandle,s=r.runstate,l=r.preferences,c=r.repl,u=r.files,d=r.workingDirectory,p=r.didDisconnect,f=c.language;return{workingDirectory:d,hasContent:Boolean(u[a]&&u[a].content&&ur.Z.from(u[a].content).length),filePath:a,editorHandle:o,language:f,preferences:l,runstate:s,isMac:i,fileLoaded:u[a]&&u[a].loaded,didDisconnect:p}})),ia=ra((function(e){var t=(0,Oe.Z)(),n=t.presence,r=t.debuggest,i=(0,ti.Z)(),a=e.wid,o=e.pud,s=e.dimensions,l=(0,et.I0)(),c=(0,fe.Z)(),u=(0,Pi.Z)({replId:c}),d=(0,Vn.Z)(r.mainClient),p=K.useMemo((function(){return mi()((function(){l({type:"RESIZE_EDITOR",wid:a,pud:o})}),150)}),[l,a,o]);K.useEffect(p,[s,p]);var f=Boolean(u&&e.fileLoaded&&!e.hasContent&&e.filePath===u.mainFile);return(0,ge.tZ)(Vi,Ri(Ri({},e),{},{presence:n,followedUsersColor:i,showExamplesPlaceholder:f,hasDAP:Boolean(d)}))})),aa=n(4402);function oa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oa(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var la=function(e){return(0,et.v9)((function(t){var n=(0,bt.Z)(t,e.wid,e.pud,"editor"),r=n.filePath,i=n.isMobile;return!(!("ontouchstart"in window||window.DocumentTouch&&window.document instanceof window.document.DocumentTouch)&&!i)||!!(null!==r&&void 0!==r&&r.endsWith(".sqlite")||null!==r&&void 0!==r&&r.endsWith(".wasm"))}))?(0,ge.tZ)(aa.Z,sa({},e)):(0,ge.tZ)(ia,sa({},e))};var ca=(0,mt.$)({primary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{filePath:null,isMac:!1,isMobile:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ft.qg:return sa(sa({},e),t.initialState);case"MOVE_FILE":return e.filePath?e.filePath===t.path?sa(sa({},e),{},{filePath:t.to}):(0,hi.yr)(t.path,e.filePath)?sa(sa({},e),{},{filePath:(0,hi.hk)(t.path,t.to,e.filePath)}):e:e;default:return e}},monaco:_i}),ua=n(97698),da=n(51434),pa=n(67168),fa=n(8269),ma=n(1438),ha=function(){var e=(0,me.__3)().data;return null!==e&&void 0!==e&&e.currentUser?(0,ge.BX)("div",{className:"jsx-1557842061 help-container",children:[(0,ge.tZ)(ma.Z,{currentUser:e.currentUser,tooltipPlacement:"right"}),(0,ge.tZ)(V.default,{id:"1557842061",children:[".help-container.jsx-1557842061{position:absolute;left:var(--space-8);bottom:var(--space-16);z-index:20;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:var(--space-32);height:var(--space-32);cursor:pointer;border-radius:100%;background-color:var(--background-default);color:var(--foreground-dimmer);border:1px solid var(--background-highest);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-shadow:var(--shadow-1);-webkit-transition:0.1s;transition:0.1s;}",".help-container.jsx-1557842061:hover{border:1px solid var(--outline-default);box-shadow:var(--shadow-2);}",".help-container.jsx-1557842061:active{border:1px solid var(--accent-primary-default);box-shadow:var(--shadow-1);}"]})]}):null},ga=n(18775),va=n(16792),ba=n(85893);function ya(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ya(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ya(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wa=(0,mt.$)({primary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{filePath:void 0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ft.qg:return xa(xa({},e),t.initialState);case"SET_MEDIA_FILE":return xa(xa({},e),{},{filePath:t.filePath});case"MOVE_FILE":return e.filePath?e.filePath===t.path?xa(xa({},e),{},{filePath:t.to}):(0,hi.yr)(t.path,e.filePath)?xa(xa({},e),{},{filePath:(0,hi.hk)(t.path,t.to,e.filePath)}):e:e;default:return e}},files:Zi.Z}),ka=(0,et.$j)((function(e,t){var n=e.workspace[t.wid].plugins[t.pud].state,r=n.filePath,i=n.files[r];return{value:i&&i.loaded?ur.Z.from(i.content):ur.Z.from(""),filePath:r,mime:(0,vn.yC)(r),fileLoaded:i&&i.loaded}}),(function(e){return(0,J.DE)({},e)}))((function(e){var t=e.mime,n=e.filePath,r=e.style,i=e.value,a=e.fileLoaded,o=(0,ti.Z)();if(!t)throw new Error("MediaView only supports video, audio, pdf, and images. Filepath: ".concat(n));var s,l=i.toString("base64");if(a)if(t.startsWith("video/"))s=(0,ba.jsx)("video",{src:"data:".concat(t,";base64,").concat(l),style:{maxHeight:"100%",maxWidth:"100%"},controls:!0});else if(t.startsWith("image/"))s=(0,ba.jsx)("img",{src:"data:".concat(t,";base64,").concat(l),style:{width:"80%",height:"80%",objectFit:"contain",imageRendering:"pixelated"},alt:n});else if(t.startsWith("audio/")){var c=t;"audio/wave"===c&&(c="audio/wav"),s=(0,ba.jsx)("audio",{src:"data:".concat(c,";base64,").concat(l),style:{maxHeight:"100%",maxWidth:"100%"},controls:!0})}else{if("application/pdf"!==t)throw new Error("MediaView only supports video, audio, pdf, and images. Filepath: ".concat(n));s=(0,ba.jsx)("object",{data:"data:".concat(t,";base64,").concat(l),type:"application/pdf",style:{width:"100%",height:"100%"},children:(0,ba.jsx)("embed",{src:"data:".concat(t,";base64,").concat(l),type:"application/pdf",style:{width:"100%",height:"100%"}})})}else s=(0,ba.jsx)("div",{children:"Loading file, please wait."});return(0,ba.jsxs)("div",{style:r,className:V.default.dynamic([["222691463",[o?"0 3px 0 3px ".concat(o):"0"]]])+" mediaview",children:[(0,ba.jsxs)("div",{className:V.default.dynamic([["222691463",[o?"0 3px 0 3px ".concat(o):"0"]]])+" mediaview-download",children:["Some files may fail to load on the browser."," ",(0,ba.jsx)("a",{href:"data:text/plain;base64,".concat(l),download:(0,vn.UO)(n),className:V.default.dynamic([["222691463",[o?"0 3px 0 3px ".concat(o):"0"]]]),children:"Click here to download"})]}),(0,ba.jsx)("div",{className:V.default.dynamic([["222691463",[o?"0 3px 0 3px ".concat(o):"0"]]])+" mediaview-content",children:s}),(0,ba.jsx)(V.default,{id:"222691463",dynamic:[o?"0 3px 0 3px ".concat(o):"0"],children:[".mediaview.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;z-index:3;position:relative;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;background:var(--black);box-shadow:".concat(o?"0 3px 0 3px ".concat(o):"0",";}"),".mediaview-download.__jsx-style-dynamic-selector{text-align:center;width:100%;color:var(--outline-dimmest);padding:10px;}",".mediaview-content.__jsx-style-dynamic-selector{min-height:0;-webkit-flex:1;-ms-flex:1;flex:1;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]})})),Za=n(60623),ja=n(46152),Oa=n(7941);function Ea(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,F.Z)(e);if(t){var i=(0,F.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,X.Z)(this,n)}}var _a=function(e){(0,U.Z)(n,e);var t=Ea(n);function n(){return(0,L.Z)(this,n),t.apply(this,arguments)}return(0,B.Z)(n,[{key:"render",value:function(){return(0,ba.jsxs)("div",{style:this.props.style,className:"jsx-849216488 react-native-container",children:[(0,ba.jsxs)("div",{className:"jsx-849216488 react-native-content",children:[(0,ba.jsx)("div",{style:{fontSize:"25px",textAlign:"center"},className:"jsx-849216488",children:"\ud83d\ude14"}),(0,ba.jsx)("br",{className:"jsx-849216488"}),(0,ba.jsx)("br",{className:"jsx-849216488"}),"We have discontinued support for React Native on Replit to focus more on other languages that use our infrastracture. We had a good run and we're happy to have served thousands of users play with mobile apps using their favorite web IDE.",(0,ba.jsx)("br",{className:"jsx-849216488"}),(0,ba.jsx)("br",{className:"jsx-849216488"}),"You can checkout our"," ",(0,ba.jsx)(yt.default,{href:"/languages",children:(0,ba.jsx)("a",{className:"jsx-849216488",children:"broad list of languages."})}),(0,ba.jsx)("br",{className:"jsx-849216488"}),(0,ba.jsx)("br",{className:"jsx-849216488"}),"For React Native you should head over to"," ",(0,ba.jsx)("a",{href:"https://snack.expo.io/",target:"_blank",className:"jsx-849216488",children:"Snack"})," ","where our friends at ",(0,ba.jsx)("a",{href:"https://expo.io/",className:"jsx-849216488",children:"Expo"})," have created a playground dedicated to React Native mobile development."]}),(0,ba.jsx)(V.default,{id:"849216488",children:[".react-native-container.jsx-849216488{font-size:17px;line-height:1.2;}",".react-native-content.jsx-849216488{max-width:800px;margin:30px auto;}"]})]})}}]),n}(K.Component),Ca=n(61633),Sa=n(77537);function Pa(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,vn.T3)(e)?"mediaview":(0,vn.sL)(e)?"draw":(0,vn.IQ)(e)?"pedit":t?"codemirror":"editor"}var Na=n(86330),Ta=n(87929),Ia=n(61850),Ra=n(9545);function Da(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Aa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Da(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Da(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var La="fileviewercontroller";function Ba(e){var t=e.wid,n=e.pud,r=e.path,i=e.editorHandle;return function(e,a){if(window["open-markdown-split"]&&"md"!==(0,vn.r6)(r)){var o=a().workspace[t],s=o.layout,l=o.plugins;if(dt.PP(s,l,"markdownviewer")){var c=Object.keys(l).find((function(e){return"markdownviewer"===l[e].type}));if(!c)throw new Error("Expect a markdownviewer to be in pluginlist");e(Aa({type:"UPDATE_LAYOUT",wid:t},dt.Od(s,c)))}}var u=a().workspace[t],d=u.layout,p=u.plugins,f=function(e,t){var n=dt.PP(e,t,"fileheader");if(!n)throw new Error("expected to find fileHeader in layout!");return window["flag-windowing"]?dt.Il(n):dt.J9(n)}(d,p);if(!f)throw new Error("No editor mounted");var m=(0,bt.Z)(a(),t,n,La).files[r];m&&m.loaded||e({type:"LOAD_FILE",wid:t,path:r});var h=((0,ot.Z)(a().user.userInfo,"flag-codemirror-desktop")||Boolean(ee.default.query.codemirror))&&!(0,Ra.$)()&&!ee.default.query.monaco,g=Pa(r,h),v=Ua({plugins:p,filePath:r,pluginType:g});v||(v=e(function(e){var t=e.wid,n=e.path,r=e.editorHandle;return function(e,i){var a=((0,ot.Z)(i().user.userInfo,"flag-codemirror-desktop")||Boolean(ee.default.query.codemirror))&&!(0,Ra.$)()&&!ee.default.query.monaco,o=Pa(n,a),s={filePath:n};if("editor"===o){var l=(0,Y.isMobile)({ua:window.navigator.userAgent,tablet:!0}),c=ee.default.query.lite;s=Aa(Aa({},s),{},{lite:c,isMobile:l,editorHandle:r})}var u=!!window["flag-windowing"],d="file-".concat(ae()());return e({type:"LOAD_PLUGIN",wid:t,pluginPud:d,pluginType:Pa(n,a),title:n,initialState:s,isDraggable:u}),e({type:"LOAD_FILE",wid:t,path:n}),d}}({wid:t,path:r,editorHandle:i}))),e({type:"UPDATE_LAYOUT",wid:t,path:f,to:v,property:"pud"})}}function Ma(e){var t=e.wid,n=e.path;return function(e,r){var i=r().workspace[t].plugins,a=((0,ot.Z)(r().user.userInfo,"flag-codemirror-desktop")||Boolean(ee.default.query.codemirror))&&!(0,Ra.$)()&&!ee.default.query.monaco;setTimeout((function(){e({type:"UNLOAD_PLUGIN",wid:t,pud:Ua({plugins:i,filePath:n,pluginType:Pa(n,a)})})}),0)}}function Ua(e){for(var t=e.plugins,n=e.filePath,r=e.pluginType,i=0,a=Object.keys(t);i<a.length;i++){var o=a[i],s=t[o],l=s.type,c=s.state;if(l===r&&(null===n||(null===c||void 0===c?void 0:c.filePath)===n))return o}return null}var Xa=(0,Ta.Z)(["WORKSPACE_MOUNTED","FILE_UNLOAD","OPEN_FILE","MOVE_FILE","DELETE_FILE","WORKSPACE_WILL_UNMOUNT","REGISTER_ACE_EDITOR_HANDLE","REGISTER_MONACO_EDITOR_HANDLE"]),Fa=Xa.receiver,za=Xa.useReceiver;function Va(e){var t=e.wid,n=e.pud,r=(0,et.I0)(),i=(0,Oe.Z)().session,a=(0,Jr.Z)(),o=((0,Ia.Z)("flag-codemirror-desktop")||Boolean(ee.default.query.codemirror))&&!(0,Ra.$)()&&!ee.default.query.monaco,s=K.useState(!1),l=(0,D.Z)(s,2),c=l[0],u=l[1],d=K.useState(null),p=(0,D.Z)(d,2),f=p[0],m=p[1],h=(0,bt.J)(t,n,"fileviewercontroller"),g=(0,D.Z)(h,1)[0].files,v=(0,et.v9)((function(e){return e.workspace[t].activeFile}));return K.useEffect((function(){a&&(g[a]||v&&"md"===(0,vn.r6)(v)||i.setPreviewedFile(null))}),[a,i,g,v]),K.useEffect((function(){v&&"md"===(0,vn.r6)(v)&&i.setPreviewedFile(v)}),[i,v]),za((function(e){var i=e.action;switch(i.type){case"WORKSPACE_MOUNTED":if(u(!0),!v)break;r({type:"LOAD_FILE",wid:t,path:v});break;case"FILE_UNLOAD":if(!c)break;var a=i.path;r(function(e){var t=e.wid,n=e.path;return function(e,r){setTimeout((function(){var i=r().workspace[t].activeFile;n===i&&e({type:"LOAD_FILE",wid:t,path:i})}))}}({wid:t,path:a}));break;case"OPEN_FILE":var s=i.path;if(!s)break;r(Ba({wid:t,pud:n,path:s,editorHandle:f}));break;case"MOVE_FILE":var l=i.path,d=i.to;if(v!==l)break;r({type:"OPEN_FILE",wid:t,path:d}),Pa(l,o)!==Pa(d,o)&&r(Ma({wid:t,path:l}));break;case"DELETE_FILE":var p=i.path;r(function(e){var t=e.wid,n=e.pud,r=e.path;return function(e,i){var a=i().workspace[t].activeFile;if(a){if(a===r||(0,hi.yr)(r,a)){var o=(0,bt.Z)(i(),t,n,La).files,s=Object.keys(o).concat(r).sort(),l=s.indexOf(r),c=s[0===l?1:l-1];e(void 0!==c?{type:"OPEN_FILE",wid:t,path:c}:(0,Na.Z)({wid:t}))}e(Ma({wid:t,path:r}))}}}({wid:t,pud:n,path:p}));break;case"WORKSPACE_WILL_UNMOUNT":u(!1);break;case"REGISTER_ACE_EDITOR_HANDLE":case"REGISTER_MONACO_EDITOR_HANDLE":m(i.editorHandle)}return null})),null}var Ha=(0,mt.$)({files:Zi.Z}),Ga=n(5152),Wa=(0,Ga.default)((0,A.Z)(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.e(216).then(n.bind(n,216)).then((function(e){return e.default})));case 1:case"end":return e.stop()}}),e)}))),{loading:function(){return(0,ge.tZ)("div",{style:{width:"100%",height:"100%",textAlign:"center",paddingTop:"30px"},children:"Loading viewer..."})},loadableGenerated:{webpack:function(){return[216]},modules:["../app/workspace/plugins/markdownviewer/index.tsx -> ./Viewer"]}}),qa=(0,mt.$)({files:Zi.Z}),Ka=n(7736),Ya=n(63732),Qa=n(19196),$a=n(7785),Ja=n(25108);function eo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function to(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eo(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var no=".lesson/".concat("instructions.md"),ro=function(e){var t=e.contents,n=(0,Oe.Z)().fs,r=(0,Ya.mn)({fs:n}),i=K.useCallback((function(e){var t=e.src;return(0,ge.tZ)(Ya.TS,{previewFilePath:no,src:t,getImageContent:r,deeplink:!0})}),[r]);return(0,ge.BX)("div",{className:V.default.dynamic([["3947362509",[le.j.tabletMin]]])+" root",children:[(0,ge.tZ)("div",{className:V.default.dynamic([["3947362509",[le.j.tabletMin]]])+" content",children:(0,ge.tZ)(Ka.Z,{source:t,renderers:{code:Qa.Z,linkReference:Ya.NY,image:i,html:Ya.VI},sourcePos:!0})}),(0,ge.tZ)(V.default,{id:"3947362509",dynamic:[le.j.tabletMin],children:[".root.__jsx-style-dynamic-selector{height:100%;width:100%;overflow:auto;background:var(--background-default);z-index:2;position:relative;}",".content.__jsx-style-dynamic-selector{max-width:840px;margin:0 auto;padding:var(--space-32) var(--space-16);}","@media only screen and (min-width:".concat(le.j.tabletMin,"px){.content.__jsx-style-dynamic-selector{padding:var(--space-48) var(--space-32);}}")]})]})},io=function(e){var t=(0,fe.Z)(),n=(0,Oe.Z)().fs,r=(0,$a.Z)(),i=K.useState(null),a=(0,D.Z)(i,2),o=a[0],s=a[1];return K.useEffect((function(){n.readFile(no).then((function(e){if(r.current)return e.error?(Ja.error(e.error),void st.$e((function(n){n.setExtra("replId",t),n.setTag("instructions-viewer",!0),st.Tb("Error loading instructions viewier: ".concat(e.error))}))):void s(e.content.toString())}))}),[n,r,t]),o?(0,ge.tZ)(ro,to(to({},e),{},{contents:o})):(0,ge.tZ)(Ci.Z,{preventHighlightBorder:!0})};function ao(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ao(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ao(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var so=function(e){var t=e.logs,n=e.timeRef,r=e.setTimeRef;return(0,ge.BX)("div",{className:"jsx-3515057655 log-list",children:[t.map((function(e){var t=JSON.stringify(e.cmd,null,2),i=n?e.timestamp-n:e.timestamp;return(0,ge.BX)("div",{className:"jsx-3515057655 "+("log "+(e.highlighted?"highlighted ":"")+("in"===e.dir?"in":"")||0),children:[(0,ge.BX)("div",{className:"jsx-3515057655 direction",children:[(0,ge.tZ)("div",{className:"jsx-3515057655",children:e.dir}),(0,ge.tZ)("div",{className:"jsx-3515057655",children:"in"===e.dir?"\u25b6\ufe0f":"\u2b05\ufe0f"}),(0,ge.tZ)("div",{className:"jsx-3515057655",children:(0,ge.BX)(ce.Z,{color:"positive",size:"small",onClick:function(){return r(e.timestamp)},children:[i.toFixed(0),"ms"]})})]}),(0,ge.tZ)("pre",{className:"jsx-3515057655",children:t})]},e.index)})),(0,ge.tZ)("div",{className:"jsx-3515057655 bottom-anchor"}),(0,ge.tZ)(V.default,{id:"3515057655",children:[".log-list.jsx-3515057655{overflow:auto;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".log-list.jsx-3515057655 *.jsx-3515057655{overflow-anchor:none;}",".bottom-anchor.jsx-3515057655{overflow-anchor:auto !important;min-height:1px;}",".log.jsx-3515057655{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;color:deepskyblue;border:1px solid;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}",".in.jsx-3515057655{color:red;}",".highlighted.jsx-3515057655{background:yellow;}",".direction.jsx-3515057655{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;text-align:center;min-width:30px;border-right:1px solid;}",".direction.jsx-3515057655>div.jsx-3515057655:not(:last-child){border-bottom:1px solid;width:100%;}"]})]})},lo=function(e){var t=e.filters,n=e.updateFilters;return(0,ge.BX)("div",{className:"jsx-1185913860 filters",children:[(0,ge.BX)("div",{className:"jsx-1185913860",children:[(0,ge.tZ)("div",{className:"jsx-1185913860",children:"regex search (regex,flags)"}),(0,ge.BX)("fieldset",{className:"jsx-1185913860",children:[(0,ge.tZ)("input",{name:"regex",onChange:function(e){var t=null;if(e.currentTarget.value){var r=e.currentTarget.value.split(","),i=(0,D.Z)(r,2),a=i[0],o=i[1];try{t=new RegExp(a,o)}catch(s){}}n({regexp:t})},placeholder:"\\w+,gi",className:"jsx-1185913860"}),(0,ge.BX)("div",{className:"jsx-1185913860",children:["current value: ",t.regexp?t.regexp.toString():"null"]})]})]}),(0,ge.BX)("div",{className:"jsx-1185913860",children:[(0,ge.tZ)("div",{className:"jsx-1185913860",children:"Directions:"}),(0,ge.BX)("fieldset",{id:"log-filter-direction",className:"jsx-1185913860",children:[(0,ge.BX)("label",{className:"jsx-1185913860",children:["both:",(0,ge.tZ)("input",{type:"radio",onChange:function(e){return n({direction:e.target.value})},value:"",checked:""===t.direction,name:"log-filter-direction",className:"jsx-1185913860"})]}),(0,ge.BX)("label",{className:"jsx-1185913860",children:["in:",(0,ge.tZ)("input",{type:"radio",onChange:function(e){return n({direction:e.target.value})},value:"in",checked:"in"===t.direction,name:"log-filter-direction",className:"jsx-1185913860"})]}),(0,ge.BX)("label",{className:"jsx-1185913860",children:["out:",(0,ge.tZ)("input",{type:"radio",onChange:function(e){return n({direction:e.target.value})},value:"out",checked:"out"===t.direction,name:"log-filter-direction",className:"jsx-1185913860"})]})]})]}),(0,ge.BX)("div",{className:"jsx-1185913860",children:[(0,ge.tZ)("div",{className:"jsx-1185913860",children:"Filter style:"}),(0,ge.BX)("fieldset",{id:"log-filter-style",className:"jsx-1185913860",children:[(0,ge.BX)("label",{className:"jsx-1185913860",children:["highlight:",(0,ge.tZ)("input",{type:"radio",onChange:function(){return n({highlightOnly:!0})},checked:t.highlightOnly,name:"log-filter-style",className:"jsx-1185913860"})]}),(0,ge.BX)("label",{className:"jsx-1185913860",children:["hide:",(0,ge.tZ)("input",{type:"radio",onChange:function(){return n({highlightOnly:!1})},checked:!t.highlightOnly,name:"log-filter-style",className:"jsx-1185913860"})]})]})]}),(0,ge.tZ)(V.default,{id:"1185913860",children:[".filters.jsx-1185913860{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".filters.jsx-1185913860>*.jsx-1185913860{padding:20px 0;}","fieldset.jsx-1185913860{border:0;}","fieldset.jsx-1185913860>label.jsx-1185913860{margin-right:5px;}"]})]})},co=function(e,t){if(!t.regexp&&!t.direction)return e.map((function(e){return oo(oo({},e),{},{highlighted:!1})}));var n=function(e){var n=e.dir,r=e.cmd;return(!t.direction||n===t.direction)&&!(t.regexp&&t.regexp.test&&!t.regexp.test(JSON.stringify(r)))};return t.highlightOnly?e.map((function(e){return n(e)?oo(oo({},e),{},{highlighted:!0}):e})):e.filter(n)},uo=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=K.useState(e),n=(0,D.Z)(t,2),r=n[0],i=n[1],a=K.useCallback((function(){return i((function(e){return!e}))}),[]);return[r,a]},po=function(e){var t=e.wid,n=e.pud,r=uo(!0),i=(0,D.Z)(r,2),a=i[0],o=i[1],s=K.useState(null),l=(0,D.Z)(s,2),c=l[0],u=l[1],d=(0,bt.J)(t,n,"adminpanel"),p=(0,D.Z)(d,2),f=p[0],m=f.crosisDebug,h=f.filters,g=f.crosisLogs,v=p[1],b=(0,et.I0)();return m?(0,ge.BX)("div",{className:"jsx-1975817957 crosis-logs",children:[(0,ge.BX)("div",{className:"jsx-1975817957",children:[(0,ge.BX)("div",{className:"jsx-1975817957 buttons",children:[(0,ge.tZ)(ce.Z,{color:"orange",onClick:o,children:a?"hide filters":"show filters"}),c&&(0,ge.tZ)(ce.Z,{color:"negative",onClick:function(){return u(null)},children:"Reset Time Ref"}),(0,ge.tZ)(ce.Z,{color:"negative",onClick:function(){return b({type:"CLEAR_CROSIS_LOGS",wid:t})},children:"Clear logs"})]}),a?(0,ge.tZ)(lo,{filters:h,updateFilters:function(e){v({filters:oo(oo({},h),e)})}}):null]}),(0,ge.tZ)(so,{logs:co(g,h),timeRef:c,setTimeRef:u}),(0,ge.tZ)(V.default,{id:"1975817957",children:[".crosis-logs.jsx-1975817957{height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".buttons.jsx-1975817957{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}"]})]}):(0,ge.tZ)(ce.Z,{color:"positive",filled:!0,onClick:function(){v({crosisDebug:!0}),b({type:"START_CROSIS_ADMIN_LOGS",wid:t})},children:"Start logging crosis v5"})},fo=n(10219),mo=n(5862),ho=n(37119),go=["salt","iat","exp"],vo=["salt","iat","exp","presenced"];function bo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bo(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xo=function(e){var t=e.wid,n=e.pud,r=(0,bt.J)(t,n,"adminpanel"),i=(0,D.Z)(r,1)[0].token,a=(0,et.I0)();return i?(0,ge.BX)("div",{className:"jsx-4043509441 token-viewer",children:[(0,ge.BX)("div",{className:"jsx-4043509441",children:["raw:",(0,ge.tZ)("pre",{className:"jsx-4043509441",children:i})]}),(0,ge.tZ)("br",{className:"jsx-4043509441"}),(0,ge.BX)("div",{className:"jsx-4043509441",children:["parsed:",(0,ge.tZ)("pre",{className:"jsx-4043509441",children:JSON.stringify((0,ho.he)(i),null,2)})]}),(0,ge.tZ)("br",{className:"jsx-4043509441"}),(0,ge.tZ)("br",{className:"jsx-4043509441"}),(0,ge.tZ)(wo,{token:i,setToken:function(e){a({wid:t,type:"USE_CUSTOM_TOKEN",customToken:e})},becomeOwner:function(){a({wid:t,type:"REPL_UPDATED",updates:{isOwner:!0}})}}),(0,ge.tZ)(V.default,{id:"4043509441",children:[".token-viewer.jsx-4043509441{height:100%;overflow:auto;padding:10px;}","pre.jsx-4043509441{white-space:pre-wrap;word-wrap:break-word;}"]})]}):(0,ge.tZ)("div",{children:"no token yet, wait for connection"})},wo=function(e){var t=e.token,n=e.setToken,r=e.becomeOwner,i=K.useState((function(){var e=(0,ho.he)(t),n=(e.salt,e.iat,e.exp,(0,fo.Z)(e,go));return JSON.stringify(n,null,2)})),a=(0,D.Z)(i,2),o=a[0],s=a[1],l=K.useState(!1),c=(0,D.Z)(l,2),u=c[0],d=c[1],p=function(){var e=(0,A.Z)(G().mark((function e(t){var r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,(0,tt.uz)("/data/admin/custom_token_please_be_careful_or_you_will_be_fired",{tokenOptions:t});case 3:(r=e.sent).token&&"string"===typeof r.token&&n(r.token),d(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u?(0,ge.tZ)("div",{children:"Getting yer token, please wait..."}):(0,ge.BX)("div",{children:[(0,ge.tZ)(ce.Z,{color:"negative",onClick:(0,A.Z)(G().mark((function e(){var n,i,a,o,s,l,c,u,d,f;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,ho.he)(t),a.salt,a.iat,a.exp,a.presenced,o=(0,fo.Z)(a,vo),s=(null===(n=o.repl)||void 0===n?void 0:n.sourceRepl)||(null===(i=o.id)||void 0===i?void 0:i.sourceRepl)){e.next=5;break}return window.alert("You own this repl?!"),e.abrupt("return");case 5:return l=ee.default.query.replUrl.split("/"),c=(0,D.Z)(l,3),u=c[1],d=c[2],f=yo(yo({},o),{},{id:s,slug:d,user:u.replace("@","")}),r(),e.next=10,p(f);case 10:case"end":return e.stop()}}),e)}))),children:"\ud83d\udea7 Experimental. Impersonate Owner & RECONNECT\ud83d\udea7"}),(0,ge.tZ)("br",{}),(0,ge.tZ)("br",{}),(0,ge.BX)("div",{children:["\u26a0\ufe0fBE REALL CAREFUL HERE!\u26a0\ufe0f You can possibly break the world! \ud83d\ude35",(0,ge.tZ)("br",{}),(0,ge.tZ)("br",{}),"Double check all the values, double check the flags and everything.",(0,ge.tZ)("br",{}),(0,ge.tZ)("br",{}),"You should probably go look at the code and how these values are used"]}),(0,ge.tZ)("br",{}),(0,ge.tZ)(mo.Z,{rows:25,value:o,onChange:function(e){return s(e.currentTarget.value)}}),(0,ge.tZ)(ce.Z,{color:"negative",onClick:function(){var e;try{e=JSON.parse(o)}catch(t){return void window.alert("INVALID JSON!! Be careful!")}p(e)},children:"\u26a0\ufe0fGIMME TOKEN & RECONNECT\u26a0\ufe0f"})]})},ko=n(41632),Zo=function(e){var t=e.wid,n=e.pud,r=(0,bt.J)(t,n,"adminpanel"),i=(0,D.Z)(r,1)[0].customGurl,a=(0,et.I0)(),o=K.useState(i),s=(0,D.Z)(o,2),l=s[0],c=s[1],u="default";return localStorage.getItem("gurl")?u="from localStorage: "+localStorage.getItem("gurl"):i&&(u="from session state "+i),(0,ge.BX)("div",{style:{height:"100%",overflow:"auto"},children:[(0,ge.tZ)(Ht.ZP,{value:l,onChange:function(e){return c(e.currentTarget.value)}}),(0,ge.tZ)("br",{}),(0,ge.BX)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,ge.tZ)(ce.Z,{color:"positive",onClick:function(){a({type:"SET_CUSTOM_GURL",wid:t,gurl:l})},children:"Set gurl"}),(0,ge.tZ)(ce.Z,{color:"orange",onClick:function(){a({type:"SET_CUSTOM_GURL",wid:t,gurl:"wss://eval.global.replit.com"}),localStorage.removeItem("gurl")},children:"reset"})]}),(0,ge.tZ)("br",{}),(0,ge.tZ)("br",{}),(0,ge.BX)("div",{children:["Current gurl: ",u]}),(0,ge.tZ)("br",{}),i&&(0,ge.BX)(ce.Z,{color:"negative",onClick:function(){localStorage.setItem("gurl",i)},children:['Persist "',i,'" in local storage']}),(0,ge.tZ)("br",{}),(0,ge.tZ)("br",{}),"Gurl order of precedence:",(0,ge.BX)("ol",{style:{margin:20},children:[(0,ge.tZ)("li",{children:"gurl set in the form above"}),(0,ge.tZ)("li",{children:"gurl in localStorage"}),(0,ge.BX)("li",{children:["If in development webapp and a there's a response from",(0,ge.tZ)("code",{children:"https://currenthost:4563"})," or",(0,ge.tZ)("code",{children:"http://currenthost:4560"}),", then it will use that."]}),(0,ge.BX)("li",{children:["default is ",(0,ge.tZ)("code",{children:"wss://eval.global.replit.com"})]})]})]})},jo=n(91618);function Oo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oo(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _o(e){var t=e.wid,n=e.pud,r=uo(!0),i=(0,D.Z)(r,2),a=i[0],o=i[1],s=K.useState(null),l=(0,D.Z)(s,2),c=l[0],u=l[1],d=(0,bt.J)(t,n,"adminpanel"),p=(0,D.Z)(d,2),f=p[0],m=f.v6filters,h=f.crosisV6Logs,g=p[1];return(0,ge.BX)("div",{className:"jsx-1975817957 crosis-logs",children:[(0,ge.BX)("div",{className:"jsx-1975817957",children:[(0,ge.BX)("div",{className:"jsx-1975817957 buttons",children:[(0,ge.tZ)(ce.Z,{color:"orange",onClick:o,children:a?"hide filters":"show filters"}),c&&(0,ge.tZ)(ce.Z,{color:"negative",onClick:function(){return u(null)},children:"Reset Time Ref"}),(0,ge.tZ)(ce.Z,{color:"negative",onClick:function(){g({crosisV6Logs:[]})},children:"Clear logs"})]}),a?(0,ge.tZ)(lo,{filters:m,updateFilters:function(e){g({v6filters:Eo(Eo({},m),e)})}}):null]}),(0,ge.tZ)(so,{logs:co(h,m),timeRef:c,setTimeRef:u}),(0,ge.tZ)(V.default,{id:"1975817957",children:[".crosis-logs.jsx-1975817957{height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".buttons.jsx-1975817957{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}"]})]})}function Co(e){var t=(0,bt.J)(e.wid,e.pud,"adminpanel"),n=(0,D.Z)(t,2),r=n[0].crosisDebug,i=n[1],a=(0,et.I0)();return r?(0,ge.tZ)(_o,Eo({},e)):(0,ge.tZ)(ce.Z,{color:"positive",filled:!0,onClick:function(){i({crosisDebug:!0}),a({type:"START_CROSIS_ADMIN_LOGS",wid:e.wid})},children:"Start logging goval"})}var So=n(93325),Po=function(){var e,t,n=(0,fe.Z)(),r=(0,me.bPN)({variables:{replId:n}}).data,i="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?JSON.parse(JSON.stringify(r.repl)):void 0;i&&(delete i.__typename,null===(e=i.user)||void 0===e||delete e.__typename,null===(t=i.origin)||void 0===t||delete t.__typename,delete i.config.__typename);return(0,ge.BX)("div",{className:"jsx-3817476767",children:[(0,ge.BX)("div",{onClick:function(){(0,So.Z)(n)},className:"jsx-3817476767",children:[(0,ge.tZ)("span",{className:"jsx-3817476767",children:" repl ID: "}),(0,ge.tZ)("input",{id:"replId",readOnly:!0,value:n,className:"jsx-3817476767"})]}),(0,ge.tZ)("div",{className:"jsx-3817476767",children:i&&(0,ge.tZ)("pre",{className:"jsx-3817476767",children:JSON.stringify(i,null,2)})}),(0,ge.tZ)(V.default,{id:"3817476767",children:["pre.jsx-3817476767{white-space:pre-wrap;word-wrap:break-word;}"]})]})};function No(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function To(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?No(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):No(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Io=(0,jo.Z)((function(){return{crosisDebug:!1,crosisLogs:[],crosisV6Logs:[],v6filters:{regexp:null,direction:"",highlightOnly:!0},filters:{regexp:null,direction:"",highlightOnly:!0},token:"",customGurl:""}}),(function(e,t){return"START_CROSIS_ADMIN_LOGS"===t.type?To(To({},e),{},{crosisDebug:!0}):"CROSIS_ADMIN_LOG"===t.type?To(To({},e),{},{crosisLogs:[].concat((0,Bt.Z)(e.crosisLogs),[{index:e.crosisLogs.length,dir:t.dir,cmd:t.cmd,timestamp:t.timestamp}])}):"CLEAR_CROSIS_LOGS"===t.type?To(To({},e),{},{crosisLogs:[]}):"GOVAL_TOKEN"===t.type?To(To({},e),{},{token:t.token}):"SET_CUSTOM_GURL"===t.type?To(To({},e),{},{customGurl:t.gurl}):e})),Ro=Io.reducer,Do=Io.setState,Ao=(0,mt.$)({primary:Ro});function Lo(e,t,n){return"WORKSPACE_MOUNTED"===n.type?function(){var t=(0,A.Z)(G().mark((function t(n){var r;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,ko.Z)();case 2:(r=t.sent)&&n({type:"SET_CUSTOM_GURL",wid:e,gurl:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}():"START_CROSIS_ADMIN_LOGS"===n.type?function(n,r){r().services.container.client().addDebugFunc((function(i){if("log"===i.type){var a=(0,bt.Z)(r(),e,t,"adminpanel").crosisV6Logs;Do(e,t,n,{crosisV6Logs:[].concat((0,Bt.Z)(a),[{index:a.length+1,dir:i.log.direction,cmd:i.log.cmd,timestamp:window.performance.now()}])})}}))}:null}var Bo=function(e){var t,n=e.wid,r=e.pud,i=e.style,a=K.useState("repl"),o=(0,D.Z)(a,2),s=o[0],l=o[1];t="repl"===s?Po:"logs"===s?po:"logs2"===s?Co:"token"===s?xo:Zo;var c=["repl","logs","logs2","token","gurl"].map((function(e){return(0,ge.tZ)(ce.Z,{color:"primary",filled:e===s,onClick:function(){return l(e)},children:e},e)}));return(0,ge.BX)("div",{style:i,className:"jsx-2212699820 admin-panel",children:[(0,ge.tZ)("div",{className:"jsx-2212699820 buttons",children:c}),(0,ge.tZ)("div",{className:"jsx-2212699820 section",children:(0,ge.tZ)(t,{wid:n,pud:r,className:"jsx-2212699820"})}),(0,ge.tZ)(V.default,{id:"2212699820",children:[".admin-panel.jsx-2212699820{background-color:var(--background-default);color:var(--foreground-default);}",".buttons.jsx-2212699820{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;margin-bottom:10px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".section.jsx-2212699820{height:calc(100% - 50px);}"]})]})},Mo=n(76935);function Uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uo(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fo=function(e){var t=e.reason;return(0,ge.BX)("div",{className:"jsx-1201232931 spinner-modal-container",children:[(0,ge.tZ)("div",{className:"jsx-1201232931 spinner",children:(0,ge.tZ)(vt.Z,{})}),(0,ge.BX)("h3",{className:"jsx-1201232931 reason",children:[t,"..."]}),(0,ge.tZ)(V.default,{id:"1201232931",children:["@-webkit-keyframes replit-logo-spin-jsx-1201232931{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}","@keyframes replit-logo-spin-jsx-1201232931{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}",".spinner-modal-container.jsx-1201232931{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;min-width:225px;height:225px;cursor:not-allowed;background-color:var(--background-overlay);border-radius:var(--border-radius-4);z-index:500000;padding:var(--space-16);color:white;}",".spinner.jsx-1201232931{width:80px;height:80px;-webkit-animation:replit-logo-spin-jsx-1201232931 1.5s linear infinite;animation:replit-logo-spin-jsx-1201232931 1.5s linear infinite;}",".reason.jsx-1201232931{margin-top:20px;font-size:18px;font-weight:500;}"]})]})},zo=function(e){var t=e.style,n=e.wid,r=e.pud,i=(0,et.v9)((function(e){return(0,bt.Z)(e,n,r,"lock")})),a=i.isLocked,o=i.showSpinner,s=i.reason;return a?o?(0,ge.BX)("div",{style:t,className:"jsx-2297509473",children:[(0,ge.tZ)(Fo,{reason:s}),(0,ge.tZ)(V.default,{id:"2297509473",children:[".jsx-2297509473{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:fixed;top:0;bottom:0;left:0;right:0;cursor:not-allowed;background-color:rgba(0,0,0,0.25);z-index:500000;}"]})]}):(0,ge.tZ)("div",{style:t,className:"jsx-2427369210",children:(0,ge.tZ)(V.default,{id:"2427369210",children:[".jsx-2427369210{position:fixed;top:0;bottom:0;left:0;right:0;cursor:not-allowed;z-index:500000;}"]})}):null},Vo=(0,mt.$)({primary:function(e,t){switch(t.type){case"LOCK_WORKSPACE":return Xo(Xo({},e),{},{showSpinner:t.showSpinner,reason:t.reason,isLocked:!0});case"UNLOCK_WORKSPACE":return Xo(Xo({},e),{},{showSpinner:!1,isLocked:!1});default:return e}},preferences:wi.c});function Ho(e,t,n){switch(n.type){case"LOCK_WORKSPACE":return function(){var t=(0,A.Z)(G().mark((function t(n,r){var i;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r().workspace[e].layout,!dt.Bp(i,"lock")){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,n(Xo({wid:e,type:"UPDATE_LAYOUT"},dt.$T(i,"lock","inside",["floating"])));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();case"UNLOCK_WORKSPACE":return function(){var t=(0,A.Z)(G().mark((function t(n,r){var i;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r().workspace[e].layout,t.next=3,n(Xo({wid:e,type:"UPDATE_LAYOUT"},dt.Od(i,"lock")));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();default:return null}}var Go=n(35613);function Wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wo(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ko(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{closable:!0,title:"",message:"",trackingCtx:"",isOpen:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PROMPT_HACKER_UPGRADE":return{isOpen:!0,title:t.title,message:t.message,closable:t.closable,trackingCtx:t.trackingCtx};case"DISMISS_HACKER_UPGRADE":return qo(qo({},e),{},{isOpen:!1});default:return e}}var Yo=function(e){var t=e.wid,n=e.pud,r=(0,bt.J)(t,n,"hackerupgradeprompt"),i=(0,D.Z)(r,1)[0],a=i.title,o=i.message,s=i.trackingCtx,l=i.isOpen,c=i.closable,u=K.useState(!1),d=(0,D.Z)(u,2),p=d[0],f=d[1],m=K.useState(!1),h=(0,D.Z)(m,2),g=h[0],v=h[1],b=K.useState(!1),y=(0,D.Z)(b,2),x=y[0],w=y[1],k=function(){return f(!1)},Z=(0,me.KiG)({ssr:!1}),j=function(e){var t=e.loading,n=e.data;return t?"loading":n&&n.currentUser?n.currentUser.isHacker?"hacker":"signedUp":"anon"}(Z),O=(0,et.I0)();return K.useEffect((function(){x&&"hacker"===j&&v(!0)}),[x,j]),K.useEffect((function(){if(g){var e=setTimeout((function(){window.location.reload()}),1500);return function(){return clearTimeout(e)}}}),[g]),g?(0,ge.BX)(Ot.Z,{isOpen:!0,onRequestClose:function(){return!1},preventClose:!0,children:[(0,ge.BX)("div",{className:"jsx-3902013120",children:[(0,ge.tZ)("h3",{className:"jsx-3902013120",children:"The page will reload soon with your new superpowers"}),(0,ge.tZ)("br",{className:"jsx-3902013120"}),(0,ge.tZ)(Et.Z,{style:{width:76,height:76,margin:"0 auto"}})]}),(0,ge.tZ)(V.default,{id:"3902013120",children:["div.jsx-3902013120{padding:75px 52.5px;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;font-weight:100;text-align:center;}"]})]}):l?(0,ge.BX)(ge.HY,{children:[p?"loading"===j?(0,ge.tZ)(Ot.Z,{isOpen:!0,onRequestClose:function(){return!1},preventClose:!0,children:(0,ge.tZ)(Et.Z,{style:{width:76,height:76,margin:"0 auto"}})}):"anon"===j?(0,ge.tZ)(Ot.Z,{isOpen:!0,onRequestClose:k,children:(0,ge.tZ)(Go.Z,{onSuccess:function(){Z.refetch(),w(!0)}})}):(0,ge.tZ)(Bn.Z,{onClose:k,isOpen:p,trackingInfo:{context:s}}):null,(0,ge.BX)("div",{className:"jsx-279563936 warning-label-outer",children:[(0,ge.BX)("div",{className:"jsx-279563936 warning-label-inner",children:[(0,ge.tZ)("span",{className:"jsx-279563936 warning-label-warning",children:a}),(0,ge.tZ)("span",{className:"jsx-279563936 warning-label-message",children:"hacker"!==j?o:"\ud83e\udd26\u200d\u2640\ufe0f You've run out of disk space."}),"hacker"!==j&&(0,ge.tZ)("button",{onClick:function(){(0,ct.track)(ct.events.UPGRADE_SELECTED,{source:"inline",planID:"hacker"}),f(!0)},className:"jsx-279563936 warning-label-upgrade",children:"Upgrade"}),c&&(0,ge.tZ)("button",{onClick:function(){O({type:"DISMISS_HACKER_UPGRADE",wid:t})},className:"jsx-279563936 warning-label-x",children:"\xd7"})]}),(0,ge.tZ)(V.default,{id:"279563936",children:[".warning-label-outer.jsx-279563936{display:table;background:var(--background-default);position:absolute;bottom:24px;left:50%;-webkit-transform:translate(-50%,0);-ms-transform:translate(-50%,0);transform:translate(-50%,0);border-radius:5px;z-index:30;box-shadow:var(--shadow-1);}",".warning-label-inner.jsx-279563936{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;background-color:white;padding:8px;background-color:var(--accent-orange-dimmest);color:var(--accent-orange-strongest);border-radius:5px;min-width:400px;max-width:600px;}",".warning-label-upgrade.jsx-279563936{margin:8px;padding:8px 16px;background-color:var(--accent-positive-dimmest);color:var(--white);border-radius:5px;border:none;font-size:1em;font-weight:bold;}",".warning-label-warning.jsx-279563936{font-weight:bold;margin:0px 8px;}",".warning-label-x.jsx-279563936{font-weight:bold;font-size:1.5em;text-align:center;vertical-align:center;color:grey;outline:none;background:none;border:none;cursor:pointer;margin:8px;}"]})]})]}):null},Qo=n(51218);function $o(e){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,A.Z)(G().mark((function e(t){var n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qo.l){e.next=2;break}throw new Error("Expected Apollo Client");case 2:return e.next=4,Qo.l.query({query:me.zTE,variables:{replId:t}});case 4:if(n=e.sent,"Repl"===(r=n.data).repl.__typename){e.next=8;break}throw new Error("Expected repl");case 8:return e.abrupt("return",r.repl);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var es=(0,Ta.Z)(["OPEN_SHELL","PORT_OPEN","SET_VNC_URL","RUN_REPL"]),ts=es.receiver,ns=es.useReceiver;function rs(){var e=(0,fe.Z)(),t=K.useState(""),n=(0,D.Z)(t,2),r=n[0],i=n[1],a=(0,et.I0)();return ns((function(t){var n=t.action,o=t.wid;switch(n.type){case"SET_VNC_URL":i(n.vncUrl);break;case"OPEN_SHELL":a(function(e){var t=e.wid;return function(e,n){(0,ct.track)(ct.events.SHELL_OPENED);var r=n().workspace[t],i=r.layout,a=r.plugins,o=dt.PP(i,a,"shell");o&&e({type:"SET_ACTIVE_TAB",path:dt.Il(dt.Il(o)),tabIndex:1,wid:t})}}({wid:o}));break;case"PORT_OPEN":if(5900===n.port){a(function(e){var t=e.wid,n=e.replId,r=e.vncUrl;return function(){var e=(0,A.Z)(G().mark((function e(i,a){var o,s,l,c,u,d,p,f,m,h,g;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a().workspace[t],l=s.layout,c=s.plugins,e.next=3,$o(n);case 3:if(!(u=e.sent).config.isVnc&&null!==(o=u.currentUserPermissions)&&void 0!==o&&o.changeConfig&&i({type:"REQUEST_REPL_UPDATE",wid:t,updates:{config:{isVnc:!0,isServer:!1}}}),!dt.PP(l,c,"vnc")){e.next=9;break}return i({type:"CONNECT_VNC",vncUrl:r,wid:t}),e.abrupt("return");case 9:i({type:"LOAD_PLUGIN",wid:t,pluginPud:d="vnc",pluginType:"vnc",title:"output",initialState:{}}),dt.e$(l,d)||(p=dt.PP(l,c,"console")||dt.PP(l,c,"terminal2")||dt.Jz(),f=dt.Il(dt.Il(p)),m=dt.$T(l,d,"above",f),h=m.path,g=m.to,i({type:"UPDATE_LAYOUT",wid:t,path:h,to:g,property:void 0})),i({type:"CONNECT_VNC",vncUrl:r,wid:t});case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:o,replId:e,vncUrl:r}));break}a(function(e){var t=e.wid,n=e.replId;return function(){var e=(0,A.Z)(G().mark((function e(r,i){var a,o,s,l,c,u,d,p,f,m,h;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i().workspace[t],s=o.layout,l=o.plugins,e.next=3,$o(n);case 3:if(!(c=e.sent).config.isServer&&null!==(a=c.currentUserPermissions)&&void 0!==a&&a.changeConfig&&r({type:"REQUEST_REPL_UPDATE",wid:t,updates:{config:{isServer:!0,isVnc:!1}}}),!dt.PP(s,l,"webview")){e.next=9;break}return r({type:"REFRESH_WEBVIEW",wid:t}),e.abrupt("return");case 9:r({type:"LOAD_PLUGIN",wid:t,pluginPud:u="webview",pluginType:"webview",title:"output",initialState:{canBeClosed:!0}}),dt.e$(s,u)||(d=dt.PP(s,l,"console")||dt.PP(s,l,"terminal2")||dt.Jz(),p=dt.Il(dt.Il(d)),f=dt.$T(s,u,"above",p),m=f.path,h=f.to,r({type:"UPDATE_LAYOUT",wid:t,path:m,to:h,property:void 0}));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:o,replId:e}));break;case"RUN_REPL":a(function(e){var t=e.wid;return function(e,n){var r=n().workspace[t],i=r.layout,a=r.plugins,o=dt.PP(i,a,"shell");o&&e({type:"SET_ACTIVE_TAB",path:dt.Il(dt.Il(o)),tabIndex:0,wid:t})}}({wid:o}))}return null})),null}var is=44100,as=32896,os=function e(){var t=this;(0,L.Z)(this,e),(0,z.Z)(this,"samples",void 0),(0,z.Z)(this,"bufferSource",void 0),(0,z.Z)(this,"audioCtx",void 0),(0,z.Z)(this,"gainNode",void 0),(0,z.Z)(this,"startTime",void 0),(0,z.Z)(this,"audioStart",0),(0,z.Z)(this,"correction",void 0),(0,z.Z)(this,"feed",(function(e){var n=t.getFormatedValue(e),r=new Float32Array(t.samples.length+n.length);r.set(t.samples,0),r.set(n,t.samples.length),t.samples=r})),(0,z.Z)(this,"getFormatedValue",(function(e){for(var t=new Float32Array(e.length),n=0;n<e.length;n++)t[n]=e[n]/2147483648;return t})),(0,z.Z)(this,"stop",(function(){if(t.bufferSource)try{t.bufferSource.stop()}catch(e){if("InvalidStateError"!==e.name&&"RangeError"!==e.name)throw e}})),(0,z.Z)(this,"flush",(function(e){if(t.audioCtx&&t.samples.length){var n=0,r=t.audioCtx.currentTime;if(0===e)t.startTime=r,t.audioStart=r;else{for(var i=r-t.audioStart,a=Math.floor(i*is);a>e-as;)t.audioStart+=.7459410430839002,a-=as;a>e&&(n=a-e,t.startTime=r),t.startTime=r}t.samples=t.samples.slice(n,t.samples.length);for(var o,s,l,c=t.audioCtx.createBufferSource(),u=t.samples.length/1,d=t.audioCtx.createBuffer(1,u,is),p=0;p<1;p++)for(o=d.getChannelData(p),s=p,l=0;l<u;l++)o[l]=t.samples[s],s+=1;t.startTime<t.audioCtx.currentTime&&(t.startTime=t.audioCtx.currentTime),c.buffer=d,c.connect(t.gainNode),c.start(t.startTime),t.stop(),t.bufferSource=c,t.startTime+=d.duration,t.samples=new Float32Array}})),this.samples=new Float32Array;var n=window.AudioContext||window.webkitAudioContext;this.audioCtx=new n,this.gainNode=this.audioCtx.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioCtx.destination),this.startTime=this.audioCtx.currentTime};function ss(e){var t=e.container,n=(0,K.useState)(!1),r=n[0],i=n[1],a=(0,K.useRef)(null);(0,K.useEffect)((function(){return t.openChannel({name:"audio",service:"audio"},(function(e){var t=e.channel;if(t){var n=null,r=!1;return t.onCommand((function(e){var t;r||(r=!0,(0,ct.track)(ct.events.AUDIO_PLAYING_STARTED),a.current=function(){n=new os,a.current=null},i(!0)),n&&null!==e&&void 0!==e&&null!==(t=e.audio2)&&void 0!==t&&t.data&&(e.audio2.samples||(e.audio2.samples=0),n.feed(Int32Array.from(e.audio2.data)),n.flush(e.audio2.samples))})),function(){i(!1),n&&(n.stop(),n=null),a.current=null}}}))}),[t]);var o=function(){i(!1),(0,ct.track)(ct.events.AUDIO_PROMPT_CLOSED,{accepted:!1})};return(0,ge.tZ)(Ot.Z,{isOpen:r,preventClose:!0,onRequestClose:o,children:(0,ge.BX)(yn.Z,{css:[Zn.l0.colWithGap(32),Zn.l0.p(32),"",""],children:[(0,ge.BX)(yn.Z,{css:[Zn.l0.colWithGap(16),"",""],children:[(0,ge.tZ)(xn.h,{variant:"headerBig",level:3,children:"We hear audio!"}),(0,ge.tZ)(xn.x,{children:"Hey! It appears that this repl is playing audio."}),(0,ge.tZ)(xn.x,{children:"In order for us to hear the audio you're receiving, please click confirm."})]}),(0,ge.BX)(yn.Z,{css:[Zn.l0.rowWithGap(16),"",""],children:[(0,ge.tZ)(ce.Z,{onClick:o,children:"Cancel"}),(0,ge.tZ)(ce.Z,{color:"positive",filled:!0,onClick:function(){i(!1),(0,ct.track)(ct.events.AUDIO_PROMPT_CLOSED,{accepted:!0}),a.current&&a.current()},children:"Confirm"})]})]})})}function ls(){var e=(0,Oe.Z)().container;return(0,ge.tZ)(ss,{container:e})}var cs=n(35424),us=n.n(cs),ds=n(98711);function ps(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ps(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ps(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ms(e){return new Promise((function(t,n){var r=e.openChannel({service:"gcsfiles"},(function(e){if(!e.error)return e.channel.request({persistMirror:{path:"."}}).then((function(e){e.ok,r(),t()})),function(e){e.willReconnect&&r()};n(e.error)}))}))}var hs=function(e){var t={"go.mod":"go","package.json":"nodejs","Cargo.toml":"rust","requirements.txt":"python3","pyproject.toml":"python3","index.html":"html",Gemfile:"ruby",Makefile:"bash"};for(var n in t)if(e.includes(n))return t[n];var r=se().allSupportedByPopularity().reduce((function(e,t){var n=t.ext,r=t.key;return e[n]=e[n]?e[n]:r,e}),{}),i=e.map((function(e){return e.split(".").slice(-1)[0]})).reduce((function(e,t){var n=e.find((function(e){return e.ext===t}));return n?n.count++:e.push({ext:t,count:1}),e}),[]).sort((function(e,t){return t.count-e.count}));return i.length&&(1===i.length||i[0].count>=2*i[1].count)&&r[i[0].ext]?r[i[0].count]:"bash"};var gs=(0,Ta.Z)(["START_GIT_CLONE","END_GIT_CLONE","INSERT_RUN_FLOW_PLUGIN"]),vs=gs.receiver,bs=gs.useReceiver;function ys(){var e=(0,fe.Z)(),t=(0,et.I0)(),n=(0,ee.useRouter)(),r=(0,me.jCQ)({variables:{replId:e}}).data,i=(0,me.IRU)(),a=(0,D.Z)(i,1)[0],o=K.useState(null),s=(0,D.Z)(o,2),l=s[0],c=s[1];return bs((function(e){var i=e.action,o=e.wid;switch(i.type){case"START_GIT_CLONE":var s="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl.url:void 0;if(!s)throw new Error("expected url");n.replace({pathname:n.pathname,query:n.query},s,{shallow:!0});break;case"END_GIT_CLONE":var u="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl:void 0;if(!u)throw new Error("Expected repl");t(function(e){var t=e.wid,n=e.replLanguage,r=e.onDone;return function(){var e=(0,A.Z)(G().mark((function e(i,a){var o,s,l,c,u,d,p,f,m,h,g,v,b,y,x,w;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i({type:"LOCK_WORKSPACE",showSpinner:!0,reason:"Detecting Language",wid:t}),o=a().services,s=o.fs,l=o.session,c=o.container,e.next=4,s.readDir(ei.Q);case 4:return u=e.sent,d=u.error?[]:u.children.filter((function(e){return e.type===gn.Tv.File})).map((function(e){return e.filename})),(p=d.find((function(e){return e.toLowerCase().includes("readme")}))||(0,ds.T)(d,n)||d[0])&&l.openFile(p),e.next=10,ms(c);case 10:return e.next=12,s.readFile(".replit");case 12:return f=e.sent,e.next=15,s.stat("replit.nix");case 15:if(m=e.sent,h=null,g={displayName:""},v=!1,null===f.error&&m.exists?(h="nix",g=se().get(h),v=!0):null===f.error&&(h=us().parse(f.content.toString("utf8")).language,g=se().get(h),v="Unknown"!==g.displayName),!f.error&&h&&v){e.next=30;break}if(i({type:"UNLOCK_WORKSPACE",wid:t}),!f.error){e.next=28;break}return b=hs(d),y="nodejs"===b?"npm start":"",x='language = "'.concat(b,'"\nrun = "').concat(y,'"'),e.next=28,s.writeFile(".replit",ur.Z.from(x));case 28:return i({type:"INSERT_RUN_FLOW_PLUGIN",wid:t,pudToInsert:"config"}),e.abrupt("return");case 30:if(h!==n){e.next=33;break}return i({type:"UNLOCK_WORKSPACE",wid:t}),e.abrupt("return");case 33:return w=g.displayName,i({type:"LOCK_WORKSPACE",showSpinner:!0,reason:"Upgrading to ".concat(w),wid:t}),e.next=37,s.persist({skipDebounce:!0});case 37:r(se().getCanonicalName(h));case 38:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:o,replLanguage:u.language,onDone:function(e){a({variables:{input:{id:u.id,language:e}}}).then((function(){window.location.replace(window.location.pathname)}))}}));break;case"INSERT_RUN_FLOW_PLUGIN":var d=i.pudToInsert;t(function(e){var t=e.wid,n=e.currentPud,r=e.pudToInsert,i=e.setCurrentPud;return function(e,a){var o=a().workspace[t],s=o.layout,l=o.plugins;if(!dt.e$(s,r)){var c=dt.PP(s,l,"shell");if(!c)throw new Error("Expected shell path");var u=dt.Il(dt.Il(c));e(fs({wid:t,type:"UPDATE_LAYOUT"},dt.$T(s,r,"above",u)));var d=a().workspace[t].layout;n&&e(fs({wid:t,type:"UPDATE_LAYOUT"},dt.Od(d,n))),i(r)}}}({wid:o,currentPud:l,pudToInsert:d,setCurrentPud:c}))}return null})),null}var xs=n(15476);var ws=function(e){return(0,ge.BX)(Ot.Z,{preventClose:!0,isOpen:!0,onRequestClose:e.onCancel,children:[(0,ge.BX)("div",{className:"jsx-1092762125 notification-perm-container",children:[(0,ge.BX)("div",{className:"jsx-1092762125 infobox",children:[(0,ge.tZ)("h2",{className:"jsx-1092762125 title",children:"Replit needs your permission to enable notifications."}),(0,ge.tZ)("div",{className:"jsx-1092762125",children:"Never miss messages from your collaborators if you\u2019re in another tab or window."})]}),(0,ge.BX)("div",{className:"jsx-1092762125 controlbox",children:[(0,ge.tZ)(ce.Z,{onClick:e.onCancel,children:"Cancel"}),(0,ge.tZ)(ce.Z,{filled:!0,color:"positive",onClick:e.onConfirm,children:"Confirm"})]})]}),(0,ge.tZ)(V.default,{id:"1092762125",children:[".notification-perm-container.jsx-1092762125{padding:30px;}",".infobox.jsx-1092762125{padding-bottom:75px;}",".infobox.jsx-1092762125 .title.jsx-1092762125{padding-bottom:22px;}",".controlbox.jsx-1092762125{display:grid;grid-template-columns:auto auto;grid-column-gap:10px;-webkit-box-pack:end;-webkit-justify-content:end;-ms-flex-pack:end;justify-content:end;}"]})]})};function ks(e){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,A.Z)(G().mark((function e(t){var n,r,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==Qo.l){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Qo.l.query({query:me.vce,variables:{username:t}});case 4:return r=e.sent,i=r.data,e.abrupt("return",null===i||void 0===i||null===(n=i.user)||void 0===n?void 0:n.image);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function js(){return"Notification"in window?"true"===window.localStorage.getItem(Ss)?"dismissed":window.Notification.permission:"denied"}function Os(){return Es.apply(this,arguments)}function Es(){return(Es=(0,A.Z)(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,window.Notification.requestPermission().then(),e.next=7;break;case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",new Promise((function(e){window.Notification.requestPermission((function(t){e(t)}))})));case 7:return e.abrupt("return",window.Notification.requestPermission());case 8:case"end":return e.stop()}}),e,null,[[0,4]])})))).apply(this,arguments)}function _s(){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,A.Z)(G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Os();case 2:t=e.sent,Ps(!1),(0,ct.track)("granted"===t?ct.events.WEB_NOTIFICATION_PERM_GRANTED:ct.events.WEB_NOTIFICATION_PERM_DENIED);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ss="notifications/dismissedModal";function Ps(e){window.localStorage.setItem(Ss,String(e)),e&&(0,ct.track)(ct.events.WEB_NOTIFICATION_PERM_DISMISSED_MODAL)}var Ns={};function Ts(e){return Is.apply(this,arguments)}function Is(){return(Is=(0,A.Z)(G().mark((function e(t){var n,r,i,a,o,s,l,c,u,d,p;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.title,r=t.body,i=t.badge,a=t.icon,o=t.iconByUsername,s=t.tag,l=t.onClick,c=t.cacheDuration,u=void 0===c?0:c,document.hidden||!document.hasFocus()){e.next=3;break}return e.abrupt("return");case 3:if("granted"===js()){e.next=5;break}return e.abrupt("return");case 5:if(d=Date.now(),!(s in Ns)){e.next=9;break}if(!(Ns[s]+u>d)){e.next=9;break}return e.abrupt("return");case 9:if(!o){e.next=13;break}return e.next=12,ks(o);case 12:a=e.sent;case 13:(p=new window.Notification(n,{body:r,badge:i||"/public/images/logo-grayscale.png",icon:a||"/public/images/icon-square.png",tag:s})).addEventListener("click",(function(){window.focus(),p.close()})),l&&p.addEventListener("click",l),Ns[s]=d;case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Rs=(0,Ta.Z)(["REQUEST_NOTIFICATION_PERMS"]),Ds=Rs.receiver,As=Rs.useReceiver;function Ls(){var e=(0,K.useState)(!1),t=e[0],n=e[1];As((function(e){var t=e.action;switch(t.type){case"REQUEST_NOTIFICATION_PERMS":var r=js();("default"===r||"dismissed"===r&&t.force)&&n(!0)}return null}));var r=function(){var e=(0,A.Z)(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_s();case 2:n(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?(0,ge.tZ)(ws,{onCancel:function(){Ps(!0),n(!1)},onConfirm:r}):null}var Bs=n(26331),Ms=n(83995),Us=function(e){var t,n,r,i=e.style,a=(0,fe.Z)(),o=(0,me.r8C)({variables:{replID:a},pollInterval:1e4}),s=o.data,l=o.error,c=o.loading;s&&("Repl"===s.repl.__typename?n=null===s||void 0===s||null===(r=s.repl)||void 0===r?void 0:r.database:t="Could not fetch Database info");l&&("GraphQL error: You don't have access to this database"===l.message?n=null:t=l.message);var u=(0,et.v9)((function(e){return e.user.userInfo}));return(0,ge.BX)("div",{style:i,className:"jsx-1980359980 database",children:[(0,ge.tZ)("div",{className:"jsx-1980359980 header",children:(0,ge.tZ)(Ee.Z,{level:4,children:"Database"})}),(0,ge.tZ)(Bs.Z,{height:1}),(0,ge.tZ)("div",{className:"jsx-1980359980 wrapper",children:u.isLoggedIn?(0,ge.BX)(ge.HY,{children:[(0,ge.BX)("span",{className:"jsx-1980359980 description",children:[(0,ge.tZ)("a",{href:"https://docs.replit.com/misc/database",target:"_blank",rel:"noopener",className:"jsx-1980359980 docs-link",children:"Replit Database"}),"is an easy to use key-value store."]}),t&&(0,ge.tZ)("div",{className:"jsx-1980359980 error",children:t}),(n||c)&&(0,ge.tZ)("div",{className:"jsx-1980359980 usage",children:(0,ge.tZ)(Xs,{database:n,loading:c})}),!c&&(0,ge.BX)("div",{className:"jsx-1980359980",children:[(0,ge.tZ)("span",{className:"jsx-1980359980 command-title",children:"commands"}),(0,ge.tZ)(Fs,{})]})]}):(0,ge.tZ)($s,{})}),(0,ge.tZ)(Qs,{}),(0,ge.tZ)(V.default,{id:"1980359980",children:[".database.jsx-1980359980{text-overflow:ellipsis;background-color:var(--background-default);color:var(--foreground-default);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-width:120px;padding:var(--space-8);border-top-right-radius:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);}",".header.jsx-1980359980{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:var(--space-32);position:relative;color:var(--foreground-default);width:100%;}",".description.jsx-1980359980{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;color:var(--foreground-dimmer);padding-bottom:var(--space-16) 0;}",".docs-link.jsx-1980359980{font-weight:var(--font-weight-medium);color:var(--accent-primary-default);margin-right:var(--space-4);}",".wrapper.jsx-1980359980{overflow-y:auto;-webkit-flex:1;-ms-flex:1;flex:1;width:100%;}",".error.jsx-1980359980{color:var(--accent-negative-default);margin-bottom:var(--space-16);}",".usage.jsx-1980359980{margin-bottom:var(--space-16);}",".command-title.jsx-1980359980{font-size:var(--font-size-small);text-transform:uppercase;font-weight:var(--font-weight-medium);-webkit-letter-spacing:0.5px;-moz-letter-spacing:0.5px;-ms-letter-spacing:0.5px;letter-spacing:0.5px;margin-bottom:var(--space-16);}"]})]})},Xs=function(e){var t=e.database;if(e.loading)return(0,ge.tZ)(Et.Z,{style:{margin:"10px auto",width:"35px",height:"35px"}});if(!t)return null;var n=t.sizeMB||0,r="MB";return n<1&&(n*=1e3,r="KB"),(0,ge.BX)("div",{className:"jsx-1393931180 storage-section",children:[(0,ge.tZ)("span",{className:"jsx-1393931180 storage-title",children:"storage"}),(0,ge.BX)("div",{className:"jsx-1393931180",children:[(0,ge.BX)("span",{className:"jsx-1393931180 storage-data",children:[n.toFixed(2)," ",r]}),(0,ge.tZ)("span",{className:"jsx-1393931180 separator",children:"|"}),(0,ge.tZ)("span",{className:"jsx-1393931180 storage-data",children:"".concat(t.keysCount||0," ").concat(1===t.keysCount?"key":"keys")})]}),(0,ge.tZ)(V.default,{id:"1393931180",children:[".storage-section.jsx-1393931180{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:var(--space-8) 0;}",".storage-title.jsx-1393931180{font-size:var(--font-size-small);text-transform:uppercase;font-weight:var(--font-weight-medium);-webkit-letter-spacing:0.5px;-moz-letter-spacing:0.5px;-ms-letter-spacing:0.5px;letter-spacing:0.5px;padding-bottom:var(--space-4);}",".separator.jsx-1393931180{color:var(--foreground-dimmest);padding:0 var(--space-8);}",".storage-data.jsx-1393931180{color:var(--foreground-dimmer);}"]})]})},Fs=function(){var e=(0,hn.Z)(),t=(0,ge.tZ)(Ys,{});if(e)switch((0,vn.r6)(e)){case"go":t=(0,ge.tZ)(Ks,{examples:Ws});break;case"js":case"ts":case"tsx":case"jsx":case"mjs":t=(0,ge.tZ)(Ks,{examples:qs});break;case"py":t=(0,ge.tZ)(Ks,{examples:Gs})}return(0,ge.BX)("div",{className:"jsx-4017018285 examples-container",children:[t,(0,ge.tZ)(V.default,{id:"4017018285",children:[".examples-container.jsx-4017018285{padding:var(--space-4) 0;}"]})]})},zs=function(e){var t=e.title,n=e.content,r=K.useState(n),i=(0,D.Z)(r,2),a=i[0],o=i[1],s=function(){var e=t.split(" ");return[e[0],e.slice(1).join(" ")]}(),l=(0,D.Z)(s,2),c=l[0],u=l[1];return(0,ge.BX)("div",{className:"jsx-4013288462 command-container",children:[(0,ge.BX)("span",{className:"jsx-4013288462 command-title",children:[(0,ge.tZ)("span",{className:"jsx-4013288462 command-keyword",children:c}),u]}),(0,ge.BX)("div",{className:"jsx-4013288462 command-wrapper",children:[(0,ge.tZ)("div",{className:"jsx-4013288462 command-example",children:n.map((function(e,n){return"input"===e.type?(0,ge.tZ)("input",{onChange:function(e){var t=(0,Bt.Z)(a);t[n].value=e.target.value,o(t)},placeholder:e.placeholder,value:e.value||"",className:"jsx-4013288462"},"".concat(t,"-").concat(n)):(0,ge.tZ)("code",{className:"jsx-4013288462",children:e.value},"".concat(t,"-").concat(n))}))}),(0,ge.tZ)(Vs,{code:a.reduce((function(e,t){return"input"===t.type?e+(t.value||t.placeholder):e+t.value}),"")})]}),(0,ge.tZ)(V.default,{id:"4013288462",children:[".command-container.jsx-4013288462{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:start;-webkit-box-align:start;-ms-flex-align:start;align-items:start;}",".command-title.jsx-4013288462{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;white-space:nowrap;margin-bottom:var(--space-8);color:var(--foreground-dimmer);}",".command-keyword.jsx-4013288462{color:var(--foreground-default);font-weight:var(--font-weight-medium);margin-right:var(--space-4);}",".command-wrapper.jsx-4013288462{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}",".command-example.jsx-4013288462{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;padding:2px 4px;border-radius:var(--border-radius-4);background-color:var(--background-higher);-webkit-transition:background-color 0.1s;transition:background-color 0.1s;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:var(--space-4);margin-bottom:var(--space-4);}",".command-example.jsx-4013288462:hover,.command-example.jsx-4013288462:hover>code.jsx-4013288462{background-color:var(--background-higher);}","code.jsx-4013288462{padding:2px;background-color:var(--background-higher);color:var(--accent-negative-default);-webkit-transition:background-color 0.1s;transition:background-color 0.1s;white-space:nowrap;}","input.jsx-4013288462{text-align:center;width:40px;height:auto;background-color:var(--background-default);border:1px solid var(--background-highest);color:var(--foreground-default);border-radius:var(--border-radius-4);-webkit-transition:background-color 0.1s;transition:background-color 0.1s;cursor:text;}","input.jsx-4013288462:focus{border:0.5px solid var(--accent-primary-default);outline:none;}"]})]})},Vs=function(e){var t=e.code,n=(0,Ms.Z)();return n?(0,ge.tZ)(ce.Z,{className:"button",size:"small",onClick:function(){n({code:t})},children:"Insert \u2192"}):(0,ge.tZ)(ce.Z,{className:"button",size:"small",onClick:function(){return(0,So.Z)(t)},children:"Copy"})},Hs=[{title:"Set a key to a value",content:[{type:"code",value:"curl $REPLIT_DB_URL -d '"},{type:"input",placeholder:"key"},{type:"code",value:"="},{type:"input",placeholder:"value"},{type:"code",value:"'"}]},{title:"Get a key's value",content:[{type:"code",value:"curl $REPLIT_DB_URL/"},{type:"input",placeholder:"key"}]},{title:"Delete a key",content:[{type:"code",value:"curl -XDELETE $REPLIT_DB_URL/"},{type:"input",placeholder:"key"}]},{title:"List all keys",content:[{type:"code",value:'curl "$REPLIT_DB_URL?prefix='},{type:"input",placeholder:"key"},{type:"code",value:'"'}]}],Gs=[{title:"Import the database",content:[{type:"code",value:"from replit import db"}]},{title:"Set a key to a value",content:[{type:"code",value:'db["'},{type:"input",placeholder:"key"},{type:"code",value:'"] = "'},{type:"input",placeholder:"value"},{type:"code",value:'"'}]},{title:"Get a key's value",content:[{type:"code",value:'value = db["'},{type:"input",placeholder:"key"},{type:"code",value:'"]'}]},{title:"Delete a key",content:[{type:"code",value:'del db["'},{type:"input",placeholder:"key"},{type:"code",value:'"]'}]},{title:"List all keys",content:[{type:"code",value:"keys = db.keys()"}]},{title:"List keys with a prefix",content:[{type:"code",value:'matches = db.prefix("'},{type:"input",placeholder:"prefix"},{type:"code",value:'")'}]}],Ws=[{title:"Import the database",content:[{type:"code",value:'import "github.com/replit/database-go"'}]},{title:"Set a key to a value",content:[{type:"code",value:'database.Set("'},{type:"input",placeholder:"key"},{type:"code",value:'", "'},{type:"input",placeholder:"value"},{type:"code",value:'")'}]},{title:"Get a key's value",content:[{type:"code",value:'value, _ := database.Get("'},{type:"input",placeholder:"key"},{type:"code",value:'")'}]},{title:"Delete a key",content:[{type:"code",value:'database.Delete("'},{type:"input",placeholder:"key"},{type:"code",value:'")'}]},{title:"List all keys",content:[{type:"code",value:'keys, _ := database.ListKeys("")'}]},{title:"List keys with a prefix",content:[{type:"code",value:"matches, _ := database.ListKeys("},{type:"input",placeholder:"prefix"},{type:"code",value:'")'}]}],qs=[{title:"Import the database",content:[{type:"code",value:'const Database = require("@replit/database")'}]},{title:"Create a new database",content:[{type:"code",value:"const db = new Database()"}]},{title:"Set a key to a value",content:[{type:"code",value:'db.set("'},{type:"input",placeholder:"key"},{type:"code",value:'", "'},{type:"input",placeholder:"value"},{type:"code",value:'").then(() => {});'}]},{title:"Get a key's value",content:[{type:"code",value:'db.get("'},{type:"input",placeholder:"key"},{type:"code",value:'").then(value => {});'}]},{title:"Delete a key",content:[{type:"code",value:'db.delete("'},{type:"input",placeholder:"key"},{type:"code",value:'").then(() => {});'}]},{title:"List all keys",content:[{type:"code",value:"db.list().then(keys => {});"}]},{title:"List keys with a prefix",content:[{type:"code",value:'db.list("'},{type:"input",placeholder:"prefix"},{type:"code",value:'").then(matches => {});'}]}],Ks=function(e){var t=e.examples;return(0,ge.tZ)("div",{children:(0,ge.tZ)(de.gC,{spacing:2,children:t.map((function(e,t){return(0,ge.tZ)(zs,{title:e.title,content:e.content},t)}))})})},Ys=function(){return(0,ge.BX)(ge.HY,{children:[(0,ge.BX)("span",{className:"jsx-1406247759 intro",children:["We've set an environment variable called ",(0,ge.tZ)("code",{className:"jsx-1406247759",children:"REPLIT_DB_URL"})," in your repl."]}),(0,ge.tZ)("div",{className:"jsx-1406247759 examples",children:(0,ge.tZ)(de.gC,{spacing:2,children:Hs.map((function(e,t){return(0,ge.tZ)(zs,{title:e.title,content:e.content},t)}))})}),(0,ge.tZ)("span",{className:"jsx-1406247759 disclaimer",children:"You can use the Database from any repl by making HTTP requests similar to those above. We have language clients for Python, Go, and Node, switch to a file that uses that language to see how to use the client."}),(0,ge.tZ)(V.default,{id:"1406247759",children:[".intro.jsx-1406247759{color:var(--foreground-dimmer);padding-top:var(--space-8);padding-bottom:var(--space-16);}",".examples.jsx-1406247759{padding:var(--space-8) 0;}",".disclaimer.jsx-1406247759{padding-top:var(--space-8);padding-bottom:var(--space-16);color:var(--foreground-dimmer);}","code.jsx-1406247759{padding:2px;background-color:var(--background-higher);color:var(--accent-negative-default);-webkit-transition:background-color 0.1s;transition:background-color 0.1s;white-space:nowrap;}"]})]})},Qs=function(){return(0,ge.BX)("div",{className:"jsx-1270927779",children:[(0,ge.tZ)("a",{href:"https://replit.com/talk/announcements/Replit-Database-feedback/51085",target:"_blank",rel:"noopener",className:"jsx-1270927779",children:"Send feedback"}),(0,ge.tZ)(V.default,{id:"1270927779",children:["div.jsx-1270927779{background-color:var(--background-root);color:var(--foreground-default);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;height:var(--space-32);padding:var(--space-16) var(--space-8) var(--space-16) var(--space-16);position:relative;font-size:var(--font-size-default);}"]})]})},$s=function(){return(0,ge.BX)("div",{className:"jsx-3518544417 wrapper",children:[(0,ge.BX)("span",{className:"jsx-3518544417 description",children:[(0,ge.tZ)("a",{href:"https://docs.replit.com/misc/database",target:"_blank",rel:"noopener",className:"jsx-3518544417 docs-link",children:"Replit Database"}),"is the fastest and easiest way to store data from your repl. Try it out by logging in or signing up."]}),(0,ge.tZ)("a",{href:"/signup",className:"jsx-3518544417",children:(0,ge.tZ)(ce.Z,{fullWidth:!0,color:"primary",filled:!0,children:"Sign up"})}),(0,ge.tZ)(V.default,{id:"3518544417",children:[".wrapper.jsx-3518544417{padding:var(--space-8) 0;color:var(--foreground-dimmer);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}","span.jsx-3518544417{margin-bottom:var(--space-8);}",".docs-link.jsx-3518544417{font-weight:var(--font-weight-medium);color:var(--accent-primary-default);margin-right:var(--space-4);}"]})]})},Js=n(47750),el=n(38708),tl=n(46379),nl=n(14736),rl=n(75478),il=n(90234),al=n(83587),ol=n(35511),sl=n(98731),ll=n(13724),cl=n(49449),ul=n(54194),dl=n(32201);function pl(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return fl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fl(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function fl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ml(e){var t=e.path,n=e.isActive;return(0,ge.tZ)(cl.Z,{path:t,fill:n?"var(--white)":void 0,fillDefaultFileIcon:n})}function hl(e){var t=e.fs,n=e.onSelect,r=e.onCreateNewFile,i=e.session;return{data:{type:"basic",label:"Files",icon:(0,ge.tZ)(Ke.Z,{}),description:"Find a file",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"P"}},config:{callOnLeave:!0},commands:function(){var e=(0,A.Z)(G().mark((function e(a){var o,s,l,c,u,d,p,f,m;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o={},a.callStage!==dl.x.Enter||0===a.relativeSearchDepth){e.next=3;break}return e.abrupt("return",o);case 3:if(s=a.searchPath?a.searchPath.join(" ").toLowerCase():void 0,0===a.relativeSearchDepth||s&&!(s.length<2)){e.next=6;break}return e.abrupt("return",o);case 6:if(a.callStage!==dl.x.Leave||0!==a.relativeSearchDepth&&!a.getCurrentOptions().some((function(e){return e.token.value===s}))){e.next=8;break}return e.abrupt("return",o);case 8:return e.next=10,t.listFiles();case 10:if(!(l=e.sent).error){e.next=13;break}return e.abrupt("return",o);case 13:if(c=l.files){e.next=16;break}throw new Error("Expected files");case 16:u=i.getRecentFiles(),d=pl(c),e.prev=18,f=function(){var e=p.value,t=!s||Wt.Z.match(s,e);if(!t)return"continue";var r=u.includes(e);o[e]={config:{match:function(){return!0===t?{score:r?2:1}:{score:r?2*t.score:t.score,render:function(n){var r=n.isActive,i=(0,ge.tZ)(ml,{path:e,isActive:r});return(0,ge.tZ)(ul.W,{isActive:r,icon:i,children:(0,ge.tZ)(ge.HY,{children:K.Children.map(t.elements,(function(e,t){return(0,ge.tZ)(K.Fragment,{children:e},t)}))})})}}}},data:{label:e,description:"",icon:(0,ge.tZ)(ml,{path:e}),type:"action",run:function(){return n(e)}}}},d.s();case 21:if((p=d.n()).done){e.next=27;break}if("continue"!==f()){e.next=25;break}return e.abrupt("continue",25);case 25:e.next=21;break;case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(18),d.e(e.t0);case 32:return e.prev=32,d.f(),e.finish(32);case 35:return a.searchPath&&(m=a.searchPath.join(" "),Object.values(o).some((function(e){var t;return(null===(t=e.data)||void 0===t?void 0:t.label)===m}))||(o.newFile={data:{label:m,description:"Create a new file",icon:(0,ge.tZ)(ml,{path:m}),type:"action",run:function(){return r(m)}},config:{match:function(){return{score:1}}}})),e.abrupt("return",o);case 37:case"end":return e.stop()}}),e,null,[[18,29,32,35]])})));return function(t){return e.apply(this,arguments)}}()}}function gl(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return vl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vl(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function vl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bl=100;function yl(){return(yl=(0,A.Z)(G().mark((function e(t){var n,r,i,a,o,s,l,c,u,d,p,f,m,h,g,v,b,y,x,w;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,r=t.container,i=window.performance.now(),e.next=4,r.exec("ag","--noaffinity","--context=0","--workers=1","--width=".concat(150),"--literal","--ackmate","--pager","head -".concat(300),"--",n);case 4:if(a=e.sent,o=a.output,s=a.error,(0,ct.track)(ct.events.COMMAND_BAR_SEARCH,{duration:window.performance.now()-i,failed:Boolean(s)&&"exit status 1"!==s}),!s){e.next=11;break}return"exit status 1"!==s&&st.Tb(new Error("Search command failed with error: ".concat(s))),e.abrupt("return",{error:s});case 11:if(o){e.next=13;break}return e.abrupt("return",{});case 13:l=o.split("\n"),c={},u="",d=0,p=gl(l),e.prev=18,p.s();case 20:if((f=p.n()).done){e.next=41;break}if(m=f.value){e.next=24;break}return e.abrupt("continue",39);case 24:if(!m.startsWith(":")){e.next=28;break}return u=m.slice(1),c[u]=[],e.abrupt("continue",39);case 28:if(!(d>=bl)){e.next=30;break}return e.abrupt("break",41);case 30:h=m.indexOf(";"),g=parseInt(m.slice(0,h),10),v=m.slice(h+1),b=v.indexOf(":"),y=v.slice(0,b).split(","),x=y.map((function(e){var t=e.split(" "),n=(0,D.Z)(t,2),r=n[0],i=n[1];return{column:parseInt(r,10),length:parseInt(i,10)}})),w=v.slice(b+1),d++,c[u].push({content:w,lineNumber:g,matches:x});case 39:e.next=20;break;case 41:e.next=46;break;case 43:e.prev=43,e.t0=e.catch(18),p.e(e.t0);case 46:return e.prev=46,p.f(),e.finish(46);case 49:return e.abrupt("return",{error:null,results:c});case 50:case"end":return e.stop()}}),e,null,[[18,43,46,49]])})))).apply(this,arguments)}function xl(e){var t,n=e.container,r=e.onSelect,i=pi()((function(e,t,n){(function(e){return yl.apply(this,arguments)})(e).then(t).catch(n)}),200);return{data:{type:"basic",label:"Search",icon:(0,ge.tZ)(Dn.Z,{}),description:"Search through your files",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"F"}},commands:function(){var e=(0,A.Z)(G().mark((function e(a){var o,s,l,c,u,d,p,f,m;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s={},!(0!==a.relativeSearchDepth&&a.searchValue.length<4)){e.next=3;break}return e.abrupt("return",s);case 3:if(l=a.searchPath?a.searchPath.join(" "):null){e.next=6;break}return e.abrupt("return",s);case 6:if(1!==(null===(o=a.searchPath)||void 0===o?void 0:o.length)||"files"!==a.searchPath[0]&&"search"!==a.searchPath[0]){e.next=8;break}return e.abrupt("return",s);case 8:return c=Math.random(),t=c,e.next=12,new Promise((function(e,t){i({query:l,container:n},e,t)}));case 12:if(u=e.sent,d=u.results,c===t){e.next=16;break}return e.abrupt("return",s);case 16:if(d){e.next=18;break}return e.abrupt("return",s);case 18:for(p=function(){var e=(0,D.Z)(m[f],2),t=e[0];e[1].forEach((function(e){s["".concat(t,":").concat(e.lineNumber)]={config:{match:function(){var n;return{score:(null===(n=Wt.Z.match(l,e.content))||void 0===n?void 0:n.score)||1,render:function(n){var r=n.isActive,i=(0,ge.tZ)(ml,{path:t,isActive:r});return(0,ge.BX)(de.gC,{spacing:"4px",wrap:"nowrap",children:[(0,ge.BX)(ul.W,{isActive:r,icon:i,children:[t,":",e.lineNumber]}),(0,ge.tZ)(Gt.xK,{source:e.content,matches:e.matches})]})}}}},data:{label:t,description:"".concat(t,":").concat(e.lineNumber),icon:(0,ge.tZ)(ml,{path:t}),type:"action",run:function(){r(t,e.lineNumber,e.matches[0].column)}}}}))},f=0,m=Object.entries(d);f<m.length;f++)p();return e.abrupt("return",s);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}var wl,kl=n(23430),Zl=n(51986),jl=n(96887);function Ol(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function El(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ol(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ol(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _l(e){var t,n=e.wid,r=(0,Oe.Z)(),i=r.container,a=r.session,o=r.presence,s=r.replbox,l=r.fs,c=(0,zn.Z)({replbox:s}),u=K.useRef(c);K.useEffect((function(){u.current=c}),[c]);var d=(0,et.I0)(),p=function(){var e=(0,Oe.Z)().session,t=K.useState(e.getIsCommandBarOpen()),n=(0,D.Z)(t,2),r=n[0],i=n[1];return K.useEffect((function(){return i(e.getIsCommandBarOpen()),e.onCommandBarToggled(i)}),[e]),r}(),f=(0,Ia.Z)("flag-cluicurl"),m=(0,fe.Z)(),h=(0,et.v9)((function(e){return e.workspace[n].plugins})),g=Object.values(h).some((function(e){return"webview"===e.type})),v=(0,me.g2A)({variables:{replId:m}}).data,b=K.useState(null),y=(0,D.Z)(b,2),x=y[0],w=y[1],k=(0,jl.Z)(x),Z=K.useState(null),j=(0,D.Z)(Z,2),O=j[0],E=j[1],_=K.useState(!1),C=(0,D.Z)(_,2),S=C[0],P=C[1],N=K.useCallback((function(){o.getFollowedUser()&&o.unfollowUser()}),[o]);K.useEffect((function(){p&&(0,ct.track)(ct.events.COMMAND_BAR_SELECTED,{source:"workspace"}),p&&k.current||w(!!p||null)}),[p,k]),K.useEffect((function(){null!==x&&N(),a.setIsCommandBarOpen(null!==x)}),[x,a,N]);var T="Repl"===(null===v||void 0===v?void 0:v.repl.__typename)?v.repl:null,I="Team"===(null===T||void 0===T||null===(t=T.owner)||void 0===t?void 0:t.__typename),R=K.useMemo((function(){var e,t;if(T){var r=Boolean("Team"===(null===(e=T.owner)||void 0===e?void 0:e.__typename)&&(null===(t=T.owner.capabilities)||void 0===t?void 0:t.isEducationPlan)),o=f?{curl:{data:{type:"action",label:"curl",icon:(0,ge.tZ)(rl.Z,{}),description:"Make http requests",run:function(){(0,ct.track)(ct.events.CLUI_COMMAND_EXECUTED,{command:"curl",source:"clui"}),d({type:"ADD_CLUI_CURL_TAB",wid:n}),w(null)}}}}:{};return El(El(El({files:hl({fs:l,session:a,onSelect:function(e){(0,ct.track)(ct.events.CLUI_COMMAND_EXECUTED,{command:"find",source:"clui"}),d({wid:n,type:"OPEN_FILE",path:e}),s()},onCreateNewFile:function(e){s(),l.writeFile(e,ur.Z.from("")).then((function(){a.openFile(e)})),(0,si.Z)({replId:T.id,action:"create",source:"commandbar"})}}),search:xl({container:i,onSelect:function(e,t,r){(0,ct.track)(ct.events.CLUI_COMMAND_EXECUTED,{command:"search",source:"clui"}),(0,si.Z)({replId:T.id,action:"select",source:"commandbar"}),d({wid:n,type:"OPEN_DEEP_LINK",path:e,line:t,col:r}),s()}})},r?{}:{multiplayer:{data:{type:"action",label:"Multiplayer",icon:(0,ge.tZ)(Js.Z,{}),description:"Open multiplayer mode",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"M"},run:function(e){(0,ct.track)(ct.events.CLUI_COMMAND_EXECUTED,{command:"multiplayer",source:e?"shortcut":"clui"}),(0,ct.track)(ct.events.INVITE_MODAL_OPENED,{wid:n,language:T.lang.id,replId:T.id,source:"clui"}),P(!0),s()}}}}),{},{run:{data:{type:"action",label:"Run",icon:(0,ge.tZ)(el.Z,{}),description:"Run repl",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"Enter"},run:function(e){(0,ct.track)(ct.events.CLUI_COMMAND_EXECUTED,{command:"run",source:e?"shortcut":"clui"}),"replbox"===T.lang.engine&&u.current.runState===Fn.A.IDLE?(u.current.run(),(0,ct.track)(ct.events.PROJECT_RAN,{wid:n,language:null===T||void 0===T?void 0:T.lang.id,replId:T.id,replTitle:T.title})):d({wid:n,type:"RUN_REPL"}),s()}}}},g?{refresh:{data:{type:"action",label:"Refresh",icon:(0,ge.tZ)(tl.Z,{}),description:"Refresh webview",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"S"},run:function(e){(0,ct.track)(ct.events.CLUI_COMMAND_EXECUTED,{command:"refresh",source:e?"shortcut":"clui"}),d({wid:n,type:"REFRESH_WEBVIEW"}),s()}}}}:{}),{},{shell:{data:{type:"action",label:"Shell",icon:(0,ge.tZ)(nl.Z,{}),description:"Open shell",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"S"},run:function(e){(0,ct.track)(ct.events.CLUI_COMMAND_EXECUTED,{command:"shell",source:e?"shortcut":"clui"}),d({wid:n,type:"OPEN_SHELL"}),s()}}},settings:{data:{type:"action",label:"Settings",icon:(0,ge.tZ)(We.Z,{}),description:"Manage editor settings",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:","},run:function(e){(0,ct.track)(ct.events.CLUI_COMMAND_EXECUTED,{command:"settings",source:e?"shortcut":"clui"}),d({type:"OPEN_SIDEPANE_BY_TYPE",paneType:"preferences",wid:n}),s()}}},"version-control":{data:{label:"Version control",type:"action",icon:(0,ge.tZ)(il.Z,{}),description:"Open version control sidebar",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"G"},run:function(e){(0,ct.track)(ct.events.CLUI_COMMAND_EXECUTED,{command:"version control",source:e?"shortcut":"clui"}),d({type:"OPEN_SIDEPANE_BY_TYPE",paneType:"git",wid:n}),s()}}},new:(0,kl.Z)({transformMatchScore:function(e){return.1*e},onLanguageOrReplSelected:function(e){s(),E(e)}})},o)}function s(){w(null)}}),[T,l,f,i,a,d,n,g]),A={data:{type:"basic",description:"Type a command..."},commands:R};return(0,Zl.Z)({onActive:function(){w(!0)},onDismiss:function(){w(null)}}),K.useEffect((function(){var e=function(e){if(R){(0,sl.b)(e);for(var t=0,n=Object.entries(R);t<n.length;t++){var r,i=(0,D.Z)(n[t],2),a=i[0],o=i[1],s=o.data&&"keyboardShortcut"in o.data?o.data.keyboardShortcut:null;if(s&&(s.cmdOrCtrlKey===Boolean((0,al.jh)(e))&&s.altKey===Boolean(e.altKey)&&s.shiftKey===Boolean(e.shiftKey)&&(null===(r=s.key)||void 0===r?void 0:r.toLowerCase())===e.key.toLowerCase())){var l;if(e.preventDefault(),N(),"action"===(null===(l=o.data)||void 0===l?void 0:l.type))return void o.data.run(!0);w([{value:a,command:o}])}}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[R,N,w]),(0,ge.BX)(ge.HY,{children:[(0,ge.tZ)(Ot.Z,{isOpen:Boolean(O),onRequestClose:function(){return E(null)},children:(0,ge.tZ)(ol.Z,{initialSelectedLanguageOrReplId:O||void 0,onCancel:function(){return E(null)}})}),(0,ge.tZ)(Ot.Z,{isOpen:null!==x,onRequestClose:function(){return w(null)},hideCloseButton:!0,children:(0,ge.tZ)(ll.ZP,{keyboardShortcut:Zl.q,root:A,initialCommandPath:Array.isArray(x)?x:void 0})}),T?(0,ge.tZ)(Ot.Z,{isOpen:S,onRequestClose:function(){return P(!1)},children:I?(0,ge.tZ)(an,{replId:T.id}):(0,ge.tZ)(Un,{replId:T.id})}):null]})}function Cl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cl(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pl(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Nl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nl(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){throw e})),f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){s=!0,a=e})),f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Nl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(e){e.TEXT="TEXT",e.MENTION="MENTION",e.LINK="LINK",e.REPL_LINK="REPL_LINK",e.DEEP_LINK="DEEP_LINK",e.CODE="CODE",e.BOLD="BOLD",e.ITALICS="ITALICS",e.STRIKETHROUGH="STRIKETHROUGH",e.QUOTE="QUOTE"}(wl||(wl={}));var Tl=function(e){var t=e.fragment,n=e.onClick;return(0,ge.tZ)(ue.Z,{size:"small",onClick:n,children:t.content})},Il=function(e){var t=e.fragment,n=e.onClick;return(0,ge.tZ)(ue.Z,{size:"small",fontWeight:"medium",onClick:n,children:t.content})},Rl=function(e){var t=e.fragment,n=e.onClick;return(0,ge.tZ)("a",{href:t.url,onClick:n,rel:"noreferrer noopener nofollow",target:"_blank",children:t.content})},Dl=function(e){var t=e.fragment,n=e.onClick;return(0,ge.tZ)("a",{href:t.url,onClick:n,target:"_blank",children:t.content})},Al=function(e){var t=e.fragment,n=e.onClick;return(0,ge.tZ)("a",{href:t.url,onClick:n,children:t.content})},Ll=function(e){var t=e.fragment,n=e.onClick,r=e.style;return(0,ge.tZ)("code",{onClick:n,style:r,children:t.content})},Bl=function(e){var t=e.fragment,n=e.onClick;return(0,ge.tZ)("b",{onClick:n,children:t.content})},Ml=function(e){var t=e.fragment,n=e.onClick;return(0,ge.tZ)("i",{onClick:n,children:t.content})},Ul=function(e){var t=e.fragment,n=e.onClick;return(0,ge.BX)("span",{onClick:n,className:"jsx-2019770874",children:[t.content,(0,ge.tZ)(V.default,{id:"2019770874",children:["span.jsx-2019770874{-webkit-text-decoration:line-through;text-decoration:line-through;}"]})]})},Xl=function(e){var t=e.fragment,n=e.onClick;return(0,ge.BX)("blockquote",{onClick:n,className:"jsx-3586083531",children:[t.content,(0,ge.tZ)(V.default,{id:"3586083531",children:["blockquote.jsx-3586083531{border-left:2px solid var(--foreground-dimmest);padding-left:6px;color:var(--foreground-dimmest);}"]})]})},Fl=/(@[0-9a-zA-Z_]+)/,zl=/(#[-a-zA-Z0-9@:%._+~#=/]+)/,Vl=/(https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{2,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*))/,Hl=/(`.+?`)/,Gl=/(\*\*.+?\*\*)/,Wl=/(_.+?_)/,ql=/(\*.+?\*)/,Kl=/(~~.+?~~)/,Yl=/(^>.+?$\n?)/m,Ql=/\/@([0-9a-zA-Z_]+)\/(.+)/;function $l(e){var t=e.url;return{type:wl.LINK,url:t,content:t}}function Jl(e){var t=e.hash;return{type:wl.DEEP_LINK,url:t,content:t}}function ec(e,t){if(Vl.test(e)){var n={};try{n=new window.URL(e)}catch(i){return{content:e,type:wl.TEXT}}return["repl.it","replit.com",document.location.host].includes(n.host)?n.pathname===t.replUrl?Jl({hash:n.hash}):Ql.test(n.pathname)?function(e){var t=e.url,n=Ql.exec(t.pathname);if(!n)throw new Error("Not a repl URL");return{type:wl.REPL_LINK,url:t.href,content:"@".concat(n[1],"/").concat(n[2]).concat(t.hash)}}({url:n}):$l({url:e}):$l({url:e})}if(zl.test(e))return Jl({hash:e});if(Yl.test(e))return function(e){var t=e.text;return{type:wl.QUOTE,content:t}}({text:e.slice(1).trim()});if(Hl.test(e))return function(e){var t=e.code;return{type:wl.CODE,content:t}}({code:e.slice(1,-1)});if(Gl.test(e))return function(e){var t=e.text;return{type:wl.BOLD,content:t}}({text:e.slice(2,-2)});if(Wl.test(e)||ql.test(e))return function(e){var t=e.text;return{type:wl.ITALICS,content:t}}({text:e.slice(1,-1)});if(Kl.test(e))return function(e){var t=e.text;return{type:wl.STRIKETHROUGH,content:t}}({text:e.slice(2,-2)});if(Fl.test(e)){var r=e.slice(1);if(!t.users||t.users.includes(r))return function(e){var t=e.username;return{type:wl.MENTION,username:t,content:"@".concat(t)}}({username:r})}return{content:e,type:wl.TEXT}}var tc=new RegExp([Hl.source,Gl.source,Wl.source,ql.source,Kl.source,Vl.source,Fl.source,zl.source,Yl.source].join("|"),"m");function nc(e,t){var n,r=[],i=[],a=Pl(e.split(tc));try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o){var s=ec(o,t);if(s){if(s.type===wl.MENTION){if(!s.username)continue;r.push(s.username)}i.push(s)}}}}catch(l){a.e(l)}finally{a.f()}return{tokens:i,mentions:r}}function rc(e){var t=e.message,n=e.onMentionClick,r=void 0===n?function(){}:n,i=e.codeStyles,a=void 0===i?{}:i;return(0,ge.tZ)(ge.HY,{children:t.tokens.map((function(e,t){var n={fragment:e,key:t};return e.type===wl.MENTION?(0,ge.tZ)(Il,Sl(Sl({},n),{},{onClick:function(){return r(e)}})):e.type===wl.LINK?(0,ge.tZ)(Rl,Sl({},n)):e.type===wl.REPL_LINK?(0,ge.tZ)(Dl,Sl({},n)):e.type===wl.DEEP_LINK?(0,ge.tZ)(Al,Sl({},n)):e.type===wl.CODE?(0,ge.tZ)(Ll,Sl(Sl({},n),{},{style:a})):e.type===wl.BOLD?(0,ge.tZ)(Bl,Sl({},n)):e.type===wl.ITALICS?(0,ge.tZ)(Ml,Sl({},n)):e.type===wl.STRIKETHROUGH?(0,ge.tZ)(Ul,Sl({},n)):e.type===wl.QUOTE?(0,ge.tZ)(Xl,Sl({},n)):(0,ge.tZ)(Tl,Sl({},n))}))})}var ic=n(23279),ac=n.n(ic),oc=n(61967);function sc(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return lc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lc(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function lc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var cc=function(e){var t,n={},r=sc(e.messages);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.user&&(n[i.user.id]=i.user)}}catch(a){r.e(a)}finally{r.f()}return Object.values(n)};var uc=function(e){var t,n,r=e.annote,i=e.onClick,a=((null===(t=(0,me.Fqz)().data)||void 0===t||null===(n=t.currentUser)||void 0===n?void 0:n.editorPreferences.fontSize)||14)-2,o=r.messages.some((function(e){return!e.seen})),s=cc(r).filter((function(e){return!r.user||e.id!==r.user.id})),l="".concat(a,"px");return(0,ge.BX)("div",{onClick:i,className:V.default.dynamic([["2154061002",[a]]])+" annotation-preview",children:[(0,ge.tZ)("div",{className:V.default.dynamic([["2154061002",[a]]])+" user-stack",children:[r.user].concat((0,Bt.Z)(s)).slice(0,3).map((function(e){return e&&(0,ge.tZ)(Xt.Z,{url:e.image,size:"xs",style:{minWidth:l,minHeight:l,height:l,width:l}},e.id)}))}),r.messages.length>0&&(0,ge.BX)("div",{className:V.default.dynamic([["2154061002",[a]]])+" comment-info",children:[(0,ge.tZ)("div",{className:V.default.dynamic([["2154061002",[a]]])+" comment-count",children:r.messages.length}),(0,ge.tZ)(oc.Z,{size:a,unreadDot:o})]}),(0,ge.tZ)(V.default,{id:"2154061002",dynamic:[a],children:[".annotation-preview.__jsx-style-dynamic-selector{position:absolute;padding:4px;border-radius:var(--border-radius-4);border-top-right-radius:0;border-bottom-right-radius:0;background-color:var(--background-default);color:var(--foreground-default);display:grid;grid-auto-flow:column;grid-column-gap:var(--space-8);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border:0.5px solid var(--background-higher);-webkit-transform:translateX(-100%);-ms-transform:translateX(-100%);transform:translateX(-100%);box-shadow:var(--shadow-1);-webkit-transition:width 0.2s,background-color 0.2s,-webkit-transform 0.1s;-webkit-transition:width 0.2s,background-color 0.2s,transform 0.1s;transition:width 0.2s,background-color 0.2s,transform 0.1s;z-index:1;}",".annotation-preview.__jsx-style-dynamic-selector:hover{-webkit-transform:translateX(-100%) translateX(-5%) scale(1.1);-ms-transform:translateX(-100%) translateX(-5%) scale(1.1);transform:translateX(-100%) translateX(-5%) scale(1.1);}",".user-stack.__jsx-style-dynamic-selector{display:grid;grid-auto-flow:column;grid-column-gap:var(--space-4);}",".comment-info.__jsx-style-dynamic-selector{display:grid;grid-auto-flow:column;grid-gap:var(--space-4);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".comment-count.__jsx-style-dynamic-selector{font-weight:var(--font-weight-medium);font-size:0.8em;font-size:".concat(a,"px;}")]})]})},dc=n(41371),pc=n(908);function fc(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return mc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mc(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function mc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hc=["TextMessageContentType","PreviewMessageContentType"];function gc(e){var t,n=[],r=null,i=fc(e);try{for(i.s();!(t=i.n()).done;){var a,o,s,l,c,u,d=t.value;if(!r||(null===d||void 0===d||null===(a=d.user)||void 0===a?void 0:a.id)!==(null===(o=r)||void 0===o||null===(s=o.user)||void 0===s?void 0:s.id)||(null===d||void 0===d||null===(l=d.anchor)||void 0===l?void 0:l.id)!==(null===(c=r)||void 0===c?void 0:c.anchorId)||!hc.includes(r.messageType)||!hc.includes(d.content.__typename)||new Date(d.timeCreated).getTime()-new Date(r.timeCreated).getTime()>6e5)r&&n.push(r),r={user:d.user,timeCreated:d.timeCreated,anchorId:null===d||void 0===d||null===(u=d.anchor)||void 0===u?void 0:u.id,messages:[d],messageType:d.content.__typename};else r.messages.push(d)}}catch(p){i.e(p)}finally{i.f()}return r&&n.push(r),n}function vc(e){var t=(0,fe.Z)(),n=(0,me.nAY)(),r=(0,D.Z)(n,1)[0];K.useEffect((function(){if(e){var n=e.messages.filter((function(e){return!e.seen})).map((function(e){return e.id}));0!==n.length&&r({variables:{replId:t,threadId:e.id,messageIds:n},optimisticResponse:{markMessagesAsSeen:{messages:n.map((function(e){return{id:e,seen:!0,__typename:"AnnotationMessage"}})),__typename:"AnnotationMessageList"}}})}}),[t,e,r])}var bc=K.createContext({editorHandle:null,fileModels:{},activeFile:null,currentModelLineCount:0,users:[],annotations:[],generalThread:void 0,explainAnchor:null,visibleAnnotation:null,onRequestCloseThread:function(){},setVisibleAnnotation:function(){},setExplainAnchor:function(){},handleFinalizeMessage:function(){},handleChangeMessage:function(){},handleResolveAnnotation:function(){},createAnnotationAnchorPlaceholder:function(){},markAllMessagesInReplAsSeenByUser:function(){}});function yc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yc(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wc(e){var t=(0,Ia.Z)("flag-typing-indicator"),n=K.useContext(bc).users,r=K.useState({}),i=(0,D.Z)(r,2),a=i[0],o=i[1],s=K.useRef(null),l=K.useCallback((function(){var e={};for(var t in a)Date.now()-a[t].time<1e3&&(e[t]=a[t]);o(e)}),[a,o]);return(0,me.qxQ)({variables:{threadId:e},onSubscriptionData:function(t){var r,i,a=t.subscriptionData;if(null!==(r=a.data)&&void 0!==r&&r.threadPreview){var c=null===(i=a.data)||void 0===i?void 0:i.threadPreview;if("number"===typeof c.userId){var u=new Date,d=u.toJSON();o((function(t){return xc(xc({},t),{},(0,z.Z)({},c.userId,{time:u.getTime(),user:n.find((function(e){return e.id===c.userId})),id:c.messageId,currentUserIsAuthor:!1,timeCreated:d,timeUpdated:d,anchor:{id:e},content:{__typename:"PreviewMessageContentType",preview:c.message}}))})),s.current&&clearTimeout(s.current),s.current=setTimeout(l,2e3)}}},skip:!t}),K.useMemo((function(){return Object.values(a)}),[a])}var kc=n(61941),Zc=n(75299);function jc(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Oc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oc(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Oc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ec(){var e,t=(0,fe.Z)(),n=(0,me.OEU)({variables:{replId:t}}).data;if("Repl"!==(null===n||void 0===n?void 0:n.repl.__typename))return[];var r=[];null!==(e=n.repl.owner)&&void 0!==e&&e.username&&"User"===n.repl.owner.__typename&&r.push(n.repl.owner);var i,a=jc(n.repl.permissions);try{for(a.s();!(i=a.n()).done;){var o,s=i.value;null!==(o=s.user)&&void 0!==o&&o.username&&r.push(s.user)}}catch(l){a.e(l)}finally{a.f()}return r}function _c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_c(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Sc=K.forwardRef((function(e,t){var n,r,i=e.annote,a=e.placeholder,o=e.onChangeMessage,s=e.onFinalizeMessage,l=null===(n=(0,me.Fqz)().data)||void 0===n||null===(r=n.currentUser)||void 0===r?void 0:r.id,c=K.useState(""),u=(0,D.Z)(c,2),d=u[0],p=u[1],f=K.useState(!1),m=(0,D.Z)(f,2),h=m[0],g=m[1],v=K.useRef(null),b=K.useState(null),y=(0,D.Z)(b,2),x=y[0],w=y[1],k=Ec(),Z=(0,Zc.Z)(),j=Z.ref,O=Z.update,E=(0,kc.Z)({"@":function(){var e=(0,A.Z)(G().mark((function e(t){var n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=k.filter((function(e){return e.id!==l})),t&&(r=t.toLowerCase(),n=n.filter((function(e){return e.username.toLowerCase().startsWith(r)}))),e.abrupt("return",n.slice(0,5).map((function(e){return{icon:(0,ge.tZ)(Xt.Z,{url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),_=(0,D.Z)(E,2),C=_[0].suggestions,S=_[1],P=(0,qt.Kb)({items:(null===C||void 0===C?void 0:C.results)||[],defaultHighlightedIndex:0,isOpen:Boolean(null===C||void 0===C?void 0:C.results.length),onSelectedItemChange:function(e){var t=e.selectedItem;if(C&&t){var n=C.applySuggestion({targetValue:d,suggestionValue:t.value}),r=n.fullValue,i=n.cursorIndex;p(r),setTimeout((function(){v.current&&(v.current.setSelectionRange(i,i),v.current.focus(),O())}))}}}),N=P.isOpen,T=P.getInputProps,I=P.getMenuProps,R=P.getItemProps,L=P.highlightedIndex;K.useEffect((function(){var e="threads/drafts/".concat(i.id),t=localStorage.getItem(e);t&&p(t);var n=v.current;return function(){if(n){var t=n.value;0!==t.length?localStorage.setItem(e,t):localStorage.removeItem(e)}}}),[]),K.useEffect((function(){v.current&&v.current.focus()}),[v]);var B=cc(i).filter((function(e){return e.id!==l}));function M(){""!==d.trim()&&(s({messageId:x||ae()(),message:d.trim()}),w(null),p(""),setTimeout(O),(0,ct.track)(ct.events.CONVERSATION_MESSAGE_SENT,{threadMessagesCount:i.messages.length,otherThreadParticipantsCount:B.length,anchorId:i.id}))}var U="Add a comment";return 1===B.length?U="Reply to @".concat(B[0].username):B.length>1&&(U="Reply"),a&&(U=a),(0,ge.BX)("div",{className:"jsx-940626112",children:[(0,ge.BX)("div",{className:"jsx-940626112 input-group",children:[(0,ge.tZ)("textarea",Cc(Cc({},T({autoFocus:!0,placeholder:U,value:d,onCompositionStart:function(){return g(!0)},onCompositionEnd:function(){return g(!1)},onChange:function(e){var t=e.target.value,n=x||ae()();x||w(n),p(t),o({messageId:n,message:t})},onKeyDown:function(e){N||(e.nativeEvent.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||h||(e.preventDefault(),M()))},rows:1,ref:function(e){v.current=e,t&&"object"===typeof t&&(t.current=e),S(e),j(e)}})),{},{className:"jsx-940626112 "+(jt()("inputbox",{hasContent:d.length>0})||"")})),(0,ge.tZ)("button",{onClick:M,className:"jsx-940626112 "+(jt()("send-button",{isValid:d.length>0})||""),children:(0,ge.tZ)(el.Z,{filled:!0,size:12})})]}),(0,ge.tZ)("div",Cc(Cc({},I({})),{},{className:"jsx-940626112",children:N&&(0,ge.tZ)("div",{className:"jsx-940626112 mention-suggestions-container",children:C.results.map((function(e,t){return(0,or.az)("div",Cc(Cc({},R({item:e,index:t})),{},{key:e.value,className:"jsx-940626112 "+(jt()("mention-suggestion",{selected:L===t})||"")}),e.icon,(0,ge.tZ)("div",{className:"jsx-940626112",children:e.value}))}))})})),(0,ge.tZ)(V.default,{id:"940626112",children:[".input-group.jsx-940626112{display:grid;grid-template-columns:1fr min-content;grid-gap:10px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;}",".inputbox.jsx-940626112{background:var(--background-higher);color:var(--foreground-default);border:none;border-radius:var(--border-radius-8);padding:var(--space-8);outline:none;resize:none;font-family:'IBM Plex Sans',sans-serif;font-size:var(--font-size-default);line-height:16px;overflow-y:auto;max-height:calc(var(--font-size-default) * 18);}",".inputbox.jsx-940626112::-webkit-input-placeholder{white-space:pre;}",".inputbox.jsx-940626112::-moz-placeholder{white-space:pre;}",".inputbox.jsx-940626112:-ms-input-placeholder{white-space:pre;}",".inputbox.jsx-940626112::placeholder{white-space:pre;}",".inputbox.hasContent.jsx-940626112{border-radius:6px;}",".send-button.jsx-940626112{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:24px;height:24px;background:var(--background-highest);color:var(--foreground-dimmest);border:none;border-radius:50%;}",".send-button.jsx-940626112:focus{outline:none;}",".send-button.isValid.jsx-940626112{background:var(--accent-primary-default);color:var(--white);cursor:pointer;}",".send-button.isValid.jsx-940626112:hover{background:var(--accent-primary-default);}",".send-button.isValid.jsx-940626112:active{background:var(--accent-primary-default);}",".mention-suggestions-container.jsx-940626112{padding-top:1em;display:grid;grid-row-gap:var(--space-4);overflow:hidden;}",".mention-suggestion.jsx-940626112{display:grid;grid-template-columns:min-content max-content;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-column-gap:var(--space-8);padding:var(--space-8) 0;cursor:pointer;color:var(--foreground-default);}",".mention-suggestion.selected.jsx-940626112{background-color:var(--background-root);}",".mention-suggestion.selected.jsx-940626112>*.jsx-940626112{-webkit-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1);}"]})]})})),Pc=n(91761),Nc=n(57221);function Tc(e){var t=e.message,n=e.messageStyle,r=K.useMemo((function(){return"TextMessageContentType"===t.content.__typename?nc(t.content.text,{}):"PreviewMessageContentType"===t.content.__typename&&"string"===typeof t.content.preview?nc(t.content.preview,{}):null}),[t.content]),i="PreviewMessageContentType"===t.content.__typename&&"string"!==typeof t.content.preview;return t.user&&(r||i)?(0,ge.BX)("div",{className:"jsx-3163292258 "+(n||""),children:[(0,ge.BX)("div",{className:"jsx-3163292258 message",children:[r&&(0,ge.tZ)(rc,{message:r,codeStyles:{color:"var(--accent-negative-default)",background:"var(--background-highest)"}}),i&&(0,ge.BX)("span",{className:"jsx-3163292258 typing-indicator",children:[(0,ge.tZ)("span",{className:"jsx-3163292258 dot"}),(0,ge.tZ)("span",{className:"jsx-3163292258 dot"}),(0,ge.tZ)("span",{className:"jsx-3163292258 dot"})]})]}),(0,ge.tZ)(V.default,{id:"3163292258",children:[".message.jsx-3163292258{background:var(--background-higher);padding:var(--space-4) var(--space-8);border-radius:var(--border-radius-8);font-size:var(--font-size-default);overflow-wrap:break-word;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;max-width:100%;white-space:pre-wrap;}",".userhighlight.jsx-3163292258 .message.jsx-3163292258{background:transparent;}",".typing-indicator.jsx-3163292258{min-height:1em;display:grid;grid-auto-flow:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8);}",".dot.jsx-3163292258{width:6px;height:6px;border-radius:6px;display:inline-block;background-color:var(--foreground-dimmest);-webkit-animation:pulse-jsx-3163292258 0.6s infinite;animation:pulse-jsx-3163292258 0.6s infinite;}",".dot.jsx-3163292258:nth-child(1){-webkit-animation-delay:0s;animation-delay:0s;}",".dot.jsx-3163292258:nth-child(2){-webkit-animation-delay:0.2s;animation-delay:0.2s;}",".dot.jsx-3163292258:nth-child(3){-webkit-animation-delay:0.4s;animation-delay:0.4s;}","@-webkit-keyframes pulse-jsx-3163292258{0%{background-color:var(--foreground-dimmest);}50%{background-color:var(--foreground-dimmest);}100%{background-color:var(--foreground-dimmest);}}","@keyframes pulse-jsx-3163292258{0%{background-color:var(--foreground-dimmest);}50%{background-color:var(--foreground-dimmest);}100%{background-color:var(--foreground-dimmest);}}"]})]}):null}var Ic=n(34902);function Rc(e){var t=e.message,n=K.useMemo((function(){var e=t.timeCreated;return e?(0,Ic.Z)(new Date(e),"do MMM, hh:mm a"):""}),[t]),r=t.user;return(0,ge.tZ)("div",{className:"resolved-message",children:(0,ge.BX)(de.Ug,{align:"center",spacing:1,children:[r&&(0,ge.tZ)(Xt.Z,{url:r.image,size:"m"}),(0,ge.tZ)(qe.Z,{color:"var(--foreground-default)",size:24}),(0,ge.BX)(ue.Z,{size:"xsmall",children:["Resolved ",n]})]})})}function Dc(e){var t=e.message,n=K.useMemo((function(){var e=t.timeCreated;return e?(0,Ic.Z)(new Date(e),"do MMM, hh:mm a"):""}),[t]),r=t.user;return(0,ge.tZ)("div",{className:"resolved-message",children:(0,ge.BX)(de.Ug,{align:"center",spacing:1,children:[r&&(0,ge.tZ)(Xt.Z,{url:r.image,size:"m"}),(0,ge.tZ)(qe.Z,{size:24,color:"var(--foreground-dimmest)"}),(0,ge.BX)(ue.Z,{size:"xsmall",children:["Unresolved ",n]})]})})}var Ac=function(e){var t=new Date(e),n=new Date;return(0,Nc.Z)(n,t)<60?"now":(0,Pc.F)(t,!0)};function Lc(e){var t=e.messageGroup,n=t.messages,r=t.user,i=t.timeCreated;return r?(0,ge.BX)("div",{className:"jsx-651827874 message-group",children:[(0,ge.BX)("div",{className:"jsx-651827874 message-info",children:[(0,ge.tZ)("div",{className:"jsx-651827874 avatar",children:(0,ge.tZ)(Xt.Z,{url:r.image,size:"xs",style:{minHeight:"15px",minWidth:"15px",height:"15px",width:"15px"}})}),(0,ge.tZ)("div",{className:"jsx-651827874 username",children:r.username}),(0,ge.tZ)("div",{className:"jsx-651827874 time",children:Ac(i)})]}),(0,ge.tZ)("div",{className:"jsx-651827874 messages",children:n.map((function(e){return(0,ge.tZ)(Tc,{message:e},e.id)}))}),(0,ge.tZ)(V.default,{id:"651827874",children:[".message-group.jsx-651827874{background-color:var(--background-default);color:var(--foreground-default);display:grid;position:relative;grid-template-rows:auto auto;grid-row-gap:var(--space-8);grid-template-columns:minmax(0,1fr);}",".message-info.jsx-651827874{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:var(--font-size-small);}",".messages.jsx-651827874{display:grid;grid-row-gap:var(--space-4);grid-template-columns:minmax(0,1fr);}",".avatar.jsx-651827874{margin-right:5px;}",".username.jsx-651827874{color:var(--foreground-dimmer);font-weight:var(--font-weight-medium);margin-right:3px;}",".time.jsx-651827874{color:var(--foreground-dimmest);}"]})]}):null}function Bc(e){var t=e.messageGroup;if("TextMessageContentType"===t.messageType||"PreviewMessageContentType"===t.messageType)return(0,ge.tZ)(Lc,{messageGroup:t});if("StatusMessageContentType"===t.messageType){var n=t.messages[0];if("StatusMessageContentType"===n.content.__typename&&"resolved"===n.content.status)return(0,ge.tZ)(Rc,{message:n});if("StatusMessageContentType"===n.content.__typename&&"unresolved"===n.content.status)return(0,ge.tZ)(Dc,{message:n})}return null}var Mc=function(e){var t=e.annote,n=e.onFinalizeMessage,r=void 0===n?function(){}:n,i=e.onChangeMessage,a=void 0===i?function(){}:i,o=e.onResolve,s=void 0===o?function(){}:o,l=e.onRequestClose,c=void 0===l?function(){}:l,u=e.style,d=e.width,p=t.messages,f=K.useRef(null),m=K.useRef(null),h=wc(t.id),g=(0,Ur.L)({accept:[zr.z.FileNode,zr.z.FileHeaderTab],collect:function(e){var t,n=null===(t=e.getItem())||void 0===t?void 0:t.isFolder;return{isOver:e.isOver({shallow:!0})&&!n}},canDrop:function(e){return!e.isFolder},drop:function(e){e&&!e.isFolder&&r({messageId:ae()(),message:"#".concat(e.path)})}}),v=(0,D.Z)(g,2),b=v[0],y=v[1],x=(0,dc.Z)((function(e){var t,n=e.target;n.closest(".node-row")||n.closest(".file-header-tab")||""!==(null===(t=m.current)||void 0===t?void 0:t.value)||c()}),[]);vc(t),K.useEffect((function(){function e(e){var t;"Escape"===e.key&&""===(null===(t=m.current)||void 0===t?void 0:t.value)&&c()}return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[c]),K.useEffect((function(){f.current&&(f.current.scrollTop=f.current.scrollHeight)}),[p]);var w=K.useMemo((function(){var e=(0,Bt.Z)(p).sort((function(e,t){return new Date(e.timeCreated).getTime()-new Date(t.timeCreated).getTime()}));return e.push.apply(e,(0,Bt.Z)(h.filter((function(t){return!e.slice(-5).find((function(e){return e.id===t.id}))})))),gc(e)}),[p,h]),k=p.length>0;return(0,ge.BX)("div",{style:u,ref:function(e){y(e),x.current=e},className:"jsx-".concat(pc.Q.__hash)+" "+V.default.dynamic([["2932506883",[d]]])+" "+(jt()("annotation-group",{"is-over":b.isOver})||""),children:[w.length>0&&(0,ge.tZ)("div",{ref:f,className:"jsx-".concat(pc.Q.__hash)+" "+V.default.dynamic([["2932506883",[d]]])+" message-group-container",children:w.map((function(e){return(0,ge.tZ)(Bc,{messageGroup:e},e.messages[0].id)}))}),(0,ge.tZ)(Sc,{annote:t,onChangeMessage:a,onFinalizeMessage:r,ref:m}),(0,ge.BX)("div",{className:"jsx-".concat(pc.Q.__hash)+" "+V.default.dynamic([["2932506883",[d]]])+" floating-group",children:[k?(0,ge.tZ)("div",{className:"jsx-".concat(pc.Q.__hash)+" "+V.default.dynamic([["2932506883",[d]]])+" delete show-on-hover",children:(0,ge.tZ)("button",{"aria-label":"Resolve","data-microtip-position":"top",role:"tooltip",onClick:function(e){s(e)},className:"jsx-".concat(pc.Q.__hash)+" "+V.default.dynamic([["2932506883",[d]]])+" floating-button resolve",children:(0,ge.tZ)(qe.Z,{})})}):null,(0,ge.tZ)("div",{className:"jsx-".concat(pc.Q.__hash)+" "+V.default.dynamic([["2932506883",[d]]])+" close",children:(0,ge.tZ)("button",{"aria-label":"Close","data-microtip-position":"top",role:"tooltip",onClick:c,className:"jsx-".concat(pc.Q.__hash)+" "+V.default.dynamic([["2932506883",[d]]])+" floating-button close",children:(0,ge.tZ)(zt.Z,{})})})]}),(0,ge.tZ)(V.default,{id:pc.Q.__hash,children:pc.Q}),(0,ge.tZ)(V.default,{id:"2932506883",dynamic:[d],children:[".annotation-group.__jsx-style-dynamic-selector{position:absolute;z-index:10;position:relative;display:grid;grid-row-gap:var(--space-16);-webkit-box-pack:stretch;-webkit-justify-content:stretch;-ms-flex-pack:stretch;justify-content:stretch;background-color:var(--background-default);padding:var(--space-8);border-radius:var(--border-radius-4);width:".concat(d,"px;box-shadow:var(--shadow-2);border:0.5px solid var(--background-higher);}"),".annotation-group.is-over.__jsx-style-dynamic-selector{background-color:var(--background-root);}",".annotation-group.__jsx-style-dynamic-selector *.__jsx-style-dynamic-selector{-webkit-transition:all 0.2s;transition:all 0.2s;}",".message-group-container.__jsx-style-dynamic-selector{display:grid;grid-row-gap:var(--space-16);max-height:275px;overflow-y:auto;padding:var(--space-8);padding-bottom:0;grid-template-columns:minmax(0,1fr);}",".floating-group.__jsx-style-dynamic-selector{position:absolute;display:grid;grid-auto-flow:column;-webkit-box-pack:end;-webkit-justify-content:end;-ms-flex-pack:end;justify-content:end;grid-column-gap:8px;top:-32px;left:0;right:0;}",".floating-group.__jsx-style-dynamic-selector .show-on-hover.__jsx-style-dynamic-selector{opacity:0;}",".annotation-group.__jsx-style-dynamic-selector:hover>.floating-group.__jsx-style-dynamic-selector .show-on-hover.__jsx-style-dynamic-selector{opacity:1;}",".feedback.__jsx-style-dynamic-selector{position:absolute;-webkit-text-decoration:none;text-decoration:none;}",".floating-button.__jsx-style-dynamic-selector{width:24px;height:24px;border-radius:50%;background:var(--background-higher);color:var(--foreground-dimmer);border:1px solid var(--background-highest);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;box-shadow:var(--shadow-2);}",".floating-button.__jsx-style-dynamic-selector:focus{outline:none;}",".floating-button.__jsx-style-dynamic-selector:hover{color:var(--foreground-default);background:var(--background-higher);}",".floating-button.delete.__jsx-style-dynamic-selector:hover{color:var(--white);background:var(--accent-negative-default);border-color:var(--accent-negative-default);}",".floating-button.resolve.__jsx-style-dynamic-selector:hover{color:var(--white);background:var(--accent-positive-default);border-color:var(--accent-positive-default);}",".floating-button.__jsx-style-dynamic-selector:active{background:var(--background-highest);}"]})]})};function Uc(e){var t=e.annote,n=K.useState(null),r=(0,D.Z)(n,2),i=r[0],a=r[1];K.useEffect((function(){var e=t.messages[t.messages.length-1];if(e&&!e.currentUserIsAuthor){var n=new Date(e.timeCreated).getTime();if(!(Date.now()-n>5e3)){a(e);var r=setTimeout((function(){a(null)}),3e3);return function(){return clearTimeout(r)}}a(null)}else a(null)}),[t]);var o=K.useMemo((function(){if("TextMessageContentType"!==(null===i||void 0===i?void 0:i.content.__typename))return null;var e=null===i||void 0===i?void 0:i.content.text;return e?nc(e,{}):null}),[i]);return i&&o?(0,ge.BX)("div",{className:"jsx-712750148 annotation-message-popup",children:[i.user&&(0,ge.tZ)(Xt.Z,{url:i.user.image,size:"xs",style:{minWidth:"16px",minHeight:"16px",height:"16px",width:"16px"}},i.user.id),(0,ge.tZ)("div",{className:"jsx-712750148 annotation-message-popup-text",children:(0,ge.tZ)(rc,{message:o})}),(0,ge.tZ)(V.default,{id:"712750148",children:[".annotation-message-popup.jsx-712750148{position:absolute;background-color:var(--background-default);padding:4px;border-radius:var(--border-radius-4);border:0.5px solid var(--background-higher);box-shadow:var(--shadow-1);display:grid;grid-auto-flow:column;grid-column-gap:var(--space-8);grid-template-columns:min-content max-content;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;-webkit-transform:translateX(5px);-ms-transform:translateX(5px);transform:translateX(5px);}",".annotation-message-popup-text.jsx-712750148{font-family:IBM Plex Sans;font-style:normal;font-weight:normal;font-size:0.8em;color:var(--foreground-default);}"]})]}):null}function Xc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xc(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zc(e,t){var n=t.onReceiveAnnotationUpdate,r=void 0===n?function(){}:n,i=(0,Ft.Z)().showError,a=K.useState(null),o=(0,D.Z)(a,2),s=o[0],l=o[1],c=(0,me.xTD)({variables:{replId:e}}),u=function(){var e,t=null===(e=c.data)||void 0===e?void 0:e.currentUser;return t?{user:{__typename:"User",id:t.id,username:t.username,image:t.image}}:{}},d=function(t,n){var r=t.readQuery({query:me.yiQ,variables:{replId:e}}),i=[],a=r.repl.annotationAnchors,o=a.findIndex((function(e){return e.id===n.id}));i=-1===o?[].concat((0,Bt.Z)(a),[n]):[].concat((0,Bt.Z)(a.slice(0,o)),[n],(0,Bt.Z)(a.slice(o+1))),t.writeQuery({query:me.yiQ,variables:{replId:e},data:Fc(Fc({},r),{},{repl:Fc(Fc({},r.repl),{},{annotationAnchors:i})})})},p=(0,me.ASh)({onError:function(e){return i(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return i(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.createAnnotationAnchor;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&d(e,r))}}}),f=(0,D.Z)(p,1)[0],m=(0,me.gEq)({onError:function(e){return i(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return i(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.createAnnotationMessage;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&d(e,r))}}}),h=(0,D.Z)(m,1)[0],g=(0,me.RpE)({onError:function(e){return i(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return i(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.updateAnnotationAnchor;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&d(e,r))}}}),v=(0,D.Z)(g,1)[0],b=(0,me.nAY)(),y=(0,D.Z)(b,1)[0],x=(0,me.HjV)(),w=(0,D.Z)(x,1)[0];(0,me.Tt1)({variables:{replId:e},onSubscriptionData:function(e){var t=e.subscriptionData.data,n=e.client,i=null===t||void 0===t?void 0:t.updatedAnnotation;i&&(d(n,i),r(i))}});var k=K.useState([]),Z=(0,D.Z)(k,2),j=Z[0],O=Z[1];K.useEffect((function(){var e,t=[];"Repl"===(null===(e=c.data)||void 0===e?void 0:e.repl.__typename)&&t.push.apply(t,(0,Bt.Z)(c.data.repl.annotationAnchors)),s&&t.push(Fc(Fc({},s),{},{isGeneral:Boolean(s.isGeneral),messages:[],isResolved:!1,__typename:"AnnotationAnchor"})),O(t)}),[c,s]);var E=K.useMemo((function(){return j.find((function(e){return e.isGeneral}))}),[j]),_=K.useMemo((function(){return j.reduce((function(e,t){return t.isResolved?e:t.messages.some((function(e){return!1===e.seen}))?e+1:e}),0)}),[j]),C=function(e){var t=e.annotationAnchor,n=e.annotationMessage,r=e.highlight;f({variables:{annotationAnchor:t,annotationMessage:n,highlight:r},optimisticResponse:{createAnnotationAnchor:Fc(Fc(Fc({},u()),t),{},{isGeneral:Boolean(t.isGeneral),__typename:"AnnotationAnchor",messages:n?[Fc(Fc(Fc({},u()),n),{},{content:{text:n.text,__typename:"TextMessageContentType"},anchor:{id:t.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})]:[],isResolved:!1})}})};return{annotations:j,generalThread:E,unreadThreadCount:_,placeholderAnchorId:null===s||void 0===s?void 0:s.id,createAnnotationAnchorPlaceholder:function(e){var t=e.annotationAnchor;l(t)},deleteAnnotationAnchorPlaceholder:function(){l(null)},createAnnotationAnchor:C,createAnnotationMessage:function(t){var n=t.anchor,r=t.annotationMessage,i=t.highlight;(null===s||void 0===s?void 0:s.id)===n.id?(l(null),C({annotationAnchor:Fc({},s),annotationMessage:r,highlight:i})):h({variables:{replId:e,anchorId:n.id,annotationMessage:r,highlight:i},optimisticResponse:{createAnnotationMessage:Fc(Fc({},n),{},{messages:[].concat((0,Bt.Z)(n.messages.filter((function(e){return!e.id.startsWith("chat-")}))),[Fc(Fc(Fc({},u()),r),{},{content:{text:r.text,__typename:"TextMessageContentType"},anchor:{id:n.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})])})}})},updateAnnotationAnchor:function(e){var t=e.annotationAnchor,n=e.changes;v({variables:{id:t.id,changes:n},optimisticResponse:{updateAnnotationAnchor:Fc(Fc(Fc({},t),n),{},{isResolved:"boolean"===typeof n.isResolved?n.isResolved:t.isResolved})}})},updateThreadPreview:function(e){var t=e.threadId,n=e.messageId,r=e.message;w({variables:{threadId:t,messageId:n,message:r}})},markAllMessagesInReplAsSeenByUser:function(){y({variables:{replId:e}})}}}var Vc=function(e){var t=e.indexStart,n=e.indexEnd,r=e.otVersion,i=e.path,a=e.id,o=e.className,s=K.useContext(bc);return K.useEffect((function(){var e=s.editorHandle,r=s.fileModels[i],a=bi(e),l=yi(r);if(a&&l&&l.isAttachedToEditor()){var c=[l.getPositionAt(t),l.getPositionAt(n)],u=c[0],d=c[1],p={range:window.monaco.Range.fromPositions(u,d),options:{className:o,stickiness:window.monaco.editor.TrackedRangeStickiness.GrowsOnlyWhenTypingBefore}},f=l.deltaDecorations([],[p]);return function(){l.isDisposed()||l.deltaDecorations(f,[])}}}),[t,n,r,i,a,s.editorHandle,s.fileModels,o]),null},Hc=n(60172);function Gc(e){var t=K.useState(0),n=(0,D.Z)(t,2),r=n[0],i=n[1];return K.useEffect((function(){var t=bi(e);if(t){var n=t.onDidLayoutChange((function(e){i(e.width)}));return function(){return n.dispose()}}}),[e]),r}function Wc(e,t,n){return qc.apply(this,arguments)}function qc(){return(qc=(0,A.Z)(G().mark((function e(t,n,r){var i,a,o,s;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.path&&"number"===typeof t.indexStart&&"number"===typeof t.indexEnd&&t.otVersion){e.next=2;break}return e.abrupt("return");case 2:if(r!==t.otVersion){e.next=4;break}return e.abrupt("return",{path:t.path,indexStart:t.indexStart,indexEnd:t.indexEnd,otVersion:t.otVersion});case 4:return i=r,a=window.performance.now(),o=function(){(0,ct.track)(ct.events.ANNOTATION_FASTFORWARDED,{opCount:i-t.otVersion,anchorId:t.id,flagPid1Fastforwards:!0,time:window.performance.now()-a})},e.next=9,n({indexStart:t.indexStart,indexEnd:t.indexEnd,versionFrom:t.otVersion,versionTo:i});case 9:return s=e.sent,o(),e.abrupt("return",{path:t.path,indexStart:s.indexStart,indexEnd:s.indexEnd,otVersion:i});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Kc=function(e,t,n){if(!n||!n.getDomNode())return null;if(!e)return null;var r=t.getPositionAt(e.indexStart),i=n.getDomNode().getBoundingClientRect(),a=n.getTopForPosition(r.lineNumber,r.column);return{top:i.top+a,left:i.left+i.width}};function Yc(){return(Yc=(0,A.Z)(G().mark((function e(t){var n,r,i,a,o,s,l,c,u,d,p;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.anchor,r=t.version,i=t.transformSelection,a=t.content,o=t.editor,s=t.model,n.path){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,Wc(n,i,r);case 5:if(l=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return s&&o&&(c=Kc(l,s,o),u=s.getValue().slice(l.indexStart,l.indexEnd)),d=function(){if(l&&u){var e=l.indexStart,t=l.indexEnd;try{var n=Hc.xv.of(a.split("\n")),r=n.lineAt(e),i=n.lineAt(t),o=n.sliceString(n.line(Math.max(r.number-2,1)).from,e),s=n.sliceString(t,n.line(Math.min(i.number+2,n.lines)).to);return{precode:o,code:n.sliceString(e,t),postcode:s}}catch(c){st.Tb(c)}}},p=function(){try{for(var e=Hc.xv.of(a.split("\n")),t=e.lineAt(l.indexStart),n=e.lineAt(l.indexEnd),r=[],i=t.number===n.number?Math.max(0,t.number-1):t.number,o=Math.min(e.lines,n.number+1),s=i;s<=o;s++)r.push(e.line(s).text);return{startLineNumber:i,lines:r}}catch(c){st.Tb(c)}},e.abrupt("return",{anchor:n,newSelection:l,newPosition:c,selectedContent:u,getHighlight:d,getSnippet:p});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qc(e){var t=K.useContext(bc),n=(0,Oe.Z)().fs,r=t.editorHandle,i=t.fileModels,a=t.currentModelLineCount,o=Gc(r),s=function(e){var t=K.useState(null),n=(0,D.Z)(t,2),r=n[0],i=n[1];return K.useEffect((function(){var t=bi(e);if(t){var n=t.onDidChangeConfiguration((function(e){i(e)}));return function(){return n.dispose()}}}),[e]),r}(r),l=K.useState(null),c=(0,D.Z)(l,2),u=c[0],d=c[1],p=K.useRef(null),f=K.useRef(null),m=K.useState(!1),h=(0,D.Z)(m,2),g=h[0],v=h[1];return K.useEffect((function(){if(null!==e&&void 0!==e&&e.path){var t=function(){f.current=null,v(!1)},r=n.watchOtFile(e.path,{onReady:function(e){var t=e.transformSelection,n=e.initialContent;p.current=n.toString(),f.current=t,v(!0)},onMoveOrDelete:function(){t()},onError:function(e){st.Tb(e),t()},onChange:function(e){var t=e.latestContent;p.current=t}});return function(){t(),r()}}}),[e,n]),K.useEffect((function(){if(null!==e&&void 0!==e&&e.path&&g){var t=bi(r),a=yi(i[e.path]);f.current&&null!==p.current&&function(e){return Yc.apply(this,arguments)}({anchor:e,version:n.getOTVersion(e.path),transformSelection:f.current,content:p.current,editor:t,model:a}).then((function(e){d(e)})).catch((function(){d(null)}))}}),[n,e,r,i,o,s,a,g]),u}var $c,Jc=n(55412),eu=n(31198),tu=n(67526),nu=n(42992),ru=n(42881),iu=n(91242),au=K.createContext({setThreadsVisibility:function(){},threadsVisibility:!1}),ou=au;function su(e){var t=e.children,n=K.useState(!1),r=(0,D.Z)(n,2),i=r[0],a=r[1];return(0,ge.tZ)(au.Provider,{value:{threadsVisibility:i,setThreadsVisibility:a},children:t})}function lu(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return cu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cu(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function cu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uu(e){var t,n=e.annotation,r=e.onChangeMessage,i=void 0===r?function(){}:r,a=e.onFinalizeMessage,o=void 0===a?function(){}:a,s=e.onCloseThread,l=void 0===s?function(){}:s,c=e.scrollToAnchor,u=void 0===c?function(){}:c,d=e.markThreadResolved,p=void 0===d?function(){}:d,f=(0,Ia.Z)("flag-thread-snippets"),m=wc(n.id),h=Qc(n),g=K.useMemo((function(){var e=(0,Bt.Z)(n.messages).sort((function(e,t){return new Date(e.timeCreated).getTime()-new Date(t.timeCreated).getTime()}));return e.push.apply(e,(0,Bt.Z)(m.filter((function(t){return!e.slice(-5).find((function(e){return e.id===t.id}))})))),gc(e)}),[n,m]),v=K.useMemo((function(){if(h)return null===h||void 0===h?void 0:h.getSnippet()}),[h]),b=K.useRef(null);vc(n);K.useEffect((function(){b.current&&(b.current.scrollTop=b.current.scrollHeight)}),[b,n]);var y=(null===h||void 0===h||null===(t=h.anchor)||void 0===t?void 0:t.path)||n.path||"";return(0,ge.BX)(ge.HY,{children:[(0,ge.BX)("div",{className:"jsx-1845381324 header",children:[(0,ge.tZ)("span",{className:"jsx-1845381324",children:(0,ge.tZ)(ce.Z,{filled:!1,border:!1,onClick:l,children:(0,ge.tZ)(Jc.Z,{rotate:90})})}),(0,ge.tZ)("span",{className:"jsx-1845381324 separator"}),(0,ge.BX)(de.Ug,{children:[!n.isResolved&&n.path&&(0,ge.tZ)(ce.Z,{filled:!1,border:!1,"aria-label":"Jump to code",role:"tooltip","data-microtip-position":"left",onClick:function(){return u(n.id)},children:(0,ge.tZ)(eu.Z,{})}),!n.isResolved&&!n.isGeneral&&(0,ge.tZ)(ce.Z,{filled:!1,border:!1,"aria-label":"Resolve thread",role:"tooltip","data-microtip-position":"left",onClick:function(){return p(n)},children:(0,ge.tZ)(qe.Z,{})})]}),(0,ge.tZ)(V.default,{id:"1845381324",children:[".separator.jsx-1845381324{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".header.jsx-1845381324{padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;min-height:32px;}"]})]}),(0,ge.BX)("div",{className:"jsx-1632399811 "+"jsx-".concat(pc.Q.__hash)+" thread",children:[(0,ge.tZ)("div",{className:"jsx-1632399811 "+"jsx-".concat(pc.Q.__hash)+" message-group-container-container",children:(0,ge.BX)("div",{ref:b,className:"jsx-1632399811 "+"jsx-".concat(pc.Q.__hash)+" message-group-container",children:[f&&n.path&&(0,ge.tZ)(iu.u5,{path:y,snippet:v,onNavigateToCode:function(){return u(n.id)}}),g.map((function(e){return(0,ge.tZ)(Bc,{messageGroup:e},e.messages[0].id)}))]})}),(0,ge.tZ)(Sc,{annote:n,onChangeMessage:i,onFinalizeMessage:o}),(0,ge.tZ)(V.default,{id:pc.Q.__hash,children:pc.Q}),(0,ge.tZ)(V.default,{id:"1632399811",children:[".thread.jsx-1632399811{position:relative;display:grid;grid-row-gap:var(--space-16);-webkit-box-pack:stretch;-webkit-justify-content:stretch;-ms-flex-pack:stretch;justify-content:stretch;overflow:hidden;padding:var(--space-16);padding-top:0;grid-template-rows:1fr min-content;height:100%;}",".message-group-container-container.jsx-1632399811{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;overflow:hidden;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".message-group-container.jsx-1632399811{display:grid;grid-row-gap:var(--space-16);overflow-y:auto;padding:var(--space-8);padding-bottom:0;}"]})]})]})}function du(e){var t=e.unreadCount;return(0,ge.BX)("div",{className:"jsx-2446661984 count-container",children:[t>0?(0,ge.tZ)("div",{className:"jsx-2446661984 count",children:t}):null,(0,ge.tZ)(V.default,{id:"2446661984",children:[".count-container.jsx-2446661984{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;height:15px;}",".count.jsx-2446661984{background:var(--accent-primary-default);color:var(--white);font-size:var(--font-size-small);height:15px;padding:0 5px;border-radius:20px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]})}function pu(e){var t,n=e.annotation,r=e.onClick,i=n.messages.some((function(e){return!e.seen})),a=Qc(n),o=K.useMemo((function(){return n.messages.filter((function(e){return!1===e.seen})).length}),[n]),s=cc(n),l=s.map((function(e){return e.username})).join(", "),c=n.messages[0],u=n.messages[n.messages.length-1],d=(null===a||void 0===a?void 0:a.anchor.path)||(null===n||void 0===n?void 0:n.path)||void 0,p=K.useMemo((function(){if(a)return null===a||void 0===a?void 0:a.getSnippet()}),[a]),f=null!==n&&void 0!==n&&n.user?{src:n.user.image,alt:"".concat(null===(t=n.user)||void 0===t?void 0:t.username,"'s avatar")}:void 0,m="TextMessageContentType"===(null===n||void 0===n?void 0:n.messages[0].content.__typename)?n.messages[0].content.text:void 0,h=K.useMemo((function(){if(null===u||void 0===u||!u.timeCreated)return"";var e=new Date(u.timeCreated),t=e.getTime();return Date.now()-t<1e3?"just now":"".concat((0,Pc.F)(e,!0)," ago")}),[u]);return c?n.path?(0,ge.tZ)(iu.dp,{path:d,snippet:p,timeString:h,onClick:r,avatar:f,message:m}):(0,ge.BX)("button",{onClick:r,tabIndex:0,className:"jsx-3048065987 "+(jt()("thread",{unread:i})||""),children:[(0,ge.tZ)("div",{className:"jsx-3048065987 profile",children:(0,ge.tZ)(ru.Z,{users:s})}),(0,ge.BX)("div",{className:"jsx-3048065987 message-preview",children:[(0,ge.tZ)("div",{className:"jsx-3048065987 thread-title",children:l}),"TextMessageContentType"===c.content.__typename&&(0,ge.tZ)("div",{className:"jsx-3048065987 thread-preview",children:c.content.text})]}),(0,ge.BX)("div",{className:"jsx-3048065987 info",children:[(0,ge.tZ)(du,{unreadCount:o}),(0,ge.tZ)("div",{className:"jsx-3048065987 time",children:h})]}),(0,ge.tZ)(V.default,{id:"3048065987",children:[".thread.jsx-3048065987{background:var(--background-default);padding:var(--space-8);border-radius:var(--border-radius-4);display:grid;grid-auto-flow:column;grid-template-columns:min-content minmax(0,1fr) min-content;grid-gap:var(--space-8);width:100%;max-height:52px;overflow:hidden;cursor:pointer;-webkit-transition:0.1s all ease-in-out;transition:0.1s all ease-in-out;border:none;text-align:left;}",".thread.unread.jsx-3048065987 .thread-title.jsx-3048065987{font-weight:var(--font-weight-bold);}",".thread.jsx-3048065987:hover{-webkit-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05);-webkit-transition:0.2s all;transition:0.2s all;}",".thread.jsx-3048065987:focus{outline:none;outline-offset:2px;box-shadow:0 0 0 3px var(--accent-primary-dimmer);}",".thread-title.jsx-3048065987,.thread-preview.jsx-3048065987{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}",".thread-title.jsx-3048065987{color:var(--foreground-default);font-size:var(--font-size-default);}",".thread-preview.jsx-3048065987{color:var(--foreground-dimmer);font-size:var(--font-size-small);}",".profile.jsx-3048065987{width:25px;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".time.jsx-3048065987{white-space:pre;font-size:var(--font-size-small);color:var(--foreground-dimmest);}",".info.jsx-3048065987{display:grid;grid-gap:var(--space-4);-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;}"]})]}):null}function fu(e){var t=e.generalThreadsOpen,n=e.setGeneralThreadsOpen,r=(0,fe.Z)(),i=K.useContext(bc),a=i.generalThread,o=i.handleChangeMessage,s=i.handleFinalizeMessage,l=i.createAnnotationAnchorPlaceholder,c=K.useMemo((function(){return a?gc((0,Bt.Z)(a.messages).sort((function(e,t){return new Date(e.timeCreated).getTime()-new Date(t.timeCreated).getTime()}))):[]}),[a]);K.useEffect((function(){a||l({annotationAnchor:{id:ae()(),replId:r,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})}),[a,r,l]);var u=K.useMemo((function(){return a?a.messages.filter((function(e){return!1===e.seen})).length:0}),[a]),d=K.useRef(null);vc(t&&a||null);return K.useEffect((function(){d.current&&(d.current.scrollTop=d.current.scrollHeight)}),[d,a]),a?(0,ge.BX)("div",{onClick:function(){return n(!0)},className:"jsx-4170203878 "+"jsx-".concat(pc.Q.__hash)+" "+(jt()("general-thread",{"is-open":t})||""),children:[(0,ge.BX)("div",{className:"jsx-4170203878 "+"jsx-".concat(pc.Q.__hash)+" general-thread-header",children:[(0,ge.BX)(de.Ug,{spacing:1,align:"center",children:[(0,ge.tZ)(Ee.Z,{level:5,children:"Chat"}),(0,ge.tZ)(du,{unreadCount:u})]}),(0,ge.tZ)(de.Ug,{spacing:1,align:"center",children:(0,ge.tZ)(ce.Z,{onClick:function(e){n(!t),e.stopPropagation()},filled:!1,Icon:function(){return(0,ge.tZ)(Jc.Z,{rotate:t?0:180})},border:!1,size:"small"})})]}),(0,ge.tZ)("div",{className:"jsx-4170203878 "+"jsx-".concat(pc.Q.__hash)+" message-group-container-container",children:(0,ge.tZ)("div",{ref:d,className:"jsx-4170203878 "+"jsx-".concat(pc.Q.__hash)+" message-group-container",children:c.map((function(e){return(0,ge.tZ)(Bc,{messageGroup:e},e.messages[0].id)}))})}),(0,ge.tZ)("div",{className:"jsx-4170203878 "+"jsx-".concat(pc.Q.__hash)+" thread-input-container",children:(0,ge.tZ)(Sc,{placeholder:"Send message",annote:a,onChangeMessage:function(e){o({anchor:a,message:e.message,messageId:e.messageId}),n(!0)},onFinalizeMessage:function(e){s({anchor:a,message:e.message,messageId:e.messageId}),n(!0),(0,ct.track)(ct.events.MESSAGE_SENT,{replId:r,source:"generalThreads",variant:"replace-chat"})}})}),(0,ge.tZ)(V.default,{id:pc.Q.__hash,children:pc.Q}),(0,ge.tZ)(V.default,{id:"4170203878",children:[".general-thread.jsx-4170203878{margin:1px;padding:var(--space-16);border-radius:var(--border-radius-8);border-top:1px solid var(--background-higher);box-shadow:var(--shadow-2);z-index:100;position:absolute;bottom:0;left:0;right:0;background:var(--background-default);display:grid;overflow:hidden;grid-template-rows:min-content 1fr min-content;grid-gap:var(--space-8);cursor:pointer;-webkit-transition:0.2s height;transition:0.2s height;height:7.5em;}",".general-thread.is-open.jsx-4170203878{height:100%;cursor:unset;}",".general-thread-header.jsx-4170203878{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}",".message-group-container-container.jsx-4170203878{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;overflow:hidden;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:0;}",".general-thread.is-open.jsx-4170203878 .message-group-container-container.jsx-4170203878{height:100%;}",".message-group-container.jsx-4170203878{display:grid;grid-row-gap:var(--space-16);overflow-y:auto;padding:var(--space-8);padding-bottom:0;}",".thread-input-container.jsx-4170203878{width:100%;}"]})]}):null}function mu(e,t){var n,r,i=null===(n=e.messages)||void 0===n?void 0:n[e.messages.length-1],a=null===(r=t.messages)||void 0===r?void 0:r[t.messages.length-1];return i||a?i?a?new Date(a.timeCreated).getTime()-new Date(i.timeCreated).getTime():1:-1:0}function hu(e){var t=e.annotations,n=e.inboxMode,r=e.generalThreadsOpen,i=e.setInboxMode,a=e.onThreadClick,o=e.onMarkAllAsReadClick,s=e.onClose,l=e.setGeneralThreadsOpen,c=(0,Ia.Z)("flag-mark-all-threads-as-read"),u=K.useState(!1),d=(0,D.Z)(u,2),p=d[0],f=d[1],m=(0,Oe.Z)().session,h=K.useMemo((function(){return t.filter((function(e){return!e.isGeneral&&(n===$c.ACTIVE?!e.isResolved:e.isResolved)})).sort(mu)}),[t,n]),g=K.useState(3),v=(0,D.Z)(g,2),b=v[0],y=v[1],x=function(e){var t=K.useRef(null),n=K.useRef(e);return K.useEffect((function(){n.current=e}),[e]),function(e){t.current&&t.current.disconnect(),e&&window.IntersectionObserver&&(t.current=new window.IntersectionObserver((function(e){e[0].isIntersecting&&n.current()})),t.current.observe(e))}}((function(){y((function(e){return e+3}))})),w=K.useMemo((function(){var e,t={},n=lu(h);try{for(n.s();!(e=n.n()).done;){var r,i=e.value,a=i.messages[i.messages.length-1];if(a){var o=i.path||-1,s=t[o]||{threads:[],unreadCount:0,lastMessageTime:null,path:o,lang:null===(r=i.path)||void 0===r?void 0:r.split(".").slice(-1)[0]};s.threads.push(i),s.unreadCount+=i.messages.filter((function(e){return!1===e.seen})).length,s.lastMessageTime?s.lastMessageTime=new Date(Math.max(s.lastMessageTime.getTime(),new Date(a.timeCreated).getTime())):s.lastMessageTime=new Date(a.timeCreated),t[o]=s}}}catch(l){n.e(l)}finally{n.f()}return Object.values(t).sort((function(e,t){return t.lastMessageTime.getTime()-e.lastMessageTime.getTime()}))}),[h]);return(0,ge.BX)("div",{className:"jsx-4132187754 "+"jsx-".concat(pc.Q.__hash)+" threads-feed",children:[(0,ge.BX)("div",{className:"jsx-4132187754 "+"jsx-".concat(pc.Q.__hash)+" header",children:[(0,ge.BX)(de.Ug,{align:"center",spacing:1,children:[(0,ge.tZ)(Ee.Z,{level:4,style:{marginLeft:"var(--space-8)"},children:"Threads"}),(0,ge.tZ)(nu.Z,{isMenuOpen:p,renderAnchorComponent:function(){return(0,ge.tZ)(ce.Z,{filled:!0,border:!1,onClick:function(){return f(!p)},Icon:Jc.Z,iconOnRight:!0,children:n})},renderItemChildComponent:function(e){return(0,ge.tZ)("div",{className:"jsx-4132187754 "+"jsx-".concat(pc.Q.__hash),children:e.label})},onClick:function(e){i(e.mode),f(!1)},items:[{label:"Active",mode:$c.ACTIVE},{label:"Resolved",mode:$c.RESOLVED}]}),c&&(0,ge.tZ)(ce.Z,{border:!1,filled:!1,Icon:tu.Z,onClick:o,"aria-label":"Mark all as read",role:"tooltip","data-microtip-position":"bottom"})]}),(0,ge.tZ)("span",{className:"jsx-4132187754 "+"jsx-".concat(pc.Q.__hash),children:(0,ge.tZ)(ce.Z,{filled:!1,border:!1,onClick:s,children:(0,ge.tZ)(zt.Z,{})})})]}),(0,ge.tZ)("div",{className:"jsx-4132187754 "+"jsx-".concat(pc.Q.__hash)+" threads-container",children:(0,ge.BX)(de.gC,{spacing:6,align:"stretch",children:[(0,ge.BX)(ge.HY,{children:[w.slice(0,b).map((function(e){return(0,ge.BX)("div",{className:"jsx-4132187754 "+"jsx-".concat(pc.Q.__hash)+" thread-group",children:[-1!==e.path&&(0,ge.tZ)("button",{onClick:function(){"string"===typeof e.path&&m.openFile(e.path)},className:"jsx-4132187754 "+"jsx-".concat(pc.Q.__hash)+" group-header",children:(0,ge.BX)("div",{className:"jsx-4132187754 "+"jsx-".concat(pc.Q.__hash)+" left",children:[(0,ge.tZ)(cl.Z,{path:"number"!==typeof e.path?e.path:"",size:20}),(0,ge.tZ)("span",{className:"jsx-4132187754 "+"jsx-".concat(pc.Q.__hash)+" path",children:e.path}),(0,ge.tZ)(du,{unreadCount:e.unreadCount})]})}),e.threads.map((function(e){return(0,ge.tZ)(pu,{annotation:e,onClick:function(){return a(e.id)}},e.id)}))]},e.path)})),b<w.length&&(0,ge.tZ)("div",{ref:x,style:{height:"100px"},className:"jsx-4132187754 "+"jsx-".concat(pc.Q.__hash)})]}),(0,ge.tZ)("div",{className:"jsx-4132187754 "+"jsx-".concat(pc.Q.__hash)+" general-threads-buffer"})]})}),(0,ge.tZ)(fu,{generalThreadsOpen:r,setGeneralThreadsOpen:l}),(0,ge.tZ)(V.default,{id:pc.Q.__hash,children:pc.Q}),(0,ge.tZ)(V.default,{id:"989187587",children:["::-webkit-scrollbar-track{background:transparent !important;}"]}),(0,ge.tZ)(V.default,{id:"2986800960",children:[".feedback.jsx-4132187754{-webkit-text-decoration:none;text-decoration:none;}",".threads-feed.jsx-4132187754 .list-wrapper{z-index:1;}",".threads-feed.jsx-4132187754{height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".threads-container.jsx-4132187754{position:relative;padding:var(--space-16);overflow-y:auto;overflow-y:overlay;}",".header.jsx-4132187754{box-sizing:content-box;padding:var(--space-8);padding-top:var(--space-16);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;min-height:32px;}",".thread-group.jsx-4132187754{max-width:100%;display:grid;grid-gap:var(--space-16);}",".group-header.jsx-4132187754{color:var(--foreground-default);font-size:var(--font-size-subhead-default);cursor:pointer;display:grid;border:none;background-color:transparent;grid-gap:var(--space-8);grid-auto-flow:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-weight:var(--font-weight-medium);max-width:100%;overflow:hidden;}",".group-header.jsx-4132187754:hover{color:var(--accent-primary-stronger);}",".group-header.jsx-4132187754 .left.jsx-4132187754{display:grid;grid-auto-flow:column;grid-template-columns:min-content 1fr max-content;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8);}",".path.jsx-4132187754{text-align:left;overflow:hidden;text-overflow:ellipsis;}",".general-threads-buffer.jsx-4132187754{height:104px;}"]})]})}function gu(e){var t,n,r=e.isOpen,i=(0,Hn.Z)(),a=(0,fe.Z)(),o=(0,me.sw0)({variables:{replId:a}}).data,s=K.useContext(ou).setThreadsVisibility,l=K.useRef(null),c=K.useState(null),u=(0,D.Z)(c,2),d=u[0],p=u[1],f=K.useState($c.ACTIVE),m=(0,D.Z)(f,2),h=m[0],g=m[1],v=K.useState(!1),b=(0,D.Z)(v,2),y=b[0],x=b[1],w=K.useContext(bc),k=w.annotations,Z=w.handleFinalizeMessage,j=w.handleChangeMessage,O=w.handleResolveAnnotation,E=w.createAnnotationAnchorPlaceholder,_=w.markAllMessagesInReplAsSeenByUser;K.useEffect((function(){var e=function(e){var t;if("Escape"===e.key&&l.current){var n=document.querySelectorAll(":hover"),r=Array.from(n).filter((function(e){var t;return null===(t=l.current)||void 0===t?void 0:t.contains(e)})).length>0,i=e.target&&(null===(t=l.current)||void 0===t?void 0:t.contains(e.target));(r||i)&&(d?p(null):y?x(!1):s(!1))}};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[l,d,y,x,p,s]);var C=(0,et.I0)();if("Repl"!==(null===o||void 0===o||null===(t=o.repl)||void 0===t?void 0:t.__typename)||null===(n=o.repl)||void 0===n||!n.user||!o.currentUser)return null;if(!r)return null;var S=k.find((function(e){return e.id===d}));return(0,ge.BX)("div",{ref:l,className:"jsx-985858534 "+"jsx-".concat(pc.Q.__hash)+" conversations-container",children:[!S&&(0,ge.tZ)(hu,{annotations:k,onThreadClick:function(e){p(e),"Repl"===o.repl.__typename&&(0,ct.track)(ct.events.THREAD_SELECTED,{replId:a,source:"threads",general:!1,variant:"replace-chat"})},onNewThreadClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=ae()();E({annotationAnchor:{id:t,replId:a,path:null,otVersion:null,indexStart:null,indexEnd:null,isGeneral:e}}),p(t)}()},onMarkAllAsReadClick:_,inboxMode:h,onClose:function(){return s(!1)},setInboxMode:function(e){return g(e)},generalThreadsOpen:y,setGeneralThreadsOpen:function(e){e!==y&&(x(e),"Repl"===o.repl.__typename&&e&&(0,ct.track)(ct.events.THREAD_SELECTED,{replId:a,source:"threads",general:!0,variant:"replace-chat"}))}}),S&&(0,ge.tZ)(uu,{annotation:S,onCloseThread:function(){return p(null)},onFinalizeMessage:function(e){Z({anchor:S,message:e.message,messageId:e.messageId}),"Repl"===o.repl.__typename&&(0,ct.track)(ct.events.MESSAGE_SENT,{replId:a,source:"threads",variant:"replace-chat"})},onChangeMessage:function(e){j({anchor:S,message:e.message,messageId:e.messageId})},markThreadResolved:function(e){O(e),p(null)},scrollToAnchor:function(e){C({type:"SCROLL_TO_ANNOTATION",anchorId:e,wid:i})}}),(0,ge.tZ)(V.default,{id:pc.Q.__hash,children:pc.Q}),(0,ge.tZ)(V.default,{id:"985858534",children:[".conversations-container.jsx-985858534{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:575px;width:350px;border-radius:var(--border-radius-8);border-color:var(--background-higher);border-width:1px;border-style:solid;box-shadow:var(--shadow-1);background-color:var(--background-default);}","@media only screen and (max-height:672px){.conversations-container.jsx-985858534{height:450px;width:300px;}}"]})]})}function vu(e){var t=K.useState(null),n=(0,D.Z)(t,2),r=n[0],i=n[1];return K.useEffect((function(){var t=bi(e);if(t){var n=t.onDidChangeCursorSelection((function(e){var n=e.selection,r=n.startLineNumber,a=n.startColumn,o=n.endLineNumber,s=n.endColumn,l=t.getDomNode().getBoundingClientRect();if(r!==o||a!==s){var c=[t.getTopForLineNumber(r)+l.top,t.getOffsetForColumn(r,a)+l.left];i({top:c[0],left:c[1]})}else i(null)}));return function(){return n.dispose()}}}),[e]),r}function bu(e){var t=K.useState({scrollTop:0,scrollLeft:0}),n=(0,D.Z)(t,2),r=n[0],i=n[1];return K.useEffect((function(){var t=bi(e);if(t){i({scrollTop:t.getScrollTop(),scrollLeft:t.getScrollLeft()});var n=t.onDidScrollChange((function(e){i({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft})}));return function(){return n.dispose()}}}),[e]),r}!function(e){e.ACTIVE="Active",e.RESOLVED="Resolved"}($c||($c={}));var yu=n(67802),xu=n(61519);function wu(e){var t,n,r=e.onClick,i=(0,me.r92)(),a=(0,Ia.Z)("flag-threads-popup-notifications"),o=K.useContext(bc).generalThread,s=function(e){var t=K.useState([]),n=(0,D.Z)(t,2),r=n[0],i=n[1],a=K.useState(null),o=(0,D.Z)(a,2),s=o[0],l=o[1],c=K.useRef(r);c.current=r;var u=K.useRef(null);return K.useEffect((function(){if(null===u.current){var e=r[0];e&&(l(e),u.current=setTimeout((function(){i(c.current.slice(1)),0===c.current.length&&l(null),u.current=null}),2500))}}),[r]),(0,xu.Z)((function(){e[e.length-1]&&i([].concat((0,Bt.Z)(r),[e[e.length-1]]))}),[e.length]),s}((null===o||void 0===o?void 0:o.messages)||[]),l=K.useMemo((function(){if("TextMessageContentType"!==(null===s||void 0===s?void 0:s.content.__typename))return null;var e=null===s||void 0===s?void 0:s.content.text;return e?nc(e,{}):null}),[s]);return a&&s&&s.user&&s.user.id!==(null===(t=i.data)||void 0===t||null===(n=t.currentUser)||void 0===n?void 0:n.id)?(0,ge.BX)("div",{onClick:function(e){e.stopPropagation(),r(e)},className:"jsx-1782386374 message-notification",children:[(0,ge.tZ)(me.jq$,{variables:{username:s.user.username},children:function(e){var t=e.loading,n=e.data;return!t&&n&&n.user&&n.user.image?(0,ge.tZ)("img",{src:n.user.image,className:"jsx-1782386374 chat-message-picture"}):(0,ge.tZ)("div",{className:"jsx-1782386374 chat-message-picture"})}}),(0,ge.BX)("div",{className:"jsx-1782386374 message",children:[(0,ge.tZ)("span",{className:"jsx-1782386374 dimmed-text",children:s.user.username}),":"," ",(0,ge.tZ)("span",{className:"jsx-1782386374 bold-text",children:l&&(0,ge.tZ)(rc,{message:l})})]}),(0,ge.tZ)(V.default,{id:"1782386374",children:[".message-notification.jsx-1782386374{background:var(--background-default);border:1px solid var(--accent-purple-default);position:absolute;right:60px;bottom:0;color:var(--foreground-default);border-radius:6px;padding:3px 15px;cursor:auto;max-width:250px;width:auto;height:36px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;opacity:1;cursor:pointer;font-size:14px;}",".chat-message-picture.jsx-1782386374{min-width:24px;margin-right:10px;width:24px;border-radius:15px;border:1px solid transparent;}",".bold-text.jsx-1782386374{color:var(--foreground-default);}",".dimmed-text.jsx-1782386374{color:var(--foreground-dimmest);}",".message.jsx-1782386374{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;}"]})]}):null}var ku=function(e){var t=e.unreadThreadCount,n=e.onClick,r=(0,Kr.Fg)();return(0,ge.BX)("div",{onClick:n,css:(0,or.iv)({backgroundColor:r===Kr.V2.replitSpooky?Zn.o6.orangeDefault:Zn.o6.blurpleDefault},"",""),className:V.default.dynamic([["1918740453",[Zn.TV.borderRadius8,Zn.TV.borderRadius8]]])+" floating-icon-wrapper",children:[(0,ge.tZ)(wu,{onClick:n}),(0,ge.tZ)("div",{className:V.default.dynamic([["1918740453",[Zn.TV.borderRadius8,Zn.TV.borderRadius8]]])+" chat-icon-wrapper",children:(0,ge.tZ)(yu.Z,{})}),t>0&&(0,ge.tZ)("div",{className:V.default.dynamic([["1918740453",[Zn.TV.borderRadius8,Zn.TV.borderRadius8]]])+" unread-icon"}),(0,ge.tZ)(V.default,{id:"1918740453",dynamic:[Zn.TV.borderRadius8,Zn.TV.borderRadius8],children:[".floating-icon-wrapper.__jsx-style-dynamic-selector{height:36px;width:50px;border-radius:".concat(Zn.TV.borderRadius8," 0 0 ").concat(Zn.TV.borderRadius8,";position:absolute;right:0px;bottom:var(--space-16);z-index:10;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;opacity:1;-webkit-transition:300ms;transition:300ms;}"),".chat-icon-wrapper.__jsx-style-dynamic-selector{width:32px;height:32px;padding:5px;color:#fff;}",".unread-icon.__jsx-style-dynamic-selector{position:absolute;top:5px;left:12px;background:red;width:8px;height:8px;border-radius:4px;z-index:11;}"]})]})};function Zu(){var e=(0,fe.Z)(),t=zc(e,{onReceiveAnnotationUpdate:function(){}}).unreadThreadCount,n=K.useContext(ou);return(0,ge.tZ)(ku,{onClick:function(){n.threadsVisibility||((0,ct.track)(ct.events.THREADS_OPENED,{unread:Boolean(t)}),(0,ct.track)(ct.events.MESSAGES_LIST_OPENED,{replId:e,context:"threads",variant:"replace-chat"})),n.setThreadsVisibility((function(e){return!e}))},unreadThreadCount:t})}var ju=n(9082);function Ou(e){var t=(0,Oe.Z)().anchorer,n=K.useState(null),r=(0,D.Z)(n,2),i=r[0],a=r[1];return K.useEffect((function(){if(e){var n=t.onAnchorPortalSet(e,(function(e){a(e)}));return function(){n()}}}),[e,t]),i}var Eu=function(){var e=(0,A.Z)(G().mark((function e(t){var n,r,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.code,r=t.language,e.next=3,null===Qo.l||void 0===Qo.l?void 0:Qo.l.query({query:me.nFn,variables:{code:n,language:r}});case 3:if("ExplainCodeResult"!==(null===(i=e.sent)||void 0===i?void 0:i.data.explainCode.__typename)){e.next=6;break}return e.abrupt("return",i.data.explainCode.explanation);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var _u=n(24561),Cu=n(66102);function Su(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Su(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Su(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nu(e){return(0,ge.tZ)(xe.Z,Pu(Pu({},e),{},{children:(0,ge.tZ)("path",{d:"M8 14C8 14 9.5 16 12 16C14.5 16 16 14 16 14M9 9H9.01M15 9H15.01M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}var Tu=n(59663);var Iu=function(e){var t=e.explanation,n=e.errorMessage,r=e.loading,i=e.codexFeedback,a=e.onRequestClose,o=e.onRequestExplainAgain,s=e.onExplainFail,l=e.onExplainSuccess,c=null;return r?c=(0,ge.tZ)("div",{css:[Zn.l0.p(16),"",""],children:(0,ge.BX)(_u.ZP,{viewBox:"0 0 100 10",primaryColor:"var(--background-higher)",secondaryColor:"var(--background-highest)",speed:1.5,children:[(0,ge.tZ)("rect",{x:"0",y:"0",rx:"2",ry:"2",width:"100",height:"4"}),(0,ge.tZ)("rect",{x:"0",y:"6",rx:"2",ry:"2",width:"33",height:"4"})]})}):t?c=(0,ge.BX)("div",{css:[Zn.l0.p(8),{display:"grid",gridGap:Zn.TV.space8},"",""],children:[(0,ge.tZ)("pre",{css:(0,or.iv)({fontFamily:Zn.TV.fontFamilyCode,whiteSpace:"pre-wrap",lineHeight:Zn.TV.lineHeightDefault,fontSize:Zn.TV.fontSizeDefault,color:Zn.TV.foregroundDefault,backgroundColor:Zn.TV.backgroundHighest,padding:Zn.TV.space8,borderRadius:Zn.TV.borderRadius8},"",""),children:t}),(0,ge.tZ)("div",{css:(0,or.iv)({color:Zn.TV.foregroundDefault},"",""),children:"Is this a good explanation?"}),r?null:(0,ge.BX)(yn.Z,{css:[Zn.l0.rowWithGap(8),Zn.l0.justify.start,Zn.l0.align.center,"",""],children:[i?(0,ge.tZ)(wn.ZP,{disabled:!0,iconLeft:(0,ge.tZ)(Nu,{}),onClick:function(){},small:!0,text:"Thanks!"}):(0,ge.BX)(yn.Z,{css:[Zn.l0.rowWithGap(8),Zn.l0.justify.start,Zn.l0.align.center,"",""],children:[(0,ge.tZ)(wn.ZP,{text:"No",colorway:"negative",outlined:"no"!==i,onClick:s,small:!0,iconLeft:(0,ge.tZ)(zt.Z,{})}),(0,ge.tZ)(wn.ZP,{text:"Yes",colorway:"positive",onClick:l,small:!0,outlined:"yes"!==i,iconLeft:(0,ge.tZ)(qe.Z,{})})]}),(0,ge.tZ)("a",{href:"https://replit.canny.io/codex-beta",target:"_blank",rel:"noopener noreferrer",css:[Zn.l0.color.foregroundDimmest,{fontSize:Zn.TV.fontSizeSmall,"&:hover":{color:Zn.TV.foregroundDefault}},"",""],children:"Send Feedback"})]})]}):n&&(c=(0,ge.tZ)("div",{css:[Zn.l0.p(8),{display:"grid",gridGap:Zn.TV.space8},"",""],children:n})),(0,ge.BX)(Gn.Z,{background:"higher",css:(0,or.iv)({background:Zn.TV.backgroundHigher,boxShadow:Zn.TV.shadow1,borderWidth:1,borderColor:Zn.TV.backgroundHighest,borderStyle:"solid",borderRadius:Zn.TV.borderRadius8,width:"320px"},"",""),children:[(0,ge.BX)("div",{css:[{display:"flex",justifyContent:"space-between",borderBottom:"1px solid",borderBottomColor:Zn.TV.backgroundHighest},Zn.l0.flex.row,Zn.l0.rowWithGap(2),Zn.l0.p(8),"",""],children:[(0,ge.BX)("div",{css:(0,or.iv)({display:"grid",gridAutoFlow:"column",gridGap:Zn.TV.space8,alignItems:"center"},"",""),children:[(0,ge.tZ)(Cu.Z,{}),(0,ge.tZ)("div",{css:(0,or.iv)({color:Zn.TV.foregroundDefault},"",""),children:"Explain Code"}),(0,ge.tZ)("a",{href:"https://blog.replit.com/codex",target:"_blank",css:Zn.l0.color.foregroundDefault,children:(0,ge.tZ)(An.Z,{alt:"Learn more",tooltipDelay:0,tooltipText:"This beta feature uses Codex by OpenAI. Click to learn more.",type:"button",children:(0,ge.tZ)(en.Z,{color:Zn.TV.foregroundDefault})})}),(0,ge.tZ)(An.Z,{alt:"Generate new explanation",onClick:o,type:"button",children:(0,ge.tZ)(Tu.Z,{})})]}),(0,ge.tZ)("div",{className:"right",children:(0,ge.tZ)(An.Z,{alt:"Close",tooltipHidden:!0,onClick:a,type:"button",children:(0,ge.tZ)(zt.Z,{})})})]}),c]})},Ru=K.createContext({editorRight:0});function Du(e){var t=e.anchor,n=e.children,r=(0,hn.Z)(),i=(0,Oe.Z)().anchorer,a=Ou(t.id);return K.useEffect((function(){if(r===t.path)return i.addAnchors([t]),function(){i.removeAnchors([t.id])}}),[r]),a?ui.createPortal((0,ge.tZ)(Ru.Provider,{value:{editorRight:a.getEditorRight()},children:n}),a.dom,t.id):null}function Au(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Au(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Au(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bu={name:"1396v9u",styles:"left:2em;position:fixed"};var Mu=function(){var e=(0,Oe.Z)().anchorer,t=bu(K.useContext(bc).editorHandle),n=function(){var e,t,n,r,i,a,o,s,l,c,u=(0,fe.Z)(),d=K.useContext(bc),p=d.explainAnchor,f=d.setExplainAnchor,m=Qc(p),h=Ou(null===p||void 0===p?void 0:p.id),g=K.useMemo((function(){return null!==m&&void 0!==m&&m.anchor.path?(0,ju.UP)(m.anchor.path):null!==p&&void 0!==p&&p.path?(0,ju.UP)(null===p||void 0===p?void 0:p.path):"unknown"}),[m,h,p]),v=K.useMemo((function(){return null!==m&&void 0!==m&&m.selectedContent?null===m||void 0===m?void 0:m.selectedContent:h?h.getContent():void 0}),[m,h]),b=(0,me.LxS)({fetchPolicy:"no-cache",variables:{code:v,language:g,replId:u},skip:!m||!v,notifyOnNetworkStatusChange:!0}),y=(0,me.CUF)(),x=(0,D.Z)(y,2),w=x[0],k=x[1],Z=function(){var e=(0,A.Z)(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ExplainCodeResult"===(null===(n=b.data)||void 0===n?void 0:n.explainCode.__typename)&&!b.loading&&!k.loading){e.next=2;break}return e.abrupt("return");case 2:w({variables:{completionId:b.data.explainCode.id,feedback:t},optimisticResponse:{__typename:"RootMutationType",giveCodexFeedback:{__typename:"CodexFeedback",id:b.data.explainCode.id,feedback:t}}}),(0,ct.track)(ct.events.CODEX_FEEDBACK_SUBMITTED,{language:g,feedback:t,feature:"explanation"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j="ExplainCodeResult"===(null===(e=b.data)||void 0===e||null===(t=e.explainCode)||void 0===t?void 0:t.__typename)?b.data.explainCode.explanation:void 0,O="UserError"===(null===(n=b.data)||void 0===n||null===(r=n.explainCode)||void 0===r?void 0:r.__typename)||"UnauthorizedError"===(null===(i=b.data)||void 0===i||null===(a=i.explainCode)||void 0===a?void 0:a.__typename)?b.data.explainCode.message:null,E="ExplainCodeResult"===(null===(o=b.data)||void 0===o||null===(s=o.explainCode)||void 0===s?void 0:s.__typename)&&b.data.explainCode.id===(null===(l=k.data)||void 0===l||null===(c=l.giveCodexFeedback)||void 0===c?void 0:c.id)?k.data.giveCodexFeedback.feedback:null;return{explainAnchor:p,setExplainAnchor:f,resolvedExplainAnchor:m,anchorPortal:h,getCodeExplanation:Eu,loading:b.loading,explanation:j,errorMessage:O,refetchExplanation:function(){var e=(0,A.Z)(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,ct.track)(ct.events.CODEX_FEATURE_USED,{feature:"explanation",isRetry:!0,language:g}),e.abrupt("return",b.refetch());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),giveCodexFeedback:Z,codexFeedback:E}}(),r=n.explainAnchor,i=n.resolvedExplainAnchor,a=n.setExplainAnchor,o=n.explanation,s=n.errorMessage,l=n.loading,c=n.refetchExplanation,u=n.giveCodexFeedback,d=n.codexFeedback;K.useEffect((function(){return e.onCodeExplained((function(e){a(Lu(Lu({},e),{},{id:ae()()}))}))}),[]);var p=K.useMemo((function(){var e=null===i||void 0===i?void 0:i.newSelection;return e&&r?(0,ge.tZ)(Vc,{indexStart:e.indexStart,indexEnd:e.indexEnd,otVersion:e.otVersion,path:e.path,id:r.id,className:"selection-explanation explanation-".concat(r.id)}):null}),[null===i||void 0===i?void 0:i.newSelection]);if(!r)return null;var f,m={explanation:o,errorMessage:s,loading:l,onRequestClose:function(){return a(null)},onRequestExplainAgain:function(){return c()},codexFeedback:d,onExplainFail:function(){return u(me.TYv.No)},onExplainSuccess:function(){return u(me.TYv.Yes)}};return null!==i&&void 0!==i&&i.newPosition?(0,ge.BX)("div",{css:(0,or.iv)({position:"fixed",top:(null===(f=i.newPosition)||void 0===f?void 0:f.top)-t.scrollTop,left:"2em"},"",""),className:"jsx-1519406084",children:[(0,ge.tZ)(Iu,Lu({},m)),p,(0,ge.tZ)(V.default,{id:"1519406084",children:[".selection-explanation{position:relative;background-color:#08f;opacity:0.3;pointer-events:none;}"]})]}):(0,ge.tZ)("div",{children:(0,ge.tZ)(Du,{anchor:r,children:(0,ge.tZ)("div",{css:Bu,children:(0,ge.tZ)(Iu,Lu({},m))})})})},Uu=n(74832),Xu=n(37573);function Fu(e){var t=e.children,n=e.onClick;return(0,ge.tZ)(yn.Z,{onClick:n,css:[Zn.l0.p(8),{transition:"0.2s background-color",":hover":{backgroundColor:Zn.TV.backgroundHighest}},"",""],children:(0,ge.tZ)(de.Ug,{spacing:1,justify:"end",wrap:"nowrap",align:"center",children:t})})}function zu(e){var t=e.showCodeContextMenu,n=e.editorHandle,r=e.onStartThreadClick,i=e.onExplainCodeClick,a=(0,fe.Z)(),o=(0,hn.Z)(),s=(0,Xu.Z)({replId:a,filePath:o}),l=bu(n),c=vu(n),u=Gc(n),d=K.useMemo((function(){if(!n)return null;var e=bi(n);return e?e.getDomNode().getBoundingClientRect().left:null}),[n,u]);return n?(0,ge.BX)(Gn.Z,{elevated:!0,background:"higher",css:[Zn.l0.py(4),Zn.l0.shadow(1),Zn.l0.borderRadius(8),{position:"absolute",cursor:"pointer",zIndex:1,border:"1px solid",left:c&&t&&d?d+32:void 0,top:c&&t?c.top-l.scrollTop:void 0,borderColor:Zn.TV.backgroundHighest,visibility:c&&t?"visible":"hidden",opacity:c&&t?1:0,transition:"0.2s opacity ease 0.3s",transform:"translateX(-100%)"},"",""],children:[(0,ge.BX)(Fu,{onClick:r,children:[(0,ge.tZ)(oc.Z,{}),(0,ge.tZ)(xn.x,{children:"Start Thread"})]}),s&&(0,ge.BX)(Fu,{onClick:i,children:[(0,ge.tZ)(eu.Z,{}),(0,ge.tZ)(xn.x,{children:"Explain code"}),(0,ge.tZ)(Cu.Z,{})]})]}):null}function Vu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vu(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gu=(0,Ta.Z)(["CREATE_ANNOTATION","REGISTER_MONACO_EDITOR_HANDLE","REGISTER_MODEL_HANDLE","SCROLL_TO_ANNOTATION","FILE_CACHE_HIT","FILE_LOADED"]),Wu=Gu.receiver,qu=Gu.useReceiver,Ku=225;function Yu(e){var t=e.anchor,n=e.isOpen,r=e.onRequestOpen,i=e.onRequestClose,a=e.onFinalizeMessage,o=e.onChangeMessage,s=e.onResolve,l=bu(K.useContext(bc).editorHandle),c=Qc(t),u=null===c||void 0===c?void 0:c.newSelection,d=null===c||void 0===c?void 0:c.newPosition,p=K.useMemo((function(){return u&&t?(0,ge.tZ)(Vc,{indexStart:u.indexStart,indexEnd:u.indexEnd,otVersion:u.otVersion,path:u.path,id:t.id,className:"selection-annotation annotation-".concat(t.id)}):null}),[u]);if(!d||!u||!c)return null;var f=d.top-l.scrollTop,m=d&&f>=0?(0,ge.tZ)(Mc,{annote:t,onFinalizeMessage:function(e){return a(e,c)},onChangeMessage:function(e){return o(e,c)},onResolve:s,onRequestClose:i,width:Ku,style:{top:"".concat(f,"px"),left:"min(".concat(d.left,"px, calc(").concat(window.innerWidth,"px - ").concat(Ku,"px))"),transform:"translateX(-56px)"}}):null,h=d?(0,ge.BX)("div",{className:"annotation-preview-container",style:{top:"".concat(f,"px"),left:"".concat(d.left,"px")},children:[(0,ge.tZ)(uc,{annote:t,onClick:r}),(0,ge.tZ)(Uc,{annote:t})]}):null;return(0,ge.BX)(ge.HY,{children:[p,n?m:h,(0,ge.tZ)(V.default,{id:"488654062",children:[".selection-annotation{position:relative;background-color:#f0f;opacity:0.15;pointer-events:none;}",".annotation-preview-container{position:absolute;}"]}),(0,ge.tZ)(V.default,{id:"2278115419",dynamic:[t.id,n?"0.3":"0.15"],children:[".annotation-".concat(t.id,"{opacity:").concat(n?"0.3":"0.15",";}")]})]})}function Qu(e){var t=e.thread,n=(0,fe.Z)(),r=K.useContext(bc),i=r.visibleAnnotation,a=r.setVisibleAnnotation,o=r.handleChangeMessage,s=r.handleFinalizeMessage,l=r.handleResolveAnnotation,c=r.onRequestCloseThread,u=K.useContext(Ru);return t?(0,ge.tZ)("div",{children:i===t.id?(0,ge.tZ)(Mc,{annote:t,onFinalizeMessage:function(e){s({anchor:t,message:e.message,messageId:e.messageId})},onChangeMessage:function(e){o({anchor:t,message:e.message,messageId:e.messageId})},onResolve:function(){l(t)},onRequestClose:c,width:Ku,style:{position:"fixed",left:null===u||void 0===u?void 0:u.editorRight,transform:"translate(-".concat(window.innerWidth<(null===u||void 0===u?void 0:u.editorRight)+10?Ku:0,"px)")}}):(0,ge.BX)(yn.Z,{css:(0,or.iv)({position:"fixed",left:null===u||void 0===u?void 0:u.editorRight,transform:"translateX(-100%)"},"",""),children:[(0,ge.tZ)(uc,{annote:t,onClick:function(){a(t.id),(0,ct.track)(ct.events.THREAD_SELECTED,{replId:n,source:"file",general:!1,variant:"replace-chat"})}}),(0,ge.tZ)(Uc,{annote:t})]})}):null}function $u(e){var t=e.wid,n=K.useState(),r=(0,D.Z)(n,2),i=r[0],a=r[1],o=K.useState({}),s=(0,D.Z)(o,2),l=s[0],c=s[1],u=(0,fe.Z)(),d=K.useContext(ou).threadsVisibility,p=(0,hn.Z)(),f=(0,Ia.Z)("flag-typing-indicator"),m=(0,Ia.Z)("flag-typing-presence"),h=(0,Ia.Z)("split-code-selection-context"),g=(0,Xu.Z)({filePath:p,replId:u}),v=(0,Oe.Z)(),b=v.container,y=v.fs,x=v.anchorer,w=K.useState(null),k=(0,D.Z)(w,2),Z=k[0],j=k[1],O=Ec(),E=O.map((function(e){return e.username})),_=(0,me.Fqz)(),C=(0,me.Ki4)({variables:{replId:u}}),S=K.useState(0),P=(0,D.Z)(S,2),N=P[0],T=P[1],I=zc(u,{onReceiveAnnotationUpdate:function(e){var t,n,r;if(e.messages){var i=e.messages[e.messages.length-1];i&&(null===(t=i.user)||void 0===t?void 0:t.id)!==(null===(n=_.data)||void 0===n||null===(r=n.currentUser)||void 0===r?void 0:r.id)&&"TextMessageContentType"===i.content.__typename&&i.user&&(Ts({title:"".concat(i.user.username," made an annotation"),body:i.content.text,tag:"annotation-".concat(i.id),iconByUsername:i.user.username}),(0,ct.track)(ct.events.ANNOTATION_UPDATE_RECEIVED,{messageId:i.id,sender:i.user.id,time:new Date(i.timeCreated).getTime()}))}}}),R=I.annotations,L=I.generalThread,B=I.placeholderAnchorId,M=I.createAnnotationAnchorPlaceholder,U=I.deleteAnnotationAnchorPlaceholder,X=I.createAnnotationMessage,F=I.updateAnnotationAnchor,H=I.updateThreadPreview,W=I.markAllMessagesInReplAsSeenByUser,q=K.useState(null),Y=(0,D.Z)(q,2),Q=Y[0],$=Y[1],J=K.useState(!0),ee=(0,D.Z)(J,2),te=ee[0],ne=ee[1],re=bu(i),ie=vu(i);K.useEffect((function(){ne(!1)}),[p]),K.useEffect((function(){ne(Boolean(ie))}),[ie]);var oe=function(){var e=bi(i);e&&e.focus()},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path,n=e.otVersion,r=e.indexStart,a=e.indexEnd,o=bi(i),s=p&&yi(l[p]);if(o&&s){var c=o.getSelection(),d={lineNumber:c.startLineNumber,column:c.startColumn},f={lineNumber:c.endLineNumber,column:c.endColumn},m=s.getOffsetAt(d),h=s.getOffsetAt(f);if(!t){if(!p)throw new Error("Expected active file");t=p}n||(n=y.getOTVersion(t));var g={id:ae()(),replId:u,path:t,otVersion:n,indexStart:"number"===typeof r?r:m,indexEnd:"number"===typeof a?a:h};M({annotationAnchor:g}),j(g.id),ne(!1)}},le=function(){var e=(0,A.Z)(G().mark((function e(){var t,n,r,a,o,s,c,u,d,f,m,h,g,v=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=v.length>0&&void 0!==v[0]?v[0]:{},n=t.path,r=t.otVersion,a=t.indexStart,o=t.indexEnd,s=bi(i),c=p&&yi(l[p]),s&&c){e.next=5;break}return e.abrupt("return");case 5:if(u=s.getSelection(),d={lineNumber:u.startLineNumber,column:u.startColumn},f={lineNumber:u.endLineNumber,column:u.endColumn},m=c.getOffsetAt(d),h=c.getOffsetAt(f),n){e.next=14;break}if(p){e.next=13;break}throw new Error("Expected active file");case 13:n=p;case 14:if(r||(r=y.getOTVersion(n)),r){e.next=17;break}throw new Error("Expected OT Version");case 17:g={id:ae()(),path:n,otVersion:r,indexStart:"number"===typeof a?a:m,indexEnd:"number"===typeof o?o:h},$(g),ne(!1),(0,ct.track)(ct.events.CODEX_FEATURE_USED,{feature:"explanation",isRetry:!1,language:(0,ju.UP)(n)});case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=(0,et.I0)();K.useEffect((function(){return x.onThreadCreated((function(e){var t=Hu({id:ae()(),replId:u},e);M({annotationAnchor:t}),j(t.id),ne(!1)}))}),[x,M,u]),qu((function(e){var n=e.action;return"CREATE_ANNOTATION"===n.type&&se({path:n.path,otVersion:n.otVersion,indexStart:n.indexStart,indexEnd:n.indexEnd}),"REGISTER_MONACO_EDITOR_HANDLE"===n.type&&a(n.editorHandle),"REGISTER_MODEL_HANDLE"===n.type&&c((function(e){return Hu(Hu({},e),{},(0,z.Z)({},n.filePath,n.modelHandle))})),"SCROLL_TO_ANNOTATION"===n.type&&ce((0,A.Z)(G().mark((function e(){var r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=R.find((function(e){return e.id===n.anchorId})))&&void 0!==r&&r.path){e.next=3;break}return e.abrupt("return");case 3:if(p===r.path){e.next=15;break}return e.prev=4,e.next=7,b.exec("test","-f",r.path);case 7:if(null===e.sent.error){e.next=10;break}return e.abrupt("return");case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(4),e.abrupt("return");case 15:ce({type:"OPEN_DEEP_LINK",path:r.path,wid:t,indexStart:r.indexStart,indexEnd:r.indexEnd}),j(r.id);case 17:case"end":return e.stop()}}),e,null,[[4,12]])})))),null}));var ue=function(e){var t=e.anchor,n=e.resolvedAnchor,r=e.message,i=e.messageId,a=nc(r,{users:[].concat((0,Bt.Z)(E),["everyone"])}),o=null===n||void 0===n?void 0:n.getHighlight();X({anchor:t,annotationMessage:{id:i,text:r,mentions:a.mentions},highlight:o})},de=function(e){var t=e.anchor,n=e.message,r=e.messageId;f&&H({threadId:t.id,message:m?n:null,messageId:r})},pe=function(e){if(B===e.id)U();else{F({annotationAnchor:e,changes:{isResolved:!0}})}};if(K.useEffect((function(){if(i){var e=bi(i);if(e){var t=ac()((function(){if(p){var e=yi(l[p]);e&&e.isAttachedToEditor()&&T(e.getLinesContent().length)}}),750),n=e.onDidChangeModelContent(t);return function(){n.dispose()}}}}),[i,p,l]),!window)return null;var he=function(){j(null),U(),oe()};return(0,ge.BX)(bc.Provider,{value:{editorHandle:i,fileModels:l,activeFile:p,currentModelLineCount:N,users:O,annotations:R,generalThread:L,explainAnchor:Q,visibleAnnotation:Z,onRequestCloseThread:he,setVisibleAnnotation:j,setExplainAnchor:$,handleFinalizeMessage:ue,handleChangeMessage:de,handleResolveAnnotation:pe,createAnnotationAnchorPlaceholder:M,markAllMessagesInReplAsSeenByUser:W},children:[(0,ge.BX)("div",{className:"jsx-4216846857 annotations-container",children:[R.filter((function(e){return e.path===p&&!e.isResolved})).map((function(e){return(0,ge.tZ)(Yu,{anchor:e,isOpen:e.id===Z,onRequestOpen:(t=e.id,function(){var e;j(t),"Repl"===(null===(e=C.data)||void 0===e?void 0:e.repl.__typename)&&(0,ct.track)(ct.events.THREAD_SELECTED,{replId:u,source:"file",general:!1,variant:"replace-chat"})}),onRequestClose:he,onFinalizeMessage:function(t,n){var r;ue({anchor:e,resolvedAnchor:n,message:t.message,messageId:t.messageId}),"Repl"===(null===(r=C.data)||void 0===r?void 0:r.repl.__typename)&&(0,ct.track)(ct.events.MESSAGE_SENT,{replId:u,source:"file",variant:"replace-chat"})},onChangeMessage:function(t,n){return de({anchor:e,resolvedAnchor:n,message:t.message,messageId:t.messageId})},onResolve:function(){pe(e),oe()}},e.id);var t})),h?(0,ge.tZ)(zu,{editorHandle:i,showCodeContextMenu:te,onStartThreadClick:function(){return se()},onExplainCodeClick:function(){return le()}}):(0,ge.BX)(ge.HY,{children:[(0,ge.BX)("div",{style:{left:ie&&te?ie.left-re.scrollLeft:void 0,top:ie&&te?ie.top-re.scrollTop:void 0,visibility:ie&&te?"visible":"hidden",opacity:ie&&te?1:0},onClick:function(){return se()},className:"jsx-4216846857 new-annotation-button",children:[(0,ge.tZ)(oc.Z,{}),"Start thread"]}),g&&(0,ge.BX)("div",{style:{left:ie&&te?ie.left-re.scrollLeft+110:void 0,top:ie&&te?ie.top-re.scrollTop:void 0,visibility:ie&&te?"visible":"hidden",opacity:ie&&te?1:0},onClick:function(){return le()},className:"jsx-4216846857 new-annotation-button",children:[(0,ge.tZ)(Uu.Z,{}),"Explain Code"]})]}),g&&(0,ge.tZ)(Mu,{}),(0,ge.BX)("div",{style:{position:"fixed",bottom:"var(--space-24)",right:"var(--space-8)",zIndex:1},className:"jsx-4216846857",children:[!d&&(0,ge.tZ)("div",{className:"jsx-4216846857",children:(0,ge.tZ)(Zu,{})}),(0,ge.tZ)("div",{style:{position:"relative",right:"var(--space-8)"},className:"jsx-4216846857",children:(0,ge.tZ)(gu,{isOpen:Boolean(d)})})]}),(0,ge.tZ)(V.default,{id:"4216846857",children:[".annotations-container.jsx-4216846857{z-index:10;position:absolute;height:0;width:0;}",".new-annotation-button.jsx-4216846857{position:absolute;-webkit-transform:translateY(calc(-100% - 8px)) translateX(56px);-ms-transform:translateY(calc(-100% - 8px)) translateX(56px);transform:translateY(calc(-100% - 8px)) translateX(56px);border-radius:var(--border-radius-4);background-color:var(--background-higher);color:var(--foreground-default);cursor:pointer;border:0.5px solid var(--outline-dimmest);box-shadow:var(--shadow-1);-webkit-transition:width 0.2s,background-color 0.2s,-webkit-transform 0.1s, opacity 0.2s ease 0.3s;-webkit-transition:width 0.2s,background-color 0.2s,transform 0.1s, opacity 0.2s ease 0.3s;transition:width 0.2s,background-color 0.2s,transform 0.1s, opacity 0.2s ease 0.3s;z-index:1;white-space:pre;font-weight:var(--font-weight-medium);font-size:var(--font-size-small);padding:4px 8px;display:grid;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-auto-flow:column;grid-gap:4px;}",".new-annotation-button.jsx-4216846857:hover{-webkit-transform:translateY(calc(-100% - 8px)) translateX(56px) scale(1.1);-ms-transform:translateY(calc(-100% - 8px)) translateX(56px) scale(1.1);transform:translateY(calc(-100% - 8px)) translateX(56px) scale(1.1);}"]})]}),R.map((function(e){return"string"!==typeof e.path||e.isResolved?null:(0,ge.tZ)(Du,{anchor:e,children:(0,ge.tZ)(Qu,{thread:e})},e.id)}))]})}var Ju=n(53997),ed=n(39963),td=n(82730);n(82323);function nd(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return rd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rd(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function rd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function id(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ad(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?id(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):id(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function od(e){var t=e.hint;return t?(0,ge.BX)("div",{className:"jsx-3282618086 hint-card-container",children:[(0,ge.BX)("div",{className:"jsx-3282618086 hint-header-container",children:[(0,ge.BX)(de.Ug,{align:"center",children:[(0,ge.tZ)("div",{className:"jsx-3282618086 header",children:"Hint"}),(0,ge.tZ)(Ee.Z,{level:5,children:t.title})]}),(0,ge.tZ)("button",{onClick:function(){t.onDismiss()},className:"jsx-3282618086 dismiss-button",children:(0,ge.tZ)(zt.Z,{size:16})})]}),(0,ge.BX)("div",{className:"jsx-3282618086 hint-content",children:[" ",(0,ge.BX)(ue.Z,{children:[t.text," ",(0,ge.tZ)("a",{target:"_blank",href:t.link,className:"jsx-3282618086",children:"Learn more"}),"."]}),(0,ge.tZ)("div",{className:"jsx-3282618086 hint-button",children:(0,ge.tZ)(ce.Z,{onClick:function(){t.onClick()},filled:!0,color:"purple",children:"Try it!"})})]}),(0,ge.tZ)(V.default,{id:"3282618086",children:[".hint-card-container.jsx-3282618086{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:var(--space-8);width:100%;}",".hint-header-container.jsx-3282618086{margin:0px var(--space-4) var(--space-8) 0px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".header.jsx-3282618086{margin-right:var(--space-8);display:inline-block;color:var(--white);background:var(--accent-purple-default);border-radius:var(--border-radius-4);font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-medium);padding:calc(var(--space-4) / 2) var(--space-4);text-align:center;}",".hint-content.jsx-3282618086{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".hint-button.jsx-3282618086{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;}",".dismiss-button.jsx-3282618086{width:20px;height:20px;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;color:var(--foreground-default);background-color:var(--background-root);border:1px solid var(--accent-purple-default);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;box-shadow:var(--shadow-2);}"]})]}):null}function sd(e){var t=e.direction,n=e.onClick;return(0,ge.BX)("div",{onClick:n,className:"jsx-3299353145 arrow-container",children:[(0,ge.tZ)("div",{className:"jsx-3299353145 "+"arrow-".concat(t)}),(0,ge.tZ)(V.default,{id:"3299353145",children:[".arrow-right.jsx-3299353145{border-top:var(--space-8) solid transparent;border-bottom:var(--space-8) solid transparent;border-left:var(--space-8) solid var(--accent-purple-default);}",".arrow-left.jsx-3299353145{border-top:var(--space-8) solid transparent;border-bottom:var(--space-8) solid transparent;border-right:var(--space-8) solid var(--accent-purple-default);}",".arrow-container.jsx-3299353145{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;min-width:var(--space-16);max-width:var(--space-16);opacity:0.8;cursor:pointer;background:transparent;}",".arrow-container.jsx-3299353145:hover{opacity:1;background:var(--accent-purple-dimmest);}"]})]})}function ld(e){var t=e.hintCards,n=e.dimensions,r=K.useState(0),i=(0,D.Z)(r,2),a=i[0],o=i[1],s=K.useState(!1),l=(0,D.Z)(s,2),c=l[0],u=l[1],d=(0,td.useKeenSlider)({initial:0,created:function(){u(!0)},slideChanged:function(e){o(e.details().relativeSlide)}}),p=(0,D.Z)(d,2),f=p[0],m=p[1];K.useEffect((function(){null===m||void 0===m||m.refresh()}),[t.length,m]),K.useEffect((function(){m&&null!==n&&void 0!==n&&n.w.pc&&m.resize()}),[n,m]);var h=(0,Kr.Fg)();return t.length?(0,ge.BX)("div",{className:"jsx-4075901004 "+(jt()(Kr.RJ,h===Kr.V2.replitSpooky?"spooky":"dark","hint-carousel-container",{created:c})||""),children:[m&&!!a&&(0,ge.tZ)(sd,{direction:"left",onClick:function(){return m.prev()}}),(0,ge.tZ)("div",{ref:f,className:"jsx-4075901004 keen-slider",children:t.map((function(e,t){return(0,ge.tZ)("div",{className:"jsx-4075901004 keen-slider__slide hint",children:(0,ge.tZ)(od,{hint:e})},t)}))}),m&&a!==m.details().size-1&&(0,ge.tZ)(sd,{direction:"right",onClick:function(){return m.next()}}),(0,ge.tZ)(V.default,{id:"4075901004",children:[".hint-carousel-container.jsx-4075901004{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;margin:var(--space-8) var(--space-8) 0px var(--space-8);background-color:var(--background-root);border-radius:var(--border-radius-4);border:1px solid var(--accent-purple-default);opacity:0;}",".created.jsx-4075901004{opacity:1;}",".keen-slider.jsx-4075901004{width:100%;}",".hint.jsx-4075901004{width:100%;}"]})]}):null}function cd(e){return!!e&&!(0===e.h.px&&0===e.h.pc||0===e.w.px&&0===e.w.pc)}function ud(e){var t=e.dimensions,n=e.wid,r=K.useRef(!1);return K.useEffect((function(){!r.current&&cd(t)&&(r.current=!0)}),[t]),r.current||cd(t)?(0,ge.tZ)(hd,{dimensions:t,wid:n}):(0,ge.tZ)("div",{})}var dd,pd=(0,Ta.Z)(["OPEN_SHELL"]),fd=pd.receiver,md=pd.useReceiver,hd=function(e){var t,n=e.dimensions,r=e.wid,i=(0,Oe.Z)(),a=i.container,o=i.fs,s=function(e){var t=e.wid,n=(0,et.I0)(),r=(0,fe.Z)(),i=(0,me.bdn)({variables:{replId:r}}),a=i.data,o=i.updateQuery,s=K.useState([]),l=(0,D.Z)(s,2),c=l[0],u=l[1],d=K.useState(null),p=(0,D.Z)(d,2),f=p[0],m=p[1],h=K.useState([]),g=(0,D.Z)(h,2),v=g[0],b=g[1],y=K.useState(""),x=(0,D.Z)(y,2),w=x[0],k=x[1],Z=(0,me.$y9)({update:function(e,t){var n,r={"packager-shell-hint":"packagerShellHintSeen","version-control-shell-hint":"versionControlShellHintSeen"},i=null===(n=t.data)||void 0===n?void 0:n.toursSeen.name;i&&r[i]&&o((function(e){return e.currentUser?ad(ad({},e),{},{currentUser:ad(ad({},e.currentUser),{},(0,z.Z)({},r[i],!0))}):e}))}}),j=(0,D.Z)(Z,1)[0];return K.useEffect((function(){if(a&&"Repl"===a.repl.__typename){var e,r=a.repl,i=r.isOwner,o=r.lang,s=[],l=[];o.supportsGit&&i&&(null===(e=a.currentUser)||void 0===e||e.versionControlShellHintSeen,l.push({commands:["git"],hint:{text:"If you're looking to use git, try our version control plugin.",link:"https://docs.replit.com/tutorials/06-github-and-run-button#looking-at-the-version-control-panel-in-repl-it"}}));var c,d=null;o.supportsPackager3?d="packager":o.hasLibSearch&&(d="libsearch"),d&&(null!==(c=a.currentUser)&&void 0!==c&&c.packagerShellHintSeen?l.push({commands:["npm","install","get","pip"],hint:{text:"If you're looking to install packages, try our packager.",link:"https://docs.replit.com/repls/quick-start#adding-packages"}}):s.push({title:"Try our packager!",text:"Use our packager plugin to install packages.",link:"https://docs.replit.com/repls/quick-start#adding-packages",onDismiss:function(){return j({variables:{name:"packager-shell-hint"}})},onClick:function(){(0,ct.track)(ct.events.SHELL_HINT_CTA_CLICKED,{hint:"packager"}),j({variables:{name:"packager-shell-hint"}}).then((function(){return n({type:"OPEN_SIDEPANE_BY_TYPE",paneType:d,wid:t})}))}})),u(s),b(l)}}),[a,n,t,j]),K.useEffect((function(){if(w&&" "===w.slice(-1)){var e,t=nd(v);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.commands.includes(w.trim())){var r;m(null!==(r=n.hint)&&void 0!==r?r:null);break}}}catch(i){t.e(i)}finally{t.f()}}}),[v,w]),{hintCards:c,contextualHint:f,onShellKey:K.useCallback((function(e){k((function(t){return"Backspace"===e.key?t.slice(0,-1):1!==e.key.length?"":" "===t.slice(-1)?e.key.toLowerCase():t+e.key.toLowerCase()}))}),[])}}({wid:r}),l=s.hintCards,c=s.contextualHint,u=s.onShellKey,d=(0,et.I0)(),p=(0,Ia.Z)("flag-xterm-file-parser"),f=(0,Ju.Z)({container:a,autoFocus:!0,onShellKey:u,createXtermProps:{loadFileParserAddon:p,onFileLinkClick:function(e,t,n){return d({wid:r,type:"OPEN_DEEP_LINK",path:e,line:t,col:n})},listFiles:o.listFiles,replSlug:null===(t=a.getContext())||void 0===t?void 0:t.repl.slug}}),m=(0,D.Z)(f,2),h=m[0],g=m[1],v=K.useState(!1),b=(0,D.Z)(v,2),y=b[0],x=b[1],w=cd(n),k=(0,Ia.Z)("flag-shellhints");md((function(e){return"OPEN_SHELL"===e.action.type&&w&&h?(h.focus(),null):null})),K.useEffect((function(){w&&h&&h.focus()}),[w,h]);var Z=y&&h?(0,ge.tZ)(ed.Rh,{findPrevious:h.findPrevious,findNext:h.findNext,exit:function(){return x(!1)}}):(0,ge.tZ)(ed.lD,{onClick:function(){return x(!0)}}),j=(0,Kr.Fg)();return(0,ge.BX)("div",{className:"jsx-223693752 "+"".concat(Kr.RJ," ").concat(j===Kr.V2.replitSpooky?"spooky":"dark"," container"),children:[k&&!!l.length&&(0,ge.tZ)(ld,{hintCards:l,dimensions:n}),k&&!!c&&(0,ge.BX)("code",{className:"jsx-223693752 contextual-hint",children:[c.text," ",(0,ge.tZ)("a",{target:"_blank",href:c.link,className:"jsx-223693752",children:"Learn more"}),"."]}),(0,ge.BX)("div",{onKeyDown:function(e){"f"===e.key&&(0,al.jh)(e)&&(x(!0),e.preventDefault())},className:"jsx-223693752 root",children:[h?(0,ge.tZ)(ge.HY,{children:(0,ge.BX)("div",{className:"jsx-223693752 controls",children:[Z,(0,ge.tZ)(ed.Zr,{onClick:h.clear})]})}):(0,ge.tZ)("code",{className:"jsx-223693752",children:"Loading..."}),(0,ge.tZ)("div",{ref:g,className:"jsx-223693752 xterm-container"})]}),(0,ge.tZ)(V.default,{id:"3182893046",children:[".xterm{height:100%;}",".xterm .xterm-viewport{overflow-y:auto !important;height:100%;}"]}),(0,ge.tZ)(V.default,{id:"280083655",children:[".container.jsx-223693752{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;background-color:var(--background-default);border-radius:var(--border-radius-4);}",".root.jsx-223693752{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;height:100%;padding-left:1em;padding-top:var(--space-8);overflow:hidden;border-radius:var(--border-radius-4);z-index:1;}",".xterm-container.jsx-223693752{min-height:1px;height:100%;}","code.jsx-223693752{color:var(--foreground-dimmest);}",".controls.jsx-223693752{position:absolute;top:var(--space-8);right:var(--space-16);z-index:5;height:30px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".contextual-hint.jsx-223693752{margin:var(--space-8) 0 0 var(--space-16);}"]})]})};!function(e){e[e.Disabled=0]="Disabled",e[e.Idle=1]="Idle",e[e.Testing=2]="Testing",e[e.Preparing=3]="Preparing",e[e.Cleanup=4]="Cleanup"}(dd||(dd={}));var gd=n(51157);function vd(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return bd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bd(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function bd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var yd=function(){function e(t){(0,L.Z)(this,e),(0,z.Z)(this,"code",void 0),(0,z.Z)(this,"currentIndent",void 0),(0,z.Z)(this,"lib",void 0),this.code="",this.currentIndent=0,this.lib=t}return(0,B.Z)(e,[{key:"indent",value:function(){this.currentIndent+=1}},{key:"dedent",value:function(){if(0===this.currentIndent)throw new Error("indent at zero");this.currentIndent-=1}},{key:"addIndents",value:function(){for(var e=0;e<this.currentIndent;e++)this.code+="  "}},{key:"push",value:function(e){var t,n=vd(e.split("\n"));try{for(n.s();!(t=n.n()).done;){var r=t.value;this.addIndents(),this.code+=r,this.newLine()}}catch(i){n.e(i)}finally{n.f()}}},{key:"newLine",value:function(){this.code+="\n"}},{key:"closeCurly",value:function(){this.addIndents(),this.code+=this.lib.getClosingBrackets()}},{key:"toString",value:function(){return this.code}}]),e}(),xd="_test_runner";function wd(e){return xd+e}function kd(e){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,A.Z)(G().mark((function e(t){var n,r,i,a,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fs,r=t.code,i=t.filename,a=wd(i),o=ur.Z.from(r,"utf8"),e.abrupt("return",n.writeFile(a,o));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jd(e){return Od.apply(this,arguments)}function Od(){return(Od=(0,A.Z)(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.readDir(ei.Q);case 3:if(!(n=e.sent).error){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,Promise.all(n.children.map((function(e){return e.filename.startsWith(xd)?e.type===gn.Tv.File?t.deleteFile(e.filename):t.deleteDir(e.filename):Promise.resolve(null)})));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),st.$e((function(t){t.setTag("unitTestLib","true"),st.Tb(e.t0)}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function Ed(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return _d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _d(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function _d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Cd={testRunnerName:function(){return"TestRunner"},testSuiteName:function(){return"TestSuite"},defaultImports:function(){return"import org.junit.Before;\nimport org.junit.After;\nimport org.junit.Test;\nimport static org.junit.Assert.*;"},classIntro:function(){return"public class ".concat(wd(Cd.testSuiteName())," {")},classConstructorName:function(){return wd(Cd.testSuiteName())},setupIntro:function(){return"@Before\npublic void setUp() {"},tearDownIntro:function(){return"@After\npublic void tearDown() {"},testIntro:function(e){return"".concat(Cd.testIntroPreName()).concat(e).concat(Cd.testIntroPostName())},testIntroPreName:function(){return"@Test\npublic void "},testIntroPostName:function(){return"() {"},getProperTestName:function(e){return e},parseTestResultName:function(e){return e.replace("(".concat(wd(Cd.testSuiteName()),")"),"")},buildSuite:function(e){var t=e.tests,n=e.meta,r=new yd(Cd);r.push(Cd.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(Cd.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(Cd.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(Cd.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i,a=Ed(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.code&&(r.push(Cd.testIntro(o.name)),r.indent(),r.push(o.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(s){a.e(s)}finally{a.f()}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return Td.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,a=e.tests,o=e.meta,s=Cd.buildSuite({tests:a,meta:o});return Cd.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:s})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"}"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react in this bitch either"},captureSetupError:function(e){var t=e.tag,n=e.raw;st.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","java10"),st.Tb(t)}))},exampleTest:{id:-1,failureMessage:"An Adder class should have an add method that adds two ints and returns the result",name:"add",code:"Adder adder = new Adder();\nint result = adder.add(1, 2);\nassertEquals(3, result);\n"}},Sd="__UNIT_TEST_RESULT_START__",Pd="__UNIT_TEST_RESULT_END__",Nd="import org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.junit.runner.JUnitCore;\nimport org.junit.runner.Result;\nimport org.junit.runner.notification.Failure;\n\npublic class ".concat(wd(Cd.testRunnerName())," {\n    public static void main(String[] args) {\n      Result result = JUnitCore.runClasses(").concat(wd(Cd.testSuiteName()),'.class);\n      JSONArray failures = new JSONArray();\n\n        for (Failure failure : result.getFailures()) {\n            JSONObject obj = new JSONObject();\n            obj.put("name", failure.getTestHeader());\n            obj.put("stack", failure.getTrace());\n            failures.add(obj);\n        }\n        JSONObject out = new JSONObject();\n        out.put("passed", result.wasSuccessful());\n        out.put("failures", failures);\n        System.out.println();\n        System.out.println("').concat(Sd,'");\n        System.out.println(out);\n        System.out.println("').concat(Pd,'");\n    }\n}');function Td(){return(Td=(0,A.Z)(G().mark((function e(t){var n,r,i,a,o,s,l,c,u,d,p,f,m,h,g,v,b,y,x,w,k,Z,j,O;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.container,r=t.fs,i=t.packager,a=t.logger,o=t.suiteCode,s=a.startLogSpinner("Setting up the environment"),e.next=4,jd(r);case 4:return s("Creating your test files 1/2"),e.next=7,kd({fs:r,code:o,filename:"".concat(Cd.testSuiteName(),".java")});case 7:if(l=e.sent,!(c=l.error)){e.next=13;break}return"Failed to create suite code file",Cd.captureSetupError({tag:"Failed to create suite code file",raw:c}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 13:return s("Creating your test files 2/2"),e.next=16,kd({fs:r,code:Nd,filename:"".concat(Cd.testRunnerName(),".java")});case 16:if(u=e.sent,!(d=u.error)){e.next=22;break}return"Failed to create test runner file",Cd.captureSetupError({tag:"Failed to create test runner file",raw:d}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 22:return a.stopLogSpinner(),a.clearLine(),a.logMessage("Installing imported packages\r\n"),e.next=27,i.addPackages([{name:"junit:junit",version:"4.12"},{name:"com.googlecode.json-simple:json-simple",version:"1.1.1"},{name:"org.hamcrest:hamcrest-core",version:"1.3"}]);case 27:return e.next=29,i.installPackages();case 29:if(e.sent){e.next=32;break}return e.abrupt("return",{error:"Failed to install packages\r\n"});case 32:return a.clearLogs(),s=a.startLogSpinner("Compiling your files"),e.next=36,n.exec("find",".","-type","f","-name","*.java","-print0");case 36:if(p=e.sent,f=p.output,!(m=p.error)){e.next=43;break}return h="Failed to fetch working directory java files",Cd.captureSetupError({tag:h,raw:m}),e.abrupt("return",{error:"".concat(h,"\r\n\r\n")+(null===f||void 0===f?void 0:f.replace(/\n/g,"\n\r"))+"\r\n\r\n"+m});case 43:if("string"===typeof f){e.next=45;break}throw new Error("expected working directory files to be a string");case 45:return g=f.slice(0,-1).split("\0"),v=".:./target/dependency/*",e.next=49,n.exec.apply(n,["javac","-classpath",v,"-d","."].concat((0,Bt.Z)(g)));case 49:if(b=e.sent,y=b.output,!(x=b.error)){e.next=56;break}return w="Failed to compile test runner file",Cd.captureSetupError({tag:w,raw:x}),e.abrupt("return",{error:"".concat(w,"\r\n\r\n")+(null===y||void 0===y?void 0:y.replace(/\n/g,"\n\r"))+"\r\n\r\n"+x});case 56:return s("Running your tests"),e.next=59,n.exec("java","-classpath",v,wd(Cd.testRunnerName()));case 59:if(k=e.sent,Z=k.output,!(j=k.error)){e.next=65;break}return(0,ct.track)(ct.events.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),e.abrupt("return",{error:"Running tests failed\r\n\r\n"+(null===Z||void 0===Z?void 0:Z.replace(/\n/g,"\n\r"))+"\r\n\r\n"+j});case 65:if("string"===typeof Z){e.next=67;break}throw new Error("expected runoutput to be a string");case 67:return O=JSON.parse(Z.slice(Z.indexOf(Sd)+Sd.length,Z.lastIndexOf(Pd))),e.abrupt("return",{result:O,error:null});case 69:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Id=Cd;function Rd(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Dd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dd(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Dd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ad={testRunnerName:function(){return"test_runner"},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"import unittest\nfrom main import *\n"},classIntro:function(){return"class UnitTests(unittest.TestCase):"},classConstructorName:function(){return"__init__"},setupIntro:function(){return"def setUp(self):"},tearDownIntro:function(){return"def tearDown(self):"},testIntro:function(e){return Ad.testIntroPreName()+e+Ad.testIntroPostName()},testIntroPreName:function(){return"def test_"},testIntroPostName:function(){return"(self):"},getProperTestName:function(e){return"test_".concat(e)},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new yd(Ad);r.push(Ad.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(Ad.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&n.setup.trim().length&&(r.push(Ad.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.newLine()),n.tearDown&&n.tearDown.trim().length&&(r.push(Ad.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.newLine()));var i,a=Rd(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;r.push(Ad.testIntro(o.name)),r.indent(),r.push(o.code||"pass"),r.dedent(),r.newLine()}}catch(s){a.e(s)}finally{a.f()}return r.toString()},runSuite:function(e){return Ud.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,a=e.tests,o=e.meta,s=Ad.buildSuite({tests:a,meta:o});return Ad.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:s})},hasClosingBrackets:function(){return!1},getClosingBrackets:function(){throw new Error("This language does not have closing brackets, check `hasClosingBrackets` first")},hasSemicolon:function(){return!1},getCommentChar:function(){return"#"},getHelpText:function(){return"no react in this bitch"},captureSetupError:function(e){var t=e.tag,n=e.raw;st.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","python3"),st.Tb(t)}))},exampleTest:{id:-1,failureMessage:"In main.py you should have an add functions that adds two numbers and returns the result",name:"add",code:"self.assertEquals(add(1, 2), 3)"}},Ld="__UNIT_TEST_RESULT_START__",Bd="__UNIT_TEST_RESULT_END__",Md="import unittest\nimport ".concat(wd(Ad.testSuiteName()),"\nimport os\nimport json\nfrom time import sleep\n\nsuite = unittest.TestLoader().loadTestsFromTestCase(\n  ").concat(wd(Ad.testSuiteName()),'.UnitTests)\nf = open(os.devnull,"w")\ntest_res = unittest.TextTestRunner(stream=f).run(suite)\n\n# Merge errors and failures and normalize to {name, stack}\nfailures = [\n    {\n        "name": r[0]._testMethodName,\n        "stack": r[1],\n    } for r in test_res.errors + test_res.failures\n]\nprint()\nprint(\'').concat(Ld,'\')\nsleep(1)\nprint(json.dumps({\n    "passed": test_res.wasSuccessful(),\n    "failures": failures,\n}))\nprint()\nprint(\'').concat(Bd,"');");function Ud(){return(Ud=(0,A.Z)(G().mark((function e(t){var n,r,i,a,o,s,l,c,u,d,p,f,m,h;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.container,r=t.fs,i=t.packager,a=t.logger,o=t.suiteCode,s=a.startLogSpinner("Setting up the environment"),e.next=4,jd(r);case 4:return s("Creating your test files 1/2"),e.next=7,kd({fs:r,code:o,filename:"".concat(Ad.testSuiteName(),".py")});case 7:if(l=e.sent,!(c=l.error)){e.next=13;break}return"Failed to create suite code file",Ad.captureSetupError({tag:"Failed to create suite code file",raw:c}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 13:return s("Creating your test files 2/2"),e.next=16,kd({fs:r,code:Md,filename:"".concat(Ad.testRunnerName(),".py")});case 16:if(u=e.sent,!(d=u.error)){e.next=22;break}return"Failed to create test runner file",Ad.captureSetupError({tag:"Failed to create test runner file",raw:d}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 22:return a.stopLogSpinner(),a.clearLine(),a.logMessage("Installing imported packages\r\n"),e.next=27,i.installPackages();case 27:if(e.sent){e.next=30;break}return e.abrupt("return",{error:"Failed to install packages\r\n"});case 30:return a.clearLogs(),a.startLogSpinner("Running your tests"),e.next=34,n.exec("python","-B",wd("".concat(Ad.testRunnerName(),".py")));case 34:if(p=e.sent,f=p.output,!(m=p.error)){e.next=40;break}return(0,ct.track)(ct.events.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),e.abrupt("return",{error:"Running tests failed\r\n\r\n"+(null===f||void 0===f?void 0:f.replace(/\n/g,"\n\r"))+"\r\n"+m});case 40:if("string"===typeof f){e.next=42;break}throw new Error("expected runoutput to be a string");case 42:return h=JSON.parse(f.slice(f.indexOf(Ld)+Ld.length,f.lastIndexOf(Bd))),e.abrupt("return",{result:h,error:null});case 44:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xd(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Fd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fd(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Fd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zd={testRunnerName:function(){throw new Error("Node test runner uses jest directly")},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"const index = require('./index.js');"},classIntro:function(){return'describe("UnitTests", function() {'},classConstructorName:function(){return null},setupIntro:function(){return"beforeAll(async function() {"},tearDownIntro:function(){return"afterAll(async function() {"},testIntro:function(e){return zd.testIntroPreName()+e+zd.testIntroPostName()},testIntroPreName:function(){return'test("'},testIntroPostName:function(){return'", async function() {'},getProperTestName:function(e){return e},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new yd(zd);r.push(zd.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(zd.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(zd.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(zd.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i,a=Xd(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.code&&(r.push(zd.testIntro(o.name)),r.indent(),r.push(o.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(s){a.e(s)}finally{a.f()}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return Vd.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,a=e.tests,o=e.meta,s=zd.buildSuite({tests:a,meta:o});return zd.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:s})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"});"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react yet"},captureSetupError:function(e){var t=e.tag,n=e.raw;st.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","nodejs"),st.Tb(t)}))},exampleTest:{id:-1,failureMessage:"",name:"add",code:"expect(add(1, 2)).toBe(3);"}};function Vd(){return(Vd=(0,A.Z)(G().mark((function e(t){var n,r,i,a,o,s,l,c,u,d,p,f,m,h,g,v,b,y,x,w,k,Z;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.container,r=t.fs,i=t.packager,a=t.logger,o=t.suiteCode,s=a.startLogSpinner("Setting up the environment"),e.next=4,jd(r);case 4:return s("Creating your test files 1/2"),e.next=7,kd({fs:r,code:o,filename:"".concat(zd.testSuiteName(),".js")});case 7:if(l=e.sent,!(c=l.error)){e.next=13;break}return"Failed to create suite code file",zd.captureSetupError({tag:"Failed to create suite code file",raw:c}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 13:return s("Creating your test files 2/2"),u=69,d="jest.config.json",p={testRegex:wd("".concat(zd.testSuiteName(),".js")),testEnvironment:"node",testFailureExitCode:u},e.next=19,kd({fs:r,code:JSON.stringify(p),filename:d});case 19:if(f=e.sent,!(m=f.error)){e.next=25;break}return"Failed to create config file",zd.captureSetupError({tag:"Failed to create config file",raw:m}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 25:return a.stopLogSpinner(),a.clearLine(),a.logMessage("Installing imported packages\r\n"),e.next=30,i.installPackages();case 30:if(e.sent){e.next=33;break}return e.abrupt("return",{error:"Failed to install packages\r\n"});case 33:return a.clearLogs(),s=a.startLogSpinner("Running your tests"),h=wd("output.json"),e.next=38,n.exec("jest","--json","--outputFile",h,"--config",wd(d),"--forceExit","--passWithNoTests");case 38:if(g=e.sent,v=g.output,!(b=g.error)||b.endsWith(u.toString())){e.next=44;break}return(0,ct.track)(ct.events.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),e.abrupt("return",{error:"Running tests failed\r\n\r\n"+(null===v||void 0===v?void 0:v.replace(/\n/g,"\n\r"))+"\r\n"+b});case 44:return s("Parsing your test results"),e.next=47,r.readFile(h);case 47:if(!(y=e.sent).error){e.next=52;break}return"Error reading test results",zd.captureSetupError({tag:"Error reading test results",raw:y.error}),e.abrupt("return",{error:"There was an error getting test results, if this happens please contact support."});case 52:if(x=y.content.toString(),!(w=JSON.parse(x)).success){e.next=56;break}return e.abrupt("return",{error:null,result:{passed:!0,failures:[]}});case 56:if(k=w.testResults[0],(Z=k.assertionResults.filter((function(e){return"passed"!==e.status})).map((function(e){return{name:e.title,stack:e.failureMessages[0]}}))).length){e.next=60;break}return e.abrupt("return",{error:k.message.replace(/\n/g,"\r\n")});case 60:return e.abrupt("return",{error:null,result:{passed:!1,failures:Z}});case 61:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hd={java10:Id,java10_beta:Id,java:Id,python3:Ad,python3_beta:Ad,python:Ad,nodejs:zd,javascript:zd,nodejs_beta:zd};function Gd(e){return e in Hd}function Wd(e){if(!Gd(e))throw new Error("".concat(e," is not a supported unit testing language, it has to be one of ").concat(Object.keys(Hd)));return Hd[e]}var qd=n(47385),Kd=n(15703),Yd=n(47421),Qd=n(78120),$d=Qd.q6.define();function Jd(e){var t=e.editorRef,n=e.onChange,r=e.placeholder,i=e.skeleton,a=e.language,o=e.skeletonClosingBracket,s=e.indentSize,l=void 0===s?2:s,c=(0,qd.Z)({language:a,indentIsSpaces:!0,indentSize:2,fontSize:14}),u=c.view,d=c.ref,p=K.useRef(i?"".concat(i,"\n"):""),f=K.useState(!0),m=(0,D.Z)(f,2),h=m[0],g=m[1],v=(0,Kr.Fg)(),b=o?"\n".concat(o):"",y=" ".repeat(l);return K.useEffect((function(){var e=p.current;p.current=i?"".concat(i,"\n"):"",u&&i&&t&&!h&&u.dispatch({changes:{from:0,to:e.length-1,insert:i},annotations:[Qd.YW.addToHistory.of(!1),$d.of(!0)]})}),[u,i,t,h]),K.useEffect((function(){if(u&&n&&t&&r&&v){var e=Qd.yy.changeFilter.of((function(e){return!!e.annotation($d)||[0,p.current.length-1]})),i=Qd.yy.changeFilter.of((function(e){return!(b.length&&!e.annotation($d))||[e.startState.doc.length-b.length+1,e.startState.doc.length]})),a=Yd.tk.updateListener.of((function(e){var t=e.state.doc.slice(p.current.length,e.state.doc.toString().length-b.length).toString();t!=="".concat(y).concat(r,"\n").concat(y)?n(t):n("")})),o="".concat(p.current).concat(y).concat(r,"\n").concat(b);u.dispatch({changes:{from:0,to:u.state.doc.length,insert:o},effects:Qd.Py.appendConfig.of([e,i,a]),selection:{anchor:o.length},annotations:Qd.YW.addToHistory.of(!1)}),t({setValue:function(e){if(e){var t=u.state.doc.toString().length;u.dispatch({changes:{from:p.current.length,to:t-b.length,insert:e},annotations:Qd.YW.addToHistory.of(!1)})}},focus:function(){return u.focus()}}),g(!1)}}),[n,a,u,b,t,r,v,y]),(0,ge.BX)("div",{className:"jsx-2563325987 editor",children:[h&&(0,ge.tZ)("div",{className:"jsx-2563325987 loader",children:(0,ge.tZ)(Kd.Z,{})}),(0,ge.tZ)("div",{ref:d,className:"jsx-2563325987"}),(0,ge.tZ)(V.default,{id:"2563325987",children:[".editor.jsx-2563325987{overflow:auto;position:absolute;width:100%;height:100%;}",".loader.jsx-2563325987{height:100%;width:100%;z-index:5;}"]})]})}function ep(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ep(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ep(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function np(e){var t,n,r,i,a=e.isOpen,o=e.meta,s=e.language,l=e.hasMetadata,c=e.onClose,u=(0,fe.Z)(),d=(0,Ft.Z)().showConfirm,p=K.useState(null),f=(0,D.Z)(p,2),m=f[0],h=f[1],g=K.useState(!0),v=(0,D.Z)(g,2),b=v[0],y=v[1],x=K.useState((null===o||void 0===o?void 0:o.initialization)||""),w=(0,D.Z)(x,2),k=w[0],Z=w[1],j=K.useState((null===o||void 0===o?void 0:o.imports)||""),O=(0,D.Z)(j,2),E=O[0],_=O[1],C=K.useState((null===o||void 0===o?void 0:o.setup)||""),S=(0,D.Z)(C,2),P=S[0],N=S[1],T=K.useState((null===o||void 0===o?void 0:o.tearDown)||""),I=(0,D.Z)(T,2),R=I[0],A=I[1],L=(0,me.rUq)({onError:function(e){return h(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTestMeta;r&&("UserError"===r.__typename?h(r.message):"ReplUnitTestMeta"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:u}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:me.aAi});return t?tp(tp({},t),{},{meta:tp({},n)}):{__typename:"ReplUnitTestsWithMeta",meta:n,tests:[]}}}}),d("Setup saved!"),c()))}}),B=(0,D.Z)(L,2),M=B[0],U=B[1],X=(0,me.AFf)({onError:function(e){return h(e.message)},onCompleted:function(e){var t=e.updateReplUnitTestMeta;t&&("UserError"===t.__typename?h(t.message):"ReplUnitTestMeta"===t.__typename&&(d("Imports updated!"),c()))}}),F=(0,D.Z)(X,2),z=F[0],H=F[1],G=Wd(s),W=E!==(null===o||void 0===o?void 0:o.imports)||k!==(null===o||void 0===o?void 0:o.initialization)||P!==(null===o||void 0===o?void 0:o.setup)||R!==(null===o||void 0===o?void 0:o.tearDown),q=U.loading||H.loading;return(0,ge.tZ)(Ot.Z,{isOpen:a,preventClose:!0,onRequestClose:c,children:(0,ge.BX)("div",{className:"jsx-1252880397 content",children:[(0,ge.BX)(de.gC,{spacing:2,align:"stretch",children:[(0,ge.tZ)(ip,{unitTestsLib:G,onChange:_,language:s,initialValue:null!==(t=null===o||void 0===o?void 0:o.imports)&&void 0!==t?t:""}),(0,ge.tZ)("div",{onClick:function(){return y(!b)},className:"jsx-1252880397 collapse",children:(0,ge.BX)(de.Ug,{spacing:2,align:"baseline",children:[(0,ge.tZ)(Ee.Z,{level:3,children:" Advanced"}),(0,ge.tZ)(Jc.Z,{color:"var(--foreground-default)",size:20,rotate:b?270:0})]})}),b?null:(0,ge.BX)(de.gC,{align:"stretch",spacing:1,children:[(0,ge.tZ)(ap,{unitTestsLib:G,onChange:Z,language:s,initialValue:null!==(n=null===o||void 0===o?void 0:o.initialization)&&void 0!==n?n:""}),(0,ge.tZ)(op,{unitTestsLib:G,onChange:N,language:s,initialValue:null!==(r=null===o||void 0===o?void 0:o.setup)&&void 0!==r?r:""}),(0,ge.tZ)(sp,{unitTestsLib:G,onChange:A,language:s,initialValue:null!==(i=null===o||void 0===o?void 0:o.tearDown)&&void 0!==i?i:""})]}),(0,ge.BX)(de.Ug,{justify:"space-between",children:[(0,ge.tZ)(ue.Z,{style:{color:"var(--accent-negative-default"},children:m}),(0,ge.BX)(de.Ug,{spacing:2,justify:"end",children:[(0,ge.tZ)(ce.Z,{loading:q,onClick:c,children:"Close"}),(0,ge.tZ)(ce.Z,{color:"primary",disabled:!W,loading:q,onClick:function(){l?z({variables:{input:{initialization:k,imports:E,setup:P,tearDown:R,replId:u}}}):M({variables:{input:{initialization:k,imports:E,setup:P,tearDown:R,replId:u}}})},children:"Save"})]})]})]}),(0,ge.tZ)(V.default,{id:"1252880397",children:[".content.jsx-1252880397{height:100%;width:100%;padding:var(--space-24);}",".editable-area.jsx-1252880397{width:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;border:1px solid var(--background-higher);border-radius:var(--border-radius-4);padding:var(--space-8) 0;}",".editor.jsx-1252880397{height:150px;padding-bottom:var(--space-8);-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".collapse.jsx-1252880397{cursor:pointer;}"]})]})})}var rp=[".content.jsx-1195244676{height:100%;width:100%;padding:var(--space-24);}",".editable-area.jsx-1195244676{width:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;border:1px solid var(--background-higher);border-radius:var(--border-radius-4);padding:var(--space-8) 0;}",".editor.jsx-1195244676{height:150px;padding-bottom:var(--space-8);-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;position:relative;}"];function ip(e){var t=e.unitTestsLib,n=e.onChange,r=e.language,i=e.initialValue,a=K.useState(null),o=(0,D.Z)(a,2),s=o[0],l=o[1];K.useEffect((function(){s&&(s.setValue(i),s.focus())}),[s,i]);var c=t.defaultImports().trim();return(0,ge.BX)(de.gC,{spacing:1,align:"stretch",children:[(0,ge.BX)(de.Ug,{justify:"space-between",children:[(0,ge.tZ)(Ee.Z,{level:3,children:"Imports"}),(0,ge.tZ)("a",{href:"https://docs.replit.com/repls/UnitTesting",target:"_blank",className:"jsx-".concat(rp.__hash),children:(0,ge.tZ)(ce.Z,{Icon:Ye.Z,children:"Docs"})})]}),(0,ge.tZ)("div",{className:"jsx-".concat(rp.__hash)+" editable-area",children:(0,ge.tZ)("div",{className:"jsx-".concat(rp.__hash)+" editor",children:(0,ge.tZ)(Jd,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add imports here!"),editorRef:l,language:r,skeleton:c,skeletonClosingBracket:"",indentSize:0})})}),(0,ge.tZ)(V.default,{id:rp.__hash,children:rp})]})}function ap(e){var t=e.unitTestsLib,n=e.onChange,r=e.language,i=e.initialValue,a=K.useState(null),o=(0,D.Z)(a,2),s=o[0],l=o[1];K.useEffect((function(){s&&s.setValue(i)}),[s,i]);var c=t.classConstructorName();return(0,ge.BX)(de.gC,{spacing:1,align:"stretch",children:[(0,ge.BX)(de.Ug,{justify:"space-between",children:[(0,ge.tZ)(Ee.Z,{level:4,children:"Initialization"}),(0,ge.tZ)("a",{href:"https://docs.replit.com/repls/UnitTesting",target:"_blank",className:"jsx-".concat(rp.__hash),children:(0,ge.tZ)(ce.Z,{Icon:Ye.Z,children:"Docs"})})]}),c&&(0,ge.tZ)(de.Ug,{children:(0,ge.BX)(ue.Z,{children:["Hint: constructor name is ",(0,ge.tZ)("code",{className:"jsx-".concat(rp.__hash),children:c}),"."]})}),(0,ge.tZ)("div",{className:"jsx-".concat(rp.__hash)+" editable-area",children:(0,ge.tZ)("div",{className:"jsx-".concat(rp.__hash)+" editor",children:(0,ge.tZ)(Jd,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add initialization code here!"),editorRef:l,language:r,skeleton:"",skeletonClosingBracket:"",indentSize:0})})}),(0,ge.tZ)(V.default,{id:rp.__hash,children:rp})]})}function op(e){var t=e.unitTestsLib,n=e.onChange,r=e.language,i=e.initialValue,a=K.useState(null),o=(0,D.Z)(a,2),s=o[0],l=o[1];K.useEffect((function(){s&&s.setValue(i)}),[s,i]);var c=t.setupIntro().trim();return(0,ge.BX)(de.gC,{spacing:1,align:"stretch",children:[(0,ge.BX)(de.Ug,{justify:"space-between",children:[(0,ge.tZ)(Ee.Z,{level:4,children:"Setup"}),(0,ge.tZ)("a",{href:"https://docs.replit.com/repls/UnitTesting",target:"_blank",className:"jsx-".concat(rp.__hash),children:(0,ge.tZ)(ce.Z,{Icon:Ye.Z,children:"Docs"})})]}),(0,ge.tZ)("div",{className:"jsx-".concat(rp.__hash)+" editable-area",children:(0,ge.tZ)("div",{className:"jsx-".concat(rp.__hash)+" editor",children:(0,ge.tZ)(Jd,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add setup code here!"),editorRef:l,language:r,skeleton:c,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})}),(0,ge.tZ)(V.default,{id:rp.__hash,children:rp})]})}function sp(e){var t=e.unitTestsLib,n=e.onChange,r=e.language,i=e.initialValue,a=K.useState(null),o=(0,D.Z)(a,2),s=o[0],l=o[1];K.useEffect((function(){s&&s.setValue(i)}),[s,i]);var c=t.tearDownIntro().trim();return(0,ge.BX)(de.gC,{spacing:1,align:"stretch",children:[(0,ge.BX)(de.Ug,{justify:"space-between",children:[(0,ge.tZ)(Ee.Z,{level:4,children:"Teardown"}),(0,ge.tZ)("a",{href:"https://docs.replit.com/repls/UnitTesting",target:"_blank",className:"jsx-".concat(rp.__hash),children:(0,ge.tZ)(ce.Z,{Icon:Ye.Z,children:"Docs"})})]}),(0,ge.tZ)("div",{className:"jsx-".concat(rp.__hash)+" editable-area",children:(0,ge.tZ)("div",{className:"jsx-".concat(rp.__hash)+" editor",children:(0,ge.tZ)(Jd,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add teardown code here!"),editorRef:l,language:r,skeleton:c,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})}),(0,ge.tZ)(V.default,{id:rp.__hash,children:rp})]})}rp.__hash="1195244676";var lp=function(e){var t=e.language,n=e.meta,r=K.useState(!1),i=(0,D.Z)(r,2),a=i[0],o=i[1];return(0,ge.BX)(ge.HY,{children:[(0,ge.tZ)(ce.Z,{Icon:We.Z,filled:!0,fullWidth:!0,onClick:function(){return o(!0)},children:"Setup"}),(0,ge.tZ)(np,{language:t,isOpen:a,onClose:function(){return o(!1)},hasMetadata:Boolean(null===n||void 0===n?void 0:n.id),meta:n}),(0,ge.tZ)(V.default,{id:"4031649501",children:[".collapse.jsx-4031649501{cursor:pointer;}"]})]})},cp=n(5537),up=n(46348);function dp(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return pp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pp(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function pp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fp(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hp="\x1b[0;31m",gp="\x1b[0m",vp=["\u28fe","\u28fd","\u28fb","\u28bf","\u287f","\u28df","\u28ef","\u28f7","\u2801","\u2802","\u2804","\u2840","\u2880","\u2820","\u2810","\u2808"];function bp(e){var t=e.name,n=e.failureMessage,r=e.stack;return"\u274c\t".concat(hp).concat(t).concat(gp,"\r").concat(n?"\nMessage: ".concat(n,"\r"):"","\nStack Trace:\r\n").concat(r.replace(/\n/g,"\r\n"),"\n\r\n\r\n")}var yp=function(e){var t=e.language,n=e.unitTests,r=e.onResult,i=e.trackingContext,a=K.useState(!1),o=(0,D.Z)(a,2),s=o[0],l=o[1],c=(0,Oe.Z)(),u=c.container,d=c.packager,p=c.fs,f=window.store.dispatch,m=null,h=function(){l(!1),jd(p),m&&(m.stopLogSpinner(),m=null)},g=function(){var e=(0,A.Z)(G().mark((function e(){var a,o,c,g,v,b,y,x,w,k,Z,j,O,E,_,C,S,P;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:if(a=null,m={startLogSpinner:function(e){if(a)throw new Error("A spinner is already active! call stopSpinner first or use the update callback to update the active spinner's message.");var t=e,n=0;return a=setInterval((function(){n++;var e=vp[n%vp.length];if(!m)throw new Error("Expected logger");m.clearLine(),m.logMessage(e+" "+t)}),100),function(e){t=e}},stopLogSpinner:function(){a&&clearInterval(a),a=null},logMessage:function(e){f((0,ft.yY)({wid:"",type:"",raw:!0,message:e}))},clearLine:function(){if(!m)throw new Error("Expected logger");m.logMessage("\x1b[1K\r")},clearLogs:function(){if(f({type:"CLEAR_CONSOLE"}),!m)throw new Error("Expected logger");m.logMessage("\r\n")}},n){e.next=6;break}throw new Error("Run button should not be active if there are no tests");case 6:return l(!0),(0,ct.track)(ct.events.REPL_UNIT_TEST_RUN,{trackingData:{context:i}}),m.clearLogs(),o=Wd(t),e.next=12,o.buildAndRunTests(mp({container:u,fs:p,packager:d,logger:m},n));case 12:if(c=e.sent,m.stopLogSpinner(),m.clearLine(),m.clearLogs(),null===c.error){e.next=21;break}return m.logMessage("".concat(hp).concat(c.error).concat(gp,"\r\n")),h(),n.tests.map((function(e){return{testId:e.id,didPass:!1}})),e.abrupt("return");case 21:if(g=c.result.passed?[]:c.result.failures.map((function(e){return o.parseTestResultName(e.name)})),v=[],b=n.tests.map((function(e){return o.getProperTestName(e.name)})),!(y=g.filter((function(e){return!b.includes(e)}))).length){e.next=32;break}x=y[0],w=c.result.failures[0].stack,m.logMessage(bp({name:x,failureMessage:"The following error occurred but was not related to a single unit test",stack:w})),v.push.apply(v,(0,Bt.Z)(n.tests.map((function(e){return{testId:e.id,didPass:!1}})))),e.next=56;break;case 32:k=dp(n.tests),e.prev=33,k.s();case 35:if((Z=k.n()).done){e.next=48;break}if(j=Z.value,O=o.getProperTestName(j.name),E=g.indexOf(O),_=-1===E,v.push({testId:j.id,didPass:_}),!_){e.next=44;break}return m.logMessage((N=O,"\u2705\t".concat("\x1b[0;32m").concat(N).concat(gp,"\r\n\r\n"))),e.abrupt("continue",46);case 44:C=c.result.failures[E].stack,m.logMessage(bp({name:O,failureMessage:j.failureMessage,stack:C}));case 46:e.next=35;break;case 48:e.next=53;break;case 50:e.prev=50,e.t0=e.catch(33),k.e(e.t0);case 53:return e.prev=53,k.f(),e.finish(53);case 56:if(r(v),S=n.tests.length,!c.result.passed){e.next=62;break}return m.logMessage("".concat("\x1b[48;5;22m","  All tests have passed ").concat(S,"/").concat(S,"  ").concat(gp,"\r\n")),h(),e.abrupt("return");case 62:P=S-c.result.failures.length,m.logMessage("".concat("\x1b[48;5;88m","  ").concat(P,"/").concat(S," passed, see errors above  ").concat(gp)),h();case 65:case"end":return e.stop()}var N}),e,null,[[33,50,53,56]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,A.Z)(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{g()}catch(t){st.$e((function(e){e.setTag("unittestsrun","true"),st.Tb(t)})),m&&m.logMessage("\r\n".concat(hp," Sorry, we have failed to run your tests. Please try again or contact support. ").concat(gp,"\r\n")),h()}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Boolean(n&&n.tests.length>0)?(0,ge.tZ)("div",{className:"run-button",children:(0,ge.tZ)(ce.Z,{loading:s,fullWidth:!0,color:"blue",filled:!0,Icon:el.Z,onClick:v,children:s?"Running":"Run tests"})}):null};function xp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xp(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kp(e){var t=e.isOpen,n=e.test,r=e.language,i=e.onClose,a=e.trackingContext,o=(0,fe.Z)(),s=(0,Ft.Z)().showConfirm,l=K.useState(null),c=(0,D.Z)(l,2),u=c[0],d=c[1],p=K.useState(""),f=(0,D.Z)(p,2),m=f[0],h=f[1],g=K.useState(""),v=(0,D.Z)(g,2),b=v[0],y=v[1],x=K.useState(""),w=(0,D.Z)(x,2),k=w[0],Z=w[1],j=(0,me.Hd4)({onError:function(e){return Z(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTest;r&&("UserError"===r.__typename?Z(r.message):"ReplUnitTest"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:o}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:me.Rbd});return t?wp(wp({},t),{},{tests:[].concat((0,Bt.Z)(t.tests),[n])}):{__typename:"ReplUnitTestsWithMeta",meta:null,tests:[n]}}}}),s("Test created!"),i()))}}),O=(0,D.Z)(j,2),E=O[0],_=O[1],C=(0,me.kOV)({onError:function(e){return Z(e.message)},onCompleted:function(e){var t=e.updateReplUnitTest;t&&("UserError"===t.__typename?Z(t.message):"ReplUnitTest"===t.__typename&&(s("Test updated!"),i()))}}),S=(0,D.Z)(C,2),P=S[0],N=S[1],T=(0,dr.Y)("",(function(e){return e.length<=0?{message:"Must include test name"}:e.trim().split(" ").length>1?{message:"Test name must only be one word"}:void 0})),I=K.useState(!1),R=(0,D.Z)(I,2),A=R[0],L=R[1];K.useEffect((function(){t||L(!1)}),[t]),K.useEffect((function(){T.setValue((null===n||void 0===n?void 0:n.name)||""),y((null===n||void 0===n?void 0:n.failureMessage)||""),h((null===n||void 0===n?void 0:n.code)||""),u&&u.setValue((null===n||void 0===n?void 0:n.code)||"")}),[n,u]),K.useEffect((function(){Z("")}),[m,Z]);var B=Wd(r),M=!n||n.name!==T.value||n.code!==m||n.failureMessage!==b,U=_.loading||N.loading,X=B.testIntro(T.value||""),F=B.hasClosingBrackets()?B.getClosingBrackets():"";return(0,ge.tZ)(Ot.Z,{isOpen:t,preventClose:!0,onRequestClose:i,children:(0,ge.BX)("div",{className:"jsx-459724546 content",children:[(0,ge.BX)(de.gC,{spacing:2,align:"stretch",children:[(0,ge.BX)(de.Ug,{spacing:2,wrap:"nowrap",children:[(0,ge.tZ)(Ee.Z,{style:{flexShrink:0},level:3,children:"Name"}),(0,ge.tZ)(Ht.ZP,{autoFocus:!0,large:!0,required:!0,onChange:function(e){T.setValue(e.target.value),L(!0)},value:T.value,validationResults:A&&T.error?[{message:T.error.message,state:"error"}]:void 0,placeholder:"Enter test name here!"})]}),(0,ge.BX)(de.Ug,{align:"baseline",justify:"space-between",children:[(0,ge.tZ)(Ee.Z,{level:3,children:"Code"}),(0,ge.tZ)(ce.Z,{Icon:eu.Z,size:"small",onClick:function(){u&&u.setValue("  "+B.exampleTest.code),h(B.exampleTest.code)},children:"Show me an example"})]}),(0,ge.tZ)("section",{className:"jsx-459724546",children:(0,ge.tZ)("div",{className:"jsx-459724546 editable-area",children:(0,ge.tZ)("div",{className:"jsx-459724546 editor",children:(0,ge.tZ)(Jd,{skeleton:X,skeletonClosingBracket:F,language:r,editorRef:d,onChange:h,placeholder:"".concat(B.getCommentChar()," Enter code here")})})})}),(0,ge.tZ)("div",{className:"jsx-459724546 test-heading",children:(0,ge.tZ)(Ee.Z,{level:3,children:"Failure message"})}),(0,ge.tZ)("section",{className:"jsx-459724546",children:(0,ge.tZ)(Ht.ZP,{value:b,onChange:function(e){return y(e.target.value)},placeholder:"This will be displayed on test failure"})}),(0,ge.BX)(de.Ug,{justify:"space-between",align:"center",children:[(0,ge.tZ)(ue.Z,{style:{color:"var(--accent-negative-default"},children:k}),(0,ge.BX)(de.Ug,{spacing:2,justify:"end",children:[(0,ge.tZ)(ce.Z,{loading:!1,onClick:i,children:"Close"}),(0,ge.tZ)(ce.Z,{color:"primary",loading:U,disabled:!M,onClick:function(){T.validate()?L(!0):m.length<=0?Z("Test cannot be empty"):n?(P({variables:{input:{name:T.value,code:m,failureMessage:b,testId:n.id}}}),(0,ct.track)(ct.events.REPL_UNIT_TEST_EDITED,{trackingData:{context:a}})):(E({variables:{input:{name:T.value,code:m,failureMessage:b,replId:o}}}),(0,ct.track)(ct.events.REPL_UNIT_TEST_CREATED,{trackingData:{context:a}}))},children:"Save"})]})]})]}),(0,ge.tZ)(V.default,{id:"459724546",children:[".content.jsx-459724546{padding:var(--space-24);}",".editable-area.jsx-459724546{border:1px solid var(--background-higher);border-radius:var(--border-radius-4);padding:var(--space-8) 0;}",".editor.jsx-459724546{height:200px;padding-bottom:var(--space-8);position:relative;}"]})]})})}function Zp(e){var t=e.testId,n=e.onClose,r=(0,Ft.Z)().showConfirm,i=(0,fe.Z)(),a=(0,me.IVR)({onError:function(e){return p(e.message)},update:function(e,a){var o,s=null===(o=a.data)||void 0===o?void 0:o.deleteReplUnitTest;s&&("UserError"===s.__typename?p(s.message):"ReplUnitTest"===s.__typename&&t&&(e.modify({id:e.identify({__typename:"Repl",id:i}),fields:{unitTests:function(e,n){var r=n.readField,i=e.tests.filter((function(e){return r("id",e)!==t}));return wp(wp({},e),{},{tests:(0,Bt.Z)(i)})}}}),r("Test deleted!"),n()))}}),o=(0,D.Z)(a,2),s=o[0],l=o[1],c=K.useState(""),u=(0,D.Z)(c,2),d=u[0],p=u[1];return(0,ge.tZ)(Ot.Z,{isOpen:Boolean(t),onRequestClose:n,children:(0,ge.BX)("div",{className:"jsx-1541601772 content",children:[(0,ge.BX)(de.gC,{spacing:2,align:"stretch",children:[(0,ge.tZ)(Ee.Z,{level:2,children:" Delete test "}),(0,ge.tZ)(ue.Z,{children:"Are you sure you want to delete this test? This cannot be undone."}),(0,ge.BX)(de.Ug,{justify:"space-between",align:"center",children:[(0,ge.tZ)(ue.Z,{style:{color:"var(--accent-negative-default"},children:d}),(0,ge.BX)(de.Ug,{spacing:2,justify:"end",children:[(0,ge.tZ)(ce.Z,{loading:l.loading,onClick:n,children:"Cancel"}),(0,ge.tZ)(ce.Z,{color:"negative",loading:l.loading,onClick:function(){if(!t)throw new Error("Expected a testId");s({variables:{testId:t}})},children:"Yes, delete this test"})]})]})]}),(0,ge.tZ)(V.default,{id:"1541601772",children:[".content.jsx-1541601772{padding:var(--space-24);}"]})]})})}var jp=function(e){var t=e.unitTests,n=e.isAddingTest,r=e.onClose,i=e.language,a=e.canWrite,o=e.trackingContext,s=void 0===o?"default":o,l=K.useState(n),c=(0,D.Z)(l,2),u=c[0],d=c[1],p=K.useState(null),f=(0,D.Z)(p,2),m=f[0],h=f[1],g=K.useState(null),v=(0,D.Z)(g,2),b=v[0],y=v[1],x=(0,fe.Z)(),w=(0,me.lQq)(),k=(0,D.Z)(w,1)[0],Z=(null===t||void 0===t?void 0:t.tests)||[];return(0,ge.BX)(de.gC,{spacing:2,align:"stretch",children:[(0,ge.tZ)("div",{className:"jsx-2109177251 run-wrapper",children:(0,ge.tZ)(yp,{language:i,unitTests:t,onResult:function(e){k({variables:{input:{replId:x,results:e},replId:x}})},trackingContext:s})}),(0,ge.tZ)("div",{className:"jsx-2109177251 tests-wrapper",children:Z.length>0?(0,ge.tZ)(de.gC,{spacing:1,align:"stretch",children:Z.map((function(e){var t,n;return"ReplUnitTestLastRun"===(null===(t=e.lastRun)||void 0===t?void 0:t.__typename)&&(e.lastRun.status===me.$I7.Passed?n="passed-test":e.lastRun.status===me.$I7.Failed&&(n="failed-test")),(0,ge.tZ)("div",{className:"jsx-2109177251 "+"test ".concat(n),children:(0,ge.BX)(de.Ug,{wrap:"nowrap",justify:"space-between",align:"center",children:[(0,ge.tZ)(ue.Z,{truncate:!0,children:e.name}),a?(0,ge.tZ)("div",{className:"jsx-2109177251 test-ctas",children:(0,ge.BX)(de.Ug,{children:[(0,ge.tZ)(ce.Z,{border:!1,filled:!1,onClick:function(){h(e)},Icon:cp.Z}),(0,ge.tZ)(ce.Z,{border:!1,filled:!1,onClick:function(){y(e.id)},Icon:up.Z})]})}):null]})},e.id)}))}):(0,ge.tZ)("div",{className:"jsx-2109177251",children:(0,ge.BX)(de.gC,{align:"center",spacing:2,children:[(0,ge.tZ)(ue.Z,{align:"center",children:"Looks like you don't have any tests yet!"}),a&&(0,ge.tZ)(ce.Z,{onClick:function(){return d(!0)},Icon:Vt.Z,children:"Add test"})]})})}),(0,ge.tZ)(kp,{isOpen:u||Boolean(m)||n,test:m,language:i,onClose:function(){h(null),d(!1),r&&r()},trackingContext:s}),(0,ge.tZ)(Zp,{testId:b,onClose:function(){return y(null)}}),(0,ge.tZ)(V.default,{id:"2109177251",children:[".tests-wrapper.jsx-2109177251{border-radius:var(--border-radius-4);padding:var(--space-16) 0;width:100%;}",".test.jsx-2109177251{padding:var(--space-8) var(--space-8);border:1px solid var(--outline-dimmest);border-radius:var(--border-radius-4);}",".passed-test.jsx-2109177251{border-color:var(--accent-positive-default);background:var(--accent-positive-dimmer);}",".failed-test.jsx-2109177251{border-color:var(--accent-negative-default);background:var(--accent-negative-dimmer);}",".test-ctas.jsx-2109177251{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}"]})]})};function Op(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ep(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Op(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Op(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _p(){return(0,ge.BX)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ge.tZ)("path",{d:"M23 4v6h-6M1 20v-6h6",stroke:"var(--foreground-default)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,ge.tZ)("path",{d:"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15",stroke:"var(--foreground-default)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}var Cp=function(e){var t=e.onClick,n=e.hasTests,r=n?{"aria-label":"Delete all tests to switch test type","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip"}:{};return(0,ge.BX)("div",Ep(Ep({},r),{},{className:"jsx-3302736802 "+(r&&null!=r.className&&r.className||"back-button"),children:[(0,ge.tZ)(ce.Z,{filled:!1,border:!1,size:"small",Icon:_p,onClick:t,disabled:n,children:"Switch test type"}),(0,ge.tZ)(V.default,{id:"3302736802",children:[".back-button.jsx-3302736802{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]}))},Sp=n(53291),Pp=n(32535);function Np(){var e=(0,Sp.Z)(),t=(0,Oe.Z)().dotReplit,n=null===e||void 0===e?void 0:e.language,r=(0,K.useState)(null),i=r[0],a=r[1],o=(0,K.useState)(!0),s=o[0],l=o[1];return(0,K.useEffect)((function(){if(n){if(Gd(n))return a(n),void l(!1);var e=!1,r=t.watch((function(t){var n,r;if(e||(e=!0,l(!1)),t.error)t.error===Pp.Y.NotFound&&a(null);else{var i=null===(n=t.config.unitTest)||void 0===n||null===(r=n.language)||void 0===r?void 0:r.toLowerCase();i&&Gd(i)?a(i):a(null)}}));return function(){r()}}}),[n,t]),{language:i,isLoading:s}}var Tp=function(e){var t,n,r,i,a=e.onBack,o=(0,fe.Z)(),s=K.useState(!1),l=(0,D.Z)(s,2),c=l[0],u=l[1],d=Np(),p=d.language,f=d.isLoading,m=(0,me.CHr)({variables:{replId:o}}),h=null===(t=m.data)||void 0===t?void 0:t.repl;if(m.loading||f)return(0,ge.BX)("div",{className:"jsx-707544915",children:[(0,ge.tZ)(Et.Z,{}),(0,ge.tZ)(V.default,{id:"707544915",children:["div.jsx-707544915{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]});if(!h||"Repl"!==h.__typename)return(0,ge.BX)("div",{className:"jsx-932640293",children:[(0,ge.tZ)(ue.Z,{children:"Unable to fetch tests, please try again"}),(0,ge.tZ)(V.default,{id:"932640293",children:["div.jsx-932640293{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-16);}"]})]});if(!p)return(0,ge.BX)("div",{className:"jsx-932640293",children:[(0,ge.tZ)(ue.Z,{align:"center",children:"Unit tests are currently only supported in Java, Python, and Node.js repls."}),(0,ge.tZ)(V.default,{id:"932640293",children:["div.jsx-932640293{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-16);}"]})]});var g="default";null!==h&&void 0!==h&&h.isProject?g="project_repl":null!==h&&void 0!==h&&h.isProjectFork&&(g="submission_repl");var v=Boolean((null===(n=h.unitTests)||void 0===n?void 0:n.tests)&&h.unitTests.tests.length>0);return null!==h&&void 0!==h&&null!==(r=h.currentUserPermissions)&&void 0!==r&&r.writeTests?(0,ge.BX)(de.gC,{align:"center",spacing:2,children:[(0,ge.tZ)("header",{className:"jsx-1572442350",children:(0,ge.BX)(de.Ug,{wrap:"nowrap",justify:"space-between",align:"baseline",children:[(0,ge.tZ)(Ee.Z,{truncate:!0,level:4,children:"Unit tests"}),(0,ge.tZ)(ce.Z,{role:"tooltip","data-microtip-position":"left","aria-label":"Add test",filled:!1,border:!1,Icon:Vt.Z,onClick:function(){return u(!0)}})]})}),(0,ge.tZ)("section",{className:"jsx-1572442350",children:(0,ge.BX)(de.gC,{spacing:1,align:"stretch",children:[(0,ge.tZ)(lp,{language:p,meta:(null===(i=h.unitTests)||void 0===i?void 0:i.meta)||null}),(0,ge.tZ)(jp,{isAddingTest:c,unitTests:(null===h||void 0===h?void 0:h.unitTests)||null,onClose:function(){return u(!1)},language:p,canWrite:!0,trackingContext:g}),a?(0,ge.tZ)(Cp,{hasTests:v,onClick:a}):null]})}),(0,ge.tZ)(V.default,{id:"1572442350",children:["header.jsx-1572442350{width:100%;}","section.jsx-1572442350{max-width:275px;width:100%;overflow-y:auto;}"]})]}):(0,ge.BX)(de.gC,{spacing:2,align:"center",children:[(0,ge.tZ)("header",{className:"jsx-4196683469",children:(0,ge.tZ)(Ee.Z,{truncate:!0,level:4,children:"Unit tests"})}),(0,ge.tZ)("section",{className:"jsx-4196683469",children:(0,ge.tZ)(jp,{unitTests:(null===h||void 0===h?void 0:h.unitTests)||null,language:p,isAddingTest:!1,canWrite:!1,trackingContext:g})}),(0,ge.tZ)(V.default,{id:"4196683469",children:["header.jsx-4196683469{width:100%;}","section.jsx-4196683469{width:100%;max-width:275px;overflow-y:auto;}"]})]})},Ip=n(42750);function Rp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,F.Z)(e);if(t){var i=(0,F.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,X.Z)(this,n)}}function Dp(e){switch(e){case me.Flv.Match:return"The test passes if the expected output is in the actual output.";case me.Flv.Exact:return"The test passes if the expected output is equal to the actual output.";case me.Flv.Regex:return"The test passes if the actual output matches the regex expression for the expected output.";case me.Flv.Compatibility:return"The test passes if the expected output is in the actual output; some characters are removed for backwards compatibility."}}var Ap=function(e){(0,U.Z)(n,e);var t=Rp(n);function n(){var e;(0,L.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).name=e.constructor.name,e}return n}((0,n(63207).Z)(Error));function Lp(e){var t={id:e.id},n={id:-e.id,input:{input:e.input?e.input+"\n":""}};switch(e.type){case"compatibility":t.output={compatibility:{expected:e.output}};break;case"match":t.output={match:{expected:e.output,ignoreTrailingWhitespace:!0}};break;case"exact":t.output={exact:{expected:e.output,allowTrailingNewline:!0}};break;case"regex":t.output={regex:{expression:e.output}}}return{id:e.id,instructions:[n,t]}}function Bp(e){var t=e.args,n=e.env,r=t.indexOf("--ps1"),i=t.indexOf("--ps2"),a=t.indexOf("-i");return-1!==r&&null!=t[r+1]&&(t[r+1]=""),-1!==i&&null!=t[i+1]&&(t[i+1]=""),-1!==a&&t.splice(a,1),t.includes("-q")||t.unshift(t.shift(),"-q"),n.PS1="",n.PS2="",{args:t,env:n}}function Mp(e){return Up.apply(this,arguments)}function Up(){return(Up=(0,A.Z)(G().mark((function e(t){var n,r,i,a,o,s,l,c,u,d;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRunConfig();case 2:if(r=e.sent){e.next=5;break}throw new Ap("unable to fetch dotreplit run config");case 5:if(!r.interp){e.next=15;break}if("stderred"===(null===(a=null===(i=r.interp)||void 0===i?void 0:i.command)||void 0===a?void 0:a.args[0])&&a.args.shift(),a&&!(a.args.length<1)){e.next=12;break}throw o=new Ap("received interp without command"),st.Tb(o,(function(e){return e.setExtra("runInfo",d)})),o;case 12:if(!a.args[0].match(/(^|\/)prybar/i)){e.next=14;break}return e.abrupt("return",{execCommand:Bp(a)});case 14:return e.abrupt("return",{execCommand:{args:a.args,env:a.env}});case 15:if(null!==(n=r.run)&&void 0!==n&&n.run){e.next=19;break}throw s=new Ap("Bad repl run config received"),st.Tb(s,(function(e){return e.setExtra("runConfig",r)})),s;case 19:return l=r.run,c=l.run,u=l.compile,c.env.PS1="",c.env.PS2="",d={execCommand:{args:c.args,env:c.env}},u&&(u.env.PS1="",u.env.PS2="",d.buildCommand={args:u.args,env:u.env}),e.abrupt("return",d);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xp=["innerRef"];function Fp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fp(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vp=function(e){var t=e.test,n=e.onSubmit,r=e.onCancel,i=e.isOpen,a=e.onRequestClose,o=K.useState({}),s=(0,D.Z)(o,2),l=s[0],c=s[1],u=function(e){return{name:(null===e||void 0===e?void 0:e.name)||"",type:(null===e||void 0===e?void 0:e.type)||me.Flv.Match,input:(null===e||void 0===e?void 0:e.input)||"",output:(null===e||void 0===e?void 0:e.output)||""}},d=(0,Ft.Z)().showError,p=K.useState(u(t)),f=(0,D.Z)(p,2),m=f[0],h=f[1];K.useEffect((function(){h(u(t)),c({})}),[t,h]);var g=function(e,t){c((function(n){return zp(zp({},n),{},(0,z.Z)({},e,t?void 0:[{message:e+" expected but not provided.",state:"error"}]))}))};return(0,ge.tZ)(Ot.Z,{isOpen:i,onRequestClose:a,children:(0,ge.BX)("div",{className:V.default.dynamic([["2086048227",[""===m.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-tests-view",children:[(0,ge.tZ)("div",{className:V.default.dynamic([["2086048227",[""===m.type?"--foreground-dimmer":"--foreground-default"]]])+" header-row",children:(0,ge.tZ)(Ee.Z,{level:4,align:"center",children:t?"Edit test: ":"Create test"})}),(0,ge.tZ)("div",{className:V.default.dynamic([["2086048227",[""===m.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,ge.tZ)(Ht.ZP,{label:"Test name",placeholder:"The name of the test",value:(null===m||void 0===m?void 0:m.name)||"",validationResults:l.name,onChange:function(e){var t;e.persist(),h((function(t){var n;return zp(zp({},t),{},{name:(null===(n=e.target)||void 0===n?void 0:n.value)||""})})),g("name",null===(t=e.target)||void 0===t?void 0:t.value)},maxLength:20})}),(0,ge.tZ)("div",{className:V.default.dynamic([["2086048227",[""===m.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,ge.tZ)(Ip.Z,{style:{height:"150px"},label:"Input (standard in)",placeholder:"The input for the test",value:m.input,fontFamily:"monospace",translate:"no",onChange:function(e){e.persist(),h((function(t){return zp(zp({},t),{},{input:e.target.value})}))}})}),(0,ge.tZ)("div",{className:V.default.dynamic([["2086048227",[""===m.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,ge.tZ)(Ip.Z,{style:{height:"150px"},label:"Expected output",validationResults:l.output,placeholder:"The expected output for the test",value:m.output,fontFamily:"monospace",translate:"no",onChange:function(e){var t;e.persist(),h((function(t){return zp(zp({},t),{},{output:e.target.value})})),g("output",null===(t=e.target)||void 0===t?void 0:t.value)}})}),(0,ge.tZ)("div",{className:V.default.dynamic([["2086048227",[""===m.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,ge.tZ)("div",{className:V.default.dynamic([["2086048227",[""===m.type?"--foreground-dimmer":"--foreground-default"]]])+" dropdown-container",children:(0,ge.tZ)(nu.Z,{items:[me.Flv.Match,me.Flv.Exact,me.Flv.Regex,me.Flv.Compatibility],renderItemChildComponent:function(e){return(0,ge.BX)("a",{className:V.default.dynamic([["2086048227",[""===m.type?"--foreground-dimmer":"--foreground-default"]]]),children:[e,(0,ge.tZ)("br",{className:V.default.dynamic([["2086048227",[""===m.type?"--foreground-dimmer":"--foreground-default"]]])}),(0,ge.tZ)(ue.Z,{size:"xsmall",children:Dp(e)})]})},renderAnchorComponent:function(e){var t=e.innerRef,n=(0,fo.Z)(e,Xp);return(0,ge.BX)("a",zp(zp({ref:t},n),{},{className:V.default.dynamic([["2086048227",[""===m.type?"--foreground-dimmer":"--foreground-default"]]])+" dropdown-view dropdown-anchor",children:[(0,ge.tZ)(ue.Z,{children:m.type}),(0,ge.tZ)(ue.Z,{children:(0,ge.tZ)(Jc.Z,{})})]}))},onClick:function(e){h((function(t){return zp(zp({},t),{},{type:e})}))}})})}),(0,ge.BX)("div",{className:V.default.dynamic([["2086048227",[""===m.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row align-end",children:[(0,ge.tZ)(ce.Z,{onClick:r,children:"Cancel"}),(0,ge.tZ)(ce.Z,{color:"primary",filled:!0,onClick:function(){if(!m.name||!m.output)return d("Test name and expected output must be provided."),m.name||g("name"),void(m.output||g("output"));m.type?(n({testId:null===t||void 0===t?void 0:t.id,name:m.name,input:m.input||"",type:m.type,output:m.output}),h(u(void 0))):d("A test type must be provided")},children:"Save"})]}),(0,ge.tZ)(V.default,{id:"2086048227",dynamic:[""===m.type?"--foreground-dimmer":"--foreground-default"],children:[".dropdown-container.__jsx-style-dynamic-selector{border:1px solid var(--outline-dimmest);width:100%;box-sizing:border-box;border-radius:var(--border-radius-4);}",".dropdown-anchor.__jsx-style-dynamic-selector{padding:var(--space-8);}",".dropdown-container.__jsx-style-dynamic-selector .anchor{z-index:1;}",".dropdown-container.__jsx-style-dynamic-selector .dropdown-view{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;text-align:right;}",".dropdown-container.__jsx-style-dynamic-selector .dropdown-view .text{color:var( ".concat(""===m.type?"--foreground-dimmer":"--foreground-default"," );}"),".manage-tests-view.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:var(--space-16);}",".manage-test-row.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding-top:var(--space-16);}",".align-end.__jsx-style-dynamic-selector{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}",".manage-test-row.__jsx-style-dynamic-selector>button{margin-left:var(--space-8);}",".manage-test-row-section.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:0 var(--space-16);width:100%;}"]})]})})},Hp=function(e){var t=e.test,n=e.onEdit,r=e.onDelete,i=e.onView,a=e.isTeacherView,o=e.status,s=e.isRunning,l=e.onShowFailed,c=e.disableButtons,u="";return o?u=o:s&&(u="Running"),(0,ge.BX)("div",{onClick:function(){return i()},className:"jsx-69869520 test",children:[(0,ge.BX)("div",{className:"jsx-69869520 test-row",children:[(0,ge.tZ)("div",{className:"jsx-69869520 test-text",children:(0,ge.tZ)(ue.Z,{size:"large",children:t.name})}),a&&(0,ge.tZ)("div",{onClick:function(e){return e.stopPropagation()},className:"jsx-69869520 test-row",children:(0,ge.BX)(ge.HY,{children:[(0,ge.tZ)(ce.Z,{color:"primary",onClick:n,Icon:cp.Z,disabled:c}),(0,ge.tZ)(Bs.Z,{width:"var(--space-4)"}),(0,ge.tZ)(ce.Z,{onClick:r,color:"negative",Icon:up.Z,disabled:c})]})})]}),(o||s)&&(0,ge.BX)(ge.HY,{children:[(0,ge.tZ)(Bs.Z,{height:2}),(0,ge.BX)("div",{className:"jsx-69869520 test-row",children:[(0,ge.tZ)("div",{className:"jsx-69869520 test-text",children:(0,ge.tZ)(ue.Z,{className:jt()([{"status-passed":"Passed"===o},{"status-failed":"Failed"===o}]),children:u})}),(0,ge.tZ)(ce.Z,{onClick:function(e){return e.stopPropagation(),l(e)},disabled:s,children:"Results"})]})]}),(0,ge.tZ)(V.default,{id:"69869520",children:[".test.jsx-69869520{background-color:var(--background-higher);margin-top:var(--space-8);padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;border-radius:var(--border-radius-8);cursor:pointer;}",".test-row.jsx-69869520 .status-passed{color:var(--accent-positive-default);}",".test-row.jsx-69869520 .status-failed{color:var(--accent-negative-default);}",".test-text.jsx-69869520{width:100%;padding:var(--space-4) 0;padding-right:var(--space-8);word-break:break-all;}",".test.jsx-69869520:hover{background-color:var(--background-higher);}",".test-row.jsx-69869520{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;}"]})]})},Gp=function(e){var t=e.text;if(!t)return null;var n=t.split("\n").map((function(e,t){return[e,"".concat(t+1)]}));return""===n[n.length-1][0]&&n.pop(),(0,ge.BX)(de.Ug,{children:[(0,ge.tZ)("code",{className:"jsx-3220288616 gutter",children:(0,ge.tZ)("pre",{className:"jsx-3220288616",children:n.map((function(e){var t=(0,D.Z)(e,2);t[0];return t[1]})).join("\n")})}),(0,ge.tZ)("code",{className:"jsx-3220288616 text",children:(0,ge.tZ)("pre",{className:"jsx-3220288616",children:t})}),(0,ge.tZ)(V.default,{id:"3220288616",children:[".gutter.jsx-3220288616,.text.jsx-3220288616{color:var(--foreground-default);}",".gutter.jsx-3220288616{min-width:1.5em;}",".text.jsx-3220288616{max-width:80%;}"]})]})},Wp=n(37529),qp=n.n(Wp),Kp=function(e){var t=e.expected,n=e.actual;if(!t||!n)return null;var r=n.split("\n"),i=t.split("\n"),a=i.length>r.length?i:r,o=a.map((function(e,t){return[e,"".concat(t+1)]})),s=a.map((function(e,t){var n=t<r.length?r[t]:"",a=t<i.length?i[t]:"";return(0,ge.BX)(ge.HY,{children:[qp()(n,a).map((function(e,t){var n;return-1===e[0]&&(n={backgroundColor:"var(--accent-negative-dimmer)",textDecoration:"line-through"}),1===e[0]&&(n={backgroundColor:"var(--accent-positive-dimmer)",textDecoration:"underline"}),(0,ge.tZ)("span",{style:n,children:e[1]},t)})),(0,ge.tZ)("br",{})]})}));return(0,ge.BX)(de.Ug,{children:[(0,ge.tZ)("code",{className:"jsx-3220288616 gutter",children:(0,ge.tZ)("pre",{className:"jsx-3220288616",children:o.map((function(e){var t=(0,D.Z)(e,2);t[0];return t[1]})).join("\n")})}),(0,ge.tZ)("code",{className:"jsx-3220288616 text",children:(0,ge.tZ)("pre",{className:"jsx-3220288616",children:s})}),(0,ge.tZ)(V.default,{id:"3220288616",children:[".gutter.jsx-3220288616,.text.jsx-3220288616{color:var(--foreground-default);}",".gutter.jsx-3220288616{min-width:1.5em;}",".text.jsx-3220288616{max-width:80%;}"]})]})},Yp=function(e){var t,n=e.test,r=e.actualOutput,i=e.isOpen,a=e.isResults,o=e.onRequestClose,s=e.didFail,l=e.error,c=n?Dp(n.type):"",u=null===r||void 0===r?void 0:r.split("\n"),d=null===n||void 0===n?void 0:n.output.split("\n"),p=null===n||void 0===n?void 0:n.output;return s=null!==(t=s)&&void 0!==t?t:"Failed"===(null===n||void 0===n?void 0:n.status),(0,ge.BX)(Ot.Z,{onRequestClose:o,isOpen:i&&void 0!==n,children:[(0,ge.BX)("div",{className:"jsx-565168207 test-info",children:[(0,ge.BX)(de.gC,{align:"center",spacing:1,children:[(0,ge.BX)(Ee.Z,{level:4,children:[a&&"Test results: ",null===n||void 0===n?void 0:n.name]}),(0,ge.BX)(de.Ug,{spacing:1,children:[(0,ge.tZ)("div",{role:"tooltip","data-microtip-position":"top","aria-label":c,className:"jsx-565168207 test-type",children:(0,ge.tZ)(ue.Z,{align:"center",size:"small",children:null===n||void 0===n?void 0:n.type})}),a&&(null===n||void 0===n?void 0:n.status)&&(0,ge.tZ)("div",{className:"jsx-565168207 "+"test-status ".concat(null===n||void 0===n?void 0:n.status),children:(0,ge.tZ)(ue.Z,{align:"center",size:"small",children:null===n||void 0===n?void 0:n.status})})]})]}),(0,ge.tZ)(Bs.Z,{height:6}),(0,ge.tZ)("div",{className:"jsx-565168207 test-io-row",children:(0,ge.BX)("div",{className:"jsx-565168207 test-io-section",children:[(0,ge.tZ)("div",{className:"jsx-565168207 test-io-label",children:a?(0,ge.BX)(de.Ug,{spacing:1,align:"center",children:[(0,ge.tZ)(ue.Z,{size:"medium",children:"Expected output"}),(0,ge.tZ)(ue.Z,{size:"xsmall",children:(0,ge.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Your program is expected to print this output.",className:"jsx-565168207 help",children:"?"})})]}):(0,ge.tZ)(ue.Z,{size:"medium",children:"Output"})}),(0,ge.tZ)(Bs.Z,{height:"var(--space-8)"}),(0,ge.tZ)("div",{className:"jsx-565168207 test-io-box",children:(0,ge.tZ)(Gp,{text:null===n||void 0===n?void 0:n.output})})]})}),(0,ge.tZ)(Bs.Z,{height:2}),(0,ge.tZ)("div",{className:"jsx-565168207 test-io-row",children:(0,ge.BX)("div",{className:"jsx-565168207 test-io-section",children:[(0,ge.tZ)("div",{className:"jsx-565168207 test-io-label",children:a?(0,ge.BX)(de.Ug,{spacing:1,align:"center",children:[(0,ge.tZ)(ue.Z,{size:"medium",children:"Actual output"}),(0,ge.tZ)(ue.Z,{size:"xsmall",children:(0,ge.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Your program actually printed this output.",className:"jsx-565168207 help",children:"?"})})]}):(0,ge.tZ)(ue.Z,{size:"medium",children:"Input"})}),(0,ge.tZ)(Bs.Z,{height:"var(--space-8)"}),(0,ge.tZ)("div",{className:"jsx-565168207 test-io-box",children:(0,ge.tZ)(Gp,{text:a?r:null===n||void 0===n?void 0:n.input})})]})}),a&&s&&(0,ge.tZ)(ge.HY,{children:l?(0,ge.BX)(ge.HY,{children:[(0,ge.tZ)(Bs.Z,{height:2}),(0,ge.tZ)("div",{className:"jsx-565168207 test-io-row",children:(0,ge.BX)("div",{className:"jsx-565168207 test-io-section",children:[(0,ge.tZ)("div",{className:"jsx-565168207 test-io-label",children:(0,ge.tZ)(ue.Z,{size:"medium",children:"Error(s)"})}),(0,ge.tZ)(Bs.Z,{height:"var(--space-8)"}),(0,ge.tZ)("div",{className:"jsx-565168207 test-io-box",children:(0,ge.tZ)(Gp,{text:l.stderr||l.message})})]})})]}):(null===n||void 0===n?void 0:n.type)!==me.Flv.Regex&&d&&u&&(0,ge.BX)(ge.HY,{children:[(0,ge.tZ)(Bs.Z,{height:2}),(0,ge.tZ)("div",{className:"jsx-565168207 test-io-row",children:(0,ge.BX)("div",{className:"jsx-565168207 test-io-section",children:[(0,ge.tZ)("div",{className:"jsx-565168207 test-io-label",children:(0,ge.BX)(de.Ug,{spacing:1,align:"center",children:[(0,ge.tZ)(ue.Z,{size:"medium",children:"Difference"}),(0,ge.tZ)(ue.Z,{size:"xsmall",children:(0,ge.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Modify your output to match the expected output.",className:"jsx-565168207 help",children:"?"})})]})}),(0,ge.tZ)(Bs.Z,{height:"var(--space-8)"}),(0,ge.tZ)("div",{className:"jsx-565168207 test-io-box",children:(0,ge.tZ)(Kp,{expected:p,actual:r})})]})})]})})]}),(0,ge.tZ)(V.default,{id:"565168207",children:[".test-info.jsx-565168207{padding:var(--space-24);display:relative;}",".test-io-line-spacing.jsx-565168207{width:var(--space-8);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}",".test-io-row.jsx-565168207{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".test-io-line-number.jsx-565168207{display:inline-block;min-width:1.5em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",".test-io-line.jsx-565168207{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;font-family:var(--font-family-code);}",".test-io-line-content.jsx-565168207{display:inline-block;}",".test-io-label.jsx-565168207{padding-bottom:var(--space-8);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",".test-io-label.jsx-565168207 .text{color:var(--foreground-dimmer);}",".test-io-section.jsx-565168207{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;width:100%;}",".test-io-box.jsx-565168207{height:100%;border:1px solid var(--outline-dimmest);box-sizing:border-box;border-radius:var(--border-radius-4);padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow-x:auto;}",".test-io-box.jsx-565168207 .text{white-space:nowrap;}",".test-type.jsx-565168207,.test-status.jsx-565168207{background-color:var(--background-highest);border-radius:var(--border-radius-4);padding:var(--space-8);display:inline-block;spacing:1;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",".test-status.jsx-565168207 .text{color:var(--white);}",".test-status.Passed.jsx-565168207{background-color:var(--accent-positive-default);}",".test-status.Failed.jsx-565168207{background-color:var(--accent-negative-default);}",".help.jsx-565168207{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border:1px solid var(--background-higher);border-radius:100%;width:var(--space-16);height:var(--space-16);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;}"]})]})};function Qp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qp(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jp=function(e){var t,n,r,i,a,o,s=e.wid,l=e.pud,c=(0,bt.J)(s,l,"autograder"),u=(0,D.Z)(c,1)[0],d=(0,fe.Z)(),p=(0,et.I0)(),f=(0,me.CHr)({variables:{replId:d}}),m=(0,me.Nej)({onError:function(e){return C(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.deleteTemplateTest)||void 0===t?void 0:t.__typename)?C(e.deleteTemplateTest.message):(S("Test deleted!"),f.refetch())}}),h=(0,D.Z)(m,2),g=h[0],v=h[1],b=(0,me.AAz)({onError:function(e){return C(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.updateTemplateTest)||void 0===t?void 0:t.__typename)?C(e.updateTemplateTest.message):S("Test updated!")}}),y=(0,D.Z)(b,2),x=y[0],w=y[1],k=(0,me.pVf)({onError:function(e){return C(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.createTemplateTest)||void 0===t?void 0:t.__typename)?C(e.createTemplateTest.message):(S("Test created!"),f.refetch())}}),Z=(0,D.Z)(k,2),j=Z[0],O=Z[1],E=v.loading&&v.loading||w.called&&w.loading||O.loading&&O.loading||f.loading,_=(0,Ft.Z)(),C=_.showError,S=_.showConfirm,P=K.useState(!1),N=(0,D.Z)(P,2),T=N[0],I=N[1],R=K.useState(!1),A=(0,D.Z)(R,2),L=A[0],B=A[1],M=K.useState(!1),U=(0,D.Z)(M,2),X=U[0],F=U[1],z=K.useState(),H=(0,D.Z)(z,2),G=H[0],W=H[1],q=(0,me.vkX)({onCompleted:function(e){e&&e.saveIOTestResults&&C(e.saveIOTestResults.message)}}),Y=(0,D.Z)(q,1)[0],Q=K.useState(),$=(0,D.Z)(Q,2),J=$[0],ee=$[1];K.useEffect((function(){var e;if(J!==u.status&&u.status===dd.Cleanup&&null!==(e=f.data)&&void 0!==e&&e.repl){var t=f.data.repl;if("Repl"===t.__typename&&t.owner){var n={IOTests:u.IOTests,replId:t.id};u.IOTests.some((function(e){return!e.results}))&&st.$e((function(e){e.setTag("io-testing","true"),st.Tb(new Error("Invalid test value received in test cleanup"),{contexts:n})})),Y({variables:{teamId:t.owner.id,replId:t.id,results:u.IOTests.map((function(e){var t,n;return{testId:e.id,status:null!==(t=e.results)&&void 0!==t&&t.passed?me.kQ0.Passed:me.kQ0.Failed,output:(null===(n=e.results)||void 0===n?void 0:n.actualOutput)||""}}))}})}}}),[J,u.status,u.IOTests,Y,f.data]),K.useEffect((function(){ee(u.status)}),[u.status]);var te="Repl"===(null===(t=f.data)||void 0===t||null===(n=t.repl)||void 0===n?void 0:n.__typename)?null===(r=f.data)||void 0===r||null===(i=r.repl)||void 0===i?void 0:i.ioTests:[];K.useEffect((function(){var e,t,n;f.loading||"Repl"===(null===(e=f.data)||void 0===e||null===(t=e.repl)||void 0===t?void 0:t.__typename)&&p({type:"AUTOGRADER_TESTS_RECEIVED",tests:null===(n=f.data)||void 0===n?void 0:n.repl.ioTests.map((function(e){return $p($p({},e),{},{expectedOutput:e.output})})),wid:s,pud:l})}),[p,l,s,f.loading,f.data]);var ne="Repl"===(null===(a=f.data)||void 0===a?void 0:a.repl.__typename)&&f.data.repl.isProject,re=K.useCallback((function(e){if(u.IOTests[e]){var t=u.IOTests[e].results;if(void 0!==t)return t.passed?"Passed":"Failed"}}),[u.IOTests]);return f.error?(0,ge.BX)("div",{className:"jsx-4204825862 wrapper",children:[(0,ge.tZ)(ue.Z,{align:"center",children:"Unable to fetch tests"}),(0,ge.tZ)(V.default,{id:"4204825862",children:[".wrapper.jsx-4204825862{padding:var(--space-16);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]}):(0,ge.BX)("div",{className:"jsx-411072301 tests-panel",children:[(0,ge.tZ)("div",{className:"jsx-411072301 tests-header",children:(0,ge.tZ)(Ee.Z,{level:4,children:"Input/Output Tests"})}),f.loading?(0,ge.tZ)("div",{className:"jsx-411072301 spinner",children:(0,ge.tZ)(Et.Z,{})}):(0,ge.BX)("div",{className:"jsx-411072301 tests",children:[(0,ge.BX)("div",{className:"jsx-411072301 button-bar",children:[ne&&(0,ge.tZ)(ce.Z,{color:"green",Icon:Vt.Z,className:"create-test-button",disabled:u.status!==dd.Idle,onClick:function(){W(void 0),I(!0)},children:"Create test"}),ne||0!==u.IOTests.length?(0,ge.tZ)(ce.Z,{color:"positive",Icon:el.Z,onClick:function(){return p({type:"START_AUTOGRADER",wid:s,pud:l})},disabled:E||u.status!==dd.Idle,children:"Run tests"}):(0,ge.tZ)(ue.Z,{children:"This project has no tests "})]}),te.map((function(e,t){return(0,ge.tZ)(Hp,{test:e,onEdit:function(){W($p($p({},e),{},{index:t,status:re(t)})),I(!0)},onDelete:function(){g({variables:{testId:e.id}})},onView:function(){W($p($p({},e),{},{index:t,status:re(t)})),B(!0),F(!1)},onShowFailed:function(){W($p($p({},e),{},{index:t,status:re(t)})),B(!0),F(!0)},isRunning:u.status!==dd.Idle&&t===u.currentTest,isTeacherView:ne,status:re(t),disableButtons:u.status!==dd.Idle},e.id)})),(0,ge.tZ)(Vp,{test:G,isOpen:T,readOnly:!ne,onRequestClose:function(){I(!1),W(void 0)},onCancel:function(){I(!1),W(void 0)},onSubmit:function(e){var t,n,r,i;void 0!==e.testId?(x({variables:{input:e}}),W(void 0)):"Repl"===(null===(t=f.data)||void 0===t||null===(n=t.repl)||void 0===n?void 0:n.__typename)&&null!==(r=f.data)&&void 0!==r&&null!==(i=r.repl)&&void 0!==i&&i.template&&j({variables:{input:$p($p({},e),{},{templateId:f.data.repl.template.id})}}),I(!1)}}),(0,ge.tZ)(Yp,{test:G,isOpen:L,actualOutput:G&&(null===(o=u.IOTests[G.index].results)||void 0===o?void 0:o.actualOutput),isResults:X,onRequestClose:function(){B(!1),W(void 0)}})]}),(0,ge.tZ)(V.default,{id:"411072301",children:[".flex-grow.jsx-411072301{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".spacer-1.jsx-411072301{padding:var(--space-4);}",".tests-header.jsx-411072301{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;position:relative;height:var(--space-48);padding:var(--space-16) var(--space-8);color:var(--foreground-default);width:100%;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}",".button-bar.jsx-411072301{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-16);}",".button-bar.jsx-411072301>button{margin-right:var(--space-8);}",".spinner.jsx-411072301{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);}",".tests-panel.jsx-411072301{min-width:200px;background-color:var(--background-default);color:var(--foreground-default);overflow:hidden auto;}",".section.jsx-411072301{height:calc(100% - 50px);}"]})]})},ef=n(7239),tf=n(46829),nf=n(95610);function rf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function af(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rf(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var of={name:"xq1r65",styles:"flex:none;flex-grow:0"},sf=function(){var e,t,n,r,i,a,o,s,l=(0,Oe.Z)(),c=l.iotester,u=l.dotReplit,d=l.container,p=(0,Ft.Z)(),f=p.showError,m=p.showConfirm,h=K.useState([]),g=(0,D.Z)(h,2),v=g[0],b=g[1],y=K.useState(),x=(0,D.Z)(y,2),w=x[0],k=x[1],Z=K.useState(d.getConnectionState()),j=(0,D.Z)(Z,2),O=j[0],E=j[1],_=K.useState(c.state),C=(0,D.Z)(_,2),S=C[0],P=C[1],N=K.useState(),T=(0,D.Z)(N,2),I=T[0],R=T[1],A=(0,tf.useApolloClient)();K.useEffect((function(){return d.onConnectionStateChanged(E)}),[E,d]);var L=(0,fe.Z)(),B=(0,me.CHr)({variables:{replId:L}}),M="Repl"===(null===(e=B.data)||void 0===e||null===(t=e.repl)||void 0===t?void 0:t.__typename)?B.data.repl:null,U="Team"===(null===M||void 0===M||null===(n=M.owner)||void 0===n?void 0:n.__typename)&&M.owner.id||null,X=(0,me.vkX)({onCompleted:function(e){e&&e.saveIOTestResults&&f(e.saveIOTestResults.message)}}),F=(0,D.Z)(X,1)[0];K.useEffect((function(){var e=[c.onStateChanged((function(e){P(e),U&&e===ef.Z.Idle&&b((function(e){return F({variables:{replId:L,results:Object.values(e).map((function(e){var t,n;return af(af({},e),{},{output:null!==(t=e.error)&&void 0!==t&&t.stderr?(null!==(n=e.output)&&void 0!==n?n:"")+e.error:e.output})})),teamId:U}}).catch((function(t){st.Tb(t,(function(t){return t.setExtras({results:e,payload:I})}))})),e}))})),c.onError((function(e){f(e.message)})),c.onTestResult((function(e){b((function(t){var n=af(af({},t[e.testId]),{},{testId:e.testId,status:"passed"===e.body?me.kQ0.Passed:me.kQ0.Failed});return"error"===e.body&&(n.error=e.error),af(af({},t),{},(0,z.Z)({},e.testId,n))}))})),c.onInstructionResult((function(e){b((function(t){var n,r,i,a,o,s=Math.abs(e.instructionId),l="";switch(e.body){case"passed":l+=null!==(n=e.passed.output)&&void 0!==n?n:"";break;case"failed":l+=null!==(r=e.failed.output)&&void 0!==r?r:"";break;case"timeout":l+=null!==(i=e.timeout.output)&&void 0!==i?i:"";break;case"error":l+=e.error.message}return af(af({},t),{},(0,z.Z)({},s,af(af({},t[s]),{},{testId:s,output:(null!==(a=null===(o=v[s])||void 0===o?void 0:o.output)&&void 0!==a?a:"")+l})))}))}))];return function(){return e.forEach((function(e){return e()}))}}),[v,f,P,c,L,U,I,F]),K.useEffect((function(){var e=function(e){e instanceof Error&&f(e.message),st.Tb(e)};return Mp(u).then(k).catch(e),u.watch((function(){return Mp(u).then(k).catch(e)}))}),[u,k,f]);var H=null===M||void 0===M?void 0:M.ioTests,G=(0,me.Nej)({onError:function(e){return f(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.deleteTemplateTest)||void 0===t?void 0:t.__typename)?f(e.deleteTemplateTest.message):(m("Test deleted!"),B.refetch())}}),W=(0,D.Z)(G,2),q=W[0],Y=W[1],Q=(0,me.AAz)({onError:function(e){return f(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.updateTemplateTest)||void 0===t?void 0:t.__typename)?f(e.updateTemplateTest.message):"ReplTemplateTest"===e.updateTemplateTest.__typename&&(m("Test updated!"),A.writeFragment({fragment:me.GgA,data:e.updateTemplateTest}))}}),$=(0,D.Z)(Q,2),J=$[0],ee=$[1],te=(0,me.pVf)({onError:function(e){return f(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.createTemplateTest)||void 0===t?void 0:t.__typename)?f(e.createTemplateTest.message):(m("Test created!"),B.refetch())}}),ne=(0,D.Z)(te,2),re=ne[0],ie=ne[1],ae=B.loading||Y.called&&Y.loading||ee.called&&ee.loading||ie.called&&ie.loading;K.useEffect((function(){ae||R(w&&H&&H.length>0?{runInfo:w,tests:H.map(Lp)}:void 0)}),[H,w,R,ae]);var oe=K.useState(!1),se=(0,D.Z)(oe,2),le=se[0],de=se[1],pe=K.useState(!1),he=(0,D.Z)(pe,2),ve=he[0],be=he[1],ye=K.useState(!1),xe=(0,D.Z)(ye,2),we=xe[0],ke=xe[1],Ze=K.useState(),je=(0,D.Z)(Ze,2),Ce=je[0],Se=je[1],Pe=(0,_e.Z)("iotester","show_test_update_tooltip"),Ne=Pe.shouldDisplay,Te=Pe.register,Ie=Pe.dismiss;K.useEffect((function(){Te()}),[Te]);var Re="undefined"!==typeof Ce&&"Repl"===(null===(r=B.data)||void 0===r?void 0:r.repl.__typename)&&B.data.repl.ioTests[Ce]||void 0,De="Repl"===(null===(i=B.data)||void 0===i?void 0:i.repl.__typename)&&B.data.repl.isProject;if(B.error)return(0,ge.BX)("div",{className:"jsx-707768097 wrapper",children:[(0,ge.tZ)(ue.Z,{align:"center",children:"Unable to fetch tests"}),(0,ge.tZ)(V.default,{id:"707768097",children:[".wrapper.jsx-707768097{padding:var(--deprecated-spacing-2);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]});var Ae=function(e){var t;if(void 0!==(null===(t=v[e])||void 0===t?void 0:t.status))return v[e].status===me.kQ0.Passed?"Passed":"Failed"};return(0,ge.BX)("div",{className:"jsx-2848896096 tests-panel",children:[(0,ge.tZ)("div",{className:"jsx-2848896096 tests-header",children:(0,ge.tZ)(Ee.Z,{level:4,children:"Input/Output Tests"})}),B.loading?(0,ge.tZ)("div",{className:"jsx-2848896096 spinner",children:(0,ge.tZ)(Et.Z,{})}):(0,ge.BX)("div",{className:"jsx-2848896096 tests",children:[(0,ge.BX)("div",{className:"jsx-2848896096 button-bar",children:[De&&(0,ge.tZ)(ce.Z,{color:"green",Icon:Vt.Z,className:"create-test-button",disabled:ae||S!==ef.Z.Idle,onClick:function(){Se(void 0),de(!0)},children:"Create test"}),!De&&H&&0===H.length?(0,ge.tZ)(ue.Z,{children:"This project has no tests "}):(0,ge.tZ)(ce.Z,{color:"positive",Icon:el.Z,onClick:function(){var e;if(!I||"Repl"!==(null===M||void 0===M?void 0:M.__typename)||"Team"!==(null===(e=M.owner)||void 0===e?void 0:e.__typename)||c.state!==ef.Z.Idle){var t=new Error("no tests or run info");throw st.Tb(t,(function(e){return e.setExtra("payload",I)})),t}b({}),(0,ct.track)(ct.events.AUTOGRADER_STARTED),c.run(I).catch((function(e){st.Tb(e,(function(e){return e.setExtra("payload",I)})),f(e.message)}))},disabled:ae||S!==ef.Z.Idle||!I||O!==nf.e.CONNECTED,children:"Run tests"})]}),Ne&&(0,ge.BX)(yn.Z,{css:[Zn.l0.borderRadius(8),Zn.l0.p(8),{backgroundColor:Zn.TV.accentPositiveDimmest,flexDirection:"row",borderWidth:1,borderColor:Zn.TV.accentPositiveDimmer,alignItems:"center",color:Zn.TV.accentPositiveStrongest},"",""],children:[(0,ge.BX)("p",{className:"jsx-2848896096",children:["We\u2019re updating the way I/O tests work on Replit."," ",(0,ge.tZ)(yt.default,{href:"https://blog.replit.com/io-testing-v2",children:(0,ge.tZ)("a",{css:(0,or.iv)({color:Zn.TV.accentPositiveStrongest,textDecoration:"underline"},"",""),className:"jsx-2848896096",children:"Read more here."})})]}),(0,ge.tZ)(An.Z,{alt:"close",colorway:"positive",onClick:function(){return Ie()},css:of,children:(0,ge.tZ)(zt.Z,{})})]}),null===H||void 0===H?void 0:H.map((function(e,t){return(0,ge.tZ)(Hp,{test:e,onEdit:function(){Se(t),de(!0)},onDelete:function(){q({variables:{testId:e.id}})},onView:function(){Se(t),be(!0),ke(!1)},onShowFailed:function(){Se(t),be(!0),ke(!0)},isRunning:S!==ef.Z.Idle&&void 0!==v[e.id]&&void 0===v[e.id].status,isTeacherView:De,status:Ae(e.id),disableButtons:ae||S!==ef.Z.Idle},e.id)})),(0,ge.tZ)(Vp,{test:Re,isOpen:le,readOnly:!De,onRequestClose:function(){de(!1),Se(void 0)},onCancel:function(){de(!1),Se(void 0)},onSubmit:function(e){var t,n,r,i;void 0!==e.testId?(J({variables:{input:e}}),Se(void 0)):"Repl"===(null===(t=B.data)||void 0===t||null===(n=t.repl)||void 0===n?void 0:n.__typename)&&null!==(r=B.data)&&void 0!==r&&null!==(i=r.repl)&&void 0!==i&&i.template&&re({variables:{input:af(af({},e),{},{templateId:B.data.repl.template.id})}}),de(!1)}}),(0,ge.tZ)(Yp,{test:Re,isOpen:ve,actualOutput:"undefined"!==typeof Re?null===(a=v[Re.id])||void 0===a?void 0:a.output:void 0,error:Re&&(null===(o=v[Re.id])||void 0===o?void 0:o.error),didFail:Re&&(null===(s=v[Re.id])||void 0===s?void 0:s.status)===me.kQ0.Failed,isResults:we,onRequestClose:function(){be(!1),Se(void 0)}})]}),(0,ge.tZ)(V.default,{id:"2848896096",children:[".flex-grow.jsx-2848896096{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".spacer-1.jsx-2848896096{padding:var(--space-4);}",".tests-header.jsx-2848896096{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;position:relative;padding:var(--space-4) 0 var(--space-8) 0;margin-bottom:var(--space-8);color:var(--foreground-default);width:100%;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}",".button-bar.jsx-2848896096{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:var(--space-8);}",".button-bar.jsx-2848896096>button{margin-right:var(--space-8);margin-bottom:var(--space-8);}",".spinner.jsx-2848896096{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);}",".tests-panel.jsx-2848896096{min-width:200px;background-color:var(--background-default);color:var(--foreground-default);overflow:hidden auto;}",".section.jsx-2848896096{height:calc(100% - 50px);}"]})]})};function lf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lf(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var uf,df=function(e){var t,n=(0,fe.Z)(),r=(0,me.CHr)({variables:{replId:n}}),i=r.data,a=r.loading,o="Repl"===(null===i||void 0===i?void 0:i.repl.__typename)&&i.repl;return a||!o?(0,ge.tZ)(Et.Z,{}):"Team"===(null===(t=o.owner)||void 0===t?void 0:t.__typename)&&o.owner.hasIOTestingV2?(0,ge.tZ)(sf,cf({},e)):(0,ge.tZ)(Jp,cf({},e))};!function(e){e[e.None=0]="None",e[e.Choose=1]="Choose",e[e.Unit=2]="Unit",e[e.IO=3]="IO"}(uf||(uf={}));var pf=function(e){var t=e.wid,n=e.pud,r=K.useState(null),i=(0,D.Z)(r,2),a=i[0],o=i[1],s=K.useRef(uf.None),l=(0,fe.Z)(),c=(0,et.I0)(),u=Np(),d=u.language,p=u.isLoading,f=(0,me.CHr)({variables:{replId:l}}),m=f.loading;return K.useEffect((function(){var e,r,i=null===(e=f.data)||void 0===e?void 0:e.repl;if("Repl"===(null===i||void 0===i?void 0:i.__typename)){var a=i.unitTests,l=i.ioTests,u=uf.Choose;(u=l.length>0?uf.IO:null!==a&&void 0!==a&&a.tests&&(null===(r=a.tests)||void 0===r?void 0:r.length)>0||null!==a&&void 0!==a&&a.meta?uf.Unit:i.currentUserPermissions.writeTests?s.current!==uf.None?s.current:uf.Choose:uf.None)===uf.Unit?c({type:"AUTOGRADER_DISABLED",wid:t,pud:n}):u===uf.IO&&c({type:"AUTOGRADER_ENABLED",wid:t,pud:n}),o(u)}}),[f.data,t,n,c]),m||p?(0,ge.BX)("div",{className:"jsx-707544915",children:[(0,ge.tZ)(Et.Z,{}),(0,ge.tZ)(V.default,{id:"707544915",children:["div.jsx-707544915{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]}):(0,ge.BX)("div",{className:"jsx-3272328548 testing-controller",children:[a===uf.None&&(0,ge.tZ)("div",{className:"jsx-3272328548 empty",children:(0,ge.tZ)(ue.Z,{children:"No tests found"})}),a===uf.Choose&&(0,ge.BX)(de.gC,{align:"center",spacing:2,children:[(0,ge.tZ)(Ee.Z,{align:"center",level:3,children:"Choose a testing method"}),(0,ge.BX)("div",{onClick:function(){c({type:"AUTOGRADER_DISABLED",wid:t,pud:n}),o(uf.Unit),s.current=uf.Unit},className:"jsx-3272328548 "+(jt()("panel",{"is-disabled":!d})||""),children:[(0,ge.tZ)(Ee.Z,{level:4,children:"Unit tests"}),(0,ge.tZ)(ue.Z,{align:"center",children:d?"A language specific framework that tests individual functions":"Unit tests are not currently supported for this language"})]}),(0,ge.tZ)("div",{onClick:function(){o(uf.IO),c({type:"AUTOGRADER_ENABLED",wid:t,pud:n}),s.current=uf.IO},className:"jsx-3272328548 panel",children:(0,ge.BX)(de.gC,{spacing:1,align:"center",children:[(0,ge.tZ)(Ee.Z,{level:4,children:"Input output tests"}),(0,ge.tZ)(ue.Z,{align:"center",children:"Test your program via standard in, and assert based on the result of standard out"})]})})]}),a===uf.IO&&(0,ge.tZ)(df,{wid:t,pud:n}),a===uf.Unit&&(0,ge.tZ)(Tp,{onBack:function(){return o(uf.Choose)}}),(0,ge.tZ)(V.default,{id:"3272328548",children:[".empty.jsx-3272328548{padding:var(--space-16);border-radius:var(--border-radius-4);box-shadow:var(--shadow-2);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".testing-controller.jsx-3272328548{overflow-y:auto;padding:var(--space-8);height:100%;width:100%;background-color:var(--background-default);box-shadow:var(--shadow-1);}",".panel.jsx-3272328548{width:100%;border-radius:var(--border-radius-4);border:1px solid var(--background-higher);max-width:200px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;padding:var(--space-8);}",".panel.jsx-3272328548:hover{background-color:var(--background-root);}",".panel.is-disabled.jsx-3272328548{opacity:0.5;pointer-events:none;}"]})]})};function ff(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ff(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ff(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hf=/(^\u001b\[33m\ueea7\u001b\[00m ?)|(\u001b\[33m\ueea7\u001b\[00m ?$)/,gf=/\u001b\[\d{1,2}[a-zA-Z]|\u001b\[?1h|\ueea7/gm,vf=/\s+$|\n/gm;function bf(e){return e.replace(gf,"").replace(vf,"")}function yf(e){return e.messages.join("").replace(hf,"")}var xf=(0,gd.Z)((function(e,t,n,r){switch(n.type){case"START_AUTOGRADER":return function(e){var t=e.wid,n=e.pud;return function(){var e=(0,A.Z)(G().mark((function e(r,i){var a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(a=(0,bt.Z)(i(),t,n,"autograder")).IOTests.length){e.next=4;break}return r((0,re.P)({type:"error",content:"No tests available",time:5e3})),e.abrupt("return");case 4:if(a.status===dd.Idle){e.next=6;break}return e.abrupt("return");case 6:r({type:"DISABLE_CONSOLE",wid:t}),r((0,ft.Rl)({wid:t})),r({type:"ENABLE_PIPE_MODE",wid:t}),r({type:"AUTOGRADER_STARTED",wid:t}),r({type:"PREPARE_AUTOGRADER_TEST",wid:t,pud:n}),(0,ct.track)(ct.events.AUTOGRADER_STARTED);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:e,pud:t});case"AUTOGRADER_TEST_TIMEOUT":return function(e){var t=e.wid,n=e.pud;return function(){var e=(0,A.Z)(G().mark((function e(r,i){var a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=(0,bt.Z)(i(),t,n,"autograder")).status===dd.Testing){e.next=3;break}return e.abrupt("return");case 3:r((0,re.P)({type:"error",content:"Test timed out",time:5e3})),a.IOTests[a.currentTest].results={passed:!1,actualOutput:yf(a)},r({type:"AUTOGRADER_TEST_COMPLETED",wid:t,IOTests:a.IOTests}),a.currentTest+1===a.IOTests.length?r({type:"CLEANUP_AUTOGRADER",wid:t,pud:n}):r({type:"PREPARE_AUTOGRADER_TEST",wid:t,pud:n});case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:e,pud:t});case"PREPARE_AUTOGRADER_TEST":return function(e){var t=e.wid,n=e.pud;return function(){var e=(0,A.Z)(G().mark((function e(r,i){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,bt.Z)(i(),t,n,"autograder").status===dd.Preparing){e.next=3;break}return e.abrupt("return");case 3:r((0,ft.Rl)({wid:t})),r({type:"RUN_REPL",wid:t});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:e,pud:t});case"EVAL_ENDED":return function(e){var t=e.wid,n=e.pud;return function(){var e=(0,A.Z)(G().mark((function e(r,i){var a,o,s,l;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=(0,bt.Z)(i(),t,n,"autograder")).status===dd.Testing&&a.timeout){e.next=3;break}return e.abrupt("return");case 3:clearTimeout(a.timeout),o=a.IOTests[a.currentTest],s=yf(a).replace("\x1b[0m\x1b[90mHint: hit control+c anytime to enter REPL.\x1b[0m",""),l=!1,e.t0=o.type,e.next="compatibility"===e.t0?10:"exact"===e.t0?12:"match"===e.t0?14:"regex"===e.t0?16:17;break;case 10:return bf(o.expectedOutput).includes(bf(s))||(l=!0),e.abrupt("break",17);case 12:return s!==o.expectedOutput&&s!==o.expectedOutput+"\n"&&(l=!0),e.abrupt("break",17);case 14:return s.includes(o.expectedOutput)||(l=!0),e.abrupt("break",17);case 16:s.match(o.expectedOutput)||(l=!0);case 17:a.IOTests[a.currentTest].results={passed:!l,actualOutput:"compatibility"===o.type?s.replace(gf,""):s},r({type:"AUTOGRADER_TEST_COMPLETED",wid:t,IOTests:a.IOTests}),a.currentTest+1===a.IOTests.length?r({type:"CLEANUP_AUTOGRADER",wid:t,pud:n}):r({type:"PREPARE_AUTOGRADER_TEST",wid:t,pud:n});case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:e,pud:t});case"CLEANUP_AUTOGRADER":return function(e){var t=e.wid,n=e.pud,r=e.wait;return function(){var e=(0,A.Z)(G().mark((function e(i,a){var o,s,l;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(0,bt.Z)(a(),t,n,"autograder"),s=o.status,l=o.IOTests,s===dd.Cleanup){e.next=3;break}return e.abrupt("return");case 3:return i({type:"DISABLE_PIPE_MODE",wid:t}),e.next=6,r((function(e){return"PIPE_MODE_DISABLED"===e.type}));case 6:return i({type:"RUN_REPL",wid:t}),e.next=9,r((function(e){return"SHELLRUNNER_STARTED"===e.type||"INTERPER_STARTED"===e.type}));case 9:return i({type:"STOP_EVAL",wid:t}),e.next=12,r((function(e){return"EVAL_ENDED"===e.type}));case 12:i({type:"CLEAR_CONSOLE",wid:t}),l.every((function(e){var t;return null===(t=e.results)||void 0===t?void 0:t.passed}))?i((0,re.P)({type:"confirm",content:"Tests passed",time:5e3})):i((0,re.P)({type:"error",content:"Tests failed",time:5e3})),i({type:"ENABLE_CONSOLE",wid:t}),i({type:"AUTOGRADER_STOPPED",wid:t});case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:e,pud:t,wait:r});case"AUTOGRADER_TESTS_RECEIVED":return function(e){var t=e.wid,n=e.pud,r=e.action;return function(){var e=(0,A.Z)(G().mark((function e(i,a){var o,s,l;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.tests){e.next=2;break}return e.abrupt("return");case 2:o=(0,bt.Z)(a(),t,n,"autograder"),s=o.IOTests,l=r.tests.map((function(e){var t=s.find((function(t){return t.id===e.id}));return t&&(null===t||void 0===t?void 0:t.input)===e.input&&(null===t||void 0===t?void 0:t.expectedOutput)===e.expectedOutput?mf(mf({},e),{},{results:t.results}):e})),i({type:"SET_AUTOGRADER_TESTS",tests:l,wid:t});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:e,pud:t,action:n});case"INTERPER_STARTED":case"SHELLRUNNER_STARTED":return function(e){var t=e.wid,n=e.pud,r=e.action;return function(){var e=(0,A.Z)(G().mark((function e(i,a){var o,s,l,c;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=(0,bt.Z)(a(),t,n,"autograder")).status===dd.Preparing){e.next=3;break}return e.abrupt("return");case 3:i({type:"AUTOGRADER_TEST_READY",wid:t,pud:n}),s=o.IOTests[o.currentTest],l=setTimeout((function(){return i({type:"AUTOGRADER_TEST_TIMEOUT",wid:t,pud:n})}),15e3),"INTERPER_STARTED"===r.type?c="interper":"SHELLRUNNER_STARTED"===r.type&&(c="shellrunner"),i({type:"AUTOGRADER_TEST_STARTED",wid:t,pud:n,timeout:l,service:c}),s.input&&i({type:"CONSOLE_INPUT",wid:t,input:s.input+"\n"});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:e,pud:t,action:n});default:return null}}));function wf(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{IOTests:[],messages:[],status:dd.Idle,currentTest:0},n=arguments.length>1?arguments[1]:void 0;if(t.status===dd.Disabled&&"AUTOGRADER_ENABLED"!==n.type)return t;switch(n.type){case"AUTOGRADER_TEST_COMPLETED":return mf(mf({},t),{},{IOTests:n.IOTests||t.IOTests,currentTest:t.currentTest+1,status:dd.Preparing});case"AUTOGRADER_TEST_READY":return mf(mf({},t),{},{messages:[]});case"AUTOGRADER_TEST_STARTED":return n.timeout?mf(mf({},t),{},{status:dd.Testing,timeout:n.timeout,evalerService:n.service}):t;case"AUTOGRADER_STARTED":return mf(mf({},t),{},{status:dd.Preparing,currentTest:0,IOTests:t.IOTests.map((function(e){return mf(mf({},e),{},{results:void 0})}))});case"SET_AUTOGRADER_TESTS":return n.tests?mf(mf({},t),{},{IOTests:n.tests}):t;case"AUTOGRADER_STOPPED":return mf(mf({},t),{},{status:dd.Idle});case"AUTOGRADER_DISABLED":return mf(mf({},t),{},{status:dd.Disabled});case"AUTOGRADER_ENABLED":return mf(mf({},t),{},{status:dd.Idle});case"NEW_CONSOLE_MESSAGE":return null!==(e=n.message)&&void 0!==e&&e.data?mf(mf({},t),{},{messages:t.messages.concat(n.message.data)}):t;case"CLEANUP_AUTOGRADER":return mf(mf({},t),{},{status:dd.Cleanup});default:return t}}var kf=function(){return(0,ge.BX)("div",{className:"jsx-2087355348 unit-tests",children:[(0,ge.tZ)(Tp,{}),(0,ge.tZ)(V.default,{id:"2087355348",children:[".unit-tests.jsx-2087355348{background-color:var(--background-default);width:100%;height:100%;overflow-y:auto;padding:var(--space-8);}"]})]})},Zf=n(16289),jf=n(82493);function Of(e){var t=function(){var e=K.useRef(!1),t=K.useState(!1),n=(0,D.Z)(t,2),r=n[0],i=n[1],a=K.useState(null),o=(0,D.Z)(a,2),s=o[0],l=o[1],c=K.useState(null),u=(0,D.Z)(c,2),d=u[0],p=u[1];return K.useEffect((function(){return e.current=!0,function(){e.current=!1}})),[function(t){i(!0),t.then((function(t){e.current&&(i(!1),l(t))})).catch((function(t){e.current&&(i(!1),p(t))}))},{loading:r,result:s,error:d}]}(),n=(0,D.Z)(t,2),r=n[0],i=n[1],a=i.loading,o=i.error,s=i.result;K.useEffect((function(){r(window.fetch("https://whatsnew--util.repl.co/".concat(e,".json")).then((function(e){return e.json()})))}),[]);var l=K.useCallback((function(){if(!s)return!0;var e=window.localStorage.getItem("changelog/read");return!!e&&s.updated<=parseInt(e,10)}),[s]);return{loading:a,error:o,changelog:null===s||void 0===s?void 0:s.log,getReadStatus:l,markRead:function(){s&&window.localStorage.setItem("changelog/read",s.updated.toString())}}}var Ef=n(76642);function _f(e){var t=e.direction,n=e.url,r=(0,ge.BX)("span",{className:V.default.dynamic([["2863519783",["left"===t?"rotate(90deg)":"rotate(-90deg)"]]])+" "+(jt()("chevron",{hoverable:void 0!==n})||""),children:[(0,ge.tZ)(Jc.Z,{size:20,color:n?"var(--foreground-dimmest)":"var(--background-root)"}),(0,ge.tZ)(V.default,{id:"2863519783",dynamic:["left"===t?"rotate(90deg)":"rotate(-90deg)"],children:[".chevron.__jsx-style-dynamic-selector{display:inline-block;border-radius:var(--border-radius-4);-webkit-transition:0.2s all;transition:0.2s all;}",".chevron.__jsx-style-dynamic-selector svg{width:24px;height:24px;-webkit-transform:".concat("left"===t?"rotate(90deg)":"rotate(-90deg)",";-ms-transform:").concat("left"===t?"rotate(90deg)":"rotate(-90deg)",";transform:").concat("left"===t?"rotate(90deg)":"rotate(-90deg)",";}"),".hoverable.__jsx-style-dynamic-selector{cursor:pointer;}",".hoverable.chevron.__jsx-style-dynamic-selector svg:hover{stroke:var(--accent-primary-default);}",".hoverable.__jsx-style-dynamic-selector:hover{background:var(--accent-primary-default);}"]})]});return n?(0,ge.tZ)(yt.default,{href:n,children:(0,ge.tZ)("a",{children:r})}):r}var Cf,Sf=function(){return(0,ge.BX)("span",{title:"late",className:"jsx-525860581",children:["late",(0,ge.tZ)(V.default,{id:"525860581",children:["span.jsx-525860581{display:inline-block;color:var(--accent-negative-default);border:1px solid var(--accent-negative-default);border-radius:var(--border-radius-4);padding:1px var(--space-4);font-size:var(--font-size-small);}"]})]})},Pf=["result","selected","current","isLate"];function Nf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nf(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function If(e){var t=Cf.NotStarted,n=Cf.Started,r=Cf.Submitted,i=Cf.Reviewed;switch(e){case t:return"Not Started";case n:return"Not submitted yet";case r:return"Submitted";case i:return"Reviewed";default:return""}}function Rf(e){return e?e.timeSubmitted||e.timeLastReviewed?e.timeSubmitted&&!e.timeLastReviewed?Cf.Submitted:!e.timeSubmitted&&e.timeLastReviewed?Cf.Reviewed:e.timeSubmitted&&e.timeLastReviewed?new Date(e.timeSubmitted)>new Date(e.timeLastReviewed)?Cf.Submitted:Cf.Reviewed:void 0:Cf.Started:Cf.NotStarted}!function(e){e.NotStarted="not-started",e.Started="started",e.Submitted="submitted",e.Reviewed="reviewed"}(Cf||(Cf={}));var Df=function(e,t){if(e)return t?"".concat(e,"#").concat(t):e};function Af(e){var t=e.result,n=e.selected,r=e.current,i=e.isLate,a=(0,fo.Z)(e,Pf),o=(0,hn.Z)(),s=r?"":Df(t.url,o),l=(0,ge.BX)(de.Ug,{spacing:1,align:"center",children:[(0,ge.tZ)("div",{"data-microtip-position":"right","aria-label":If(t.status),role:"tooltip",className:"jsx-2023294099 indicator-container",children:(0,ge.tZ)("div",{className:"jsx-2023294099 "+(jt()("indicator",t.status)||"")})}),(0,ge.tZ)(Xt.Z,{url:t.image}),(0,ge.tZ)("div",{className:"jsx-2023294099 name",children:t.name}),i&&(0,ge.tZ)(Sf,{}),(0,ge.tZ)(V.default,{id:"2023294099",children:[".indicator-container.jsx-2023294099{width:10px;height:10px;box-sizing:content-box;padding:var(--space-4);}",".name.jsx-2023294099{color:var(--foreground-dimmer);font-size:var(--font-size-default);max-width:230px;text-overflow:ellipsis;overflow:hidden;}",".indicator.jsx-2023294099{width:8px;height:8px;border-radius:16px;}",".indicator.submitted.jsx-2023294099{background:var(--accent-yellow-dimmer);}",".indicator.reviewed.jsx-2023294099{background:var(--accent-positive-default);}",".indicator.started.jsx-2023294099{border:2px solid var(--foreground-dimmest);}"]})]});return(0,ge.BX)("div",Tf(Tf({},a),{},{className:"jsx-870481965 "+(jt()("result",t.status,{selected:n,current:r})||""),children:[s?(0,ge.BX)(ge.HY,{children:[(0,ge.tZ)(yt.default,{href:s,children:(0,ge.tZ)("a",{className:"jsx-870481965 result-link",children:l})},t.submissionId),(0,ge.tZ)("a",{href:s,target:"_blank",role:"tooltip","data-microtip-position":"left","aria-label":"Open in a new tab",className:"jsx-870481965 result-external-link",children:(0,ge.tZ)(Ef.Z,{color:"var(--foreground-default)"})})]}):(0,ge.tZ)("div",{className:"jsx-870481965 result-link",children:l}),(0,ge.tZ)(V.default,{id:"870481965",children:[".result.jsx-870481965{cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;background-color:var(--background-default);}",".result.not-started.jsx-870481965{opacity:0.4;}",".result.current.jsx-870481965{background-color:var(--background-root);}",".selected.jsx-870481965{background-color:var(--background-root);opacity:1 !important;}",".result-link.jsx-870481965{-webkit-text-decoration:none;text-decoration:none;padding:var(--space-8);}",".result-external-link.jsx-870481965{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--space-8);opacity:0;margin-left:auto;}",".result.jsx-870481965:hover .result-external-link.jsx-870481965{opacity:1;}",".result-external-link.jsx-870481965 svg{-webkit-transition:0.3s stroke;transition:0.3s stroke;}",".result-external-link.jsx-870481965:hover svg{stroke:var(--accent-primary-default);}"]})]}))}var Lf=function(e){var t,n,r,i=e.team,a=e.submission,o=e.submissionList,s=e.template,l=(0,ee.useRouter)(),c=(0,hn.Z)(),u=K.useState([]),d=(0,D.Z)(u,2),p=d[0],f=d[1],m=K.useState(""),h=(0,D.Z)(m,2),g=h[0],v=h[1],b=(0,qt.Kb)({items:p,defaultHighlightedIndex:0,onSelectedItemChange:function(e){var t=e.selectedItem;p.length&&t&&-1!==e.highlightedIndex&&t.url&&l.push(t.url)}}),y=b.isOpen,x=b.getInputProps,w=b.getMenuProps,k=b.getItemProps,Z=b.openMenu,j=b.highlightedIndex,O=K.useRef(null);K.useEffect((function(){y&&O.current&&O.current.focus()}),[y]);var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(a.isGroupSubmission){var t=o;0!==e.length&&(t=t.filter((function(t){var n;return null===(n=t.submissionGroup)||void 0===n?void 0:n.users.some((function(t){var n;return null===(n=(null===t||void 0===t?void 0:t.fullName)||(null===t||void 0===t?void 0:t.username))||void 0===n?void 0:n.toLocaleLowerCase().includes(e.toLocaleLowerCase())}))})));var n=t.map((function(e){var t,n=e.submissionGroup.users.map((function(e){return e.fullName||e.username})).join(", ");return{image:e.submissionGroup.users[0].image,name:n,url:null===(t=e.repl)||void 0===t?void 0:t.url,status:Rf(e),submissionId:e.id,timeSubmitted:null===e||void 0===e?void 0:e.timeSubmitted}}));f((0,Bt.Z)(n))}else{var r=i.students,s=(r=0===e.length?r.filter((function(e){return e.user})).sort((function(e,t){return(e.nickname||e.user.fullName||e.user.username).localeCompare(t.nickname||t.user.fullName||t.user.username)})):r.filter((function(t){var n,r,i;return null===(n=t.nickname||(null===(r=t.user)||void 0===r?void 0:r.fullName)||(null===(i=t.user)||void 0===i?void 0:i.username))||void 0===n?void 0:n.toLocaleLowerCase().includes(e.toLocaleLowerCase())}))).map((function(e){var t,n=o.find((function(t){var n;return(null===(n=t.author)||void 0===n?void 0:n.id)===e.user.id}));return{image:e.user.image,name:e.nickname||e.user.fullName||e.user.username,url:null===n||void 0===n||null===(t=n.repl)||void 0===t?void 0:t.url,status:Rf(n),submissionId:null===n||void 0===n?void 0:n.id,timeSubmitted:null===n||void 0===n?void 0:n.timeSubmitted}}));f((0,Bt.Z)(s))}},_=o.findIndex((function(e){return e.id===a.id})),C=o[_-1],S=o[_+1],P=o.filter((function(e){return e.timeLastReviewed})).length,N=function(e){var t=i.students.find((function(t){var n;return(null===(n=t.user)||void 0===n?void 0:n.id)===(null===e||void 0===e?void 0:e.id)}));return(null===t||void 0===t?void 0:t.nickname)||(null===e||void 0===e?void 0:e.fullName)||"@".concat(null===e||void 0===e?void 0:e.username)};return(0,ge.BX)("div",Tf(Tf({},w()),{},{className:"jsx-3541875685 submission-search",children:[y&&(0,ge.BX)("div",{className:"jsx-3541875685 dropdown",children:[(0,ge.BX)("div",{className:"jsx-3541875685 search-box-container",children:[(0,ge.tZ)("div",{className:"jsx-3541875685 search-icon",children:(0,ge.tZ)(Dn.Z,{})}),(0,ge.tZ)("input",Tf(Tf({},x({value:g,placeholder:"Navigate",onKeyDown:function(e){"Escape"===e.key&&f([])},onChange:function(e){var t=e.target.value;E(t),v(t)},ref:O})),{},{className:"jsx-3541875685 search-box"}))]}),(0,ge.tZ)("div",{className:"jsx-3541875685",children:p.map((function(e,t){return(0,ge.tZ)(Af,Tf(Tf({result:e,selected:j===t,current:e.submissionId===a.id},k({index:t,item:e,onClick:function(e){e.nativeEvent.preventDownshiftDefault=!0}})),{},{isLate:s.dueDate&&e.timeSubmitted&&s.dueDate<e.timeSubmitted}))}))})]}),(0,ge.BX)("div",{className:"jsx-3541875685 navigation-element",children:[(0,ge.BX)("div",{onClick:function(){Z(),E()},className:"jsx-3541875685 pseudo-search-input",children:[(0,ge.tZ)("div",{className:"jsx-3541875685 search-icon",children:(0,ge.tZ)(Dn.Z,{})}),(0,ge.tZ)("div",{className:"jsx-3541875685",children:"Navigate"})]}),(0,ge.BX)("div",{className:"jsx-3541875685 arrow-navigation",children:[(0,ge.tZ)(_f,{direction:"left",url:Df(null===C||void 0===C||null===(t=C.repl)||void 0===t?void 0:t.url,c)}),(0,ge.BX)("div",{className:"jsx-3541875685",children:[P,"/",o.length]}),(0,ge.tZ)(_f,{direction:"right",url:Df(null===S||void 0===S||null===(n=S.repl)||void 0===n?void 0:n.url,c)})]})]}),(0,ge.tZ)("div",{className:"jsx-3541875685 submission-info",children:a.isGroupSubmission?a.submissionGroup.users.map((function(e){return(0,ge.tZ)("div",{className:"jsx-3541875685 submitter-row",children:(0,ge.BX)(de.Ug,{spacing:1,align:"center",children:[(0,ge.tZ)(Xt.Z,{url:null===e||void 0===e?void 0:e.image}),(0,ge.tZ)("span",{className:"jsx-3541875685 submission-name",children:N(e)})]})},null===e||void 0===e?void 0:e.id)})):(0,ge.tZ)("div",{className:"jsx-3541875685 submission-identity",children:(0,ge.tZ)("div",{className:"jsx-3541875685 submitter-row",children:(0,ge.BX)(de.Ug,{spacing:1,align:"center",children:[(0,ge.tZ)(Xt.Z,{url:null===(r=a.author)||void 0===r?void 0:r.image}),(0,ge.tZ)("span",{className:"jsx-3541875685 submission-name",children:N(a.author)})]})})})}),(0,ge.tZ)(V.default,{id:"3541875685",children:[".submission-search.jsx-3541875685{width:100%;position:relative;border:1px solid;border-radius:var(--border-radius-8);border-color:var(--foreground-dimmest);}",".navigation-element.jsx-3541875685{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".pseudo-search-input.jsx-3541875685{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;color:var(--foreground-dimmer);font-size:var(--font-size-default);}",".arrow-navigation.jsx-3541875685{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;color:var(--foreground-dimmest);font-size:var(--font-size-small);-webkit-align-items:baseline;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;padding:0 var(--space-8);}",".submitter-row.jsx-3541875685{-webkit-text-decoration:none;text-decoration:none;color:var(--foreground-default);}",".submission-info.jsx-3541875685{display:grid;grid-gap:var(--space-8);padding:var(--space-16);}",".submission-name.jsx-3541875685{color:var(--foreground-dimmer);font-size:var(--font-size-default);}",".search-box.jsx-3541875685{border:none;outline:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;font-size:var(--font-size-default);background-color:inherit;color:var(--foreground-default);}",".search-icon.jsx-3541875685{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:var(--space-16);background-color:inherit;}",".search-box-container.jsx-3541875685{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;background-color:var(--background-default);}",".dropdown.jsx-3541875685{position:absolute;background:var(--background-default);z-index:10;width:350px;max-height:426px;overflow-y:scroll;overflow-y:overlay;white-space:nowrap;border:1px solid;border-radius:var(--border-radius-8);border-color:var(--foreground-dimmest);margin:-1px;}"]})]}))},Bf=n(30724),Mf=n.n(Bf);function Uf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uf(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ff=function(e){var t=Of("education"),n=t.loading,r=t.error,i=t.changelog,a=t.markRead;K.useEffect((function(){e.isOpen&&a()}),[e.isOpen]);var o="";return r?o="### Something went wrong :(\n".concat(r.message):n?o="### Loading...":i&&(o=i),(0,ge.BX)(Ot.Z,Xf(Xf({},e),{},{children:[(0,ge.BX)("div",{className:"jsx-2505110200 "+"jsx-".concat(pc.Q.__hash)+" container",children:[(0,ge.tZ)("h1",{className:"jsx-2505110200 "+"jsx-".concat(pc.Q.__hash)+" title",children:"What's new in Teams \u2728"}),(0,ge.tZ)(Mf(),{source:o,className:"markdown"})]}),(0,ge.tZ)(V.default,{id:pc.Q.__hash,children:pc.Q}),(0,ge.tZ)(V.default,{id:"2505110200",children:[".container.jsx-2505110200{width:100%;padding:var(--space-32);height:80vh;overflow-y:scroll;grid-row-gap:var(--space-32);display:grid;}",".markdown ul{padding:var(--space-32);}",".markdown img{max-width:100%;}"]})]}))};function zf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zf(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hf=function(e){return{short:(0,Ic.Z)(e,"do MMM"),long:(0,Ic.Z)(e,"do MMM, hh:mm a")}};function Gf(e){var t=e.submission,n=e.dueDate;return(0,ge.BX)("div",{className:"jsx-3108116229 submission-info",children:[t.timeSubmitted?(0,ge.BX)(ge.HY,{children:[(0,ge.tZ)("div",{className:"jsx-3108116229 submitted-header",children:(0,ge.BX)(de.Ug,{spacing:1,align:"center",children:[(0,ge.tZ)(qe.Z,{}),(0,ge.tZ)("span",{className:"jsx-3108116229 submitted-text",children:"Submitted"}),n&&n<t.timeSubmitted&&(0,ge.tZ)(Sf,{})]})}),(0,ge.tZ)("div",{className:"jsx-3108116229 submitted-time",children:(0,ge.BX)(de.Ug,{spacing:1,align:"center",children:[(0,ge.tZ)(Zf.Z,{}),(0,ge.tZ)("span",{className:"jsx-3108116229",children:Hf(new Date(t.timeSubmitted)).long})]})})]}):(0,ge.BX)(ge.HY,{children:[(0,ge.tZ)("div",{className:"jsx-3108116229 submitted-header",children:(0,ge.BX)(de.Ug,{spacing:1,align:"center",children:[(0,ge.tZ)(zt.Z,{}),(0,ge.tZ)("span",{className:"jsx-3108116229 submitted-text",children:"Not submitted"})]})}),(0,ge.tZ)("div",{className:"jsx-3108116229 submitted-time",children:(0,ge.BX)(de.Ug,{spacing:1,align:"center",children:[(0,ge.tZ)(il.Z,{}),(0,ge.BX)("span",{className:"jsx-3108116229",children:["Forked"," ",Hf(new Date(t.repl.timeCreated)).short]})]})})]}),(0,ge.tZ)(V.default,{id:"3108116229",children:[".submission-info.jsx-3108116229{padding:var(--space-8);background-color:var(--background-root);border-radius:var(--border-radius-8);}",".submitted-header.jsx-3108116229{color:var(--foreground-default);font-weight:var(--font-weight-medium);white-space:nowrap;}",".submitted-header.jsx-3108116229 svg{width:2em;height:2em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}",".submitted-time.jsx-3108116229{color:var(--foreground-dimmer);padding:var(--space-8) var(--space-16);white-space:nowrap;font-size:var(--font-size-default);}",".submitted-time.jsx-3108116229 svg{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}"]})]})}function Wf(e){var t=e.repl,n=e.submission,r=e.onFeedbackCTA,i=void 0===r?function(){}:r,a=(0,bn.H)(),o=(0,Ft.Z)().showError,s=(0,me.SyV)({onError:function(e){return o(e.message)},onCompleted:function(e){"UserError"===e.reviewRepl.__typename&&o(e.reviewRepl.message)}}),l=(0,D.Z)(s,2),c=l[0],u=l[1].loading,d=(0,me.F_9)(),p=(0,D.Z)(d,1)[0],f=Boolean(n.timeLastReviewed);return(0,ge.BX)(Gn.Z,{css:[Zn.l0.p(8),Zn.l0.borderRadius(8),"",""],children:[(0,ge.BX)("div",{className:"jsx-2177615436 feedback-header",children:[(0,ge.tZ)(oc.Z,{}),(0,ge.tZ)("span",{className:"jsx-2177615436",children:"Feedback"})]}),(0,ge.BX)("div",{className:"jsx-2177615436 mark-reviewed",children:[(0,ge.tZ)(kn.Z,{id:a("reviewed-status"),disabled:u,checked:f,onChange:function(){return e=!f,void c({variables:{replId:t.id,status:e},optimisticResponse:{reviewRepl:Vf(Vf({},t),{},{submission:Vf(Vf({},n),{},{timeLastReviewed:e?(new Date).toJSON():null})})}});var e}}),(0,ge.tZ)("label",{htmlFor:a("reviewed-status"),className:"jsx-2177615436",children:f?"Reviewed":"Mark as reviewed"})]}),(0,ge.BX)("div",{className:"jsx-2177615436 feedback-info",children:[(0,ge.tZ)(en.Z,{}),(0,ge.tZ)("div",{onClick:i,className:"jsx-2177615436",children:"Code feedback"})]}),n.timeSubmitted&&(0,ge.tZ)("div",{className:"jsx-2177615436 unsubmit",children:(0,ge.tZ)(ce.Z,{onClick:function(){p({variables:{replId:t.id},optimisticResponse:{unsubmitRepl:Vf(Vf({},t),{},{submission:Vf(Vf({},n),{},{timeLastReviewed:null})})}})},fullWidth:!0,children:"Unsubmit"})}),(0,ge.tZ)(V.default,{id:"2177615436",children:[".feedback-header.jsx-2177615436{display:grid;grid-auto-flow:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8);color:var(--foreground-default);font-weight:var(--font-weight-medium);white-space:nowrap;}",".feedback-header.jsx-2177615436 svg{width:1.4em;height:1.4em;padding:0.3em;box-sizing:content-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}",".mark-reviewed.jsx-2177615436,.feedback-info.jsx-2177615436,.unsubmit.jsx-2177615436{display:grid;grid-auto-flow:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8);padding:var(--space-8) var(--space-16);font-size:var(--font-size-default);cursor:pointer;color:var(--foreground-dimmer);}",".feedback-info.jsx-2177615436 svg{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}"]})]})}function qf(){var e=K.useState(!1),t=(0,D.Z)(e,2),n=t[0],r=t[1],i=K.useState(!1),a=(0,D.Z)(i,2),o=a[0],s=a[1],l=Of("education").getReadStatus,c=function(){r(!0),(0,ct.track)(ct.events.EDU_CHANGELOG_OPENED,{unread:!o})};return K.useEffect((function(){s(l())}),[n,l]),(0,ge.BX)("div",{className:"jsx-106980422 whats-new",children:[(0,ge.BX)(de.Ug,{spacing:1,align:"center",children:[(0,ge.tZ)("span",{onClick:c,className:"jsx-106980422 "+(jt()("dot",{unread:!o})||"")}),(0,ge.tZ)("span",{onClick:c,className:"jsx-106980422",children:"What's new in teams"})]}),(0,ge.tZ)(Ff,{isOpen:n,onRequestClose:function(){return r(!1)}}),(0,ge.tZ)(V.default,{id:"106980422",children:[".whats-new.jsx-106980422{font-size:var(--font-size-small);cursor:pointer;}",".dot.jsx-106980422{display:inline-block;width:5px;height:5px;border-radius:10px;}",".dot.unread.jsx-106980422{background-color:var(--accent-negative-default);}"]})]})}function Kf(e){var t=e.replUrl;return(0,ge.tZ)(yt.default,{href:"".concat(t,"/history"),children:(0,ge.BX)("a",{target:"_blank",className:"jsx-1397023969",children:[(0,ge.tZ)(ce.Z,{Icon:Or.HistoryIcon,fullWidth:!1,className:"history-button",children:"See Repl History"}),(0,ge.tZ)(V.default,{id:"1397023969",children:["a.jsx-1397023969{-webkit-text-decoration:none;text-decoration:none;}",".history-button svg{width:1em;}"]})]})})}function Yf(e){var t,n,r,i=e.data,a=K.useState(!1),o=(0,D.Z)(a,2),s=o[0],l=o[1],c=(0,Ia.Z)("flag-teams-changelog");if(!i||"Repl"!==i.repl.__typename||"Team"!==(null===(t=i.repl.owner)||void 0===t?void 0:t.__typename)||"ReplSubmission"!==(null===(n=i.repl.submission)||void 0===n?void 0:n.__typename)||"ReplTemplate"!==(null===(r=i.repl.template)||void 0===r?void 0:r.__typename))return null;var u=i.repl.submission,d=i.repl.template.submissions;return(0,ge.BX)("div",{className:"jsx-4141385795 education-pane-container",children:[(0,ge.BX)("div",{className:"jsx-4141385795 contents",children:[(0,ge.tZ)("div",{className:"jsx-4141385795 template-selector-container",children:(0,ge.tZ)(Lf,{team:i.repl.owner,template:i.repl.template,submission:u,submissionList:d})}),(0,ge.tZ)(Gf,{submission:u,dueDate:i.repl.template.dueDate}),(0,ge.tZ)(Wf,{repl:i.repl,submission:u,onFeedbackCTA:function(){return l(!0)}}),(0,ge.tZ)("div",{className:"jsx-4141385795 buffer"})]}),(0,ge.BX)("div",{className:"jsx-4141385795 bottom-dock",children:["Repl"===i.repl.__typename&&(0,ge.tZ)(Kf,{replUrl:i.repl.url}),(0,ge.tZ)("div",{className:"jsx-4141385795",children:(0,ge.tZ)(yt.default,{href:"/team/".concat(i.repl.owner.username,"/templates/").concat(i.repl.template.repl.slug),children:(0,ge.tZ)(ce.Z,{Icon:jf.Z,children:"Return to submissions"})})}),c&&(0,ge.tZ)(qf,{})]}),(0,ge.tZ)(mn,{isOpen:s,onRequestClose:function(){return l(!1)}}),(0,ge.tZ)(V.default,{id:"4141385795",children:[".education-pane-container.jsx-4141385795{padding:var(--space-8);max-width:400px;width:inherit;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden;}",".contents.jsx-4141385795{display:grid;grid-gap:var(--space-16);}",".bottom-dock.jsx-4141385795{display:grid;grid-gap:var(--space-8);margin-top:auto;}",".template-selector-container.jsx-4141385795{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]})}var Qf,$f=n(58710),Jf=function(e){var t=e.fileName,n=e.docRef,r=e.initialContents,i=(0,qd.Z)({filePath:t,fontSize:14,indentSize:4,indentIsSpaces:!0}),a=i.view,o=i.ref;return K.useEffect((function(){if(a){var e=Yd.tk.updateListener.of((function(e){n.current=e.state.doc}));a.dispatch({effects:Qd.Py.appendConfig.of(e)}),a.focus()}}),[a,n]),K.useEffect((function(){a&&(a.state.doc.length||a.dispatch({changes:{from:0,insert:r}}))}),[a,r]),(0,ge.BX)("div",{className:"jsx-3673349710 editable-area",children:[(0,ge.tZ)("div",{className:"jsx-3673349710 editor-wrapper",children:(0,ge.tZ)("div",{className:"jsx-3673349710 editor",children:(0,ge.tZ)("div",{ref:o,className:"jsx-3673349710"})})}),(0,ge.tZ)(V.default,{id:"3673349710",children:[".editable-area.jsx-3673349710{width:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;border:1px solid var(--background-higher);border-radius:var(--border-radius-4);padding:var(--space-8) 0;}",".editor-wrapper.jsx-3673349710{height:450px;padding-bottom:var(--space-8);-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;position:relative;}",".editor.jsx-3673349710{overflow:auto;position:absolute;width:100%;height:100%;}",".loader.jsx-3673349710{height:100%;width:100%;z-index:5;}"]})]})},em=function(e){var t=e.title,n=e.fileName,r=e.initialContents,i=e.isOpen,a=e.onSave,o=e.onCancel,s=K.useRef(null);return(0,ge.BX)(Ot.Z,{width:"large",isOpen:i,onRequestClose:function(){},preventClose:!0,children:[(0,ge.tZ)("div",{className:"jsx-2888062367 editor-modal",children:(0,ge.BX)(de.gC,{align:"stretch",spacing:2,children:[(0,ge.BX)(Ee.Z,{level:3,children:["Edit ",t.toLowerCase()]}),(0,ge.tZ)(Jf,{docRef:s,fileName:n,initialContents:r}),(0,ge.tZ)(de.Ug,{justify:"end",align:"end",children:(0,ge.BX)(de.Ug,{justify:"end",align:"end",spacing:1,children:[(0,ge.tZ)(ce.Z,{onClick:function(){return o()},children:"Cancel"}),(0,ge.tZ)(ce.Z,{color:"primary",onClick:function(){var e;return s.current&&a(null===(e=s.current)||void 0===e?void 0:e.toString())},children:"Save"})]})})]})}),(0,ge.tZ)(V.default,{id:"2888062367",children:[".editor-modal.jsx-2888062367{padding:var(--space-16);}"]})]})};function tm(e){var t="For example, here is a code block in ".concat(e);switch(e){case"python3":return"".concat(t,'\n```python\ndef hello_world():\n  print("hello world!")\n```\n');case"java10":return"".concat(t,'\n```java\npublic class Main {\n  public static void main(String[] args) {\n    System.out.println("hello world");\n  }\n}\n```\n');case"html":return"".concat(t,"\n```python\n<html>\n<body>\n  <h1>hello world</h1>\n</body>\n</html>\n``")}return""}!function(e){e.LessonPlan="lessonplan.md",e.Instructions="instructions.md"}(Qf||(Qf={}));var nm=n(28993),rm=n(25108);function im(e){var t=e.attachments;return(0,ge.tZ)("div",{className:"manage-attachments",children:(0,ge.BX)(de.gC,{spacing:2,children:[(0,ge.tZ)(am,{attachment:t.find((function(e){return e.fileName===Qf.LessonPlan})),fileName:Qf.LessonPlan,label:"Lesson plan",helpText:"Upload teacher facing materials"}),(0,ge.tZ)(am,{attachment:t.find((function(e){return e.fileName===Qf.Instructions})),fileName:Qf.Instructions,label:"Instructions",helpText:"Upload student facing materials"})]})})}function am(e){var t,n=e.attachment,r=e.fileName,i=e.label,a=e.helpText,o=(0,Sp.Z)(),s=(0,Ft.Z)(),l=s.showConfirm,c=s.showError,u=(0,et.I0)(),d=(0,Hn.Z)(),p=(0,me.RG9)({onCompleted:function(){return l("Updated "+r)},onError:function(e){rm.log(e),c("Error")}}),f=(0,D.Z)(p,2),m=f[0],h=f[1],g=K.useCallback(function(){var e=(0,A.Z)(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o&&(m({variables:{input:{replId:o.id,fileName:r,contents:t,lastModified:(new Date).toISOString()}}}),r===Qf.Instructions&&u({type:"INSTRUCTIONS_UPLOADED",wid:d,contents:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o,r,m,d,u]);return o&&(t=r===Qf.LessonPlan?function(e){var t=e.language;return"# Lesson plan\n  \n  ** this file should contain teacher lesson plan details ** \n\n  __ students will never see this __\n\n  ## Learning Objectives\n  1. \n  2. \n  3. \n\n  Use [Markdown](https://gist.github.com/cuonggt/9b7d08a597b167299f0d) to format your lesson plan.\n\n  ".concat(tm(t),"\n  ")}({language:o.language}):function(e){var t=e.language;return"# Instructions  \n\n  ** this file should contain student lesson instructions **\n\n  _ students will see these instructions in a read-only workspace tab _\n\n  ## Steps\n  1. \n  2. \n  3. \n\n  Use [Markdown](https://gist.github.com/cuonggt/9b7d08a597b167299f0d) to format your instructions.\n\n  ".concat(tm(t),"\n  ")}({language:o.language})),(0,ge.tZ)(om,{loading:!o||h.loading,fileName:r,contents:null===n||void 0===n?void 0:n.contents,defaultContents:t,label:i,helpText:a,attachmentLastUploadedAgo:n?(0,nm.Sy)(new Date(n.timeUpdated)):void 0,onUploadFile:g})}function om(e){var t=e.loading,n=e.fileName,r=e.contents,i=e.defaultContents,a=e.label,o=e.helpText,s=e.attachmentLastUploadedAgo,l=e.onUploadFile,c=K.useState(!1),u=(0,D.Z)(c,2),d=u[0],p=u[1];return(0,ge.BX)("div",{className:"jsx-3069383162 attachment",children:[(0,ge.tZ)(em,{title:a,fileName:n,isOpen:d,initialContents:r||i,onCancel:function(){return p(!1)},onSave:function(e){p(!1),l(e)}}),(0,ge.BX)(de.Ug,{justify:"space-between",align:"center",wrap:"nowrap",children:[(0,ge.BX)(de.gC,{spacing:1,children:[(0,ge.BX)(de.Ug,{align:"center",spacing:1,wrap:"nowrap",children:[(0,ge.tZ)(ue.Z,{fontWeight:"medium",children:a}),(0,ge.tZ)($f.Z,{label:o})]}),s&&(0,ge.BX)(ue.Z,{size:"xsmall",children:["Uploaded ",s]})]}),t?(0,ge.tZ)(Et.Z,{style:{width:"16px",height:"16px"}}):(0,ge.tZ)(ce.Z,{border:!1,filled:!1,Icon:cp.Z,onClick:(0,A.Z)(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(!0);case 1:case"end":return e.stop()}}),e)})))})]}),(0,ge.tZ)(V.default,{id:"3069383162",children:[".attachment.jsx-3069383162{padding:var(--space-8);background-color:var(--background-root);border-radius:var(--border-radius-8);width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}"]})]})}function sm(e){var t,n,r=e.data;return!r||"Repl"!==r.repl.__typename||"Team"!==(null===(t=r.repl.owner)||void 0===t?void 0:t.__typename)||"ReplTemplate"!==(null===(n=r.repl.template)||void 0===n?void 0:n.__typename)||r.repl.submission?null:(0,ge.BX)("div",{className:"jsx-2648649354 project-view-container",children:[(0,ge.tZ)("div",{className:"jsx-2648649354 project-view-contents",children:(0,ge.tZ)(im,{attachments:r.repl.attachments})}),(0,ge.tZ)("div",{className:"jsx-2648649354 bottom-dock",children:(0,ge.tZ)(ue.Z,{size:"small",children:(0,ge.tZ)("a",{href:"/curriculum",target:"_blank",className:"jsx-2648649354",children:"Find more curriculum on Curriculum Hub"})})}),(0,ge.tZ)(V.default,{id:"2648649354",children:[".project-view-container.jsx-2648649354{padding-top:var(--space-32);max-width:400px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".bottom-dock.jsx-2648649354{display:grid;grid-gap:var(--space-8);margin-top:auto;}"]})]})}var lm=n(25108);function cm(e){var t,n,r,i,a,o,s,l=e.style,c=(0,fe.Z)(),u=(0,me.SAU)({variables:{replId:c}}),d=u.data,p=u.loading,f=u.error;return p&&(o=(0,ge.tZ)("div",{children:"Loading..."})),f&&(lm.error(f),o=(0,ge.tZ)("div",{children:"Something went wrong"})),d&&"Repl"===d.repl.__typename&&"Team"===(null===(t=d.repl.owner)||void 0===t?void 0:t.__typename)&&"ReplTemplate"===(null===(n=d.repl.template)||void 0===n?void 0:n.__typename)&&"ReplSubmission"===(null===(r=d.repl.submission)||void 0===r?void 0:r.__typename)&&(o=(0,ge.tZ)(Yf,{data:d}),s="Submissions"),d&&"Repl"===d.repl.__typename&&"Team"===(null===(i=d.repl.owner)||void 0===i?void 0:i.__typename)&&"ReplTemplate"===(null===(a=d.repl.template)||void 0===a?void 0:a.__typename)&&!d.repl.submission&&(o=(0,ge.tZ)(sm,{data:d}),s="Curriculum"),(0,ge.BX)("div",{style:l,className:"jsx-1108958607 education-pane",children:[(0,ge.tZ)("div",{className:"jsx-1108958607 education-pane-header",children:(0,ge.tZ)(Ee.Z,{level:4,children:s})}),o,(0,ge.tZ)(V.default,{id:"1108958607",children:[".education-pane.jsx-1108958607{background-color:var(--background-default);color:var(--foreground-dimmer);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--space-8);}",".education-pane-header.jsx-1108958607{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;position:relative;color:var(--foreground-default);width:100%;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;}"]})]})}var um=n(68924),dm=n(10847),pm=n(28914);function fm(e){try{return!!e&&!!new URL(e)}catch(t){return!1}}var mm=n(72378),hm=n.n(mm),gm=["GET","POST","PUT","DELETE","HEAD","PATCH","OPTIONS"];function vm(e){var t=e.url,n=e.method,r=void 0===n?"GET":n,i=e.headers,a=void 0===i?{}:i;if(!t)throw new Error("No URL provided");if(!fm(t))throw new Error("URL is invalid: ".concat(t));if(r=r.toUpperCase(),!gm.find((function(e){return e===r})))throw new Error("Method is invalid: ".concat(r));var o=[];for(var s in a)o.push("-H","".concat(s,": ").concat(a[s]));return["curl","-i","-s","-X",r].concat(o,[t])}function bm(e){if(null!==e&&void 0!==e&&e.matchedAncestors){var t=ym(e.matchedAncestors.map((function(e){var t,n;return null===(t=e.command)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.curl})).filter((function(e){return void 0!==e})));return t.method||(t.method="get"),t}}function ym(e){return e.reduce((function(e,t){return hm()(e,t)}),{})}function xm(){return(0,ge.BX)("div",{className:"jsx-3039985225 loader-container",children:[(0,ge.BX)(_u.ZP,{primaryColor:"var(--background-highest)",secondaryColor:"var(--background-higher)",uniquekey:"editorLoader",children:[(0,ge.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"70",height:"10",className:"jsx-3039985225"}),(0,ge.tZ)("rect",{x:"80",y:"0",rx:"3",ry:"3",width:"100",height:"10",className:"jsx-3039985225"}),(0,ge.tZ)("rect",{x:"190",y:"0",rx:"3",ry:"3",width:"10",height:"10",className:"jsx-3039985225"}),(0,ge.tZ)("rect",{x:"15",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:"jsx-3039985225"}),(0,ge.tZ)("rect",{x:"155",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:"jsx-3039985225"}),(0,ge.tZ)("rect",{x:"15",y:"40",rx:"3",ry:"3",width:"90",height:"10",className:"jsx-3039985225"}),(0,ge.tZ)("rect",{x:"115",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:"jsx-3039985225"}),(0,ge.tZ)("rect",{x:"185",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:"jsx-3039985225"}),(0,ge.tZ)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"30",height:"10",className:"jsx-3039985225"}),(0,ge.tZ)("rect",{x:"15",y:"80",rx:"3",ry:"3",width:"70",height:"10",className:"jsx-3039985225"}),(0,ge.tZ)("rect",{x:"95",y:"80",rx:"3",ry:"3",width:"60",height:"10",className:"jsx-3039985225"}),(0,ge.tZ)("rect",{x:"165",y:"80",rx:"3",ry:"3",width:"30",height:"10",className:"jsx-3039985225"}),(0,ge.tZ)("rect",{x:"15",y:"100",rx:"3",ry:"3",width:"110",height:"10",className:"jsx-3039985225"}),(0,ge.tZ)("rect",{x:"135",y:"100",rx:"3",ry:"3",width:"100",height:"10",className:"jsx-3039985225"}),(0,ge.tZ)("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"70",height:"10",className:"jsx-3039985225"})]}),(0,ge.tZ)(V.default,{id:"3039985225",children:[".loader-container.jsx-3039985225{padding:var(--space-24);}"]})]})}function wm(e){var t=e.html,n=(0,Ia.Z)("flag-curlclui-html-preview"),r=K.useMemo((function(){return t?function(e){var t=e.html,n=void 0===t?"":t,r=new window.Blob([n],{type:"text/html"});return URL.createObjectURL(r)}({html:t}):null}),[t]);return r?(0,ge.BX)("div",{className:"jsx-888912108 html-viewer",children:[n?(0,ge.tZ)("a",{target:"_blank",href:r,className:"jsx-888912108",children:"See response"}):(0,ge.tZ)("div",{className:"jsx-888912108 response-text",children:t}),(0,ge.tZ)(V.default,{id:"888912108",children:[".html-viewer.jsx-888912108{display:block;padding:var(--space-16);background:var(--background-root);}",".response-text.jsx-888912108{overflow-x:hidden;white-space:break-spaces;color:var(--foreground-default);font-family:var(--font-family-code);font-size:var(--font-size-small);}"]})]}):null}function km(e){var t=e.output,n=e.error;return(0,ge.BX)("div",{className:"jsx-1719131076",children:[n&&(0,ge.tZ)("div",{className:"jsx-1719131076 error",children:n}),t&&(0,ge.tZ)("div",{className:"jsx-1719131076",children:t}),(0,ge.tZ)(V.default,{id:"1719131076",children:[".error.jsx-1719131076{color:var(--accent-negative-default);}"]})]})}var Zm=(0,Ga.default)((function(){return n.e(367).then(n.t.bind(n,55171,23))}),{loadableGenerated:{webpack:function(){return[55171]},modules:["../app/workspace/plugins/cluicurl/output/JSONOutput.tsx -> react-json-view"]}});function jm(e){var t,n=e.jsonString,r=K.useMemo((function(){try{return[JSON.parse(n),null]}catch(e){return[null,e]}}),[n]),i=(0,D.Z)(r,2),a=i[0],o=i[1];return o?t=(0,ge.BX)("div",{className:"jsx-3269560366 json-error",children:[(0,ge.BX)("div",{className:"jsx-3269560366 error-message",children:["Error: Failed to parse JSON. ",o.message]}),(0,ge.tZ)("div",{className:"jsx-3269560366 raw-json-string",children:n}),(0,ge.tZ)(V.default,{id:"3269560366",children:[".json-error.jsx-3269560366{display:grid;grid-gap:var(--space-16);}",".error-message.jsx-3269560366{font-size:var(--font-size-small);}"]})]}):a&&(t=(0,ge.tZ)(Zm,{src:a,name:!1,displayDataTypes:!1})),(0,ge.BX)("div",{className:"jsx-1327275652 json-viewer",children:[t,(0,ge.tZ)(V.default,{id:"1327275652",children:[".json-viewer.jsx-1327275652{padding:var(--space-16);background:var(--background-root);}"]})]})}var Om=n(80983),Em=n(95493),_m=n.n(Em);function Cm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sm(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Pm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pm(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Pm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Nm=["text/plain","application/json","application/octet-stream"],Tm="gold",Im=function(e,t){if(e===t)return 1;var n=_m().get(e.toLowerCase(),t.toLowerCase()),r=Math.max(e.length,t.length);return(r-n)/r},Rm=function(e){return Object.keys(Om.extensions).filter((function(t){return t.includes(e)})).sort((function(t,n){return Im(e,n)-Im(e,t)}))},Dm=function(e){var t=e.name,n=e.value,r=e.commands;return{data:{description:e.description||"".concat(t,": ").concat(n),color:Tm,curl:{headers:(0,z.Z)({},t,n)}},commands:r}},Am=function(e){var t=e.commands;return{data:{color:Tm},commands:function(e){if(e.relativeSearchDepth>0)return{};var n=e.searchValue,r={googlebot:Dm({name:"user-agent",value:"Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)",description:"How Google sees your page",commands:t}),"this-browser":Dm({name:"user-agent",value:window.navigator.userAgent,description:"Your browser's user-agent",commands:t})};return n.length?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cm(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}((0,z.Z)({},n,Dm({name:"user-agent",value:n,commands:t})),r):r}}};function Lm(e){var t=e.commands,n=e.rootArgs;return 1===(null===n||void 0===n?void 0:n.matchedAncestors.length)&&0===(null===n||void 0===n?void 0:n.searchValue.length)?{}:{header:{data:{description:"Add a request header",color:Tm},commands:function(e){var r={},i=e.searchValue.toLowerCase(),a={commands:t,rootArgs:n};return r["content-type"]=function(e){var t=e.commands;return{data:{color:Tm},commands:function(e){if(e.relativeSearchDepth>0)return{};var n,r=e.searchValue.toLowerCase(),i={},a=Sm((0===r.length?Nm:Rm(r)).slice(0,5));try{for(a.s();!(n=a.n()).done;){var o=n.value;i[o]=Dm({name:"content-type",value:o,commands:t})}}catch(s){a.e(s)}finally{a.f()}return i}}}(a),r.authorization=function(e){var t=e.commands;return{data:{color:Tm},commands:function(e){if(e.relativeSearchDepth>0)return{};var n=e.searchValue;return n.length?(0,z.Z)({},n,Dm({name:"authorization",value:n,commands:t})):{}}}}(a),r["user-agent"]=Am(a),r.accept=function(e){var t=e.commands;return{data:{color:Tm},commands:function(e){if(e.relativeSearchDepth>0)return{};var n,r=e.searchValue.toLowerCase(),i={},a=Sm((0===r.length?Nm:Rm(r)).slice(0,5));try{for(a.s();!(n=a.n()).done;){var o=n.value;i[o]=Dm({name:"accept",value:o,commands:t})}}catch(s){a.e(s)}finally{a.f()}return i}}}(a),i.length>0&&!r[i]&&function(e){return/^[a-zA-Z0-9-]+$/.test(e)}(i)&&0===e.relativeSearchDepth&&(r[i]={data:{description:"Add a custom header",color:Tm},commands:function(e){if(e.relativeSearchDepth>0)return{};var n=e.searchValue;return n.length?(0,z.Z)({},n,Dm({name:i,value:n,commands:t})):{}}}),r}}}}function Bm(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Mm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mm(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Mm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Um(e){return{data:{curlType:"body",curl:{headers:{"content-type":"application/json"}},color:"gold",description:"Add a JSON body to your request"},commands:e.commands}}function Xm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xm(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zm(e){var t=e.onSelect,n=e.onSetContext,r=e.onGetCurl,i=e.recentUrls,a=void 0===i?[]:i,o=e.replRoot,s=e.parsedPaths;return function e(i){if(i.relativeSearchDepth>0)return{};var l=i.matchedAncestors.find((function(e){var t,n;return"url"===(null===(t=e.command)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.curlType)})),c=i.matchedAncestors.find((function(e){var t,n;return"method"===(null===(t=e.command)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.curlType)})),u=i.matchedAncestors.find((function(e){var t,n;return"body"===(null===(t=e.command)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.curlType)}));return Fm(Fm(Fm(Fm(Fm(Fm({},l?{}:function(e){var t=e.commands,n=e.parsedPaths,r=e.recentUrls,i=e.replRoot,a={},o=e.rootArgs.searchValue,s=function(e,n){return{data:{curlType:"url",commandName:e,description:n,color:"blue",curl:{url:n}},commands:t}};o.startsWith("/")?a[o]=s(o,"".concat(i.replace(/\/+$/,"")).concat(o)):fm(o)&&(a[o]=s(o,o));var l,c=Bm(n);try{for(c.s();!(l=c.n()).done;){var u=l.value;a[u]||(a[u]=s(u,"".concat(null===i||void 0===i?void 0:i.replace(/\/+$/,"")).concat(u)))}}catch(m){c.e(m)}finally{c.f()}var d,p=Bm(r);try{for(p.s();!(d=p.n()).done;){var f=d.value;i&&f.startsWith(i)&&a[new URL(f).pathname]||(a[f]||(a[f]=s(f,f)))}}catch(m){p.e(m)}finally{p.f()}return a}({commands:e,parsedPaths:s,recentUrls:a,replRoot:o,rootArgs:i})),c?{}:function(e){var t=e.commands,n=e.rootArgs,r={};if(0===n.searchValue.length)return r;for(var i=0,a=["get","post","put","delete","head","patch","options"];i<a.length;i++){var o=a[i];if(o.startsWith(n.searchValue)){var s="Create a ".concat(o.toUpperCase()," request");r[o]={data:{curlType:"method",description:s,curl:{method:o},color:"green"},commands:t}}}return r}({commands:e,rootArgs:i})),function(e){var t=e.rootArgs,n=e.onSelect,r=e.onGetCurl;if(t.relativeSearchDepth>0)return{};var i=bm(t);return i&&i.url?{go:{data:{type:"action",description:"Run the request!",color:"red",run:function(){n(i)}}},"get-curl":{data:{type:"action",description:"Returns the equivalent cURL request",color:"red",run:function(){r(i)}}}}:{}}({onSelect:t,rootArgs:i,onGetCurl:r})),u?{}:function(e){var t=e.rootArgs,n=e.commands;return 1===t.matchedAncestors.length?{}:{json:Um({commands:n,rootArgs:t})}}({commands:e,rootArgs:i})),Lm({rootArgs:i,commands:e})),function(e){var t=e.onSetContext;if(e.rootArgs.ancestors.length>1)return{};var n=function(e){return{confirm:{data:{type:"action",description:"Click to confirm",color:"teal",run:function(){var n=bm(e);if(!n||!n.headers)return{};t({headers:n.headers})}}}}};return{set:{data:{description:"Set a value to context",color:"teal"},commands:function(e){return Lm({rootArgs:e,commands:n})}}}}({onSetContext:n,rootArgs:i}))}}var Vm=function(e){return{data:{type:"root"},commands:zm({onSelect:e.onSelect,onSetContext:e.onSetContext,onGetCurl:e.onGetCurl,recentUrls:e.recentUrls,replRoot:e.replRoot,parsedPaths:e.parsedPaths})}};function Hm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hm(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wm(e){var t,n=(0,Oe.Z)().container,r=(0,fe.Z)(),i=(0,me.Jfm)({variables:{id:r}}).data,a=function(){var e=(0,A.Z)(G().mark((function e(t){var r,i,a,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vm(t),e.next=3,n.exec.apply(n,(0,Bt.Z)(r));case 3:return i=e.sent,a=i.output,o=i.error,e.abrupt("return",{output:a,error:o});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=K.useState([]),s=(0,D.Z)(o,2),l=s[0],c=s[1],u=K.useState(null),d=(0,D.Z)(u,2),p=d[0],f=d[1],m=K.useState(null),h=(0,D.Z)(m,2),g=h[0],v=h[1],b=K.useState(null),y=(0,D.Z)(b,2),x=y[0],w=y[1],k=K.useState({}),Z=(0,D.Z)(k,2),j=Z[0],O=Z[1],E=K.useState(null),_=(0,D.Z)(E,2),C=_[0],S=_[1],P=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];c((function(e){return(0,Bt.Z)(new Set([].concat((0,Bt.Z)(e),(0,Bt.Z)(t.filter(fm)))))}))},N=function(){var e=(0,A.Z)(G().mark((function e(t){var n,r,i,o,s,l,c,u;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(null),v(null),S(null),U(!0),e.next=6,a(ym([j,t]));case 6:if(!(n=e.sent).error&&n.output){e.next=11;break}return f(n),U(!1),e.abrupt("return");case 11:for(u in P(t.url),r=(0,dm.LZ)(n.output),i=r.body,o=r.headers,s=r.statusCode,l=r.statusMessage,c={},o)c[u.toLowerCase()]=o[u];v({body:i,headers:c,statusCode:s,statusMessage:l}),U(!1);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=K.useCallback((function(e){var t={headers:Gm(Gm({},j.headers),e.headers)};O(t)}),[j]);K.useEffect((function(){var e;i&&"Repl"===(null===(e=i.repl)||void 0===e?void 0:e.__typename)&&w(i.repl.prodUrl)}),[i]);var I=K.useState([]),R=(0,D.Z)(I,1)[0],L=K.useState(!1),B=(0,D.Z)(L,2),M=B[0],U=B[1],X=Vm({onSelect:N,onSetContext:T,onGetCurl:function(e){var t=ym([j,e]);S(vm(t).map((function(e){return e.includes(" ")?'"'.concat(e,'"'):e})).join(" ")),v(null),f(null)},recentUrls:l,replRoot:x||"",parsedPaths:R}),F=(null===g||void 0===g||null===(t=g.headers)||void 0===t?void 0:t["content-type"])||"",z=K.useState(!1),H=(0,D.Z)(z,2),W=H[0],q=H[1];return(0,ge.BX)("div",Gm(Gm({},e),{},{className:"jsx-3199020068 "+"jsx-".concat(pc.Q.__hash)+" cluicurl",children:[(0,ge.tZ)(um.Z,{root:X,disableKeyboardShortcut:!0}),M&&(0,ge.tZ)(xm,{}),C&&(0,ge.tZ)("div",{className:"jsx-3199020068 "+"jsx-".concat(pc.Q.__hash)+" curl-req-container",children:(0,ge.tZ)("pre",{className:"jsx-3199020068 "+"jsx-".concat(pc.Q.__hash),children:(0,ge.tZ)("code",{className:"jsx-3199020068 "+"jsx-".concat(pc.Q.__hash),children:C})})}),(null===g||void 0===g?void 0:g.statusCode)&&(0,ge.BX)("div",{className:"jsx-3199020068 "+"jsx-".concat(pc.Q.__hash),children:[(0,ge.BX)("div",{className:"jsx-3199020068 "+"jsx-".concat(pc.Q.__hash)+" response-info",children:[(0,ge.BX)("div",{className:"jsx-3199020068 "+"jsx-".concat(pc.Q.__hash)+" response-status",children:[(0,ge.tZ)("span",{className:"jsx-3199020068 "+"jsx-".concat(pc.Q.__hash),children:g.statusCode})," ",(0,ge.tZ)("span",{className:"jsx-3199020068 "+"jsx-".concat(pc.Q.__hash),children:function(){if(null===g||void 0===g||!g.statusCode)return"";if(g.statusMessage)return g.statusMessage;try{return(0,pm.BV)(g.statusCode)}catch(e){return""}}()})]}),(0,ge.BX)("div",{onClick:function(){return q((function(e){return!e}))},className:"jsx-3199020068 "+"jsx-".concat(pc.Q.__hash)+" response-headers-button",children:[Object.keys(g.headers).length," headers"]})]}),W&&(0,ge.tZ)("div",{className:"jsx-3199020068 "+"jsx-".concat(pc.Q.__hash)+" response-headers",children:Object.entries(g.headers).map((function(e){var t=(0,D.Z)(e,2),n=t[0],r=t[1];return(0,ge.BX)("div",{className:"jsx-3199020068 "+"jsx-".concat(pc.Q.__hash),children:[(0,ge.tZ)("span",{className:"jsx-3199020068 "+"jsx-".concat(pc.Q.__hash)+" header-name",children:n}),":"," ",(0,ge.tZ)("span",{className:"jsx-3199020068 "+"jsx-".concat(pc.Q.__hash)+" header-value",children:r})]})}))})]}),p&&(0,ge.tZ)(km,Gm({},p)),F.includes("text/html")&&(0,ge.tZ)(wm,{html:g.body}),F.includes("application/json")&&(0,ge.tZ)(jm,{jsonString:g.body}),(0,ge.tZ)(V.default,{id:pc.Q.__hash,children:pc.Q}),(0,ge.tZ)(V.default,{id:"3199020068",children:[".cluicurl.jsx-3199020068{overflow:scroll;}",".cluicurl.jsx-3199020068 .input-row{z-index:2 !important;}",".cluicurl.jsx-3199020068 .menu{z-index:1 !important;}",".curl-req-container.jsx-3199020068{padding:var(--space-16);background:var(--background-higher);}",".response-info.jsx-3199020068{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:var(--space-16) var(--space-24);background-color:var(--background-root);font-family:var(--font-family-code);color:var(--foreground-default);border-bottom:1px solid var(--outline-dimmest);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".response-status.jsx-3199020068{font-weight:800;}",".response-headers.jsx-3199020068{font-family:var(--font-family-code);font-size:var(--font-size-small);padding:var(--space-24);color:var(--foreground-default);}",".response-headers-button.jsx-3199020068{font-weight:100;background:var(--background-higher);padding:var(--space-4);border-radius:var(--border-radius-4);cursor:pointer;}",".header-name.jsx-3199020068{font-weight:var(--font-weight-bold);}",".header-value.jsx-3199020068{font-weight:var(--font-weight-regular);}"]})]}))}var qm=n(34837),Km=n.n(qm),Ym=n(48887),Qm=n(10908);function $m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$m(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var eh;function th(e){var t=K.useRef(null),n=K.useRef(null),r=(0,Oe.Z)(),i=r.fs,a=r.broadcast,o=(0,hn.Z)(),s=(0,Ft.Z)(),l=s.showError,c=s.showConfirm,u=(0,$a.Z)(),d=(0,ti.Z)(),p=K.useState(!1),f=(0,D.Z)(p,2),m=f[0],h=f[1],g=(0,Ia.Z)("flag-pedit-multiplayer");return K.useEffect((function(){function e(){return r.apply(this,arguments)}function r(){return(r=(0,A.Z)(G().mark((function e(){var r,a,c,d,f,m;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return r=o.endsWith(".kbmsprite"),e.next=5,i.readFile(o);case 5:if(a=e.sent,u.current){e.next=8;break}return e.abrupt("return");case 8:if(!a.error){e.next=11;break}return l("failed to read ".concat(o)),e.abrupt("return");case 11:if(c=a.content.toString(),d=c&&JSON.parse(c),!n.current){e.next=17;break}d&&n.current.load(r?(0,Qm.C)(d):d),e.next=28;break;case 17:if(t.current){e.next=19;break}return e.abrupt("return");case 19:(f=t.current).width=f.offsetWidth,f.height=f.offsetHeight,(m=Km()(d?d.fromKaboom?{canvas:f,width:d.width,height:d.height}:{canvas:f,data:r?(0,Qm.C)(d):d}:{canvas:f,width:64,height:64})).on("change",s),m.on("save",s),m.on("export",p),n.current=m,f.focus();case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return d.apply(this,arguments)}function d(){return(d=(0,A.Z)(G().mark((function e(){var t,r,s;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.current){e.next=3;break}return l("failed to init pedit ctx"),e.abrupt("return");case 3:if(o){e.next=6;break}return l("failed to get current file"),e.abrupt("return");case 6:if(t=n.current,r=o.endsWith(".kbmsprite"),s=t.save(),!r){e.next=13;break}return e.next=12,(0,Qm.u)(s);case 12:s=e.sent;case 13:return e.next=15,i.writeFile(o,ur.Z.from(JSON.stringify(s)));case 15:if(!e.sent.error){e.next=18;break}return e.abrupt("return");case 18:g&&a.broadcastMessage({text:JSON.stringify({action:eh.Update})});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){if(n.current){var e=n.current,t=window.prompt("Export as:");if(t){var r="".concat(t,".png"),a=e.curFrame().toPNG();i.writeFile(r,ur.Z.from(a)).then((function(){c("Successfully exported to ".concat(r))}))}}else l("failed to init pedit ctx")}var f=function(){};return g&&(f=a.onBroadcastReceived((function(t){var n=t.text;switch(JSON.parse(n).action){case eh.Update:e()}}))),e(),function(){n.current&&n.current.cleanUp(),f()}}),[i,a,o,t]),(0,ge.BX)("div",Jm(Jm({},e),{},{className:V.default.dynamic([["4157310935",[d?"0 3px 0 3px ".concat(d):"0"]]])+" pedit",children:[(0,ge.tZ)(V.default,{id:"4157310935",dynamic:[d?"0 3px 0 3px ".concat(d):"0"],children:[".pedit.__jsx-style-dynamic-selector{width:100%;height:100%;position:relative;z-index:3;box-shadow:".concat(d?"0 3px 0 3px ".concat(d):"0",";}"),"canvas.__jsx-style-dynamic-selector{width:100%;height:100%;outline:none;position:absolute;top:0;left:0;}",".upgrade-button.__jsx-style-dynamic-selector{position:absolute;bottom:0;left:0;z-index:100;padding:var(--space-4);border:solid 2px var(--foreground-default);background:var(--background-default);font-weight:700;outline:none;}",".upgrade-button.__jsx-style-dynamic-selector:hover{cursor:pointer;background:var(--background-higher);}",".upgrade-modal.__jsx-style-dynamic-selector{background:var(--background-default);padding:var(--space-32);}"]}),(0,ge.tZ)("canvas",{ref:t,tabIndex:0,className:V.default.dynamic([["4157310935",[d?"0 3px 0 3px ".concat(d):"0"]]])}),o&&o.endsWith(".kbmsprite")&&(0,ge.tZ)("button",{onClick:function(){return h(!0)},className:V.default.dynamic([["4157310935",[d?"0 3px 0 3px ".concat(d):"0"]]])+" upgrade-button",children:"Upgrade"}),(0,ge.tZ)(Ot.Z,{isOpen:m,onRequestClose:function(){return h(!1)},children:(0,ge.tZ)(Ym.Z,{prompt:"Upgrade to '.pedit'?",desc:"You're using '.kbmsprite' which is recently deprecated. Do you want to upgrade to the new '.pedit' format? (It'll create a new '.pedit' file with the same content. If you're using it with Kaboom, the new '.pedit' format won't work with kaboom before v0.4.0)",onCancel:function(){return h(!1)},onConfirm:function(){if(n.current)if(o){var e=n.current,t=o.replace(/\.kbmsprite$/,".pedit"),r=ur.Z.from(JSON.stringify(e.save()));i.writeFile(t,r).then((function(e){e.error?l("Failed to write to ".concat(t)):c("Successfully written to ".concat(t))})),h(!1)}else l("failed to get active file");else l("editor not initialized")}})})]}))}function nh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nh(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ih(e){var t=K.useState(e),n=(0,D.Z)(t,2),r=n[0],i=n[1];return[r,i,function(e){var t=null;switch(e.currentTarget.type){case"checkbox":t=e.currentTarget.checked;break;case"number":case"range":t=Number(e.currentTarget.value);break;default:t=e.currentTarget.value}i(rh(rh({},r),{},(0,z.Z)({},e.currentTarget.name,t)))}]}!function(e){e.Update="UPDATE"}(eh||(eh={}));var ah=n(62887);var oh=function(e){var t=e.title,n=e.sub,r=void 0!==n&&n,i=e.actions,a=void 0===i?[]:i;return(0,ge.BX)(de.Ug,{justify:"space-between",children:[(0,ge.tZ)(V.default,{id:"348115206",children:[".section-header-action.jsx-348115206{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-24);height:var(--space-24);border-radius:var(--border-radius-4);color:var(--foreground-dimmer);}",".section-header-action.jsx-348115206:hover{background:var(--background-higher);cursor:pointer;}"]}),(0,ge.tZ)(Ee.Z,{level:r?5:4,children:t}),(0,ge.tZ)(de.Ug,{spacing:"4px",align:"center",children:a&&a.map((function(e,t){return(0,ge.tZ)("div",{onClick:e.action,className:"jsx-348115206 section-header-action",children:e.icon},t)}))})]})};var sh,lh=function(e){var t=e.fileDrag,n=e.children,r=K.useState(!1),i=(0,D.Z)(r,2),a=i[0],o=i[1],s=K.useRef(0);return(0,ge.BX)("div",{onDragEnter:function(e){if(t){e.preventDefault(),e.stopPropagation();var n=!0;if(e.dataTransfer.items&&e.dataTransfer.items.length>0){if(t.accept)for(var r=e.dataTransfer.items,i=0;i<r.length;i++){var a=r[i];t.accept.includes(a.type)||(n=!1)}n&&(o(!0),s.current++)}}},onDragLeave:function(e){t&&(e.preventDefault(),e.stopPropagation(),s.current--,0===s.current&&o(!1))},onDrop:function(e){t&&(e.preventDefault(),e.stopPropagation(),s.current=0,o(!1),(0,Bt.Z)(e.dataTransfer.files).filter((function(e){return t.accept.includes(e.type)})).forEach(t.onDrop))},className:"jsx-26096692 section",children:[(0,ge.tZ)(V.default,{id:"26096692",children:[".section.jsx-26096692{position:relative;width:100%;}",".dragfilter.jsx-26096692{position:absolute;width:100%;height:100%;top:0;left:0;background:var(--accent-primary-default);border-radius:var(--border-radius-4);opacity:0.2;}",".dragfilter.hidden.jsx-26096692{display:none !important;}"]}),n,(0,ge.tZ)("div",{className:"jsx-26096692 "+(jt()("dragfilter",{hidden:!a})||"")})]})},ch=["0.5.0","0.4.1","0.3.0","0.2.0","0.1.0","0.0.0","dev"];function uh(e){return function(t){for(var n in e)t.key===n&&e[n](t)}}function dh(e,t){sh||(sh=document.createElement("input")).setAttribute("type","file"),sh.setAttribute("accept",t.join(","));sh.addEventListener("change",(function t(){sh.files&&((0,Bt.Z)(sh.files).forEach(e),sh.removeEventListener("change",t))})),sh.click()}function ph(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ph(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ph(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mh(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return hh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hh(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function hh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gh=function(e){var t,n=e.gameConf,r=e.setGameConf,i=(0,Oe.Z)().fs,a=K.useState(!1),o=(0,D.Z)(a,2),s=o[0],l=o[1],c=(0,Gr.Z)({path:"scenes",initialExpanded:!0,fs:i}),u=[];if(c.children){var d,p=mh(c.children);try{for(p.s();!(d=p.n()).done;){var f=d.value;f.type===gn.Tv.File&&u.push((0,vn.eb)(f.filename))}}catch(m){p.e(m)}finally{p.f()}}return(0,ge.BX)(lh,{children:[(0,ge.tZ)(oh,{title:"Kaboom",actions:[{icon:(0,ge.tZ)(Jc.Z,{rotate:s?0:-90}),action:function(){return l(!s)}}]}),s&&(0,ge.tZ)("div",{className:"box",children:(0,ge.BX)(de.gC,{spacing:1,children:[(0,ge.BX)(de.Ug,{spacing:1,align:"center",children:[(0,ge.tZ)(ue.Z,{size:"small",foreground:"2",children:"Start Scene"}),(0,ge.tZ)("select",{name:"startScene",value:n.startScene,onChange:function(e){r(fh(fh({},n),{},{startScene:e.currentTarget.value}))},children:u.map((function(e){return(0,ge.tZ)("option",{value:e,children:e},e)}))})]}),(0,ge.BX)(de.Ug,{spacing:1,align:"center",children:[(0,ge.tZ)(ue.Z,{size:"small",foreground:"2",children:"Full Screen"}),(0,ge.tZ)(ah.Z,{isOn:n.fullscreen,onChange:function(e){r(fh(fh({},n),{},{fullscreen:e.target.checked}))}})]}),!n.fullscreen&&(0,ge.BX)(de.Ug,{spacing:1,wrap:"nowrap",children:[(0,ge.tZ)(Ht.ZP,{label:"Width",name:"width",value:n.width,onChange:function(e){r(fh(fh({},n),{},{width:Number(e.target.value)}))}}),(0,ge.tZ)(Ht.ZP,{label:"Height",name:"height",value:n.height,onChange:function(e){r(fh(fh({},n),{},{height:Number(e.target.value)}))}})]}),(0,ge.BX)(de.Ug,{spacing:1,align:"center",children:[(0,ge.tZ)(ue.Z,{size:"small",foreground:"2",children:"Scale"}),(0,ge.tZ)(ce.Z,{size:"medium",onClick:function(){r(fh(fh({},n),{},{scale:Math.max(1,n.scale-1)}))},children:"-"}),(0,ge.tZ)(ue.Z,{size:"medium",foreground:"1",fontWeight:"medium",children:n.scale}),(0,ge.tZ)(ce.Z,{size:"medium",onClick:function(){r(fh(fh({},n),{},{scale:Math.min(4,n.scale+1)}))},children:"+"})]}),(0,ge.BX)(de.Ug,{spacing:1,align:"center",children:[(0,ge.tZ)(ue.Z,{size:"small",foreground:"2",children:"Clear Color"}),(0,ge.tZ)(ah.Z,{isOn:null!==n.clearColor,onChange:function(e){r(fh(fh({},n),{},{clearColor:e.target.checked?[0,0,0,1]:null}))}}),(0,ge.tZ)("input",{type:"color",value:n.clearColor?(t=n.clearColor,"#"+((1<<24)+(~~(255*t[0])<<16)+(~~(255*t[1])<<8)+~~(255*t[2])).toString(16).slice(1)):void 0,onChange:function(e){var t=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?t.slice(1).map((function(e){return parseInt(e,16)/255})):null}(e.target.value);t&&r(fh(fh({},n),{},{clearColor:[].concat((0,Bt.Z)(t),[1])}))}})]}),(0,ge.BX)(de.Ug,{spacing:1,align:"center",children:[(0,ge.tZ)(ue.Z,{size:"small",foreground:"2",children:"Debug"}),(0,ge.tZ)(ah.Z,{isOn:n.debug,onChange:function(e){r(fh(fh({},n),{},{debug:e.target.checked}))}})]}),(0,ge.BX)(de.Ug,{spacing:1,align:"center",children:[(0,ge.tZ)(ue.Z,{size:"small",foreground:"2",children:"Version"}),(0,ge.tZ)("select",{name:"version",value:n.version,onChange:function(e){r(fh(fh({},n),{},{version:e.currentTarget.value}))},children:ch.map((function(e){return(0,ge.tZ)("option",{value:e,children:e},e)}))})]})]})})]})},vh=n(17290);var bh=function(e){var t=e.isActive,n=e.name,r=e.icon,i=e.options,a=e.onClick,o=e.onRename,s=K.useState(!1),l=(0,D.Z)(s,2),c=l[0],u=l[1],d=K.useState(null),p=(0,D.Z)(d,2),f=p[0],m=p[1],h=(0,dc.Z)((function(){u(!1)}),[]),g=(0,dc.Z)((function(){m(null)}),[]);return K.useEffect((function(){g.current&&null!==f&&g.current.focus()}),[g,f]),(0,ge.BX)("div",{onClick:a,className:"jsx-3068685327 "+(jt()("entry",{active:t&&null===f})||""),children:[(0,ge.tZ)(V.default,{id:"3068685327",children:[".entry.jsx-3068685327{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;border-radius:var(--border-radius-4);padding:var(--space-8);color:var(--foreground-dimmer);position:relative;}",".entry.active.jsx-3068685327{background:var(--accent-primary-default) !important;color:var(--white) !important;font-weight:var(--font-weight-medium) !important;}",".entry.jsx-3068685327:hover{color:var(--foreground-default);background:var(--background-higher);cursor:pointer;}",".options-icon.jsx-3068685327{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-16);height:var(--space-16);opacity:0;color:var(--foreground-dimmest);}",".options-icon.jsx-3068685327:hover{color:var(--foreground-dimmest);}",".options-icon.active.jsx-3068685327{opacity:1 !important;color:var(--white) !important;}",".entry.jsx-3068685327:hover .options-icon.jsx-3068685327{opacity:1;}",".options-box.jsx-3068685327{position:absolute;top:var(--space-32);right:var(--space-16);padding:var(--space-4);background:var(--background-default);border:1px solid var(--outline-dimmest);border-radius:var(--border-radius-4);font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-regular) !important;z-index:500;}",".option.jsx-3068685327{padding:var(--space-8);border-radius:var(--border-radius-4);color:var(--foreground-default);}",".option.danger.jsx-3068685327{color:var(--accent-negative-default);}",".option.jsx-3068685327:hover{background:var(--background-higher);}",".option.danger.jsx-3068685327:hover{background:var(--accent-negative-default);color:var(--white);}"]}),(0,ge.BX)(de.Ug,{spacing:1,align:"center",children:[r,null===f?(0,ge.tZ)("p",{className:"jsx-3068685327",children:n}):(0,ge.tZ)(Ht.ZP,{ref:g,value:f,onChange:function(e){m(e.currentTarget.value)},onKeyDown:uh({Escape:function(){m(null)},Enter:function(){o&&f&&o(f),m(null)}})})]}),i&&i.length>0&&(0,ge.tZ)("div",{onClick:function(e){e.stopPropagation(),u(!c)},className:"jsx-3068685327 "+(jt()("options-icon",{active:t})||""),children:(0,ge.tZ)(vh.Z,{})}),i&&i.length>0&&c&&(0,ge.tZ)("div",{ref:h,onKeyDown:uh({Escape:function(){u(!1)}}),className:"jsx-3068685327 options-box",children:i.map((function(e){return e?(0,ge.tZ)("div",{onClick:function(t){t.stopPropagation(),u(!1),e.action(),"rename"===e.name&&m(n)},className:"jsx-3068685327 "+(jt()("option",{danger:e.danger})||""),children:e.name},e.name):null}))})]})};function yh(e){var t=e.close,n=e.entries,r=(0,Oe.Z)(),i=r.fs,a=r.session,o=(0,dc.Z)(t,[]),s=(0,Ft.Z)().showError,l=ih({name:""}),c=(0,D.Z)(l,3),u=c[0],d=c[2];return K.useEffect((function(){o.current&&o.current.focus()}),[o]),(0,ge.tZ)(Ht.ZP,{ref:o,name:"name",onChange:d,onKeyDown:uh({Escape:t,Enter:function(){var e="".concat(u.name,".js"),r="scenes/".concat(e);n.includes(e)?s("scene '".concat(u.name,"' already exists")):(i.writeFile(r,ur.Z.from("")).then((function(){a.openFile(r)})),t())}})})}var xh=function(e){var t=e.gameConf,n=(0,Oe.Z)(),r=n.fs,i=n.session,a=(0,hn.Z)(),o=K.useState(!1),s=(0,D.Z)(o,2),l=s[0],c=s[1],u=(0,Ft.Z)().showError,d=K.useState(null),p=(0,D.Z)(d,2),f=p[0],m=p[1],h=((0,Gr.Z)({path:"scenes",initialExpanded:!0,fs:r}).children||[]).filter((function(e){return e.type===gn.Tv.File})).map((function(e){return e.filename})).sort();return(0,ge.BX)(lh,{fileDrag:{accept:["text/javascript"],onDrop:function(e){var t="scenes/".concat(e.name);h.includes(t)?u("scene '".concat((0,vn.eb)(e.name),"' already exists")):e.text().then((function(e){r.writeFile(t,ur.Z.from(e))}))}},children:[(0,ge.tZ)(oh,{sub:!0,title:"Scenes",actions:[{icon:(0,ge.tZ)(Vt.Z,{}),action:function(){return c(!0)}}]}),(0,ge.tZ)("div",{children:h.map((function(e){var n="scenes/".concat(e),o=(0,vn.eb)(e),s=[{name:"rename",action:function(){}}];return h.length>1&&s.push({name:"delete",action:function(){return m(n)},danger:!0}),(0,ge.tZ)(bh,{isActive:n===a,onClick:function(){return i.openFile(n)},onRename:function(e){r.moveFile(n,"scenes/".concat(e,".js")).then((function(e){e.error&&u("failed to rename")}))},name:o,icon:t.startScene===o&&(0,ge.tZ)(el.Z,{}),options:s},o)}))}),l&&(0,ge.tZ)(yh,{entries:h,close:function(){return c(!1)}}),f&&(0,ge.tZ)(Ot.Z,{isOpen:Boolean(f),onRequestClose:function(){return m(null)},children:(0,ge.tZ)(Ym.Z,{danger:!0,prompt:"Delete scene '".concat((0,vn.eb)(f),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return m(null)},onConfirm:function(){r.deleteFile(f),m(null)}})})]})},wh=n(89576),kh=n(50573),Zh=n(54098),jh=n.n(Zh);var Oh=function(e){var t=e.kind,n=e.renderItem,r=e.onRequestClose,i=e.onAdd,a=(0,Oe.Z)(),o=a.fs,s=a.session,l=K.useState([]),c=(0,D.Z)(l,2),u=c[0],d=c[1],p=K.useState(""),f=(0,D.Z)(p,2),m=f[0],h=f[1],g="https://kaboomjs.com/assets/".concat(t),v=(0,Ft.Z)().showError;function b(e){var n="".concat(g,"/").concat(e);jh()(n).then((function(e){return e.arrayBuffer()})).then((function(a){var l="".concat(t,"/").concat(e);o.writeFile(l,ur.Z.from(a)).then((function(t){if(t.error)throw new Error(t.error);s.openFile(l),i&&i(e,n)})),r()})).catch(v)}return K.useEffect((function(){jh()("".concat(g,"?fmt=json")).then((function(e){return e.json()})).then((function(e){return d(e)})).catch(v)}),[d,v,g]),(0,ge.BX)("div",{className:"jsx-309452596 assets",children:[(0,ge.BX)(de.gC,{spacing:2,children:[(0,ge.tZ)(Ee.Z,{level:3,children:"Assets Lib (beta)"}),0===u.length?(0,ge.tZ)(ue.Z,{foreground:2,children:"Loading..."}):(0,ge.BX)(ge.HY,{children:[(0,ge.tZ)(Ht.ZP,{large:!0,label:"Search",onChange:function(e){h(e.target.value)}}),(0,ge.tZ)("div",{className:"jsx-309452596 box",children:u.filter((function(e){return!m||e.includes(m)})).map((function(e){return n({name:e,url:"".concat(g,"/").concat(e),add:function(){return b(e)}})}))}),(0,ge.tZ)(ce.Z,{size:"small",onClick:function(){u.length>0&&b(u[Math.floor(Math.random()*u.length)])},children:"I'm Feeling Lucky"})]})]}),(0,ge.tZ)(V.default,{id:"309452596",children:[".assets.jsx-309452596{padding:var(--space-24);}",".box.jsx-309452596{width:100%;height:320px;overflow-x:hidden;overflow-y:scroll;}"]})]})};function Eh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Eh(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ch(e){var t=e.url,n=e.add;return(0,ge.BX)(ge.HY,{children:[(0,ge.tZ)("img",{src:t,loading:"lazy",onClick:n,className:"jsx-2838917446 entry"}),(0,ge.tZ)(V.default,{id:"2838917446",children:[".entry.jsx-2838917446{padding:var(--space-16);height:120px;image-rendering:pixelated;border-radius:var(--border-radius-4);}",".entry.jsx-2838917446:hover{cursor:pointer;background:var(--background-root);}"]})]})}function Sh(e){var t=e.close,n=e.entries,r=(0,Oe.Z)(),i=r.fs,a=r.session,o=(0,dc.Z)(t,[]),s=K.useRef(null),l=(0,Ft.Z)().showError,c=ih({name:"",width:0,height:0}),u=(0,D.Z)(c,3),d=u[0],p=u[2];K.useEffect((function(){s.current&&s.current.focus()}),[s]);var f=function(){var e=d.width,r=d.height;if(0!==d.name.length)if(isNaN(e)||e<=0||e>256)l("only supports sprites smaller than 256x256 yet");else if(isNaN(r)||r<=0||r>256)l("only supports sprites smaller than 256x256 yet");else{var o="".concat(d.name,".kbmsprite"),s="sprites/".concat(o);n.includes(o)?l("sprite '".concat(d.name,"' already exists")):(i.writeFile(s,ur.Z.from(JSON.stringify({frames:[{pixels:Array(d.width*d.height*4).fill(0),width:d.width,height:d.height}],width:d.width,height:d.height}))).then((function(){a.openFile(s)})),t())}else l("invalid 'name'")};return(0,ge.BX)("div",{ref:o,onKeyDown:uh({Escape:t,Enter:f}),className:"jsx-2487777647 root",children:[(0,ge.tZ)(V.default,{id:"2487777647",children:[".root.jsx-2487777647{background:var(--background-root);border-radius:var(--border-radius-4);margin:var(--space-8) auto;width:calc(100%);padding:var(--space-16);}"]}),(0,ge.BX)(de.gC,{spacing:1,children:[(0,ge.tZ)(Ht.ZP,{label:"Name",name:"name",large:!0,ref:s,onChange:p}),(0,ge.BX)(de.Ug,{spacing:1,wrap:"nowrap",children:[(0,ge.tZ)(Ht.ZP,{label:"Width",name:"width",large:!0,onChange:p}),(0,ge.tZ)(Ht.ZP,{label:"Height",name:"height",large:!0,onChange:p})]}),(0,ge.BX)(de.Ug,{spacing:1,children:[(0,ge.tZ)(ce.Z,{size:"medium",onClick:t,children:"Cancel"}),(0,ge.tZ)(ce.Z,{size:"medium",color:"primary",onClick:f,children:"Create"})]})]})]})}var Ph=function(){var e=(0,Oe.Z)(),t=e.fs,n=e.session,r=(0,Ft.Z)().showError,i=(0,hn.Z)(),a=K.useState(!1),o=(0,D.Z)(a,2),s=o[0],l=o[1],c=K.useState(!1),u=(0,D.Z)(c,2),d=u[0],p=u[1],f=K.useState(null),m=(0,D.Z)(f,2),h=m[0],g=m[1],v=K.useState({}),b=(0,D.Z)(v,2),y=b[0],x=b[1],w=K.useCallback((function(e){return function(){var n=(0,A.Z)(G().mark((function n(){var r,i,a,o,s,l,c,u,d;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r="sprites/".concat(e),n.next=3,t.stat(r);case 3:if((i=n.sent).exists){n.next=7;break}return y[e]&&x((function(t){var n=_h({},t);return delete n[e],n})),n.abrupt("return");case 7:if(a=i.lastModified.getTime(),!y[e]||y[e].lastMod!==a){n.next=10;break}return n.abrupt("return");case 10:return n.next=12,t.readFile(r);case 12:if(!(o=n.sent).error){n.next=15;break}return n.abrupt("return");case 15:e.endsWith(".kbmsprite")?(s=o.content.toString(),l=JSON.parse(s),x((function(t){return _h(_h({},t),{},(0,z.Z)({},e,{lastMod:a,img:l.preview}))}))):e.endsWith("pedit")?(c=o.content.toString(),u=JSON.parse(c),x((function(t){return _h(_h({},t),{},(0,z.Z)({},e,{lastMod:a,img:u.frames[0]}))}))):(d=(0,vn.yC)(r))&&x((function(t){return _h(_h({},t),{},(0,z.Z)({},e,{lastMod:a,img:"data:".concat(d,";base64,").concat(o.content.toString("base64"))}))}));case 16:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()(),y[e]?y[e].img:null}),[y,t]),k=((0,Gr.Z)({path:"sprites",initialExpanded:!0,fs:t}).children||[]).filter((function(e){return e.type===gn.Tv.File})).map((function(e){return e.filename})).sort(),Z=["image/png","image/jpeg",".pedit",".kbmsprite"],j=function(e){var n="sprites/".concat(e.name);k.includes(n)?r("sprite '".concat((0,vn.eb)(e.name),"' already exists")):e.arrayBuffer().then((function(e){t.writeFile(n,ur.Z.from(e))}))},O=[{icon:(0,ge.tZ)(wh.Z,{}),action:function(){return p(!0)}},{icon:(0,ge.tZ)(kh.Z,{}),action:function(){return dh(j,Z)}},{icon:(0,ge.tZ)(Vt.Z,{}),action:function(){return l(!0)}}];return(0,ge.BX)(lh,{fileDrag:{accept:Z,onDrop:j},children:[(0,ge.tZ)(oh,{sub:!0,title:"Sprites",actions:O}),(0,ge.tZ)("div",{className:"jsx-3831399815",children:k.map((function(e){var a="sprites/".concat(e),o=(0,vn.eb)(e),s=w(e);return(0,ge.tZ)(bh,{isActive:a===i,onClick:function(){return n.openFile(a)},onRename:function(n){t.moveFile(a,"sprites/".concat(n,".").concat((0,vn.r6)(e))).then((function(e){e.error&&r("failed to rename")}))},icon:(0,ge.tZ)("div",{className:"jsx-3831399815 preview-img",children:s&&(0,ge.tZ)("img",{src:s,className:"jsx-3831399815"})}),name:o,options:[{name:"rename",action:function(){}},{name:"delete",action:function(){return g(a)},danger:!0}]},o)}))}),s&&(0,ge.tZ)(Sh,{entries:k,close:function(){return l(!1)}}),h&&(0,ge.tZ)(Ot.Z,{isOpen:Boolean(h),onRequestClose:function(){return g(null)},children:(0,ge.tZ)(Ym.Z,{danger:!0,prompt:"Delete sprite '".concat((0,vn.eb)(h),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return g(null)},onConfirm:function(){t.deleteFile(h),g(null)}})}),(0,ge.tZ)(Ot.Z,{isOpen:d,onRequestClose:function(){return p(!1)},children:(0,ge.tZ)(Oh,{kind:"sprites",renderItem:Ch,onRequestClose:function(){return p(!1)}})}),(0,ge.tZ)(V.default,{id:"3831399815",children:[".preview-img.jsx-3831399815{width:var(--space-32);height:var(--space-32);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden;}",".preview-img.jsx-3831399815 img.jsx-3831399815{width:100%;image-rendering:pixelated;image-rendering:crisp-edges;}"]})]})};function Nh(e){var t=e.name,n=e.url,r=e.add;return(0,ge.BX)(de.Ug,{justify:"space-between",align:"center",children:[(0,ge.BX)(de.gC,{spacing:1,children:[(0,ge.tZ)(ue.Z,{children:t}),(0,ge.tZ)("audio",{src:n,controls:!0})]}),(0,ge.tZ)(ce.Z,{onClick:r,children:"Import"})]})}var Th=function(){var e=(0,Oe.Z)(),t=e.fs,n=e.session,r=(0,hn.Z)(),i=(0,Ft.Z)().showError,a=K.useState(null),o=(0,D.Z)(a,2),s=o[0],l=o[1],c=K.useState(!1),u=(0,D.Z)(c,2),d=u[0],p=u[1],f=((0,Gr.Z)({path:"sounds",initialExpanded:!0,fs:t}).children||[]).filter((function(e){return e.type===gn.Tv.File})).map((function(e){return e.filename})).sort(),m=["audio/ogg","audio/mpeg","audio/wav"],h=function(e){var n="sounds/".concat(e.name);f.includes(n)?i("sound '".concat((0,vn.eb)(e.name),"' already exists")):e.arrayBuffer().then((function(e){t.writeFile(n,ur.Z.from(e))}))},g=[{icon:(0,ge.tZ)(wh.Z,{}),action:function(){return p(!0)}},{icon:(0,ge.tZ)(kh.Z,{}),action:function(){return dh(h,m)}}];return(0,ge.BX)(lh,{fileDrag:{accept:m,onDrop:h},children:[(0,ge.tZ)(oh,{sub:!0,title:"Sounds",actions:g}),(0,ge.tZ)("div",{children:f.map((function(e){var a=(0,vn.eb)(e),o="sounds/".concat(e);return(0,ge.tZ)(bh,{isActive:o===r,onClick:function(){return n.openFile(o)},onRename:function(n){t.moveFile(o,"sounds/".concat(n,".").concat((0,vn.r6)(e))).then((function(e){e.error&&i("failed to rename")}))},name:a,options:[{name:"rename",action:function(){}},{name:"delete",action:function(){return l(o)},danger:!0}]},a)}))}),s&&(0,ge.tZ)(Ot.Z,{isOpen:Boolean(s),onRequestClose:function(){return l(null)},children:(0,ge.tZ)(Ym.Z,{danger:!0,prompt:"Delete sound '".concat((0,vn.eb)(s),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return l(null)},onConfirm:function(){t.deleteFile(s),l(null)}})}),(0,ge.tZ)(Ot.Z,{isOpen:d,onRequestClose:function(){return p(!1)},children:(0,ge.tZ)(Oh,{kind:"sounds",renderItem:Nh,onRequestClose:function(){return p(!1)},onAdd:function(e,t){return new window.Audio(t).play()}})})]})},Ih=n(36265);function Rh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rh(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ah=function(e){var t=e.wid,n=e.debugState,r=e.version,i=e.setDebugState,a=e.handleDebugStateInput,o=(0,et.I0)(),s=K.useState(!1),l=(0,D.Z)(s,2),c=l[0],u=l[1],d=K.useState(!1),p=(0,D.Z)(d,2),f=p[0],m=p[1],h=(0,$a.Z)(),g=K.useCallback((function(e){h.current&&o({type:"EVAL_CODE",wid:t,clean:!1,silent:!0,code:e})}),[o,t,h]),v=(0,Ih.H)(r,"0.3.0"),b=(0,Ih.H)(r,"0.4.0"),y=(0,Ih.H)(r,"0.5.0"),x=y?"debug":b?"dbg()":"kaboom.debug";return K.useEffect((function(){v||g("pause(".concat(c,")"))}),[r,g,c]),K.useEffect((function(){v&&g("".concat(x,".paused = ").concat(n.paused?"true":"false"))}),[r,g,n.paused]),K.useEffect((function(){g("".concat(x,".showArea = ").concat(n.showArea?"true":"false"))}),[g,n.showArea]),K.useEffect((function(){g("".concat(x,".hoverInfo = ").concat(n.hoverInfo?"true":"false"))}),[g,n.hoverInfo]),K.useEffect((function(){g("".concat(x,".timeScale = ").concat(n.timeScale))}),[g,n.timeScale]),(0,ge.BX)(lh,{children:[(0,ge.tZ)(oh,{sub:!0,title:"Debug",actions:[{icon:(0,ge.tZ)(Jc.Z,{rotate:f?0:-90}),action:function(){return m(!f)}}]}),f&&(0,ge.tZ)("div",{className:"box",children:(0,ge.BX)(de.gC,{spacing:1,children:[(0,ge.tZ)(ce.Z,{size:"medium",onClick:function(){v?i(Dh(Dh({},n),{},{paused:!n.paused})):u(!c)},children:(v?n.paused:c)?"Unpause":"Pause"}),(0,ge.tZ)(ce.Z,{size:"medium",onClick:function(){o({type:"EVAL_CODE",wid:t,clean:!1,silent:!0,code:y?"debug.stepFrame()":"stepFrame()"})},children:"Step Frame"}),(0,ge.BX)(de.Ug,{spacing:1,align:"center",children:[(0,ge.tZ)(ue.Z,{size:"small",foreground:"2",children:"Show Area"}),(0,ge.tZ)(ah.Z,{isOn:n.showArea,onChange:function(e){i(Dh(Dh({},n),{},{showArea:e.currentTarget.checked}))}})]}),(0,ge.BX)(de.Ug,{spacing:1,align:"center",children:[(0,ge.tZ)(ue.Z,{size:"small",foreground:"2",children:"Hover Info"}),(0,ge.tZ)(ah.Z,{isOn:n.hoverInfo,onChange:function(e){i(Dh(Dh({},n),{},{hoverInfo:e.currentTarget.checked}))}})]}),(0,ge.tZ)(ue.Z,{size:"small",foreground:"2",children:"Time Scale"}),(0,ge.BX)(de.Ug,{spacing:1,wrap:"nowrap",children:[(0,ge.tZ)("input",{type:"range",name:"timeScale",min:"0",max:"2",value:n.timeScale,step:"0.25",onChange:a}),(0,ge.tZ)(ue.Z,{size:"small",foreground:"1",children:n.timeScale})]})]})})]})},Lh=[{title:"Building Asteroids in Kaboom.js",url:"https://docs.replit.com/tutorials/23-build-asteroids-with-kaboom",img:"https://docs.replit.com/images/tutorials/23-asteroids-kaboom/asteroids-game.gif"},{title:"Building Snake in Kaboom.js",url:"https://docs.replit.com/tutorials/21-build-snake-with-kaboom",img:"https://docs.replit.com/images/tutorials/21-snake-kaboom/updated-graphic.gif"},{title:"Build a Space Shooter with Kaboom.js",url:"https://docs.replit.com/tutorials/24-build-space-shooter-with-kaboom",img:"https://docs.replit.com/images/tutorials/24-space-shooter-kaboom/gameplay.gif"}];function Bh(e){return(0,ge.BX)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"jsx-1860337860 entry",children:[(0,ge.tZ)("img",{src:e.img,className:"jsx-1860337860 img"}),(0,ge.tZ)(ue.Z,{children:e.title}),(0,ge.tZ)(V.default,{id:"1860337860",children:[".entry.jsx-1860337860{width:100%;border-radius:var(--border-radius-4);padding:var(--space-16);display:block;}",".entry.jsx-1860337860:hover{-webkit-text-decoration:none;text-decoration:none;background:var(--background-root);}",".entry.jsx-1860337860:focus{-webkit-text-decoration:none;text-decoration:none;}",".img.jsx-1860337860{width:100%;height:120px;border-radius:var(--border-radius-4);}"]})]})}var Mh=function(){return(0,ge.BX)("div",{className:"jsx-2193845616 tutorials",children:[(0,ge.tZ)(Ee.Z,{level:4,children:"Kaboom Tutorials"}),(0,ge.tZ)("div",{className:"jsx-2193845616 entries",children:Lh.map(Bh)}),(0,ge.tZ)(V.default,{id:"2193845616",children:[".tutorials.jsx-2193845616{padding:var(--space-32);box-sizing:border-box;}",".entries.jsx-2193845616{margin-top:var(--space-16);display:grid;grid-template-columns:repeat(2,auto);}"]})]})};function Uh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uh(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fh=(0,Ta.Z)(["KABOOM_RUN_COMPLETE"]),zh=Fh.receiver,Vh=Fh.useReceiver;function Hh(e){var t=e.wid,n=(0,et.I0)(),r=(0,Oe.Z)().fs,i=(0,Ft.Z)().showError,a=(0,$a.Z)(),o=K.useState(!1),s=(0,D.Z)(o,2),l=s[0],c=s[1];n({type:"LOAD_FILE",wid:t,path:"scenes/main.js"});var u=ch[0],d=K.useState({fullscreen:!0,width:240,height:240,scale:2,startScene:"main",debug:!0,clearColor:null,version:u}),p=(0,D.Z)(d,2),f=p[0],m=p[1],h=ih({showArea:!1,hoverInfo:!1,timeScale:1,paused:!1}),g=(0,D.Z)(h,3),v=g[0],b=g[1],y=g[2];return K.useEffect((function(){(function(){var e=(0,A.Z)(G().mark((function e(){var t,n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.readFile("conf.json");case 2:if((t=e.sent)&&!t.error){e.next=6;break}return i("failed to read conf.json"),e.abrupt("return");case 6:(n=JSON.parse(t.content.toString())).version||(n.version=u),"master"===n.version&&(n.version="0.0.0"),m(n);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),K.useEffect((function(){a.current&&r.writeFile("conf.json",ur.Z.from(JSON.stringify(f))).then((function(e){e.error&&i("failed to write config")}))}),[f]),Vh((function(e){switch(e.action.type){case"KABOOM_RUN_COMPLETE":var r="\nkaboom.debug.showArea = ".concat(v.showArea,";\nkaboom.debug.hoverInfo = ").concat(v.hoverInfo,";\nkaboom.debug.timeScale = ").concat(v.timeScale,";\n");n({type:"EVAL_CODE",wid:t,clean:!1,code:r,silent:!0})}})),(0,ge.BX)("div",Xh(Xh({},e),{},{className:"jsx-743611975 kaboom",children:[(0,ge.BX)(de.gC,{spacing:1,children:[(0,ge.tZ)(gh,{gameConf:f,setGameConf:m}),(0,ge.tZ)(xh,{gameConf:f}),(0,ge.tZ)(Ph,{}),(0,ge.tZ)(Th,{}),(0,ge.tZ)(Ah,{wid:t,version:f.version,debugState:v,setDebugState:b,handleDebugStateInput:y}),(0,ge.tZ)(ce.Z,{fullWidth:!1,onClick:function(){return c(!0)},children:"Tutorials"}),(0,ge.tZ)(Ot.Z,{isOpen:l,onRequestClose:function(){return c(!1)},children:(0,ge.tZ)(Mh,{})})]}),(0,ge.tZ)(V.default,{id:"743611975",children:[".kaboom.jsx-743611975{color:var(--foreground-default);background:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:var(--space-8);border-top-right-radius:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;overflow-y:scroll;width:100%;}",".kaboom.jsx-743611975>*.jsx-743611975{margin-bottom:var(--space-8);}",".kaboom.jsx-743611975:last-child{margin-bottom:0;}",".kaboom.jsx-743611975 .box{padding:var(--space-8);}",".kaboom.jsx-743611975 select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:var(--background-higher);border:1px solid var(--outline-dimmest);padding:var(--space-8);color:var(--foreground-default);font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-medium);border-radius:var(--border-radius-4);}",".kaboom.jsx-743611975 select:hover{background-color:var(--background-higher);cursor:pointer;}",".kaboom.jsx-743611975 select:focus{outline:none;}",".kaboom.jsx-743611975 input[type='range']{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:var(--background-higher);border-radius:var(--border-radius-4);height:var(--space-8);}",".kaboom.jsx-743611975 input[type='range']:focus{outline:none;}",".kaboom.jsx-743611975 input[type='range']::-webkit-slider-thumb{-webkit-appearance:none;background:var(--foreground-dimmest);width:var(--space-16);height:var(--space-16);border-radius:var(--space-8);}",".tut-btn.jsx-743611975{margin-top:var(--space-8);padding:0 var(--space-8);}"]})]}))}var Gh=n(19276);var Wh=function(e){var t=e.title,n=e.sub,r=void 0!==n&&n,i=e.actions,a=void 0===i?[]:i;return(0,ge.BX)(de.Ug,{justify:"space-between",align:"center",children:[(0,ge.tZ)(V.default,{id:"2650311974",children:[".header-action.jsx-2650311974{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-24);height:var(--space-24);border-radius:var(--border-radius-4);color:var(--foreground-dimmer);}",".header-action.jsx-2650311974:hover{background:var(--background-higher);cursor:pointer;}"]}),(0,ge.tZ)(Ee.Z,{level:r?5:4,children:t}),(0,ge.tZ)(de.Ug,{spacing:"4px",align:"center",children:a&&a.map((function(e,t){return(0,ge.tZ)("div",{onClick:e.action,className:"jsx-2650311974 header-action",children:e.icon},t)}))})]})};var qh=function(e){var t=e.fileDrag,n=e.children,r=K.useState(!1),i=(0,D.Z)(r,2),a=i[0],o=i[1],s=K.useRef(0);return(0,ge.BX)("div",{onDragEnter:function(e){if(t){e.preventDefault(),e.stopPropagation();var n=!0;if(e.dataTransfer.items&&e.dataTransfer.items.length>0){if(t.accept)for(var r=e.dataTransfer.items,i=0;i<r.length;i++){var a=r[i];t.accept.includes(a.type)||(n=!1)}n&&(o(!0),s.current++)}}},onDragLeave:function(e){t&&(e.preventDefault(),e.stopPropagation(),s.current--,0===s.current&&o(!1))},onDrop:function(e){t&&(e.preventDefault(),e.stopPropagation(),s.current=0,o(!1),(0,Bt.Z)(e.dataTransfer.files).filter((function(e){return t.accept.includes(e.type)})).forEach(t.onDrop))},className:"jsx-26096692 section",children:[(0,ge.tZ)(V.default,{id:"26096692",children:[".section.jsx-26096692{position:relative;width:100%;}",".dragfilter.jsx-26096692{position:absolute;width:100%;height:100%;top:0;left:0;background:var(--accent-primary-default);border-radius:var(--border-radius-4);opacity:0.2;}",".dragfilter.hidden.jsx-26096692{display:none !important;}"]}),n,(0,ge.tZ)("div",{className:"jsx-26096692 "+(jt()("dragfilter",{hidden:!a})||"")})]})};var Kh,Yh=function(){var e=(0,Oe.Z)().session,t=K.useState(!1),n=(0,D.Z)(t,2),r=n[0],i=n[1];return(0,ge.BX)(qh,{children:[(0,ge.tZ)(Wh,{title:"Kaboom",actions:[{icon:(0,ge.tZ)(Jc.Z,{rotate:r?0:-90}),action:function(){return i(!r)}}]}),r&&(0,ge.BX)(de.gC,{spacing:1,children:[(0,ge.tZ)("div",{}),(0,ge.tZ)(ce.Z,{Icon:cp.Z,size:"small",onClick:function(){return e.openFile("template.html")},children:"Edit HTML Template"})]})]})};function Qh(e){return function(t){for(var n in e)t.key===n&&e[n](t)}}function $h(e,t){Kh||(Kh=document.createElement("input")).setAttribute("type","file"),Kh.setAttribute("accept",t.join(","));Kh.addEventListener("change",(function t(){Kh.files&&((0,Bt.Z)(Kh.files).forEach(e),Kh.removeEventListener("change",t))})),Kh.click()}var Jh=function(e){var t=e.isActive,n=e.name,r=e.icon,i=e.options,a=e.onClick,o=e.onRename,s=K.useState(!1),l=(0,D.Z)(s,2),c=l[0],u=l[1],d=K.useState(null),p=(0,D.Z)(d,2),f=p[0],m=p[1],h=(0,dc.Z)((function(){u(!1)}),[]),g=(0,dc.Z)((function(){m(null)}),[]);return K.useEffect((function(){g.current&&null!==f&&g.current.focus()}),[g,f]),(0,ge.BX)("div",{onClick:a,className:"jsx-2923745127 "+(jt()("entry",{active:t&&null===f})||""),children:[(0,ge.BX)(de.Ug,{spacing:1,align:"center",children:[r,null===f?(0,ge.tZ)("p",{className:"jsx-2923745127",children:n}):(0,ge.tZ)(Ht.ZP,{ref:g,value:f,onChange:function(e){m(e.currentTarget.value)},onKeyDown:Qh({Escape:function(){m(null)},Enter:function(){o&&f&&o(f),m(null)}})})]}),i&&i.length>0&&(0,ge.tZ)("div",{onClick:function(e){e.stopPropagation(),u(!c)},className:"jsx-2923745127 "+(jt()("options-icon",{active:t})||""),children:(0,ge.tZ)(vh.Z,{})}),i&&i.length>0&&c&&(0,ge.tZ)("div",{ref:h,onKeyDown:Qh({Escape:function(){u(!1)}}),className:"jsx-2923745127 options-box",children:i.map((function(e){return e?(0,ge.tZ)("div",{onClick:function(t){t.stopPropagation(),u(!1),e.action(),"Rename"===e.name&&m(n)},className:"jsx-2923745127 "+(jt()("option",{danger:e.danger})||""),children:e.name},e.name):null}))}),(0,ge.tZ)(V.default,{id:"2923745127",children:[".entry.jsx-2923745127{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;border-radius:var(--border-radius-4);padding:var(--space-8);color:var(--foreground-dimmer);position:relative;}",".entry.active.jsx-2923745127{background:var(--accent-primary-default) !important;color:var(--white) !important;font-weight:var(--font-weight-medium) !important;}",".entry.jsx-2923745127:hover{color:var(--foreground-default);background:var(--background-higher);cursor:pointer;}",".options-icon.jsx-2923745127{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-16);height:var(--space-16);opacity:0;color:var(--foreground-dimmest);}",".options-icon.jsx-2923745127:hover{color:var(--foreground-dimmest);}",".options-icon.active.jsx-2923745127{opacity:1 !important;color:var(--white) !important;}",".entry.jsx-2923745127:hover .options-icon.jsx-2923745127{opacity:1;}",".options-box.jsx-2923745127{position:absolute;top:var(--space-32);right:var(--space-16);padding:var(--space-4);background:var(--background-default);border:1px solid var(--outline-dimmest);border-radius:var(--border-radius-4);font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-regular) !important;z-index:500;}",".option.jsx-2923745127{padding:var(--space-8);border-radius:var(--border-radius-4);color:var(--foreground-default);}",".option.danger.jsx-2923745127{color:var(--accent-negative-default);}",".option.jsx-2923745127:hover{background:var(--background-higher);}",".option.danger.jsx-2923745127:hover{background:var(--accent-negative-default);color:var(--white);}"]})]})};function eg(e){var t=e.close,n=e.entries,r=(0,Oe.Z)(),i=r.fs,a=r.session,o=(0,dc.Z)(t,[]),s=(0,Ft.Z)().showError,l=ih({name:""}),c=(0,D.Z)(l,3),u=c[0],d=c[2];return K.useEffect((function(){o.current&&o.current.focus()}),[o]),(0,ge.tZ)(Ht.ZP,{ref:o,name:"name",onChange:d,onKeyDown:Qh({Escape:t,Enter:function(){var e="".concat(u.name,".js"),r="code/".concat(e);n.includes(e)?s("file '".concat(u.name,"' already exists")):(i.writeFile(r,ur.Z.from("")).then((function(){a.openFile(r)})),t())}})})}var tg=function(){var e=(0,Oe.Z)(),t=e.fs,n=e.session,r=(0,hn.Z)(),i=K.useState(!1),a=(0,D.Z)(i,2),o=a[0],s=a[1],l=(0,Ft.Z)().showError,c=K.useState(null),u=(0,D.Z)(c,2),d=u[0],p=u[1],f=((0,Gr.Z)({path:"code",initialExpanded:!0,fs:t}).children||[]).filter((function(e){return e.type===gn.Tv.File})).map((function(e){return e.filename})).sort();return(0,ge.BX)(qh,{fileDrag:{accept:["text/javascript"],onDrop:function(e){var n="code/".concat(e.name);f.includes(n)?l("scene '".concat((0,vn.eb)(e.name),"' already exists")):e.text().then((function(e){t.writeFile(n,ur.Z.from(e))}))}},children:[(0,ge.tZ)(Wh,{sub:!0,title:"Code",actions:[{icon:(0,ge.tZ)(Vt.Z,{}),action:function(){return s(!0)}}]}),(0,ge.tZ)(Bs.Z,{height:"4px"}),(0,ge.tZ)("div",{children:f.map((function(e){var i="code/".concat(e),a=(0,vn.eb)(e),o=[{name:"Rename",action:function(){}}];return"main"!==a&&o.push({name:"Delete",action:function(){return p(i)},danger:!0}),(0,ge.tZ)(Jh,{isActive:i===r,onClick:function(){return n.openFile(i)},onRename:function(e){t.moveFile(i,"code/".concat(e,".js")).then((function(e){e.error&&l("failed to rename")}))},name:a,options:o},a)}))}),o&&(0,ge.tZ)(eg,{entries:f,close:function(){return s(!1)}}),d&&(0,ge.tZ)(Ot.Z,{isOpen:Boolean(d),onRequestClose:function(){return p(null)},children:(0,ge.tZ)(Ym.Z,{danger:!0,prompt:"Delete scene '".concat((0,vn.eb)(d),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return p(null)},onConfirm:function(){t.deleteFile(d),p(null)}})})]})};var ng=function(e){var t=e.kind,n=e.renderItem,r=e.onRequestClose,i=e.onAdd,a=(0,Oe.Z)(),o=a.fs,s=a.session,l=K.useState([]),c=(0,D.Z)(l,2),u=c[0],d=c[1],p=K.useState(""),f=(0,D.Z)(p,2),m=f[0],h=f[1],g="https://kaboomjs.com/".concat(t),v=(0,Ft.Z)().showError;function b(e){var n="".concat(g,"/").concat(e);jh()(n).then((function(e){return e.arrayBuffer()})).then((function(a){var l="".concat(t,"/").concat(e);o.writeFile(l,ur.Z.from(a)).then((function(t){if(t.error)throw new Error(t.error);s.openFile(l),i&&i(e,n)})),r()})).catch((function(){return v("Failed to fetch ".concat(e))}))}return K.useEffect((function(){jh()("https://kaboomjs.com/api/assets/".concat(t)).then((function(e){return e.json()})).then((function(e){return d(e)})).catch((function(){return v("Failed to fetch assets lib listing")}))}),[d,v,g]),(0,ge.BX)("div",{className:"jsx-309452596 assets",children:[(0,ge.BX)(de.gC,{spacing:2,children:[(0,ge.tZ)(Ee.Z,{level:3,children:"Assets Lib (beta)"}),0===u.length?(0,ge.tZ)(ue.Z,{foreground:2,children:"Loading..."}):(0,ge.BX)(ge.HY,{children:[(0,ge.tZ)(Ht.ZP,{large:!0,label:"Search",onChange:function(e){h(e.target.value)}}),(0,ge.tZ)("div",{className:"jsx-309452596 box",children:u.filter((function(e){return!m||e.includes(m)})).map((function(e){return(0,ge.tZ)(K.Fragment,{children:n({name:e,url:"".concat(g,"/").concat(e),add:function(){return b(e)}})},e)}))}),(0,ge.tZ)(ce.Z,{size:"small",onClick:function(){u.length>0&&b(u[Math.floor(Math.random()*u.length)])},children:"I'm Feeling Lucky"})]})]}),(0,ge.tZ)(V.default,{id:"309452596",children:[".assets.jsx-309452596{padding:var(--space-24);}",".box.jsx-309452596{width:100%;height:320px;overflow-x:hidden;overflow-y:scroll;}"]})]})};function rg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ig(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rg(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ag(e){var t=e.url,n=e.add;return(0,ge.BX)(ge.HY,{children:[(0,ge.tZ)("img",{src:t,loading:"lazy",onClick:n,className:"jsx-2838917446 entry"}),(0,ge.tZ)(V.default,{id:"2838917446",children:[".entry.jsx-2838917446{padding:var(--space-16);height:120px;image-rendering:pixelated;border-radius:var(--border-radius-4);}",".entry.jsx-2838917446:hover{cursor:pointer;background:var(--background-root);}"]})]})}function og(e){var t=e.close,n=e.entries,r=(0,Oe.Z)(),i=r.fs,a=r.session,o=(0,dc.Z)(t,[]),s=K.useRef(null),l=(0,Ft.Z)().showError,c=K.useState({name:"",width:32,height:32}),u=(0,D.Z)(c,2),d=u[0],p=u[1];K.useEffect((function(){s.current&&s.current.focus()}),[s]);var f=function(){if(0!==d.name.length){var e=d.width,r=d.height;if(isNaN(e)||isNaN(r)||e<=0||r<=0)l("invalid width / height!");else if(e>256||r>256)l("only supports sprites smaller than 256x256 yet");else{var o="".concat(d.name,".pedit"),s="sprites/".concat(o);n.includes(o)?l("sprite '".concat(d.name,"' already exists")):(i.writeFile(s,ur.Z.from(JSON.stringify({fromKaboom:!0,width:d.width,height:d.height}))).then((function(){a.openFile(s)})),t())}}else l("invalid 'name'")};return(0,ge.BX)("div",{ref:o,onKeyDown:Qh({Escape:t,Enter:f}),className:"jsx-3766385775 dialog",children:[(0,ge.BX)(de.gC,{spacing:1,children:[(0,ge.tZ)(Ht.ZP,{label:"Name",name:"name",large:!0,ref:s,value:d.name,onChange:function(e){p(ig(ig({},d),{},{name:e.target.value}))}}),(0,ge.BX)(de.Ug,{spacing:1,wrap:"nowrap",children:[(0,ge.tZ)(Ht.ZP,{label:"Width",name:"width",large:!0,value:d.width,onChange:function(e){return p(ig(ig({},d),{},{width:parseInt(e.target.value,10)||0}))}}),(0,ge.tZ)(Ht.ZP,{label:"Height",name:"height",large:!0,value:d.height,onChange:function(e){return p(ig(ig({},d),{},{height:parseInt(e.target.value,10)||0}))}})]}),(0,ge.BX)(de.Ug,{spacing:1,children:[(0,ge.tZ)(ce.Z,{size:"medium",onClick:t,children:"Cancel"}),(0,ge.tZ)(ce.Z,{size:"medium",color:"primary",onClick:f,children:"Create"})]})]}),(0,ge.tZ)(V.default,{id:"3766385775",children:[".dialog.jsx-3766385775{background:var(--background-root);border-radius:var(--border-radius-4);margin:var(--space-8) auto;width:calc(100%);padding:var(--space-16);}"]})]})}var sg=function(){var e=(0,Oe.Z)(),t=e.fs,n=e.session,r=(0,Ft.Z)().showError,i=(0,hn.Z)(),a=K.useState(!1),o=(0,D.Z)(a,2),s=o[0],l=o[1],c=K.useState(!1),u=(0,D.Z)(c,2),d=u[0],p=u[1],f=K.useState(null),m=(0,D.Z)(f,2),h=m[0],g=m[1],v=K.useState({}),b=(0,D.Z)(v,2),y=b[0],x=b[1],w=(0,Ms.Z)(),k=K.useCallback((function(e){return function(){var n=(0,A.Z)(G().mark((function n(){var r,i,a,o,s,l,c;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r="sprites/".concat(e),n.next=3,t.stat(r);case 3:if((i=n.sent).exists){n.next=7;break}return y[e]&&x((function(t){var n=ig({},t);return delete n[e],n})),n.abrupt("return");case 7:if(a=i.lastModified.getTime(),!y[e]||y[e].lastMod!==a){n.next=10;break}return n.abrupt("return");case 10:return n.next=12,t.readFile(r);case 12:if(!(o=n.sent).error){n.next=15;break}return n.abrupt("return");case 15:e.endsWith("pedit")?(s=o.content.toString(),(l=JSON.parse(s)).fromKaboom||x((function(t){return ig(ig({},t),{},(0,z.Z)({},e,{lastMod:a,img:l.frames[0]}))}))):(c=(0,vn.yC)(r))&&x((function(t){return ig(ig({},t),{},(0,z.Z)({},e,{lastMod:a,img:"data:".concat(c,";base64,").concat(o.content.toString("base64"))}))}));case 16:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()(),y[e]?y[e].img:null}),[y,t]),Z=((0,Gr.Z)({path:"sprites",initialExpanded:!0,fs:t}).children||[]).filter((function(e){return e.type===gn.Tv.File})).map((function(e){return e.filename})).sort(),j=["image/png","image/jpeg",".pedit"],O=function(e){var n="sprites/".concat(e.name);if(Z.includes(n))return r("sprite '".concat((0,vn.eb)(e.name),"' already exists"));e.arrayBuffer().then((function(e){t.writeFile(n,ur.Z.from(e))}))},E=[{icon:(0,ge.tZ)(wh.Z,{}),action:function(){return p(!0)}},{icon:(0,ge.tZ)(kh.Z,{}),action:function(){return $h(O,j)}},{icon:(0,ge.tZ)(Vt.Z,{}),action:function(){return l(!0)}}];return(0,ge.BX)(qh,{fileDrag:{accept:j,onDrop:O},children:[(0,ge.tZ)(Wh,{sub:!0,title:"Sprites",actions:E}),(0,ge.tZ)(Bs.Z,{height:"4px"}),(0,ge.tZ)("div",{className:"jsx-3831399815",children:Z.map((function(e){var a="sprites/".concat(e),o=(0,vn.r6)(e),s=(0,vn.eb)(e),l=k(e),c=w?[{name:"Insert load code",action:function(){var e="".concat("pedit"===o?"loadPedit":"loadSprite","(").concat(JSON.stringify(s),", ").concat(JSON.stringify(a),");");w({code:e})}}]:[];return(0,ge.tZ)(Jh,{isActive:a===i,onClick:function(){return n.openFile(a)},onRename:function(e){t.moveFile(a,"sprites/".concat(e,".").concat(o)).then((function(e){e.error&&r("failed to rename")}))},icon:(0,ge.tZ)("div",{className:"jsx-3831399815 preview-img",children:l&&(0,ge.tZ)("img",{src:l,className:"jsx-3831399815"})}),name:s,options:[].concat(c,[{name:"Rename",action:function(){}},{name:"Delete",action:function(){return g(a)},danger:!0}])},s)}))}),s&&(0,ge.tZ)(og,{entries:Z,close:function(){return l(!1)}}),h&&(0,ge.tZ)(Ot.Z,{isOpen:Boolean(h),onRequestClose:function(){return g(null)},children:(0,ge.tZ)(Ym.Z,{danger:!0,prompt:"Delete sprite '".concat((0,vn.eb)(h),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return g(null)},onConfirm:function(){t.deleteFile(h),g(null)}})}),(0,ge.tZ)(Ot.Z,{isOpen:d,onRequestClose:function(){return p(!1)},children:(0,ge.tZ)(ng,{kind:"sprites",renderItem:ag,onRequestClose:function(){return p(!1)}})}),(0,ge.tZ)(V.default,{id:"3831399815",children:[".preview-img.jsx-3831399815{width:var(--space-32);height:var(--space-32);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden;}",".preview-img.jsx-3831399815 img.jsx-3831399815{width:100%;image-rendering:pixelated;image-rendering:crisp-edges;}"]})]})};function lg(e){var t=e.name,n=e.url,r=e.add;return(0,ge.BX)(de.Ug,{justify:"space-between",align:"center",children:[(0,ge.BX)(de.gC,{spacing:1,children:[(0,ge.tZ)(ue.Z,{children:t}),(0,ge.tZ)("audio",{src:n,controls:!0})]}),(0,ge.tZ)(ce.Z,{onClick:r,children:"Import"})]})}var cg=function(){var e=(0,Oe.Z)(),t=e.fs,n=e.session,r=(0,hn.Z)(),i=(0,Ft.Z)().showError,a=K.useState(null),o=(0,D.Z)(a,2),s=o[0],l=o[1],c=K.useState(!1),u=(0,D.Z)(c,2),d=u[0],p=u[1],f=(0,Ms.Z)(),m=((0,Gr.Z)({path:"sounds",initialExpanded:!0,fs:t}).children||[]).filter((function(e){return e.type===gn.Tv.File})).map((function(e){return e.filename})).sort(),h=["audio/ogg","audio/mpeg","audio/wav"],g=function(e){var n="sounds/".concat(e.name);if(m.includes(n))return i("sound '".concat((0,vn.eb)(e.name),"' already exists"));e.arrayBuffer().then((function(e){t.writeFile(n,ur.Z.from(e))}))},v=[{icon:(0,ge.tZ)(wh.Z,{}),action:function(){return p(!0)}},{icon:(0,ge.tZ)(kh.Z,{}),action:function(){return $h(g,h)}}];return(0,ge.BX)(qh,{fileDrag:{accept:h,onDrop:g},children:[(0,ge.tZ)(Wh,{sub:!0,title:"Sounds",actions:v}),(0,ge.tZ)(Bs.Z,{height:"4px"}),(0,ge.tZ)("div",{children:m.map((function(e){var a=(0,vn.eb)(e),o="sounds/".concat(e),s=f?[{name:"Insert load code",action:function(){return f({code:"loadSound(".concat(JSON.stringify(a),", ").concat(JSON.stringify(o),");")})}}]:[];return(0,ge.tZ)(Jh,{isActive:o===r,onClick:function(){return n.openFile(o)},onRename:function(n){t.moveFile(o,"sounds/".concat(n,".").concat((0,vn.r6)(e))).then((function(e){e.error&&i("failed to rename")}))},name:a,options:[].concat(s,[{name:"Rename",action:function(){}},{name:"Delete",action:function(){return l(o)},danger:!0}])},a)}))}),s&&(0,ge.tZ)(Ot.Z,{isOpen:Boolean(s),onRequestClose:function(){return l(null)},children:(0,ge.tZ)(Ym.Z,{danger:!0,prompt:"Delete sound '".concat((0,vn.eb)(s),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return l(null)},onConfirm:function(){t.deleteFile(s),l(null)}})}),(0,ge.tZ)(Ot.Z,{isOpen:d,onRequestClose:function(){return p(!1)},children:(0,ge.tZ)(ng,{kind:"sounds",renderItem:lg,onRequestClose:function(){return p(!1)},onAdd:function(e,t){return new window.Audio(t).play()}})})]})};function ug(e){var t=e.file,n=e.name,r=(0,Oe.Z)().session,i=(0,Jr.Z)()===t;return(0,ge.BX)("div",{onClick:function(){r.setPreviewedFile(null),r.setPreviewedFile(t)},className:"jsx-4087658189 entry",children:[(0,ge.BX)(de.Ug,{spacing:1,align:"center",children:[i?(0,ge.tZ)(Ye.Z,{}):(0,ge.tZ)(Uu.Z,{}),(0,ge.tZ)(ue.Z,{foreground:i?1:2,fontWeight:i?"medium":"regular",children:null!==n&&void 0!==n?n:(0,vn.eb)(t)})]}),(0,ge.tZ)(V.default,{id:"4087658189",children:[".entry.jsx-4087658189{cursor:pointer;}"]})]})}var dg=function(){var e=K.useState(!0),t=(0,D.Z)(e,2),n=t[0],r=t[1],i=K.useState(!1),a=(0,D.Z)(i,2),o=a[0],s=a[1],l=(0,Oe.Z)().fs,c=(0,et.I0)(),u=(0,Hn.Z)(),d=(0,Gr.Z)({path:"learn",initialExpanded:!0,fs:l});K.useEffect((function(){var e=!1;return l.stat("README.md").then((function(t){e||t.exists&&(s(!0),c({wid:u,type:"LOAD_FILE",path:"README.md"}))})),function(){e=!0}}),[]);var p=(d.children||[]).filter((function(e){return e.type===gn.Tv.File&&e.filename.endsWith(".md")})).map((function(e){return e.filename})).sort();return K.useEffect((function(){p.forEach((function(e){c({wid:u,type:"LOAD_FILE",path:"learn/".concat(e)})}))}),[p]),(0,ge.BX)(qh,{children:[(0,ge.tZ)(Wh,{sub:!0,title:"Learn",actions:[{icon:(0,ge.tZ)(Jc.Z,{rotate:n?0:-90}),action:function(){return r(!n)}}]}),n&&(0,ge.BX)(de.gC,{spacing:1,children:[(0,ge.tZ)("div",{}),o&&(0,ge.tZ)(ug,{name:"Intro",file:"README.md"}),p.map((function(e){return(0,ge.tZ)(ug,{file:"learn/".concat(e)},e)}))]})]})};function pg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pg(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mg(e){var t=K.useState(!1),n=(0,D.Z)(t,2),r=n[0],i=n[1];return(0,ge.BX)("div",fg(fg({},e),{},{className:"jsx-3983311616 kaboom",children:[(0,ge.BX)(de.gC,{spacing:1,children:[(0,ge.tZ)(Yh,{}),(0,ge.tZ)(tg,{}),(0,ge.tZ)(sg,{}),(0,ge.tZ)(cg,{}),(0,ge.tZ)(dg,{}),(0,ge.tZ)("div",{className:"jsx-3983311616"}),(0,ge.tZ)(ce.Z,{Icon:Ef.Z,size:"small",onClick:function(){return window.open("https://kaboomjs.com")},children:"Docs"}),(0,ge.tZ)(ce.Z,{Icon:Ef.Z,size:"small",onClick:function(){return window.open("https://kaboomjs.com/play")},children:"Examples"}),(0,ge.tZ)(ce.Z,{Icon:Gh.Z,size:"small",onClick:function(){return i(!0)},children:"What's new"})]}),(0,ge.tZ)(Ot.Z,{isOpen:r,onRequestClose:function(){return i(!1)},children:(0,ge.tZ)(yn.Z,{css:[Zn.l0.colWithGap(16),Zn.l0.p(32),"",""],children:(0,ge.tZ)(Ka.Z,{source:'\n# New Kaboom Workspace\n\n- **No weird delay when run after editing.** Just press Cmd + S to refresh webview and quickly iterate!\n- **Helpful error reporting.** No need to go into browser console every time. The kaboom console displays your errors nicely.\n- **Support NPM packages and typescript by default.** Kaboom dev server builds your code with esbuild on the fly.\n- **Replit DB and Auth integration.** Make a score board even multiplayer with DB and Auth!\n- **In editor tutorial.** The template comes with a nice intro tutorial which you can learn and code along.\n- **Autocomplete.** Updated kaboom lib comes with detailed jsdoc for every function. No need to pull your hair out to figure out how certain functions work!\n- **HTML template.** Easily customize the html for your game.\n- **Total control over which version of Kaboom you use.** it\'s managed by NPM.\n- **Assets Library** Grab some quick assets to test out a game idea.\n- **Transparent dev server.** The dev server scripts are just in the repl, customize them or toss them out if you want to. Or turn it into a multiplayer game server!\n- **New library version** The template comes with kaboom2000 (beta), with bunch of [new stuff and improvements](https://github.com/replit/kaboom/blob/master/CHANGELOG.md)\n\n## Migration Guide\n\n- The kaboom template now will not generate the initializing and assets loading code (`kaboom()`, `loadSprite()` etc.) for you, allowing more customized setup, and making it more portable with using kaboom outside replit.\n\n```js\nimport kaboom from "kaboom";\n\n// initialize context\nkaboom();\n\n// load assets\nloadSprite("bean", "sprites/bean.png");\nloadSound("coin", "sounds/coin.mp3");\n\n// the rest is the same\nconst player = add([\n\tsprite("bean"),\n\tarea(),\n]);\n```\n\nFor easier assets loading, use the "Insert load code" option in the asset entry option menu.\n\n- The template by default is running `kaboom@next`, which is currently the beta version of kaboom2000. It contains breaking changes, all listed in [CHANGELOG.md](https://github.com/replit/kaboom/blob/master/CHANGELOG.md). If you don\'t feel like migrating now, you can always `npm install kaboom@5.1`\n',renderers:{code:Qa.Z,link:Ya._}})})}),(0,ge.tZ)(V.default,{id:"3983311616",children:[".kaboom.jsx-3983311616{background:var(--background-default);padding:var(--space-8);border-top-right-radius:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);overflow-y:scroll;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}"]})]}))}var hg=n(24858),gg=n(94793);function vg(e){return(0,ge.BX)(ge.HY,{children:[(0,ge.tZ)(Ee.Z,{truncate:!0,level:5,children:"Call stack"}),(0,ge.tZ)(de.gC,{align:"stretch",constrainWidth:!0,children:e.frames.map((function(t){return(0,ge.tZ)(bg,{frame:t,onClick:e.onFrameClick},t.id)}))})]})}function bg(e){var t,n,r=e.frame,i=e.onClick,a=null===(t=r.source)||void 0===t?void 0:t.name,o=null===(n=r.source)||void 0===n?void 0:n.path,s=a&&(0,gg.om)(a),l=o&&(0,gg.om)(o),c=o&&(0,gg.IT)(o);return(0,ge.BX)(ge.HY,{children:[(0,ge.BX)("div",{onClick:function(){return c&&i(c,r.line)},className:"jsx-1840827836 frame",children:[(0,ge.tZ)("div",{className:"jsx-1840827836 label name",children:r.name}),(0,ge.BX)("div",{className:"jsx-1840827836 label path",children:[(0,ge.tZ)("span",{className:"jsx-1840827836 line",children:r.line}),s||l||a||o]})]}),(0,ge.tZ)(V.default,{id:"1840827836",children:[".frame.jsx-1840827836{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;max-width:100%;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);border-radius:var(--border-radius-4);font-size:var(--font-size-small);font-family:var(--font-family-code);}",".frame.jsx-1840827836:hover{background-color:var(--background-higher);color:var(--foreground-default);}",".label.jsx-1840827836{font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}",".name.jsx-1840827836{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;background-color:var(--background-higher);padding:1px 2px;border-radius:2px;}",".path.jsx-1840827836{-webkit-flex:0 1 auto;-ms-flex:0 1 auto;flex:0 1 auto;}",".line.jsx-1840827836{display:inline-block;margin-right:var(--space-8);background-color:var(--background-higher);padding:1px 2px;border-radius:2px;}"]})]})}function yg(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return xg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xg(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function xg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wg(e){var t,n=[],r=(0,Ia.Z)("flag-debugger-v2"),i=yg(e.breakpoints);try{for(i.s();!(t=i.n()).done;){var a,o=(0,D.Z)(t.value,2),s=o[0],l=yg(o[1]);try{for(l.s();!(a=l.n()).done;){var c=a.value;n.push((0,ge.tZ)(kg,{breakpoint:c,file:s,line:c.line,verified:c.verified,supportsLogPoints:r,logMessage:c.logMessage,onClick:e.onBreakpointClick,onUpdate:e.onUpdate},"".concat(s,":").concat(c.line,":").concat(c.pid1Id,":").concat(c.dapId)))}}catch(u){l.e(u)}finally{l.f()}}}catch(u){i.e(u)}finally{i.f()}return(0,ge.BX)(ge.HY,{children:[(0,ge.tZ)(Ee.Z,{truncate:!0,level:5,children:"Breakpoints"}),n.length>0?(0,ge.tZ)(de.gC,{align:"stretch",constrainWidth:!0,children:n}):(0,ge.BX)(ue.Z,{size:"xsmall",foreground:2,children:["To start, add a breakpoint ",(0,ge.tZ)("span",{className:"jsx-1723460320 breakpoint"})," by clicking on the line number.",(0,ge.tZ)(V.default,{id:"1723460320",children:[".breakpoint.jsx-1723460320{display:inline-block;background-color:var(--accent-primary-default);border-radius:50%;width:8px;height:8px;}"]})]})]})}function kg(e){var t=e.breakpoint,n=e.file,r=e.line,i=e.verified,a=e.supportsLogPoints,o=e.logMessage,s=e.onClick,l=e.onUpdate,c=(0,gg.om)(n),u=K.useState(Boolean(o)),d=(0,D.Z)(u,2),p=d[0],f=d[1],m=K.useState(null!==o&&void 0!==o?o:""),h=(0,D.Z)(m,2),g=h[0],v=h[1];return(0,ge.BX)(ge.HY,{children:[(0,ge.BX)(de.gC,{spacing:1,align:"stretch",children:[(0,ge.BX)("div",{className:"jsx-3045418693 breakpoint",children:[(0,ge.BX)("div",{onClick:function(){s(n,r)},className:"jsx-3045418693 frame",children:[(0,ge.tZ)("div",{className:"jsx-3045418693 "+(jt()("circle",{verified:i})||"")}),(0,ge.tZ)("div",{className:"jsx-3045418693 line",children:r}),(0,ge.tZ)("div",{className:"jsx-3045418693 location",children:(0,ge.tZ)("span",{className:"jsx-3045418693 path",children:c||n})})]}),a&&(0,ge.tZ)(Jc.Z,{size:16,className:"chevron",rotate:p?180:0,onClick:function(){return f(!p)}})]}),p&&(0,ge.BX)(de.gC,{spacing:1,align:"stretch",children:[(0,ge.tZ)(Ht.ZP,{label:"log message",name:"logMessage",value:g,onChange:function(e){return v(e.currentTarget.value)},spellCheck:!1}),(0,ge.tZ)(ce.Z,{onClick:function(){return l({breakpoint:t,logMessage:g})},children:"Save"})]})]}),(0,ge.tZ)(V.default,{id:"3045418693",children:[".breakpoint.jsx-3045418693{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;max-width:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".frame.jsx-3045418693{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);border-radius:var(--border-radius-4);font-size:var(--font-size-default);}",".frame.jsx-3045418693:hover{background-color:var(--background-higher);color:var(--foreground-default);}",".circle.jsx-3045418693{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;background-color:var(--accent-primary-default);border-radius:50%;width:11px;height:11px;margin-left:var(--space-8);margin-right:var(--space-8);opacity:0.5;}",".verified.jsx-3045418693{opacity:1;}",".line.jsx-3045418693{font-family:var(--font-family-code);background-color:var(--background-higher);padding:1px 2px;border-radius:2px;}",".location.jsx-3045418693{font-family:var(--font-family-code);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);}",".path.jsx-3045418693{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}",".chevron.jsx-3045418693{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;padding:var(--space-16);}"]})]})}function Zg(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return jg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jg(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function jg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Og(e){var t=K.useState(!1),n=(0,D.Z)(t,2),r=n[0],i=n[1],a=[],o=[];if(e.variables.length>0){var s,l=e.variables[0].parentVariableReference,c=Zg(e.variables);try{for(c.s();!(s=c.n()).done;){var u=s.value;u.parentVariableReference===l?a.push(u):o.push(u)}}catch(d){c.e(d)}finally{c.f()}}return(0,ge.BX)(ge.HY,{children:[(0,ge.tZ)(Ee.Z,{truncate:!0,level:5,children:"Variables"}),(0,ge.BX)(de.gC,{align:"stretch",constrainWidth:!0,children:[a.map((function(t){return(0,ge.tZ)(Eg,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)})),o.length>0&&(0,ge.BX)(ge.HY,{children:[(0,ge.BX)(ce.Z,{filled:!1,border:!1,onClick:function(){return i((function(e){return!e}))},children:["See ",r?"Less":"More"]}),r&&o.map((function(t){return(0,ge.tZ)(Eg,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)}))]})]})]})}function Eg(e){var t=e.depth,n=e.variable,r=e.client,i=K.useState(!1),a=(0,D.Z)(i,2),o=a[0],s=a[1],l=K.useState([]),c=(0,D.Z)(l,2),u=c[0],d=c[1];return K.useEffect((function(){o&&r.fetchVariables(n.variablesReference).then((function(e){return d(e)}),(function(){return s(!1)}))}),[o,r,n.variablesReference]),(0,ge.BX)(ge.HY,{children:[(0,ge.BX)("div",{onClick:function(){n.variablesReference>0&&s((function(e){return!e}))},className:V.default.dynamic([["3900605597",[o?0:-90,t]]])+" variable",children:[(0,ge.tZ)("div",{className:V.default.dynamic([["3900605597",[o?0:-90,t]]])+" gutter",children:n.variablesReference>0?(0,ge.tZ)("div",{className:V.default.dynamic([["3900605597",[o?0:-90,t]]])+" chevron",children:(0,ge.tZ)(Jc.Z,{})}):null}),(0,ge.BX)("div",{className:V.default.dynamic([["3900605597",[o?0:-90,t]]])+" label",children:[n.name,""!==n.value&&": "]}),(0,ge.tZ)("div",{className:V.default.dynamic([["3900605597",[o?0:-90,t]]])+" label value",children:n.value})]}),o?(0,ge.tZ)(de.gC,{align:"stretch",constrainWidth:!0,children:u.map((function(e){return(0,ge.tZ)(Eg,{depth:t+1,variable:e,client:r},e.parentVariableReference+"/"+e.name)}))}):null,(0,ge.tZ)(V.default,{id:"3900605597",dynamic:[o?0:-90,t],children:[".chevron.__jsx-style-dynamic-selector{-webkit-transform:rotate(".concat(o?0:-90,"deg);-ms-transform:rotate(").concat(o?0:-90,"deg);transform:rotate(").concat(o?0:-90,"deg);-webkit-transition:0.1s -webkit-transform;-webkit-transition:0.1s transform;transition:0.1s transform;}"),".gutter.__jsx-style-dynamic-selector{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;width:var(--space-16);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}",".variable.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);border-radius:var(--border-radius-4);font-size:var(--font-size-default);padding-left:calc(".concat(t," * var(--space-16));font-family:var(--font-family-code);}"),".variable.__jsx-style-dynamic-selector:hover{background-color:var(--background-higher);color:var(--foreground-default);}",".label.__jsx-style-dynamic-selector{font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;}",".value.__jsx-style-dynamic-selector{text-align:right;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1;}"]})]})}function _g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_g(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sg(e){return(0,ge.tZ)(xe.Z,Cg(Cg({},e),{},{children:(0,ge.tZ)("path",{d:"M11 7L6 12L11 17M18 7L13 12L18 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}var Pg=n(97888),Ng=n(16733),Tg=n(82490),Ig=n(13953),Rg=n(11069);function Dg(e){var t=e.client,n=(0,Vn.Z)(null===t||void 0===t?void 0:t.state),r=(0,Vn.Z)(null===t||void 0===t?void 0:t.supportsStepBack);return(0,ge.BX)(yn.Z,{css:Zn.l0.rowWithGap(2),children:[r&&(0,ge.BX)(ge.HY,{children:[(0,ge.tZ)(An.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){return null===t||void 0===t?void 0:t.reverseContinue()},alt:"Last Breakpoint",tooltipText:"Last Breakpoint",tooltipPlacement:"bottom",children:(0,ge.tZ)(Sg,{})}),(0,ge.tZ)(An.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){return null===t||void 0===t?void 0:t.back()},alt:"Step Back",tooltipText:"Step Back",tooltipPlacement:"bottom",children:(0,ge.tZ)(Pg.Z,{})})]}),(0,ge.tZ)(Lg,{stop:function(){return null===t||void 0===t?void 0:t.stop()},start:function(){return null===t||void 0===t?void 0:t.start()},state:n}),(0,ge.tZ)(An.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){return null===t||void 0===t?void 0:t.next()},alt:"Next Step",tooltipText:"Next Step",tooltipPlacement:"bottom",children:(0,ge.tZ)(Tg.Z,{})}),(0,ge.tZ)(An.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){return null===t||void 0===t?void 0:t.continue()},alt:"Next Breakpoint",tooltipText:"Next Breakpoint",tooltipPlacement:"bottom",children:(0,ge.tZ)(Ig.Z,{})})]})}var Ag=(0,or.F4)({"0%":{opacity:.2},"50%":{opacity:1},"100%":{opacity:.2}});function Lg(e){var t=e.state,n=e.start,r=e.stop;return"terminated"===t?(0,ge.tZ)(An.Z,{css:Zn.l0.color.accentPrimaryDefault,size:40,onClick:n,alt:"Run",tooltipText:"Run",tooltipPlacement:"bottom",children:(0,ge.tZ)(el.Z,{filled:!0})}):"stopping"===t||null===t?(0,ge.tZ)(An.Z,{size:40,disabled:!0,alt:"Loading",tooltipText:"Loading",tooltipPlacement:"bottom",children:(0,ge.tZ)(Rg.Z,{})}):(0,ge.tZ)(An.Z,{css:"initializing"===t||"preinitializing"===t?[Zn.l0.color.foregroundDimmer,{animationName:Ag.toString(),animationDuration:"2s",animationIterationCount:"infinite"}]:Zn.l0.color.accentPrimaryDefault,size:40,onClick:r,alt:"Stop",tooltipText:"Stop",tooltipPlacement:"bottom",children:(0,ge.tZ)(Ng.Z,{filled:!0})})}function Bg(e){var t=e.children;return(0,ge.BX)(Gn.Z,{background:"default",css:[Zn.l0.height("100%"),Zn.l0.width("100%"),Zn.l0.p(8),Zn.l0.overflow("auto"),{borderTopRightRadius:Zn.TV.borderRadius4},"",""],children:[(0,ge.BX)(de.gC,{spacing:2,align:"stretch",justify:"center",constrainWidth:!0,children:[(0,ge.BX)(de.Ug,{spacing:1,align:"center",justify:"space-between",constrainWidth:!0,children:[(0,ge.tZ)(Ee.Z,{truncate:!0,level:4,children:"Debugger"}),(0,ge.tZ)(Cu.Z,{link:"https://replit.canny.io/general-feedback/p/debugger-feedback"})]}),(0,ge.tZ)("a",{href:"https://replit.canny.io/general-feedback/p/debugger-feedback",target:"_blank",rel:"noopener",className:"jsx-2159824700",children:"Send feedback"}),t]}),(0,ge.tZ)(V.default,{id:"2159824700",children:["a.jsx-2159824700{font-size:var(--font-size-default);color:var(--accent-primary-default);font-weight:var(--font-weight-medium);}"]})]})}function Mg(e){var t=e.wid,n=(0,Oe.Z)().debuggest,r=(0,Vn.Z)(n.mainClient),i=(0,Vn.Z)(r?r.state:null),a=(0,Vn.Z)(r?r.stackFrames:null),o=(0,Vn.Z)(r?r.variables:null),s=(0,Vn.Z)(r?r.breakpoints:null),l=(0,et.I0)(),c=K.useCallback((function(e,n){var r=(0,gg.om)(e);r&&l({type:"OPEN_DEEP_LINK",path:r,line:n,wid:t})}),[l,t]);return(0,ge.BX)(Bg,{children:[(0,ge.tZ)(Dg,{client:r}),s&&(0,ge.tZ)(wg,{breakpoints:s,onBreakpointClick:c,onUpdate:function(e){var t=e.breakpoint,n=e.logMessage;r&&t.pid1Id&&r.updateBreakpoint(t.pid1Id,{logMessage:n})}}),o&&r&&"paused"===i&&(0,ge.tZ)(Og,{client:r,variables:o}),a&&"paused"===i&&(0,ge.tZ)(vg,{frames:a,onFrameClick:c}),r&&(0,ge.tZ)("div",{className:"jsx-3516069037 logs-button",children:(0,ge.tZ)(ce.Z,{size:"small",onClick:function(){return function(e){if("undefined"===typeof Blob)return;var t=new Blob([e],{type:"text/plain"}),n=document.createElement("a");n.download="debugger-logs.txt",n.href=URL.createObjectURL(t),n.dataset.downloadurl=["text/plain",n.download,n.href].join(":"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout((function(){URL.revokeObjectURL(n.href)}),1500)}(r.getDebugLogs())},children:"Download Logs"})}),(0,ge.tZ)(V.default,{id:"3516069037",children:[".instructions.jsx-3516069037{height:var(--space-16);}",".logs-button.jsx-3516069037{position:absolute;bottom:var(--space-8);right:var(--space-8);}"]})]})}var Ug=n(33058);function Xg(){var e=(0,Oe.Z)().session,t=K.useState(e.getPreviewedYoutubeVideo()),n=(0,D.Z)(t,2),r=n[0],i=n[1];return K.useEffect((function(){return i(e.getPreviewedYoutubeVideo()),e.onPreviewedYoutubeVideoChanged(i)}),[e]),r}function Fg(e){var t=e.video,n=e.onClick,r=Xg(),i=t.videoId===r;return(0,ge.BX)("div",{onClick:function(){return n(t.videoId)},className:"jsx-1680913095 "+(jt()("youtube-video",{"is-selected":i})||""),children:[(0,ge.BX)("div",{className:"jsx-1680913095 thumbnail-container",children:[(0,ge.tZ)(Ug.Z,{width:"320px",height:"180px",src:t.thumbnail,alt:t.title}),(0,ge.tZ)("span",{className:"jsx-1680913095 duration",children:t.duration})]}),(0,ge.BX)(de.gC,{children:[(0,ge.tZ)(Ee.Z,{level:3,className:"yt-video-title",children:t.title}),(0,ge.BX)(de.Ug,{children:[(0,ge.BX)(ue.Z,{className:"yt-video-views",children:[t.viewCount," views"]}),(0,ge.tZ)(ue.Z,{className:"yt-video-published-at",children:t.publishedAt})]})]}),(0,ge.tZ)(V.default,{id:"1680913095",children:[".youtube-video.jsx-1680913095{font-family:Roboto,Arial,sans-serif;margin:0 8px 20px 8px;position:relative;max-width:320px;min-width:260px;width:100%;cursor:pointer;}",".is-selected.jsx-1680913095,.youtube-video.jsx-1680913095:hover{background-color:var(--background-root);}",".thumbnail-container.jsx-1680913095{position:relative;}",".duration.jsx-1680913095{position:absolute;bottom:3px;right:0;font-family:Roboto,Arial,sans-serif;font-weight:500;font-size:12px;line-height:12px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:4px;background-color:rgba(0,0,0,0.8);color:#fff;padding:3px 4px;height:12px;border-radius:2px;-webkit-letter-spacing:0.35px;-moz-letter-spacing:0.35px;-ms-letter-spacing:0.35px;letter-spacing:0.35px;box-sizing:content-box;}",".youtube-video.jsx-1680913095 .yt-video-title{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;max-height:40px;font-family:Roboto,Arial,sans-serif;color:#030303;font-weight:500;font-size:14px;white-space:normal;text-overflow:ellipsis;line-height:20px;-webkit-letter-spacing:0.25px;-moz-letter-spacing:0.25px;-ms-letter-spacing:0.25px;letter-spacing:0.25px;margin:6px 0;overflow:hidden;}",".youtube-video.jsx-1680913095 .yt-video-views::after{content:'\u2022';margin:0 4px;}",".youtube-video.jsx-1680913095 .yt-video-views,.youtube-video.jsx-1680913095 .yt-video-published-at{color:#606060;font-family:Roboto,Arial,sans-serif;font-size:14px;font-weight:400;line-height:18px;}",".replit-ui-theme-root.dark .yt-video-views,.replit-ui-theme-root.dark .yt-video-published-at{color:#aaa;}",".replit-ui-theme-root.dark .yt-video-title{color:#fff;}"]})]})}function zg(){var e,t=(0,Oe.Z)().session,n=(0,fe.Z)(),r=(0,me.Jge)({variables:{replId:n}}),i=r.data,a=r.error,o=r.loading,s=(null===i||void 0===i?void 0:i.sampleYoutubeVideos)||[];return(0,ge.BX)("div",{className:"jsx-3650882523 youtube-plugin",children:[a?null:(0,ge.tZ)(de.gC,{className:"heading-container",align:"center",justify:"center",children:(0,ge.tZ)(Ee.Z,{level:3,children:"Recommended Tutorials"})}),s.map((function(e){return(0,ge.tZ)(Fg,{video:e,onClick:function(r){var a;if(r!==t.getPreviewedYoutubeVideo()){if("Repl"!==(null===i||void 0===i||null===(a=i.repl)||void 0===a?void 0:a.__typename))throw new Error("Expected repl from graph");var o=i.repl,s=o.language,l=o.title;(0,ct.track)(ct.events.YOUTUBE_VIDEO_SELECTED,{video:e.title,replId:n,language:s,replTitle:l}),t.setPreviewedYoutubeVideo(r)}else t.setPreviewedYoutubeVideo(null)}},e.videoId)})),o||"Repl"!==(null===i||void 0===i||null===(e=i.repl)||void 0===e?void 0:e.__typename)?(0,ge.tZ)("div",{className:"jsx-3650882523 spinner-container",children:(0,ge.tZ)(Et.Z,{style:{margin:"10px auto",width:"35px",height:"35px"}})}):null,a?(0,ge.tZ)(de.gC,{className:"error-container",align:"center",justify:"center",children:(0,ge.tZ)(ue.Z,{className:"error-text",children:"Something went wrong trying to load videos. Please refresh and try again."})}):null,(0,ge.tZ)(V.default,{id:"3650882523",children:[".youtube-plugin.jsx-3650882523{background-color:var(--background-default);overflow-y:auto;height:100%;width:100%;}",".youtube-plugin.jsx-3650882523 .heading-container{width:100%;max-width:320px;margin:var(--space-8);}",".youtube-plugin.jsx-3650882523 .spinner-container.jsx-3650882523{width:100%;max-width:320px;}",".youtube-plugin.jsx-3650882523 .error-container{margin:var(--space-8);}",".youtube-plugin.jsx-3650882523 .error-text{color:var(--accent-negative-default);}"]})]})}function Vg(e){var t=e.id,n="".concat("https://www.youtube.com/embed/").concat(t,"?rel=0");return(0,ge.BX)("div",{className:"jsx-2201796602 embed",children:[(0,ge.tZ)("iframe",{src:n,frameBorder:"0",className:"jsx-2201796602 iframe"}),(0,ge.tZ)(V.default,{id:"2201796602",children:[".embed.jsx-2201796602{position:relative;padding:var(--space-8);width:100%;height:100%;overflow:hidden;}",".iframe.jsx-2201796602{width:100%;height:100%;}"]})]})}function Hg(){var e=Xg(),t=(0,Oe.Z)().session;return(0,ge.BX)("div",{className:"jsx-1571942811 youtube-preview-plugin",children:[e?(0,ge.BX)(ge.HY,{children:[(0,ge.tZ)(Vg,{id:e}),(0,ge.tZ)("div",{"aria-label":"Close","data-microtip-position":"left",role:"tooltip",className:"jsx-1571942811 close-button",children:(0,ge.tZ)(ce.Z,{Icon:zt.Z,border:!0,filled:!0,onClick:function(){return t.setPreviewedYoutubeVideo(null)}})})]}):(0,ge.tZ)("div",{className:"jsx-1571942811 loading",children:(0,ge.tZ)(Et.Z,{style:{margin:"10px auto",width:"35px",height:"35px"}})}),(0,ge.tZ)(V.default,{id:"1571942811",children:[".youtube-preview-plugin.jsx-1571942811{background-color:var(--background-default);height:100%;width:100%;}",".youtube-preview-plugin.jsx-1571942811:hover .close-button.jsx-1571942811{opacity:1;}",".loading.jsx-1571942811{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".close-button.jsx-1571942811{position:absolute;top:var(--space-8);right:var(--space-8);cursor:pointer;-webkit-transition:0.2s;transition:0.2s;opacity:0;}"]})]})}var Gg=n(538),Wg=n(84472);function qg(e){(0,Wg.Z)(e),e.register("runflow",y),e.register("header",r),e.register("config",i),e.register("sidenav",a),e.register("filetree",Mr),e.register("fileheader",o),e.register("editor",s),e.register("terminal2",ua),e.register("console",da),e.register("replboxconsole",pa),e.register("floatingrun",fa),e.register("help",l),e.register("libsearch",ga),e.register("packager",va),e.register("mediaview",c),e.register("preferences",Za),e.register("git",ja),e.register("replboxdisplay2",Oa),e.register("snack",u),e.register("vnc",Ca),e.register("webview",Sa),e.register("fileviewercontroller",d),e.register("markdownviewer",p),e.register("instructionsviewer2",f),e.register("adminpanel",m),e.register("blank",Mo),e.register("lock",h),e.register("hackerupgradeprompt",g),e.register("desktoplayout",v),e.register("audio",b),e.register("deeplink",xs),e.register("browsernotifications",x),e.register("database",w),e.register("commandbar",k),e.register("annotations",Z),e.register("shell",j),e.register("autograder",O),e.register("unittests",E),e.register("educationpane",_),e.register("cluicurl",C),e.register("pedit",S),e.register("kaboombar",P),e.register("kaboombar2",N),e.register("enveditor",hg),e.register("debugpanel",T),e.register("youtube",I),e.register("youtubepreview",R),e.register("codemirror",Gg)}var Kg=n(17271),Yg=n(33856),Qg=n(8283),$g=n(22272),Jg=n(72731),ev=n(58372),tv=n(14862),nv=n(44180),rv=n(7186);function iv(){return(iv=(0,A.Z)(G().mark((function e(t){var n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qo.l){e.next=2;break}throw new Error("Expected Apollo client");case 2:return e.next=4,Qo.l.query({query:me.UxF,variables:{id:t}});case 4:return n=e.sent,r=n.data,e.abrupt("return","Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl.title:null);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function av(e){var t=(0,Oe.Z)(),n=t.container,r=t.presence,i=e.wid;K.useEffect((function(){var e=r.onUserJoin((function(t){var r,i=null===(r=n.getContext())||void 0===r?void 0:r.repl;if(i){var a=t.username;return function(e){return iv.apply(this,arguments)}(i.id).then((function(e){e&&Ts({title:"",body:"".concat(a," joined ").concat(e),tag:"".concat(i.id,"-").concat(a,"-joined"),iconByUsername:a,cacheDuration:9e5})})),function(){e()}}}))}),[i,r,n,e])}var ov=n(20391);var sv=n(3342);function lv(e,t){var n=".cursor-".concat(uv(e)," {\n  position: relative;\n  background-color: var(--accent-primary-strongest);\n  border-left: 2px solid ").concat(t,";\n  pointer-events: none;\n}\n.selection-").concat(uv(e)," {\n  position: relative;\n  background-color: ").concat(t,";\n  opacity: 0.2;\n  pointer-events: none;\n}\n.cursor-tag-").concat(uv(e),'::after {\n  content: "').concat(e,'";\n  position: relative;\n  bottom: calc(100% - 4px);\n  left: -2px;\n  background-color: ').concat(t,";\n  color: white;\n  z-index: 10;\n  padding: 1px;\n  border-radius: 3px;\n  pointer-events: none;\n  animation: fadeOut 2s ease-in forwards;\n}\n\n@keyframes fadeOut {\n  0% {opacity: 1;}\n  100% {opacity: 0;} \n}\n"),r=document.createElement("style");r.type="text/css",r.id=cv(e),r.appendChild(document.createTextNode(n)),document.head&&document.head.appendChild(r)}function cv(e){return"".concat(e,"-multiplayer-cursor-style")}function uv(e){return e.replace(/_/g,"-")}function dv(e){var t=(0,Oe.Z)(),n=t.presence,r=t.session;K.useEffect((function(){var e=!1,t=n.onActiveUsersChange((function(t){e?e=!1:t.forEach((function(e){lv(e.username,e.color)}))})),r=n.onUserJoin((function(t){var n=t.username,r=t.color;e=!0,lv(n,r)})),i=n.onUserLeave((function(t){e=!0,function(e){var t=document.getElementById(cv(e));document.head&&t&&document.head.removeChild(t)}(t.username)}));return function(){t(),r(),i()}}),[e,n,r])}function pv(e){var t=e.wid,n=e.store.dispatch,r=(0,Oe.Z)(),i=r.debuggest,a=r.dotReplit,o=(0,fe.Z)(),s=(0,me.sjq)({variables:{replId:o}}).data,l="Repl"===(null===s||void 0===s?void 0:s.repl.__typename)?s.repl:null,c=function(e){var t=e.repl,n=e.dotReplit,r=e.debuggest;return(0,K.useEffect)((function(){if(t){if(!t.lang.hasDAP)return n.watch((function(e){var t;e.error||null!==(t=e.config.debugger)&&void 0!==t&&t.support&&r.connect()}));r.connect()}}),[t,r]),(0,Vn.Z)(r.mainClient)}({debuggest:i,dotReplit:a,repl:l});!function(e){(0,K.useEffect)((function(){if(e){var t=e.onStarted((function(e){(0,ct.track)(ct.events.DEBUGGER_STARTED,{joined:e})})),n=e.onPaused((function(e){(0,ct.track)(ct.events.DEBUGGER_PAUSED,{reason:e})})),r=e.onBreakpoint((function(t){(0,ct.track)(ct.events.DEBUGGER_BREAKPOINT_TOGGLED,{action:t,state:e.state.current})}));return function(){t(),n(),r()}}}),[e])}(c),function(e,t){var n,r=t.onOutput,i=t.onOpenFile,a=(0,jl.Z)(r),o=(0,jl.Z)(i);(0,K.useEffect)((function(){if(e)return e.onOutput((function(e){a.current(e)}))}),[e]);var s=(0,Vn.Z)(e?e.stackFrames:null),l=null===s||void 0===s?void 0:s[0],c=null===l||void 0===l||null===(n=l.source)||void 0===n?void 0:n.path,u=null===l||void 0===l?void 0:l.line;(0,K.useEffect)((function(){if(c&&u&&e){var t=(0,gg.om)(c);t?o.current({path:t,line:u}):e.stepOut()}}),[e,c,u])}(c,{onOpenFile:function(e){var r=e.path,i=e.line;n({type:"OPEN_DEEP_LINK",path:r,line:i,wid:t})},onOutput:function(e){n((0,ft.yY)({wid:t,message:e,type:"",raw:!1}))}}),(0,K.useEffect)((function(){c&&l&&function(e){var t=e.ws,n=e.sideNavIndex,r=t.store,i=r.dispatch,a=(0,r.getState)().plugins,o="debugpanel",s="debugpanel";Object.values(a).find((function(e){return e.type===s}))||(i({type:"LOAD_PLUGIN",pluginPud:o,pluginType:s,title:"debugpanel"}),i({type:"ADD_SIDE_NAV_ITEM",index:n,navItem:{pud:o,pluginType:s,tooltip:"Debugger",svg:"Debugger"}}))}({ws:e,sideNavIndex:l.lang.hasGit?2:1})}),[c,l,e])}var fv=n(98811),mv=n(86797),hv=n(25108);function gv(e){return vv.apply(this,arguments)}function vv(){return(vv=(0,A.Z)(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getConfig();case 2:return n=e.sent,e.abrupt("return",!n.error&&"kaboom"===n.config.language);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bv(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return yv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yv(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function yv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xv=n(58327),wv=n(57456);function kv(e){var t=e.ws,n=e.user,r=e.isOwner;return function(e){var t=e.customConnectionMetadata,n=(0,Oe.Z)().container,r=(0,fe.Z)(),i=K.useState(null),a=(0,D.Z)(i,2),o=a[0],s=a[1],l=(0,me.SPw)({variables:{id:r}}),c=l.data,u=l.loading;K.useEffect((function(){(0,ko.Z)().then((function(e){s((0,nv.t)(e))}))}),[s]),K.useEffect((function(){return function(){n.destroy()}}),[n]);var d=(0,rv.b)("Repl"===(null===c||void 0===c?void 0:c.repl.__typename)?{repl:c.repl,currentUser:c.currentUser||void 0}:null);K.useEffect((function(){if(!u&&null!==o&&d){var e=n.client().addDebugFunc((function(e){if("breadcrumb"===e.type){st.n_({category:"crosisV6",message:e.message,data:e.data});var t={data:e.data,message:e.message,replId:d.repl.id,language:d.repl.language};switch(e.message){case"connecting":(0,ct.track)(ct.events.CROSIS_CONNECTION_ATTEMPTED,t);break;case"error":(0,ct.track)(ct.events.CROSIS_ERROR,t);break;case"connect timeout":(0,ct.track)(ct.events.CROSIS_CONNECTION_TIMEOUT,t);break;case"retrying":(0,ct.track)(ct.events.CROSIS_CONNECTION_RETRYING,t);break;case"reconnecting":(0,ct.track)(ct.events.CROSIS_CONNECTION_RECONNECTING,t);break;case"connect failed":(0,ct.track)(ct.events.CROSIS_CONNECTION_FAILED,t);break;case"falling back to polling":(0,ct.track)(ct.events.CROSIS_CONNECTION_FALLING_BACK_TO_POLLING,t)}}}));return n.connect({overrideClusterMetadata:o,customConnectionMetadata:t,context:d}),function(){e()}}}),[n,o,u,d,t])}({customConnectionMetadata:e.customConnectionMetadata}),function(e){var t=(0,Oe.Z)().packager,n=e.wid,r=e.store.dispatch,i=function(e){r((0,ft.yY)({wid:n,message:e,type:"",raw:!1}))},a=function(){r((0,ft.yY)({wid:n,message:"\n\nReplit: Package operation failed.\n\n",type:"error",raw:!1}))},o=function(e){if(e)return r({type:"PACKAGER_STARTED",wid:n}),void r((0,ft.yY)({wid:n,message:"\n\nReplit: Updating package configuration\n\n",type:"",raw:!1}));r({type:"PACKAGER_ENDED",wid:n})};K.useEffect((function(){var e=t.onOutput(i),n=t.onError(a),r=t.onStateChanged(o);return function(){e(),n(),r()}}),[])}(t),av(t),function(e){var t=e.wid,n=e.store.dispatch,r=(0,fe.Z)(),i=(0,me.dtd)({variables:{id:r}}),a=i.data,o=i.loading;K.useEffect((function(){!o&&a&&"Repl"===a.repl.__typename&&a.repl.permissions.length&&n({type:"REQUEST_NOTIFICATION_PERMS",wid:t})}),[a,n,t,e,o])}(t),function(){var e=(0,Oe.Z)().presence;K.useEffect((function(){return e.onFollowingUsersChanged((function(e){var t=e.followingUsers,n=e.type,r=t.length;"follow"===n?(0,ct.track)(ov.events.REMOTE_USER_CURSOR_FOLLOWED,{numFollowers:r}):(0,ct.track)(ov.events.REMOTE_USER_CURSOR_UNFOLLOWED,{numFollowers:r})}))}),[e])}(),function(e){var t=K.useRef(""),n=(0,Oe.Z)().container,r=e.wid,i=e.store.dispatch;K.useEffect((function(){return n.onConnectionStateChanged(function(){var e=(0,A.Z)(G().mark((function e(a){var o,s,l,c,u;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a===sv.e.CONNECTED){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.exec("pwd");case 4:if(o=e.sent,s=o.output){e.next=8;break}return e.abrupt("return");case 8:""===t.current&&(c=null===(l=n.getContext())||void 0===l?void 0:l.repl)&&(t.current="/home/runner/".concat(c.slug)),(u=s.replace("\n",""))!==t.current&&(i({type:"UPDATE_WORKING_DIRECTORY",wid:r,path:u}),t.current=u);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[n,i,r])}(t),dv(t.wid),function(){var e=(0,Oe.Z)().presence,t=(0,fe.Z)(),n=(0,me.al4)({variables:{id:t}}),r=n.data,i=n.loading,a=n.error;K.useEffect((function(){if(!i)if(a)st.Tb(a);else if(r&&"Repl"===r.repl.__typename){var t=r.currentUser,n=r.repl;if(n.isProjectFork&&n.owner&&"Team"===n.owner.__typename){var o=n.owner.id;if(null!==t&&void 0!==t&&t.teams.some((function(e){var t=e.id,n=e.isAdmin;return t===o&&n})))return e.onActiveUsersChange((function(e){e.length>1&&(0,ct.trackOnce)(ov.events.TEAMS_ADMIN_STUDENT_MULTIPLAYER,{replId:n.id,language:n.language,url:n.url,teamId:o})}))}}}),[e,r,i,t,a])}(),(0,Jg.Z)(),pv(t),function(){var e=(0,hn.Z)(),t=(0,Oe.Z)().presence;K.useEffect((function(){t.updateOpenFile(e)}),[e,t])}(),function(e){var t=(0,Oe.Z)(),n=t.presence,r=t.session,i=(0,ni.Z)(),a=e.wid,o=e.store.dispatch;K.useEffect((function(){if(i){var e=r.getActiveFile();e===n.getActiveFileForUser(i.id)&&o({type:"SCROLL_TO_FOLLOWED_USERS_CURSOR",wid:a,path:e})}}),[a,i,o,n,r])}(t),function(e){var t=(0,Oe.Z)(),n=t.container,r=t.session,i=e.wid,a=e.store.dispatch;K.useEffect((function(){return n.onConnectionStateChanged((function(e){if(e===sv.e.CONNECTED){var t=r.getActiveFile(),n=r.getPreviewedFile();n&&t!==n&&a({type:"LOAD_FILE",path:n,wid:i})}}))}),[n,r,a,i])}(t),function(){var e=(0,Oe.Z)(),t=e.presence,n=e.session;K.useEffect((function(){var e=function(){if("visible"===document.visibilityState){var e=n.getActiveFile()||null;t.updateSessionTimestamp(),t.updateOpenFile(e)}};return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}}),[t,n])}(),function(){var e=(0,Oe.Z)(),t=e.session,n=e.presence;K.useEffect((function(){return n.onUserOpenedFile((function(e){var r=e.file,i=e.user,a=n.getFollowedUser();a&&i.username===a.username&&r&&t.openFile(r)}))}),[n,t])}(),function(e,t){var n=(0,fe.Z)(),r=!e||!e.isLoggedIn;(0,me.Vgw)({skip:r||t,variables:{replId:n},onSubscriptionData:function(e){var t;!1===(null===(t=e.subscriptionData.data)||void 0===t?void 0:t.currentUserCanWrite)&&window.location.reload()}})}(n,r),function(){var e=(0,Oe.Z)().session,t=(0,fe.Z)(),n=(0,me.eX4)({variables:{replId:t}}).data,r="Repl"===(null===n||void 0===n?void 0:n.repl.__typename)?n.repl:null;K.useEffect((function(){var t;r&&null!==(t=r.templateInfo)&&void 0!==t&&t.label.includes("Nix")&&e.setAreHiddenFilesVisible(!0)}),[e,r])}(),function(e){var t,n,r=(0,fe.Z)(),i=(0,Oe.Z)().fs,a=(0,me.t8A)({variables:{id:r}}).data,o=e.wid,s=e.store.dispatch,l="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null,c="CurrentUser"===(null===a||void 0===a||null===(t=a.currentUser)||void 0===t?void 0:t.__typename)?a.currentUser:null,u="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)&&a.repl.isModelSolutionFork,d=u?l&&(null===(n=l.origin)||void 0===n?void 0:n.origin):l&&l.origin||null,p=(0,rv.b)("Repl"===(null===d||void 0===d?void 0:d.__typename)?{repl:d,currentUser:c||void 0}:null);K.useEffect((function(){l&&c&&l.isProject&&i.stat(".lesson").then((function(e){e.exists||i.createDir(".lesson")}))}),[i,c,l]),K.useEffect((function(){if(l&&(l.isProjectFork||u)&&d&&p){var e=(0,nf.Z)({onUnrecoverableError:function(e){hv.error(e),st.$e((function(t){t.setTag("curriculum-authoring",!0),t.setExtra("originId",d.id),t.setExtra("replId",l.id),st.Tb(e)}))}}),t=(0,fv.Z)({container:e});e.connect({context:p,fetchConnectionMetadata:function(){return(0,mv.Z)({url:"/data/repls/".concat(l.id,"/get_repl_origin_guest_connection_metadata")})}});var n=e.onConnectionStateChanged(function(){var r=(0,A.Z)(G().mark((function r(a){var c;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a!==sv.e.CONNECTED){r.next=22;break}return n(),r.prev=2,r.next=5,i.copyDirFromRemote(".lesson",".lesson",t);case 5:if(!(c=r.sent).error){r.next=10;break}st.$e((function(e){e.setTag("curriculum-authoring",!0),e.setExtra("originId",d.id),e.setExtra("replId",l.id),st.Tb({message:"Error copying lesson: ".concat(c.error)})})),r.next=14;break;case 10:return r.next=12,i.stat(".lesson/instructions.md");case 12:r.sent.exists&&s({type:"ADD_INSTRUCTIONS2_TAB",wid:o});case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(2),st.$e((function(e){e.setTag("curriculum-authoring",!0),st.Tb(r.t0)}));case 19:return r.prev=19,e.destroy(),r.finish(19);case 22:case"end":return r.stop()}}),r,null,[[2,16,19,22]])})));return function(e){return r.apply(this,arguments)}}());return function(){return e.destroy()}}}),[o,i,p,l,s,d,u])}(t),function(e){var t=e.store.dispatch,n=Xg(),r=(0,ee.useRouter)(),i=Boolean(r.query.lite)||Boolean(r.query.embed);K.useEffect((function(){if(!i){var r=e.wid,a=e.store.getState(),o=a.layout,s=a.plugins,l="youtubepreview",c=dt.PP(o,s,l);if(n){if(!c){var u=dt.PP(o,s,"shell");if(!u)throw new Error("Expected shell path");var d=dt.Il(dt.Il(u)),p=dt.$T(o,l,"below",d),f=p.path,m=p.to;t({type:"UPDATE_LAYOUT",wid:r,path:f,to:m})}}else{if(!c)return;var h=dt.Od(o,l),g=h.path,v=h.to;t({type:"UPDATE_LAYOUT",wid:r,path:g,to:v})}}}),[n,t,e,i])}(t),function(e){var t=(0,Sp.Z)(),n=(0,Oe.Z)().dotReplit;K.useEffect((function(){if(t&&t.flagOwnerDotReplitPackager&&t.language.includes("nix")){var r="packager";return n.watch((function(t){var n,i;t.error?t.error===Pp.Y.NotFound&&e.store.dispatch({type:"REMOVE_SIDE_NAV_ITEM",navItemPud:r}):null!==(n=t.config.packager)&&void 0!==n&&null!==(i=n.features)&&void 0!==i&&i.packageSearch?(e.store.getState().plugins.packager||e.store.dispatch({type:"LOAD_PLUGIN",pluginType:"packager",pluginPud:r,title:"packages"}),e.store.dispatch({type:"ADD_SIDE_NAV_ITEM",index:2,navItem:{pud:r,pluginType:"packager",tooltip:"Packages",svg:"Packages"}})):e.store.dispatch({type:"REMOVE_SIDE_NAV_ITEM",navItemPud:r})}))}}),[t,n,e])}(t),function(e){var t=e.wid,n=e.store.dispatch,r=(0,Oe.Z)(),i=r.session,a=r.fs,o=(0,Oe.Z)().dotReplit,s=(0,Ia.Z)("flag-readme-preview");K.useEffect((function(){!function(){var e=(0,A.Z)(G().mark((function e(){var r,l,c,u,d;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gv(o);case 2:return r=e.sent,e.next=5,a.readDir(ei.Q);case 5:if(l=e.sent,(r||s)&&!l.error){e.next=8;break}return e.abrupt("return");case 8:c=bv(l.children),e.prev=9,c.s();case 11:if((u=c.n()).done){e.next=19;break}if(!(d=u.value).filename.toLowerCase().includes("readme")){e.next=17;break}return n({type:"LOAD_FILE",path:d.filename,wid:t}),i.setPreviewedFile(d.filename),e.abrupt("break",19);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),c.e(e.t0);case 24:return e.prev=24,c.f(),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[9,21,24,27]])})));return function(){return e.apply(this,arguments)}}()()}),[t,n,i,a,o,s])}(t),function(e){var t=e.wid,n=e.store.dispatch,r=(0,Oe.Z)(),i=r.session,a=r.dotReplit;K.useEffect((function(){!function(){var t=(0,A.Z)(G().mark((function t(){var n,r;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gv(a);case 2:if(n=t.sent,r="kaboombar2",n){t.next=6;break}return t.abrupt("return");case 6:e.store.getState().plugins[r]||e.store.dispatch({type:"LOAD_PLUGIN",pluginType:"kaboombar2",pluginPud:r,title:"kaboombar2"}),e.store.dispatch({type:"ADD_SIDE_NAV_ITEM",index:0,navItem:{pud:r,pluginType:"kaboombar2",tooltip:"Kaboom",icon:Re}}),e.store.dispatch({type:"OPEN_SIDE_NAV_ITEM",navItem:{pud:r}});case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[t,n,i,a])}(t),(0,ev.Z)(),(0,tv.Z)(),K.useEffect((function(){function e(e){"s"===e.key&&(0,al.jh)(e)&&e.preventDefault()}return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),function(){var e=(0,Oe.Z)().container,t=(0,Ia.Z)("flag-seccomp-port-detection");K.useEffect((function(){if(t)return e.openChannel({service:"replnet",name:"replnet"},(function(){}))}),[e,t])}(),(0,xv.Z)({workspaceType:"desktop"}),(0,wv.Z)(),null}function Zv(e){var t=e.stacked,n=e.lite;return(0,ge.BX)("div",{className:V.default.dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" "+(jt()("root",{stacked:t,lite:n})||""),children:[(0,ge.tZ)("div",{className:V.default.dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" header"}),(0,ge.tZ)("div",{className:V.default.dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" sidenav"}),(0,ge.tZ)("div",{className:V.default.dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" sidebar"}),(0,ge.BX)("div",{className:V.default.dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" content",children:[(0,ge.tZ)("div",{className:V.default.dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" file"}),(0,ge.tZ)("div",{className:V.default.dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" spacer"}),(0,ge.tZ)("div",{className:V.default.dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" output"})]}),(0,ge.tZ)(V.default,{id:"1050128889",dynamic:[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"],children:[".root.__jsx-style-dynamic-selector{position:fixed;top:0;left:0;width:100%;height:100%;display:grid;grid-template-areas: 'header header header header' 'sidenav sidebar content content';grid-template-columns: 50px calc(((100vw - 50px) * 0.15 - 3px)) ".concat(n?0:"var(--space-8)"," 1fr;grid-gap:var(--space-8);grid-template-rows:auto 1fr;background-color:var(--background-root);padding-bottom:").concat(n?0:"var(--space-8)",";}"),".header.__jsx-style-dynamic-selector{grid-area:header;height:60px;margin-bottom:".concat(n?"calc(-1*var(--space-8))":0,";background-color:var(--background-default);box-shadow:var(--shadow-1);border-bottom:0.5px solid var(--background-higher);}"),".sidenav.__jsx-style-dynamic-selector{width:50px;grid-area:sidenav;background-color:var(--background-default);margin-left:".concat(n?0:"var(--space-8)",";border-top-left-radius:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);}"),".sidebar.__jsx-style-dynamic-selector{grid-area:sidebar;background-color:var(--background-default);border-radius:var(--border-radius-4);}",".content.__jsx-style-dynamic-selector{grid-area:content;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding-right:".concat(n?0:"var(--space-8)",";border-radius:var(--border-radius-4);}"),".file.__jsx-style-dynamic-selector,.output.__jsx-style-dynamic-selector{height:100%;border-radius:var(--border-radius-4);}",".file.__jsx-style-dynamic-selector{background-color:var(--background-default);width:calc(50% + var(--space-8));}",".output.__jsx-style-dynamic-selector{background-color:var(--background-root);width:50%;}",".spacer.__jsx-style-dynamic-selector{width:var(--space-8);height:var(--space-8);}",".lite.__jsx-style-dynamic-selector .sidebar.__jsx-style-dynamic-selector{display:none;}",".lite.__jsx-style-dynamic-selector{grid-template-areas: 'header header' 'sidenav content';grid-template-columns:50px 1fr;grid-template-rows:auto 1fr;}",".lite.__jsx-style-dynamic-selector .header.__jsx-style-dynamic-selector{height:40px;}",".stacked.__jsx-style-dynamic-selector .content.__jsx-style-dynamic-selector{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".stacked.__jsx-style-dynamic-selector .file.__jsx-style-dynamic-selector,.stacked.__jsx-style-dynamic-selector .output.__jsx-style-dynamic-selector{width:100%;height:50%;}"]})]})}var jv={overlimit:{title:"Multiplayer Limit Reached",body:"Repl reached its multiplayer limit. Please contact the owner."},notfound:{title:"Invite Link 404",body:"Multiplayer invite link not found. Please contact the owner."}};function Ov(e){var t,n,r=e.language,i=(0,ee.useRouter)().query,a=K.useState(!1),o=(0,D.Z)(a,2),s=o[0],l=o[1],c=null,u=se().get(r)?null:r;i.classroom_template?c={title:"Project Template",body:"This is the template that students will be given to fork. When you are finished, close this tab, go back to the classroom, and create the project."}:u?c={title:"Unsupported Language",body:(0,ge.BX)("div",{children:[(0,ge.tZ)("p",{children:"We encountered an internal error while loading your repl"}),(0,ge.tZ)("br",{}),(0,ge.BX)("p",{children:['The language "',u,"\" doesn't exist.",(0,ge.tZ)("br",{}),(0,ge.tZ)("br",{}),"You can still view your repl but many features may not work.",(0,ge.tZ)("br",{}),"Our engineers have been notified and we will have a fix for this soon."]})]})}:i.error&&(c=jv[i.error.toString()]||{title:"Error",body:"Somethng went wrong"});var d=!s&&Boolean(c);return(0,ge.tZ)(Ot.Z,{onRequestClose:function(){return l(!0)},isOpen:d,children:(0,ge.BX)("div",{className:V.default.dynamic([["2125406062",[le.j.mobileMax]]])+" content",children:[(0,ge.tZ)(Ee.Z,{level:3,children:null===(t=c)||void 0===t?void 0:t.title}),null===(n=c)||void 0===n?void 0:n.body,(0,ge.tZ)("div",{className:V.default.dynamic([["2125406062",[le.j.mobileMax]]]),children:(0,ge.tZ)(ce.Z,{children:"Continue"})}),(0,ge.tZ)(V.default,{id:"2125406062",dynamic:[le.j.mobileMax],children:[".content.__jsx-style-dynamic-selector{color:var(--foreground-default);padding:var(--space-16);display:grid;grid-gap:var(--space-16);}","@media screen and (min-width:".concat(le.j.mobileMax,"px){.content.__jsx-style-dynamic-selector{padding:var(--space-48);}}")]})]})})}var Ev=n(79440);function _v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_v(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sv(e,t){var n=t.session,r=e.wid,i=e.store;n.onSessionStateChanged((function(e){var t=e.openFiles[e.activeTab],a=n.getPreviewedFile(),o=Boolean(a);t!==i.getState().activeFile&&i.dispatch({type:"OPEN_FILE",wid:r,path:t,session:!0}),t?o&&a!==t&&"md"===(0,vn.r6)(t)&&n.setPreviewedFile(t):i.dispatch((0,Na.Z)({wid:r}))})),n.onPreviewedFileChanged((function(e){e?i.dispatch({type:"ADD_MARKDOWN_TAB",wid:r}):i.dispatch({type:"REMOVE_MARKDOWN_TAB",wid:r})})),e.register("services",{receiver:function(e,t,i){return"OPEN_FILE"===i.type?function(){if(void 0!==i.path&&!i.session){var e=i.path,t=i.tabIndex,r=i.newTab;n.openFile(e,{tabIndex:t,newTab:r})}}:"MOVE_FILE"===i.type?function(){var e=i.path,t=i.to;n.moveFile(e,t)}:"DELETE_FILE"===i.type?function(){var e=i.path;n.deleteFile(e)}:"CLOSE_HEADER_TAB"===i.type?function(){var e=n.getState().openFiles.indexOf(i.path);n.closeTab(e)}:"UPDATE_FILE_CURSORS"===i.type?function(){var e=i.selections;if(e.length<0)throw new Error("Expected cursor selections");var t=e[0],r=t.rawPosition,a=t.position;n.setCursorPosition(Cv(Cv({},r),{},{offset:a}))}:"ADD_MARKDOWN_TAB"===i.type?function(e,t){var n=t().workspace[r],i=n.layout,a=n.plugins;if(!dt.PP(i,a,"markdownviewer")){var o=dt.PP(i,a,"shell");if(!o)throw new Error("Expected shell path");e({type:"NEW_TAB",path:dt.Il(dt.Il(o)),layout:{type:"pane",pud:"markdownviewer"},setActiveTab:!0,wid:r})}}:"ADD_INSTRUCTIONS2_TAB"===i.type?function(e,t){var n=t().workspace[r],i=n.layout,a=n.plugins;if(!dt.PP(i,a,"instructionsviewer2")){var o=dt.PP(i,a,"shell");if(!o)throw new Error("Expected shell path");e({type:"NEW_TAB",path:dt.Il(dt.Il(o)),layout:{type:"pane",pud:"instructionsviewer2"},setActiveTab:!0,wid:r})}}:"REMOVE_MARKDOWN_TAB"===i.type?function(e,t){var n=t().workspace[r],i=n.layout,a=n.plugins;if(dt.PP(i,a,"markdownviewer")){var o=dt.PP(i,a,"shell");if(!o)throw new Error("Expected shell path");e({type:"CLOSE_TAB",path:dt.Il(dt.Il(o)),tabPud:"markdownviewer",wid:r})}}:"ADD_CLUI_CURL_TAB"===i.type?function(e,t){if(!(0,ot.Z)(t().user.userInfo,"flag-cluicurl"))return null;var n=t().workspace[r],i=n.layout,a=n.plugins,o=dt.PP(i,a,"cluicurl");if(o)e({type:"SET_ACTIVE_TAB",path:dt.Il(dt.Il(o)),tabIndex:o[o.length-1],wid:r});else{var s=dt.PP(i,a,"shell");if(!s)throw new Error("Expected shell path");e({type:"NEW_TAB",path:dt.Il(dt.Il(s)),layout:{type:"pane",pud:"cluicurl"},setActiveTab:!0,wid:r})}}:null}}),e.register("fsreduxbridge",(0,Ev.Z)({fs:t.fs}))}var Pv=n(48399),Nv=n(1543),Tv=n(50807),Iv=n(61349),Rv=n(15300),Dv=n(81493),Av=n(75276),Lv=n(25108);function Bv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bv(Object(n),!0).forEach((function(t){(0,z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Uv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,F.Z)(e);if(t){var i=(0,F.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,X.Z)(this,n)}}var Xv=function(e){return JSON.parse(JSON.stringify(e))};function Fv(e){if(!Object.values(e.getState().plugins).find((function(e){return"adminpanel"===e.type}))){var t="adminpanel";e.dispatch({type:"LOAD_PLUGIN",pluginPud:t,pluginType:"adminpanel",title:"adminpanel"}),e.dispatch({type:"ADD_SIDE_NAV_ITEM",navItem:{pud:t,pluginType:"adminpanel",tooltip:"Crosis Logs",svg:"Alien"}})}}function zv(e){var t=e.children,n=K.useRef({fileMap:new Map});return(0,ge.tZ)(Av.Z.Provider,{value:n,children:t})}var Vv=function(e){var t=function(t){(0,U.Z)(r,t);var n=Uv(r);function r(){return(0,L.Z)(this,r),n.apply(this,arguments)}return(0,B.Z)(r,[{key:"render",value:function(){var t=this;return(0,ge.tZ)(et.ET.Consumer,{children:function(n){var r=n.store;return(0,ge.tZ)(e,Mv(Mv({},t.props),{},{reduxStore:r}))}})}}]),r}(K.Component);return(0,z.Z)(t,"displayName","withStore(ReplEnvironment)"),$()(t,e)}(function(e){(0,U.Z)(n,e);var t=Uv(n);function n(){var e;(0,L.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),(0,z.Z)((0,M.Z)(e),"ws",void 0),(0,z.Z)((0,M.Z)(e),"services",void 0),(0,z.Z)((0,M.Z)(e),"unmounted",void 0),(0,z.Z)((0,M.Z)(e),"WsComponent",void 0),(0,z.Z)((0,M.Z)(e),"state",{forking:!1,isWorkspaceCrashed:!1,sentryEventId:null,isMounted:!1,showAuthOnForkPrompt:!1,serverConnectionMetadataUsed:!1,unreachable:!1}),(0,z.Z)((0,M.Z)(e),"createNewWorkspace",(function(){var t=!1,n=new ut.Z;n.injectServices(e.services),n.registerErrorHandler((function(n){var r=n.error,i=n.pluginType,a=n.pud,o=n.source;if(!t){t=!0,Lv.error("Plugin with type ",i," and pud ",a," errored in ",o),Lv.error(r);var s=null,l=null;if(r instanceof Kg.default){s=r.extras;try{Lv.log("CustomSentryError extra",JSON.stringify(r.extras))}catch(c){Lv.log("CustomSentryError extra",r.extras)}l=r.tags,Lv.log("CustomSentryError tags",r.tags)}st.$e((function(t){var n;t.setTags(Mv({pluginType:i,workspaceSource:o,workspaceError:"true",bsod:!0},null!==(n=l)&&void 0!==n?n:{})),s&&t.setExtras(s);var a=(0,Dv.Q)(r,t)||null;st.Tb(r),e.setState({isWorkspaceCrashed:!0,sentryEventId:a||null})}))}})),qg(n),n.register("audio",b),n.register("bsoder",{receiver:function(t,r,i){"BSOD"===i.type&&(e.setState({isWorkspaceCrashed:!0,sentryEventId:i.sentryEventId||null}),n.store.dispatch({type:"WORKSPACE_WILL_UNMOUNT",wid:t}),i.crasherPud&&n.store.dispatch({type:"PLUGIN_BROKE",pud:i.crasherPud,message:"No message"}),i.originalError&&(Lv.error("".concat(i.crasherPud||"plugin"," crashed}")),Lv.error(i.originalError)))}}),n.register("replforker",{receiver:function(t,n,r){return"OT_FILE_OP"===r.type&&"containerfs"!==r.changeSource&&!e.props.repl.isOwner&&e.setState({showAuthOnForkPrompt:!0}),null}}),n.register("replupdater",{receiver:function(t,n,r){return"REQUEST_REPL_UPDATE"===r.type?function(){var n=(0,A.Z)(G().mark((function n(i){var a,o;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=e.props.repl,o=a.id,a.isOwner||st.$e((function(e){e.setExtra("updates",r.updates),st.Tb(new Error("Trying to update repl without perms"))})),e.props.updateRepl(o,r.updates),i({wid:t,type:"REPL_UPDATED",updates:r.updates}),r.refresh&&window.location.replace(window.location.pathname);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}():"REPL_UPDATED"===r.type?function(){e.props.updateReplSuccess(Mv(Mv({},e.props.repl),r.updates))}:null}}),Sv(n,e.services);var r=e.props,i=r.repl,a=r.user,o=r.router,s=r.showShareToTalkPromo,l=r.shouldShowMPInviteTour,c=r.shouldShowEducationPane,u=r.shouldShowAutograderPane,d=r.shouldShowUnitTestPane,p=r.shouldShowYoutubePane;n.yikesInjectStore(e.props.reduxStore);var f=(0,Y.isMobile)({ua:window.navigator.userAgent,tablet:!0});window.mobileTaint=f,window.anonTaint=!a.isLoggedIn;var m=function(){var t=(0,nt.Z)(a);o.query.lite&&((t=nt.L).codeIntelligence=!1);var n=(0,ot.Z)(a,"windowing")&&!o.query.lite,r=Boolean(window.AudioContext||window.webkitAudioContext),m=(0,ot.Z)(e.props.user,"flag-cluicurl"),h=a&&a.isLoggedIn&&a.roles.includes("admin"),g=(0,ot.Z)(a,"flag-yt-in-the-ws")&&i.language.includes("python")&&p;return Je({lang:i.language,lite:o.query.lite,outputonly:Boolean(o.query.outputonly),sharing:!i.isOwner,isMobile:f,preferences:t,isServer:i.config.isServer||!1,isVnc:i.config.isVnc||!1,gitRemoteUrl:i.config.gitRemoteUrl,inspector:Boolean(o.query.inspector),showShareToTalkPromo:s,shouldShowMPInviteTour:l,shouldShowEducationPane:c,shouldShowAutograderPane:u,shouldShowUnitTestPane:d,isWindowingEnabled:n,hasAudioContext:r,shouldLoadAdminPanel:h,isCluiCurlEnabled:m,isLoggedIn:e.props.user.isLoggedIn,shouldLoadYoutubePane:g})}();n.bootstrap(m),n.store.dispatch({type:"REPL_UPDATED",updates:i});var h=window.performance.now(),g=e.state.serverConnectionMetadataUsed?void 0:e.props.connectionMetadata;n.store.dispatch({type:"GOVAL_CONNECT",customConnectionMetadata:g}),e.setState({serverConnectionMetadataUsed:!0}),n.govalConnectionStarted=h,e.props.doRunFlow&&((0,ct.track)(ct.events.REPL_CREATED,{isSignup:!1,isOnboarding:!1,isForked:!1,isPrivate:i.isPrivate,replId:i.id,isRenamed:!1,language:i.language,isSelfForked:!1,isGithubImport:!0}),n.store.dispatch({type:"LOAD_PLUGIN",pluginPud:"runflow",pluginType:"runflow"}),n.store.dispatch(Mv({type:"UPDATE_LAYOUT"},dt.$T(n.store.getState().layout,"runflow","inside",dt.cV())))),n.store.dispatch({type:"UPDATE_WORKSPACE_PREFERENCES",updates:m.preferences});var v="/home/runner/".concat(i.slug);n.store.dispatch({type:"UPDATE_WORKING_DIRECTORY",path:v}),window.debug=function(){return Fv(n.store)},o.query.debug&&(Fv(n.store),n.store.dispatch({type:"START_CROSIS_ADMIN_LOGS"})),e.ws=n,e.WsComponent=n.component()})),(0,z.Z)((0,M.Z)(e),"handleBeforePopState",(function(e){var t=e.as;return!e.options.shallow||(window.location.href=t,window.location.reload(),!1)})),(0,z.Z)((0,M.Z)(e),"handleRouteChange",(function(){if(e.props.router.query.replUrl!==e.props.repl.url){var t=e.props.replsByUrl[e.props.router.query.replUrl];if(!t)return;e.props.setActiveReplId({replId:t})}})),e}return(0,B.Z)(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this;if((0,at.Fy)(this.props.repl),!this.props.shouldRedirectToExpired&&!this.props.shouldRedirectToDepricated){(0,ot.Z)(this.props.user,"flag-handicap-goval-conn")&&setInterval((function(){window.v1ws&&(window.v1ws.close(),window.v1ws=null),window.v6ws&&(window.v6ws.close(),window.v6ws=null)}),6e4),window["flag-windowing"]=(0,ot.Z)(this.props.user,"windowing"),window["flag-ot-high-consitency"]=(0,ot.Z)(this.props.user,"flag-ot-high-consitency"),window["open-markdown-split"]=(0,ot.Z)(this.props.user,"open-markdown-split"),this.services=(0,Qg.Z)({onUnrecoverableError:function(t){t.message.toLowerCase().includes("repl not found")?ee.default.push("/home","~/"):st.$e((function(n){n.setTag("bsod","true"),n.setTag("replenvironmentservices","true"),Lv.error(t),st.Tb(t);var r=(0,Dv.Q)(t,n)||null;e.setState({isWorkspaceCrashed:!0,sentryEventId:r})}))}}),this.createNewWorkspace(),this.props.router.events.on("routeChangeComplete",this.handleRouteChange),window.performance&&window.performance.navigation&&1===window.performance.navigation.type&&(0,ct.track)(ct.events.PAGE_RELOADED,{repl:this.props.repl});var t=this.services.presence.onActiveUsersChange((function(){var n;t(),(0,ct.track)(ct.events.MULTIPLAYER_REPL_OPENED,{replId:e.props.repl.id,participantsCount:e.props.multiplayers,usersOnlineCount:null===(n=e.services)||void 0===n?void 0:n.presence.getActiveUsers().length,threadsVariant:"replace-chat"})}));(0,ct.track)(ct.events.CLIENT_PING,{});var n=at.kg.timeStart();(0,tt.LK)("/data/t/ping").then((function(){n("latency to node server")}))}}},{key:"componentDidMount",value:function(){var e=this;this.setState({isMounted:!0});var t=this.props,n=t.repl,r=t.router,i=t.shouldRedirectToExpired,a=t.shouldRedirectToDepricated,o=t.user;r.beforePopState(this.handleBeforePopState);var s=n.url.split("/")[1].slice(1);if(i)r.replace({pathname:"/expiredPrivateRepl",query:{isOwner:n.isOwner,ownerUsername:s,replId:n.id}},r.asPath);else if(a)r.replace({pathname:"/deprecatedLangauge",query:{replId:n.id}},r.asPath);else{if((0,ot.Z)(o,"flag-replco-probe")){var l={replId:n.id,slug:n.slug,user:s};(0,Iv.dp)(l,(function(t){e.setState({unreachable:!t})}))}o&&!n.isOwner&&(0,ct.track)(ct.events.REPL_GUEST_VIEW,{page:"replEnvironment"})}}},{key:"componentWillUnmount",value:function(){this.props.router.beforePopState((function(){return!0})),this.props.router.events.off("routeChangeComplete",this.handleRouteChange),window.debug=void 0,window.__SOCIAL_VIEW_FORK=void 0,this.services&&this.services.container.destroy(),(0,Iv._Y)(this.props.repl.id),this.unmounted=!0,(0,at.dv)()}},{key:"componentDidUpdate",value:function(e){var t=e.repl.id!==this.props.repl.id,n=e.repl.url!==this.props.repl.url;if(t||n){var r=this.props.repl,i=r.url,a=Mv(Mv({},this.props.router.query),{},{replUrl:r.url}),o=(0,pt.Z)(a);ee.default.push({pathname:"/replEnvironment",query:a},{pathname:i,query:o},{shallow:!0}),this.state.forking||t&&this.services&&(window.location.href=r.url)}}},{key:"getDescription",value:function(e){return this.props.repl.description?this.props.repl.description:"A ".concat(e," repl")}},{key:"render",value:function(){var e=this,t=this.props,n=t.shouldRedirectToExpired,r=t.shouldRedirectToDepricated;if(n||r)return null;var i=this.props,a=i.lite,o=i.repl,s=i.user,l=i.stacked,c=i.connectionMetadata,u="https://replit.com"+o.url,d=se().get(o.language).displayName,p=this.getDescription(d),f=o.userId===s.id,m=this.WsComponent;return(0,ge.tZ)(qn.E,{children:(0,ge.tZ)("div",{className:jt()("workspace-wrapper",{desktop:!a,lite:a}),id:Pv.b,tabIndex:1,children:(0,ge.tZ)(it.Z,{children:(0,ge.BX)(te.Z,{title:o.title,oembedUrl:u,description:p||void 0,noHeader:!0,noFooter:!0,forceDrawer:!0,hideEmailVerify:!0,children:[(0,ge.tZ)(Ov,{language:o.language}),this.state.isWorkspaceCrashed&&(0,ge.tZ)($g.Z,{devHide:function(){return e.setState({isWorkspaceCrashed:!1})}}),(0,ge.tZ)("div",{className:"jsx-1703838917 "+(jt()("workspace-page-wrapper",{desktop:!a,lite:a})||""),children:m&&this.ws&&this.services&&this.state.isMounted?(0,ge.tZ)(Yg.Z.Provider,{value:this.services,children:(0,ge.tZ)(Nv.Z.Provider,{value:o.id,children:(0,ge.BX)(su,{children:[(0,ge.tZ)(Rv.F.Provider,{value:this.state.unreachable,children:(0,ge.tZ)(zv,{children:(0,ge.tZ)(m,{className:"jsx-1703838917"})})}),(0,ge.tZ)(kv,{ws:this.ws,user:s,isOwner:f,customConnectionMetadata:c})]})})}):(0,ge.tZ)(Zv,{lite:Boolean(a),stacked:l})}),this.props.repl.isOwner?null:(0,ge.tZ)(Tv.Z,{isLoggedIn:this.props.user.isLoggedIn,isOpen:this.state.showAuthOnForkPrompt,onRequestClose:function(){return e.setState({showAuthOnForkPrompt:!1})},replId:o.id}),(0,ge.tZ)(V.default,{id:"1705417764",children:["html,body{-webkit-scrollbar-width:none;-moz-scrollbar-width:none;-ms-scrollbar-width:none;scrollbar-width:none;}"]}),(0,ge.tZ)(V.default,{id:"4238172360",children:[".workspace-page-wrapper.jsx-1703838917{height:100%;width:100%;position:fixed;left:0px;right:0px;top:0;bottom:0px;background-color:var(--background-root);}",".workspace-page-wrapper.desktop.jsx-1703838917{padding:var(--space-8);padding-top:0;}",".banner+.content>.workspace-page-wrapper.jsx-1703838917{height:calc(100% - 36px);top:36px;}"]})]})})})})}}],[{key:"getInitialProps",value:function(){var e=(0,A.Z)(G().mark((function e(t){var n,r,i,a,o,s,l,c,u,d,p,f,m,h,g,v,b,y,x,w,k,Z,j,O,E,_,C,S,P,N,T,I,R,A,L,B,M,U,X,F;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.req,r=t.store,i=t.query,a=t.apolloClient){e.next=3;break}throw new Error("Expected apolloClient");case 3:if(o="string"===typeof i.lite&&i.lite?i.lite:!!i.lite,l=!1,i.replUrl){e.next=7;break}throw new Error("Please add replUrl to query");case 7:return c=i.replUrl.split("/"),u=(0,D.Z)(c,3),d=u[1],p=u[2],f="/data/repls/",f+="repls"!==d?d+"/":"anon/",e.next=13,Promise.all([(0,tt.LK)("".concat(f).concat(p)),(0,lt.Z)(n,r)]);case 13:m=e.sent,h=(0,D.Z)(m,1),s=h[0],l=Boolean(s.is_mobile),e.next=29;break;case 19:if(n&&n.headers["user-agent"]){e.next=21;break}throw new Error("Invalid request");case 21:return s=Xv(n.repl),l=Xv(n.isMobile),e.next=25,(0,lt.Z)(n,r);case 25:if(g=e.sent,!(v=g.error)){e.next=29;break}return e.abrupt("return",{error:v});case 29:if((b=r.getState().user.userInfo).isLoggedIn||(b=null),y=(0,nt.Z)(b),i.lite&&((y=nt.L).codeIntelligence=!1),r.dispatch((0,rt.h$)(s)),x=r.getState().repls.data[s.id],(0,at.Fy)(x),r.dispatch(ne({replId:x.id})),k=!1,Z=!1,j=!1,O=!1,E=!1,_=!1,C=!1,S=!0,P=!0,N=0,!b){e.next=54;break}return e.next=50,a.query({query:me.dFe,variables:{replId:x.id}});case 50:T=e.sent,null!==(I=T.data)&&void 0!==I&&I.currentUser&&(k=!I.currentUser.shareToTalkPromoSeen,O=!I.currentUser.shouldShowMPInviteTour,"Repl"===(null===I||void 0===I||null===(R=I.repl)||void 0===R?void 0:R.__typename)?(I.repl.lang.isDeprecated&&(j=!0),"Team"===(null===(L=I.repl.owner)||void 0===L?void 0:L.__typename)&&(S=!1),I.repl.isProject||I.repl.isProjectFork?_=!0:C=!0,P=!1,U="Team"===(null===(B=I.repl.owner)||void 0===B?void 0:B.__typename)&&I.repl.owner.isAdmin,I.repl.isProjectFork&&!I.repl.isModelSolution&&(E=U),w=null===I||void 0===I||null===(M=I.repl)||void 0===M?void 0:M.owner):"SubscriptionExpiredError"===(null===I||void 0===I||null===(A=I.repl)||void 0===A?void 0:A.__typename)&&(Z=!0)),"Repl"===I.repl.__typename&&(N=I.repl.multiplayers.length,"User"===(null===(X=I.repl.owner)||void 0===X?void 0:X.__typename)&&(N+=1));case 54:return i.token&&i.gurl&&i.conmanURL&&(F={token:i.token,gurl:i.gurl,conmanURL:i.conmanURL}),e.abrupt("return",{doRunFlow:Boolean(i.doRunFlow),owner:w,showShareToTalkPromo:k,shouldRedirectToExpired:Z,shouldRedirectToDepricated:j,shouldShowMPInviteTour:O,isMobile:l,shouldShowEducationPane:E,shouldShowAutograderPane:_,shouldShowUnitTestPane:C,shouldShowYoutubePane:S,shouldEnableChat:P,multiplayers:N,lite:o,connectionMetadata:F,stacked:l||Boolean(o)||y.isLayoutStacked});case 56:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(K.Component)),Hv=(0,et.$j)((function(e){var t=e.repls.data[e.replEnvironment.activeReplId];return Mv(Mv({},e.replEnvironment),{},{repl:t,replsByUrl:e.replsByUrl,isAnon:!e.user.userInfo.isLoggedIn,user:e.user.userInfo})}),(function(e){return(0,J.DE)({showMessage:re.P,setActiveReplId:ne,updateRepl:rt.rM,updateReplSuccess:rt.G5},e)}))((0,ee.withRouter)(Vv))},47169:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/replEnvironment",function(){return n(27217)}])},20552:function(e){"use strict";e.exports=JSON.parse('{"RB":1,"tn":3,"E9":1,"xp":7}')}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[9774,5762,8350,2240,6344,6351,1164,724,6346,6001,4778,9183,9328,9710,3129,8944,7539,5332,3679,1889,1674,6518,4837,7171,3870,2378,1120,881,7702,7385,6253,9270,9222,5326,4807,7264,2344,1578,3286,1609,1295,3819,1331,9739,2888,179],(function(){return t(25436),t(47169)}));var n=e.O();_N_E=n}]);
//# sourceMappingURL=replEnvironment-4c605ef69342760191c2.js.map