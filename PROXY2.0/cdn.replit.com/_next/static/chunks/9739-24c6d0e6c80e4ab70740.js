"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9739],{72731:function(e,t,r){r.d(t,{Z:function(){return c}});var n=r(85235),a=r(45187),i=r(60356),o=r(95610);function c(){var e,t,r=(0,i.Z)(),c=(0,a.igq)({variables:{replId:r}}).data,s=(null===c||void 0===c||null===(e=c.currentUser)||void 0===e?void 0:e.hasReplConnectionSub)&&"Repl"===c.repl.__typename&&"Team"===(null===(t=c.repl.owner)||void 0===t?void 0:t.__typename),u=(0,n.Z)();(0,a.LSc)({variables:{replId:r},skip:!s||u!==o.e.CONNECTED})}},51911:function(e,t,r){function n(e){var t={};return e.lite&&(t.lite=e.lite),e.classroom_template&&(t.classroom_template=e.classroom_template),e.outputonly&&(t.outputonly=e.outputonly),e.fileName&&(t.fileName=e.fileName),e.debug&&(t.debug=e.debug),e.inspector&&(t.inspector=e.inspector),e.fallback&&(t.fallback=e.fallback),e.vcr&&(t.vcr=e.vcr),e.codemirror&&(t.codemirror=e.codemirror),e.monaco&&(t.monaco=e.monaco),t}r.d(t,{Z:function(){return n}})},50625:function(e,t,r){r.d(t,{sF:function(){return o},Bv:function(){return c},X:function(){return s}});var n=r(65988),a=r(60489),i=r(35944),o=32,c={styles:(0,i.tZ)(n.default,{id:"2924610881",children:["div.jsx-2924610881{position:absolute;display:grid;height:".concat(o,"px;top:var(--mobile-header-height,60px);width:100vw;}")]}),className:"jsx-2924610881"},s={styles:(0,i.tZ)(n.default,{id:"3965378038",children:["div.jsx-3965378038{position:absolute;display:grid;height:calc( 100vh - var(--mobile-header-height,60px) - ".concat(o,"px - ").concat(a.w_,"px );top:calc(var(--mobile-header-height,60px) + ").concat(o,"px);width:100vw;-webkit-transition:top 200ms;transition:top 200ms;}")]}),className:"jsx-3965378038"}},79440:function(e,t,r){r.d(t,{Z:function(){return A}});var n=r(79056),a=r(97131),i=r(92809),o=r(30266),c=r(65988),s=r(809),u=r.n(s),l=r(67294),d=r(71371),p=r(52973),f=r(89107),h=r(31711),v=r(24243),g=r(20138),b=r(56023),y=r(84647),w=r(81493),m=r(82100),x=r(32324),E=r(45971),O=r(84476),k=r(25517),S=r(88834),j=r(56180),_=r(17271),L=r(38934),Z=r(74298),P=r(35944);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A(e){var t=e.fs,r={};return{reciever:function(e,n,a){return"UPLOAD_FILE"===a.type?function(){var r=(0,o.Z)(u().mark((function r(n){var i,o;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:"CREATE_FILE",wid:e,path:a.path}),r.next=3,t.writeFile(a.path,v.Z.from(a.content));case 3:if(i=r.sent,!(o=i.error)){r.next=8;break}return n({wid:e,type:"FILE_ERROR",path:a.path,error:o}),r.abrupt("return");case 8:n({wid:e,type:"LOAD_FILE",path:a.path});case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}():"OPEN_FILE"===a.type?function(t){a.path&&t({wid:e,type:"LOAD_FILE",path:a.path})}:"LOAD_FILE"===a.type?function(i,o){var c=(0,g.Z)(o(),e,n,"fsreduxbridge"),s=c.files[a.path];if(s&&s.loaded)i({type:"FILE_CACHE_HIT",wid:e,path:a.path,file:{loaded:!0,path:a.path,content:v.Z.from(s.content)}});else if(!r[a.path])if(c.files[a.path]||i({type:"CREATE_FILE",wid:e,path:a.path,changeSource:"containerfs"}),c.filestate[a.path]!==h.t.Loading&&i({type:"FILE_LOADING",wid:e,path:a.path}),(0,y.T3)(a.path)||(0,y.sL)(a.path)){var u=!0,l=t.watchFile(a.path,{onChange:function(t){u?(u=!1,i({type:"FILE_LOADED",wid:e,path:a.path,file:{path:a.path,content:t,loaded:!0}})):i({type:"FILE_CACHE_HIT",wid:e,path:a.path,file:{loaded:!0,path:a.path,content:t}})},onMoveOrDelete:function(t){switch(delete r[a.path],t.eventType){case b.kS.Move:return void i({wid:e,type:"MOVE_FILE",path:a.path,to:t.to,changeSource:"containerfs"});case b.kS.Delete:i({wid:e,type:"DELETE_FILE",path:a.path,changeSource:"containerfs"})}},onError:function(t,n){delete r[a.path],i({wid:e,type:"FILE_ERROR",path:a.path,error:n?_.default.wrap(t).setExtras(n):t})}});r[a.path]={dispose:l}}else{var d=t.watchOtFile(a.path,{onReady:function(t){var n=t.initialContent,o=t.updateSelections,c=t.writeOps;r[a.path].writeOps=c,r[a.path].updateSelections=o,i({type:"FILE_LOADED",wid:e,path:a.path,file:{path:a.path,content:n,loaded:!0}})},onChange:function(t){var r=t.ops;i({wid:e,type:"OT_FILE_OP",path:a.path,changeSource:"containerfs",op:r})},onCursor:function(t){i({wid:e,type:"ADD_FILE_CURSOR",cursor:t,path:a.path})},onRemoveCursor:function(t){i({wid:e,type:"REMOVE_FILE_CURSOR",id:t,path:a.path})},onStatusChange:function(t){switch(t){case b.KF.Dirty:return void i({wid:e,type:"FILE_DIRTY",path:a.path});case b.KF.Syncing:if((0,g.Z)(o(),e,n,"fsreduxbridge").filestate[a.path]===h.t.Syncing)return;return void i({wid:e,type:"FILE_SYNCING",path:a.path});case b.KF.Clean:i({wid:e,type:"FILE_CLEAN",path:a.path})}},onReconnectFail:function(t){r[a.path].onReconnect=t,i({type:"PROMPT_FILE_RECONNECT",wid:e,path:a.path})},onMoveOrDelete:function(t){switch(delete r[a.path],t.eventType){case b.kS.Move:return void i({wid:e,type:"MOVE_FILE",path:a.path,to:t.to,changeSource:"containerfs"});case b.kS.Delete:i({wid:e,type:"DELETE_FILE",path:a.path,changeSource:"containerfs"})}},onError:function(t,n){delete r[a.path],i({wid:e,type:"FILE_ERROR",path:a.path,error:n?_.default.wrap(t).setExtras(n):t})}},!0);r[a.path]={dispose:d}}}:"OT_FILE_OP"===a.type?function(t){if("containerfs"!==a.changeSource){var n=r[a.path];if(!n)throw new Error("Expected file to be in watchedFiles");if(!n.writeOps)throw new Error("Expected writeOps function");n.writeOps(a.op),t({type:"FILE_OP_DONE",wid:e,path:a.path})}}:"UPDATE_FILE_CURSORS"===a.type?function(){var e=r[a.path];e&&e.updateSelections&&e.updateSelections(a.selections)}:"PERSIST_FILE"===a.type?function(){var r=(0,o.Z)(u().mark((function r(i){var o,c,s;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.persist({skipDebounce:Boolean(a.flush)});case 2:if(o=r.sent,!o.success){r.next=7;break}return i({type:"FILE_PERSISTED",wid:e}),r.abrupt("return");case 7:return r.next=9,t.persist();case 9:if(!(c=r.sent).success){r.next=13;break}return i({type:"FILE_PERSISTED",wid:e}),r.abrupt("return");case 13:i({type:"BSOD",wid:e,crasherPud:n,originalError:c.error}),s=new Error("snapshot error: "+c.error),d.$e((function(e){e.setTag("source","fsreduxbridge"),e.setTag("bsod","true"),d.Tb(s),(0,w.Q)(s,e)}));case 16:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}():"DOWNLOAD_FILE_CONTENT_REQUEST"===a.type?function(){var r=(0,o.Z)(u().mark((function r(n){var i;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.readFile(a.path);case 2:if(!(i=r.sent).error){r.next=6;break}return n({type:"DOWNLOAD_FILE_CONTENT_FAILURE",wid:e,path:a.path,error:i.error}),r.abrupt("return");case 6:n({type:"DOWNLOAD_FILE_CONTENT_SUCCESS",wid:e,path:a.path,content:i.content});case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}():"FILE_UNLOAD"===a.type?function(){r[a.path]&&(r[a.path].dispose(),delete r[a.path])}:"MOVE_FILE"===a.type||"DELETE_FILE"===a.type?function(t,r){if("containerfs"!==a.changeSource)throw new Error("Move file and delete file should only be dispatched by containerfs, use fs service instead.");if("MOVE_FILE"===a.type){var i,o=(0,g.Z)(r(),e,n,"fsreduxbridge").filestate,c=I(Object.keys(o).includes(a.to)?[a.to]:(0,Z.GA)(o,a.to));try{for(c.s();!(i=c.n()).done;){var s=i.value;t({type:"FILE_UNLOAD",wid:e,path:s})}}catch(u){c.e(u)}finally{c.f()}}}:null},reducer:(0,p.$)({primary:function(e,t){switch(t.type){case"FILE_RECONNECT_CHOSEN":return R(R({},e),{},{failedToReconnectFiles:e.failedToReconnectFiles.filter((function(e){return!t.paths.includes(e)}))});case"PROMPT_FILE_RECONNECT":return R(R({},e),{},{failedToReconnectFiles:(0,a.Z)(new Set([].concat((0,a.Z)(e.failedToReconnectFiles),[t.path])))});default:return R(R({},e),{},{failedToReconnectFiles:e&&e.failedToReconnectFiles?e.failedToReconnectFiles:[]})}},files:f.Z,filestate:h.Z}),Component:function(e){var t=e.wid,a=e.pud,i=(0,g.J)(t,a,"fsreduxbridge"),s=(0,n.Z)(i,1)[0].failedToReconnectFiles,p=l.useState(!1),f=(0,n.Z)(p,2),h=f[0],v=f[1],b=(0,m.I0)(),y=function(){var e=(0,o.Z)(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,L.track)(L.events.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:n}),v(!0),e.prev=2,e.next=5,Promise.all(s.map((function(e){var t=r[e];if(t){if(!t.onReconnect)throw new Error("Could not find onReconnect for failed to reconnect file");return t.onReconnect(n)}})));case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(2),b({type:"BSOD",wid:t,crasherPud:a,originalError:e.t0}),d.$e((function(t){t.setTag("source","fsreduxbridge"),t.setTag("bsod","true"),d.Tb(e.t0),(0,w.Q)(e.t0,t)})),e.abrupt("return");case 12:b({wid:t,type:"FILE_RECONNECT_CHOSEN",paths:s}),v(!1);case 14:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return(0,P.tZ)(E.Z,{preventClose:!0,isOpen:Boolean(s.length),onRequestClose:function(){},children:(0,P.BX)("div",{className:c.default.dynamic([["1160596551",[x.j.mobileMax]]])+" modal",children:[(0,P.tZ)(O.Z,{level:3,children:"Contents diverged"}),(0,P.tZ)(k.Z,{children:"We had a hard time resolving differences between your content and server content while you were disconnected."}),h?(0,P.tZ)(j.Z,{}):(0,P.BX)(P.HY,{children:[(0,P.tZ)(k.Z,{children:"What would you like to do?"}),(0,P.BX)("div",{className:c.default.dynamic([["1160596551",[x.j.mobileMax]]])+" buttons",children:[(0,P.tZ)(S.Z,{onClick:function(){y("local")},color:"positive",children:"Choose my changes"}),(0,P.tZ)(S.Z,{onClick:function(){y("remote")},color:"negative",children:"Choose server changes"})]})]}),(0,P.tZ)(c.default,{id:"1160596551",dynamic:[x.j.mobileMax],children:[".modal.__jsx-style-dynamic-selector{display:grid;padding:var(--space-32);grid-row-gap:var(--space-16);}",".buttons.__jsx-style-dynamic-selector{display:grid;grid-row-gap:var(--space-16);}","@media screen and (min-width:".concat(x.j.mobileMax,"px){.buttons.__jsx-style-dynamic-selector{grid-column-gap:var(--space-16);grid-auto-flow:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;}.buttons.__jsx-style-dynamic-selector button:first-child{-webkit-order:1;-ms-flex-order:1;order:1;}}")]})]})})}}}},3239:function(e,t,r){r.d(t,{Z:function(){return o},_:function(){return c}});var n=r(79056),a=r(67294),i=r(20536);function o(e){var t=e.replbox,r=a.useState(t.getRunState()),i=(0,n.Z)(r,2),o=i[0],c=i[1];return a.useEffect((function(){return t.onStateChanged(c)}),[t]),{runState:o,run:a.useCallback(t.run,[t.run]),stopRun:a.useCallback(t.stopRun,[t.stopRun])}}function c(e){switch(e){case i.A.OFFLINE:return"loading";case i.A.IDLE:return"idle";case i.A.RUNNING:return"running";case i.A.STOPPING:return"stopping"}}},50807:function(e,t,r){r.d(t,{Z:function(){return h}});var n=r(79056),a=r(65988),i=(r(67294),r(35613)),o=r(45971),c=r(84476),s=r(53567),u=r(25517),l=r(88834),d=r(73561),p=r(87293),f=r(35944);function h(e){var t=e.replId,r=e.isOpen,h=e.isLoggedIn,v=e.onRequestClose,g=(0,d.Z)(),b=(0,n.Z)(g,2),y=b[0],w=b[1].loading;return(0,f.tZ)(o.Z,{isOpen:r,onRequestClose:v,preventClose:!0,children:h?(0,f.BX)("div",{className:"jsx-3668977194 content",children:[(0,f.BX)(s.gC,{align:"center",spacing:4,children:[(0,f.BX)(s.gC,{align:"center",spacing:1,children:[(0,f.tZ)(c.Z,{align:"center",level:1,children:"Fork & edit this repl"}),(0,f.tZ)(u.Z,{align:"center",size:"large",foreground:2,children:"You can edit this repl by creating your own copy of it"})]}),(0,f.tZ)(l.Z,{color:"primary",size:"large",filled:!0,Icon:p.Z,disabled:w,onClick:function(){w||y({originId:t,trackingData:{forkSource:"forkModal"}})},children:w?"Forking...":"Fork"})]}),(0,f.tZ)(a.default,{id:"3668977194",children:[".content.jsx-3668977194{padding:var(--space-32);}"]})]}):(0,f.tZ)(i.Z,{title:"Sign up or log in to fork this repl",onSuccess:function(e){var r=e.isLogin;y({originId:t,trackingData:{forkSource:"forkModal",isSignup:!r}})},source:"fork"})})}},64649:function(e,t,r){function n(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e,r){var a,i=n(t);try{for(i.s();!(a=i.n()).done;){(0,a.value)(e,r)}}catch(o){i.e(o)}finally{i.f()}}}r.d(t,{Z:function(){return i}})},87929:function(e,t,r){var n=r(67294),a=r(51157);t.Z=function(e){var t=[],r=null;return{receiver:(0,a.Z)((function(n,a,i,o){var c={wid:n,pud:a,action:i,wait:o};return e&&!e.includes(c.action.type)?null:r?(r(c),null):(t.push(c),null)})),useReceiver:function(e){var a,i;n.useDebugValue("Captured events: ".concat(t.length)),n.useDebugValue("First event: ".concat(null===(a=t[0])||void 0===a?void 0:a.action.type)),n.useDebugValue("Last event: ".concat(null===(i=t[t.length-1])||void 0===i?void 0:i.action.type)),n.useEffect((function(){if(null!==r)throw new Error("Expected callback to be null, please useReceiver once in your plugin, or avoid using multiple instances of the plugin");return t.forEach(e),t=[],r=e,function(){r=null}}),[e])}}}},86330:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(28955);function a(e){for(var t=e.plugins,r=e.filePath,n=e.pluginType,a=0,i=Object.keys(t);a<i.length;a++){var o=i[a],c=t[o],s=c.type,u=c.state;if(s===n&&(null===r||u.filePath===r))return o}return null}function i(e){var t=e.wid;return function(e,r){var i=r(),o=i.workspace?i.workspace[t]:i,c=o.layout,s=o.plugins,u=function(e,t){var r=n.PP(e,t,"fileheader");if(!r)throw new Error("expected to find fileHeader in layout!");return window["flag-windowing"]?n.Il(r):n.J9(r)}(c,s);if(!u)throw new Error("No editor mounted");e({type:"UPDATE_LAYOUT",wid:t,path:u,to:a({plugins:s,filePath:null,pluginType:"blank"}),property:"pud"})}}},91618:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(92809);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};function r(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e(),n=arguments.length>1?arguments[1]:void 0;if("SET_STATE"===n.type){if(!n.pud)throw new Error("SET_STATE action should be namespaced");return i(i({},r),n.state)}return t(r,n)}return{reducer:r,setState:function(e,t,r,n){r({type:"SET_STATE",wid:e,pud:t,state:n})}}}},51157:function(e,t,r){r.d(t,{Z:function(){return p}});var n=r(30266),a=r(79056),i=r(68216),o=r(92809),c=r(809),s=r.n(c);function u(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function e(){var t=this;(0,i.Z)(this,e),(0,o.Z)(this,"waits",void 0),(0,o.Z)(this,"rcv",(function(e){var r,n=u(t.waits.entries());try{for(n.s();!(r=n.n()).done;){var i=(0,a.Z)(r.value,2),o=i[0],c=i[1],s=void 0;try{s=o(e)}catch(l){return t.waits.delete(o),void c.reject(l)}if("boolean"!==typeof s){t.waits.delete(o);var l=new Error("Your wait callback must return a boolean");return void c.reject(l)}s&&(t.waits.delete(o),c.resolve(e))}}catch(d){n.e(d)}finally{n.f()}})),(0,o.Z)(this,"wait",function(){var e=(0,n.Z)(s().mark((function e(r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){t.waits.set(r,{resolve:e,reject:n})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.waits=new Map};function p(e){var t={};return function(r,n,a){return t[r+n]||(t[r+n]=new d),t[r+n].rcv(a),e(r,n,a,t[r+n].wait)}}},76935:function(e,t,r){r.r(t),r.d(t,{Component:function(){return u}});var n=r(65988),a=(r(67294),r(97510)),i=r(81529),o=r(18890),c=r(10257),s=r(35944),u=function(){var e=(0,c.Z)().fs;return(0,o.Z)({fs:e,path:i.Q,initialExpanded:!0}).loading?(0,s.tZ)(a.Z,{}):(0,s.tZ)("div",{className:"jsx-3424832388 blank",children:(0,s.tZ)(n.default,{id:"3424832388",children:[".blank.jsx-3424832388{background-color:var(--background-default);height:100%;width:100%;}"]})})}},4402:function(e,t,r){r.d(t,{Z:function(){return w}});var n=r(65988),a=r(67294),i=r(82100),o=r(93096),c=r.n(o),s=r(10257),u=r(68047),l=r(97613),d=r(67180),p=r(11163),f=function(){return Boolean(p.default.query.embed||p.default.query.lite)},h=r(94305),v=r(38934),g=r(63805),b=r(53291),y=r(35944);function w(e){var t=e.wid,r=(0,i.I0)(),o=(0,s.Z)().lsp,p=(0,b.Z)(),w=(0,u.Z)();a.useEffect((function(){o.start()}),[o]);var m=a.useMemo((function(){if(null!==p&&void 0!==p&&p.language){var e=p.language;return c()((function(r){(0,v.track)(v.events.WS_TYPED,{wid:t,fileExt:r,language:e,isMobile:(0,g.isMobile)({tablet:!1})})}),6e4)}}),[p,t]);return w?(0,l.V)(w)!==l.D.Code&&(0,l.V)(w)!==l.D.Markdown?null:(0,y.tZ)(h.Z,{filePath:w,autoFocus:!f(),onType:m,onRun:function(){r({type:d.OF,wid:t})}}):(0,y.BX)("div",{className:"jsx-3455551276 empty",children:[(0,y.tZ)("div",{className:"jsx-3455551276",children:"no file opened"}),(0,y.tZ)(n.default,{id:"3455551276",children:[".empty.jsx-3455551276{height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]})}},538:function(e,t,r){r.r(t),r.d(t,{Component:function(){return n.Z}});var n=r(4402)},15476:function(e,t,r){r.r(t),r.d(t,{Component:function(){return O},reducer:function(){return S},receiver:function(){return x}});var n=r(30266),a=r(809),i=r.n(a),o=r(67294),c=r(11163),s=r(20138),u=r(91618),l=r(69644),d=r(87929),p=r(60356),f=r(86330),h=r(82100),v=r(10257),g=r(98711),b="deeplink";function y(e){var t=e.wid,r=e.path,a=e.line,o=e.col,c=e.wait,s=e.indexStart,u=e.indexEnd;return function(){var e=(0,n.Z)(i().mark((function e(n,l){var d,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d=l().services.session,l().workspace[t].activeFile===r){e.next=7;break}return p=c((function(e){return("FILE_LOADED"===e.type||"FILE_CACHE_HIT"===e.type)&&e.path===r})),n({type:"OPEN_FILE",path:r,wid:t}),e.next=7,p;case 7:a&&n({type:"SELECT_EDITOR_POSITION",path:r,wid:t,position:{lineNumber:a,column:(o||0)+1}}),d.updateDeeplink({path:r,line:a,col:o}),s&&n({type:"SELECT_MODEL_INDEX",path:r,wid:t,indexStart:s,indexEnd:u});case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}function w(e){var t=e.wid,r=e.pud,a=e.wait,o=e.fs;return function(){var e=(0,n.Z)(i().mark((function e(n){var c,s,u,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,l.u9)()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,l.mv)(o);case 4:if(c=e.sent,s=c.path,u=c.line,d=c.col,s){e.next=10;break}return e.abrupt("return");case 10:n(y({wid:t,pud:r,path:s,line:u,col:d,wait:a}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}var m=(0,d.Z)(["WORKSPACE_MOUNTED","WORKSPACE_WILL_UNMOUNT","ACE_EDIT_SESSION_CREATED","OPEN_DEEP_LINK","OPEN_FILE"]),x=m.receiver,E=m.useReceiver;function O(){var e=(0,p.Z)(),t=(0,h.I0)(),r=(0,v.Z)(),a=r.fs,u=r.session,d=r.dotReplit;return o.useEffect((function(){return u.onDeeplinkUpdated((function(e){var t=(0,l.YM)(e);window.location.hash=t}))}),[u]),E((function(r){var o=r.wid,p=r.pud,h=r.action,v=r.wait;switch(h.type){case"WORKSPACE_MOUNTED":t(function(e){var t=e.wid,r=e.pud,n=e.wait,a=e.fs;return function(e,i){var o=function(){(0,s.Z)(i(),t,r,b).isSettingHash?j(t,r,e,{isSettingHash:!1}):e(w({wid:t,pud:r,wait:n,fs:a}))};j(t,r,e,{handleHashChange:o}),window.addEventListener("hashchange",o)}}({wid:o,pud:p,wait:v,fs:a})),(0,l.u9)()?t(w({wid:o,pud:p,wait:v,fs:a})):t(function(e){var t=e.wid,r=e.replId,a=e.fs,o=e.dotReplit;return function(){var e=(0,n.Z)(i().mark((function e(n,c){var s,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c().workspace[t].activeFile){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,(0,g.W)({replId:r,fs:a,dotReplit:o});case 5:if(s=e.sent,u=s.entrypoint){e.next=10;break}return n((0,f.Z)({wid:t})),e.abrupt("return");case 10:n({type:"OPEN_FILE",wid:t,path:u});case 11:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}({wid:o,replId:e,fs:a,dotReplit:d}));break;case"WORKSPACE_WILL_UNMOUNT":t(function(e,t){return function(r,n){var a=(0,s.Z)(n(),e,t,b).handleHashChange;a&&window.removeEventListener("hashchange",a)}}(o,p));break;case"ACE_EDIT_SESSION_CREATED":t(function(e,t){return function(r){j(e,t,r,{aceEditSessionCreated:!0})}}(o,p));break;case"OPEN_DEEP_LINK":var m=h.path,x=h.line,E=h.col,O=h.indexStart,k=h.indexEnd;t(y({wid:o,pud:p,path:m,line:x,col:E,wait:v,indexStart:O,indexEnd:k}));break;case"OPEN_FILE":var S=h.path||"";t(function(e,t,r,a,o){return function(){var s=(0,n.Z)(i().mark((function n(s){var u;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,l.mv)(a);case 2:n.sent.path!==r&&(j(e,t,s,{isSettingHash:!0}),window.location.hash.length>0?o.updateDeeplink({path:r}):(u=c.default.asPath.includes("#")?c.default.asPath.slice(0,c.default.asPath.indexOf("#")):c.default.asPath,c.default.replace({pathname:c.default.pathname,query:c.default.query},"".concat(u,"#").concat(r),{shallow:!0})));case 5:case"end":return n.stop()}}),n)})));return function(e){return s.apply(this,arguments)}}()}(o,p,S,a,u))}return null})),null}var k=(0,u.Z)((function(){return{isSettingHash:!1,handleHashChange:void 0,aceEditSessionCreated:!1}})),S=k.reducer,j=k.setState},97510:function(e,t,r){r.d(t,{Z:function(){return c}});var n=r(65988),a=(r(67294),r(24561)),i=r(35604),o=r(35944);function c(e){var t=e.preventHighlightBorder,r=(0,i.Z)();return(0,o.BX)("div",{className:n.default.dynamic([["3681970762",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])+" loader",children:[(0,o.tZ)("div",{className:n.default.dynamic([["3681970762",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])+" wrap",children:(0,o.BX)(a.ZP,{primaryColor:"var(--background-highest)",secondaryColor:"var(--background-higher)",uniquekey:"editorLoader",children:[(0,o.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"70",height:"10",className:n.default.dynamic([["3681970762",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,o.tZ)("rect",{x:"80",y:"0",rx:"3",ry:"3",width:"100",height:"10",className:n.default.dynamic([["3681970762",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,o.tZ)("rect",{x:"190",y:"0",rx:"3",ry:"3",width:"10",height:"10",className:n.default.dynamic([["3681970762",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,o.tZ)("rect",{x:"15",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:n.default.dynamic([["3681970762",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,o.tZ)("rect",{x:"155",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:n.default.dynamic([["3681970762",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,o.tZ)("rect",{x:"15",y:"40",rx:"3",ry:"3",width:"90",height:"10",className:n.default.dynamic([["3681970762",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,o.tZ)("rect",{x:"115",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:n.default.dynamic([["3681970762",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,o.tZ)("rect",{x:"185",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:n.default.dynamic([["3681970762",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,o.tZ)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"30",height:"10",className:n.default.dynamic([["3681970762",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,o.tZ)("rect",{x:"15",y:"80",rx:"3",ry:"3",width:"70",height:"10",className:n.default.dynamic([["3681970762",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,o.tZ)("rect",{x:"95",y:"80",rx:"3",ry:"3",width:"60",height:"10",className:n.default.dynamic([["3681970762",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,o.tZ)("rect",{x:"165",y:"80",rx:"3",ry:"3",width:"30",height:"10",className:n.default.dynamic([["3681970762",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,o.tZ)("rect",{x:"15",y:"100",rx:"3",ry:"3",width:"110",height:"10",className:n.default.dynamic([["3681970762",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,o.tZ)("rect",{x:"135",y:"100",rx:"3",ry:"3",width:"100",height:"10",className:n.default.dynamic([["3681970762",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])}),(0,o.tZ)("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"70",height:"10",className:n.default.dynamic([["3681970762",[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"]]])})]})}),(0,o.tZ)(n.default,{id:"3681970762",dynamic:[r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)"],children:[".loader.__jsx-style-dynamic-selector{position:absolute;z-index:3;right:0;top:0;height:100%;width:100%;background-color:var(--background-default);overflow:hidden;padding:var(--space-16);border-bottom-right-radius:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);box-shadow:".concat(r&&!t?"0 3px 0 3px ".concat(r):"var(--shadow-1)",";}"),".wrap.__jsx-style-dynamic-selector{overflow:hidden;}",".wrap.__jsx-style-dynamic-selector>svg{max-width:640px;min-width:500px;height:auto;}","@media screen and (min-width:900px){.loader.__jsx-style-dynamic-selector{padding:30px;}}"]})]})}},24858:function(e,t,r){r.r(t),r.d(t,{Component:function(){return p}});var n=r(65988),a=(r(67294),r(53567)),i=r(84476),o=r(25517),c=r(48277),s=r(10257),u=r(35944),l={styles:(0,u.tZ)(n.default,{id:"2980229614",children:["*.jsx-2980229614{max-width:100%;}"]}),className:"jsx-2980229614"};function d(e){var t=e.children;return(0,u.BX)("div",{className:"jsx-75754313 enveditor",children:[(0,u.BX)(a.gC,{spacing:2,align:"stretch",justify:"center",className:l.className,children:[(0,u.BX)(a.gC,{spacing:1,align:"stretch",justify:"center",className:l.className,children:[(0,u.tZ)(i.Z,{truncate:!0,level:4,children:"Secrets"}),(0,u.tZ)(o.Z,{truncate:!0,size:"small",foreground:"2",children:"System environment variables"})]}),t]}),l.styles,(0,u.tZ)(n.default,{id:"75754313",children:[".enveditor.jsx-75754313{height:100%;width:100%;border-top-right-radius:var(--border-radius-4);background-color:var(--background-default);padding:var(--space-8);overflow:auto;}"]})]})}function p(){var e=(0,s.Z)().fs;return(0,u.tZ)(d,{children:(0,u.tZ)(c.Z,{fs:e})})}},35334:function(e,t,r){r.r(t),r.d(t,{Component:function(){return n.Z}});var n=r(61069)},8269:function(e,t,r){r.r(t),r.d(t,{Component:function(){return v},reducer:function(){return m}});var n=r(92809),a=r(65988),i=(r(67294),r(82100)),o=r(45187),c=r(60356),s=r(67180),u=r(3239),l=r(10257),d=r(20536),p=r(38934),f=r(32930),h=r(35944),v=(0,i.$j)((function(e,t){return e.workspace[t.wid].plugins[t.pud].state}),{evalProject:s.mT,stopEval:s.Rl})((function(e){var t=e.wid,r=e.loading,n=e.runstate,i=e.maxWidthBreakpoint,s=e.evalProject,v=e.stopEval,g=(0,c.Z)(),b=(0,o.Iz6)({variables:{id:g}}).data,y=(0,l.Z)().replbox,w=(0,u.Z)({replbox:y}),m=(0,f.Fg)(),x="floating-run",E=function(){};if(b)if("Repl"===b.repl.__typename&&"replbox"===b.repl.lang.engine){var O=b.repl;w.runState===d.A.OFFLINE||w.runState===d.A.STOPPING?x+=" floating-run-loading":w.runState===d.A.RUNNING?(x+=" floating-run-stop",E=function(){w.stopRun()}):w.runState===d.A.IDLE&&(E=function(){w.run(),(0,p.track)(p.events.PROJECT_RAN,{wid:t,language:O.language,replId:g,replTitle:O.title})})}else r||"stopping"===n?x+=" floating-run-loading":"running"===n?(x+=" floating-run-stop",E=function(){v({wid:t})}):E=function(){s({wid:t})};else x+=" floating-run-loading";return(0,h.tZ)("div",{onClick:E,className:a.default.dynamic([["1448111686",[m===f.V2.replitSpooky?"url(/public/images/run_orange.svg)":"url(/public/images/run_green.svg)",i]]])+" "+(x||""),children:(0,h.tZ)(a.default,{id:"1448111686",dynamic:[m===f.V2.replitSpooky?"url(/public/images/run_orange.svg)":"url(/public/images/run_green.svg)",i],children:[".floating-run.__jsx-style-dynamic-selector{display:none;position:absolute;bottom:24px;right:24px;height:50px;width:50px;border-radius:100%;border:solid 2px var(--accent-positive-dimmer);cursor:pointer;background-image:".concat(m===f.V2.replitSpooky?"url(/public/images/run_orange.svg)":"url(/public/images/run_green.svg)",";background-size:20px 20px;background-position:center;background-repeat:no-repeat;background-color:var(--accent-positive-dimmest);z-index:1000;opacity:0.5;}"),".floating-run-loading.__jsx-style-dynamic-selector{background-image:url(/public/images/loading_dots.gif);}",".floating-run-stop.__jsx-style-dynamic-selector{background-image:url(/public/images/stop_green.svg);}",".run-cta.__jsx-style-dynamic-selector{background:var(--accent-primary-default);padding:var(--space-16);color:var(--white);border-radius:var(--border-radius-4);}","@media screen and (max-width:".concat(i,"px){.floating-run.__jsx-style-dynamic-selector{display:block;}}")]})})})),g=r(52973),b=r(7444);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=(0,g.$)({primary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0,maxWidthBreakpoint:500},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.qg:return w(w({},e),t.initialState);case s.hq:return w(w({},e),{},{loading:!0});case s.FG:return w(w({},e),{},{loading:!1});default:return e}},runstate:b.Z})},10762:function(e,t,r){r.r(t),r.d(t,{receiver:function(){return d},reducer:function(){return l}});var n=r(52973),a=r(25514),i=r(20138),o=r(74029),c=r(89107),s=r(20493),u=r(7444),l=(0,n.$)({preferences:a.c,repl:o.E,files:c.Z,workingDirectory:s.Y,runstate:u.Z});function d(e,t,r){return"LOAD_PLUGIN"===r.type?function(n,l){var d=(0,i.Z)(l(),e,t,"infoprovider"),p=d.preferences,f=d.repl,h=d.files,v=d.workingDirectory,g=d.runstate;p!==a.U&&n({type:"UPDATE_WORKSPACE_PREFERENCES",wid:e,pud:r.pluginPud,updates:p}),f!==o.N&&n({type:"REPL_UPDATED",wid:e,pud:r.pluginPud,updates:f}),v!==s.E&&n({type:"UPDATE_WORKING_DIRECTORY",wid:e,pud:r.pluginPud,path:v}),h!==c.L&&Object.keys(h).forEach((function(t){n({type:"CREATE_FILE",wid:e,pud:r.pluginPud,path:t,file:h[t]})})),g!==u.Q&&n({type:"SET_RUN_STATE",wid:e,pud:t,runstate:g})}:null}},18775:function(e,t,r){r.r(t),r.d(t,{Component:function(){return We},receiver:function(){return Ke},reducer:function(){return ze}});var n={};r.r(n),r.d(n,{install:function(){return C},instructions:function(){return A},search:function(){return T}});var a={};r.r(a),r.d(a,{install:function(){return G},instructions:function(){return V},search:function(){return H}});var i={};r.r(i),r.d(i,{install:function(){return X},instructions:function(){return J},search:function(){return H}});var o={};r.r(o),r.d(o,{install:function(){return re},instructions:function(){return ne},search:function(){return ae}});var c={};r.r(c),r.d(c,{install:function(){return oe},instructions:function(){return ce},search:function(){return se}});var s={};r.r(s),r.d(s,{install:function(){return ve},instructions:function(){return ge},search:function(){return H}});var u=r(30266),l=r(68216),d=r(25997),p=r(91077),f=r(30268),h=r(92953),v=r(92809),g=r(65988),b=r(809),y=r.n(b),w=r(67294),m=r(82100),x=r(14890),E=r(91296),O=r.n(E),k=r(84476),S=r(67180),j=r(9329),_=r(7977),L=r.n(_),Z=r(38934),P=r(24243),D=r(91682),R=r(85893),I="requirements.txt";function C(e){var t=e.wid,r=e.pud,n=e.lib,a=e.getFile;return function(){var e=(0,u.Z)(y().mark((function e(i,o){var c,s,u,l,d,p,f,h;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=o().workspace[t].activeFile,s=o().workspace[t].plugins[r].state.files,u="".concat(n.name,"==").concat(n.version),Object.keys(s).includes(I)){e.next=7;break}return i({type:"UPLOAD_FILE",wid:t,path:I,content:P.Z.from(u+"\n")}),i((0,S.ZB)({wid:t,path:I})),e.abrupt("return");case 7:return c!==I&&i((0,S.ZB)({wid:t,path:I})),e.next=10,a(I);case 10:if(l=e.sent,d=P.Z.from(l.content).toString(),p=null,!d.split("\n").find((function(e,t){return p=t+1,e.trim()===u}))){e.next=17;break}return i((0,S.$S)({wid:t,line:p||0})),i((0,j.P)({content:"Package already included",type:"notice",time:3e3})),e.abrupt("return");case 17:f=d.length,h=d.endsWith("\n")?"":"\n",i({type:"OT_FILE_OP",wid:t,path:I,op:[f,h+u+"\n"],changeSource:"libsearch"}),i((0,S.$S)({wid:t,line:d.split("\n").length}));case 21:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}function A(e){return(0,R.jsxs)(w.Fragment,{children:[(0,R.jsxs)("ol",{children:[(0,R.jsxs)("li",{children:["Create a ",(0,R.jsx)("code",{children:"requirements.txt"})," file, (we'll do it for you if you click the add button)."]}),(0,R.jsxs)("li",{children:["Then add ",(0,R.jsx)("code",{children:e.name})," to ",(0,R.jsx)("code",{children:"requirements.txt"})," on it's own line. If you want to specify a version, then add"," ",(0,R.jsx)("code",{children:e.name})," followed by a version of your choosing."]}),(0,R.jsxs)("li",{children:["After that you'd want to check the"," ",(0,R.jsx)("a",{href:e.link,rel:"external",target:"_blank",children:"documentation"})," ","for usage"]})]}),(0,R.jsx)("br",{}),"(typically you'd want to add an ",(0,R.jsx)("code",{children:"import"})," to the file where you want to use the module"]})}function T(e){return(0,D.LK)("/data/pythonlibraries/search?q=".concat(e))}var N=r(76884),F=["do","if","in","for","let","new","try","var","case","else","enum","eval","null","this","true","void","with","await","break","catch","class","const","false","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof"],U=/^[$A-Z_][0-9A-Z_$]*$/i;function M(e){return!F.includes(e)&&U.test(e)}var B=function(e){var t=e.replace(/^@\w+\//,"");if(!M(t=N(t))){var r=t.match(/[$A-Z_][0-9A-Z_$]*/i);if(r&&r[0]&&(t=r[0],r.index>0&&(t=t[0].toLowerCase()+t.slice(1))),!M(t))return"require('".concat(t,"');")}return"let ".concat(t," = require('").concat(e,"');")},H=function(e){return(0,D.LK)("/data/npm/search/".concat(encodeURIComponent(e))).then((function(e){return e.map((function(e){return{name:e.package.name,description:e.package.description,link:e.package.links.homepage,version:e.package.version}}))}))};function G(e){var t=e.wid,r=e.lib;return function(e,n){var a=n().workspace[t].activeFile,i=B(r.name);e({type:"OT_FILE_OP",wid:t,path:a,op:[i+"\n"],changeSource:"libsearch"})}}function V(e){return(0,R.jsxs)(w.Fragment,{children:["Just ",(0,R.jsx)("code",{children:"require"})," the"," ",(0,R.jsx)("a",{href:"https://npmjs.com",rel:"external",target:"_blank",children:"npm"})," ","module name like so"," ",(0,R.jsxs)("code",{children:["require('",e.name,"')"]})," ","and we'll fetch it for you.",(0,R.jsx)("br",{}),"Check the module's"," ",(0,R.jsx)("a",{href:e.link,target:"_blank",children:"documentation"})," ","for usage."]})}function q(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){(0,v.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Y="package.json",$={main:"index.js",dependencies:{}};function X(e){var t=e.wid,r=e.pud,n=e.lib,a=e.getFile;return function(){var e=(0,u.Z)(y().mark((function e(i,o){var c,s,u,l,d,p,f,h,g,b,w,m,x,E,O,k;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=o().workspace[t].activeFile,s=o().workspace[t].plugins[r].state.files,Object.keys(s).includes(Y)){e.next=7;break}return u=K(K({},$),{},{dependencies:K(K({},$.dependencies),{},(0,v.Z)({},n.name,n.version))}),i({type:"UPLOAD_FILE",wid:t,path:Y,content:P.Z.from(JSON.stringify(u,null,"  "))}),i((0,S.ZB)({wid:t,path:Y})),e.abrupt("return");case 7:return c!==Y&&i((0,S.ZB)({wid:t,path:Y})),e.next=10,a(Y);case 10:l=e.sent,d=P.Z.from(l.content).toString(),e.prev=12,p=JSON.parse(d),e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(12),i((0,j.P)({content:"Cannot parse package.json. Make sure it's valid JSON",type:"error",time:3e3})),e.abrupt("return");case 20:if(p.dependencies){e.next=29;break}return f=d.lastIndexOf("}")||0,'  \n"dependencies": {}\n',i({type:"OT_FILE_OP",wid:t,path:Y,op:[f,'  \n"dependencies": {}\n'],changeSource:"libsearch"}),e.t1=P.Z,e.next=27,a(Y);case 27:e.t2=e.sent.content,d=e.t1.from.call(e.t1,e.t2).toString();case 29:e.t3=y().keys(p.dependencies);case 30:if((e.t4=e.t3()).done){e.next=40;break}if((h=e.t4.value).trim()!==n.name){e.next=38;break}i((0,j.P)({content:"Package already included",type:"notice",time:3e3})),g=0,b=q(d.split("\n"));try{for(b.s();!(w=b.n()).done;)m=w.value,g+=1,m.trim().startsWith('"'+h+'"')&&i((0,S.$S)({wid:t,line:g}))}catch(_){b.e(_)}finally{b.f()}return e.abrupt("return");case 38:e.next=30;break;case 40:if(x=/"dependencies"\s*:\s*{/.exec(d)){e.next=43;break}throw new Error('Expected "dependencies" in package.json');case 43:E=x[0].length+x.index,O=p.dependencies&&Object.keys(p.dependencies),k='    \n"'.concat(n.name,'": "^').concat(n.version,'"').concat(O?",":"","\n"),i({type:"OT_FILE_OP",wid:t,path:Y,op:[E,k],changeSource:"libsearch"});case 47:case"end":return e.stop()}}),e,null,[[12,16]])})));return function(t,r){return e.apply(this,arguments)}}()}function J(e){return(0,R.jsxs)(w.Fragment,{children:[(0,R.jsxs)("ol",{children:[(0,R.jsxs)("li",{children:["If you don't have a ",(0,R.jsx)("code",{children:"package.json"})," file, create one (we'll do it for you if you click the add button)."]}),(0,R.jsxs)("li",{children:["Then add"," ",(0,R.jsxs)("code",{children:['"',e.name,'": "',e.version,'"']})," ","under the ",(0,R.jsx)("code",{children:"dependencies"})," JSON field."]}),(0,R.jsxs)("li",{children:["After that you'd want to check the package's"," ",(0,R.jsx)("a",{href:e.link,target:"_blank",children:"documentation"})," ","for usage"]})]}),(0,R.jsx)("br",{}),"Typically you would add a ",(0,R.jsx)("code",{children:"require"})," to the file where you want to use ",(0,R.jsx)("code",{children:e.name})]})}function Q(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var te="index.html";function re(e){var t=e.wid,r=e.pud,n=e.lib,a=e.getFile;return function(){var e=(0,u.Z)(y().mark((function e(i,o){var c,s,u,l,d,p,f,h,v,g,b,w,m,x;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=o().workspace[t].activeFile,s=o().workspace[t].plugins[r].state.files,Object.keys(s).includes(te)){e.next=5;break}return i((0,j.P)({content:"There is no index.html file to add the script to",type:"error",time:3e3})),e.abrupt("return");case 5:return c!==te&&i((0,S.ZB)({wid:t,path:te})),u='<script src="'.concat(n.include||"",'"><\/script>'),e.next=9,a(te);case 9:l=e.sent,d=P.Z.from(l.content).toString("utf8"),p=0,f=Q(d.split("\n")),e.prev=13,f.s();case 15:if((h=f.n()).done){e.next=24;break}if(v=h.value,p+=1,!v.includes(u)){e.next=22;break}return i((0,j.P)({content:"Package already installed.",type:"notice",time:3e3})),i((0,S.$S)({wid:t,line:p})),e.abrupt("return");case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:return-1===(g=d.indexOf("<script"))&&(g=d.indexOf("</body>")),i({type:"OT_FILE_OP",wid:t,path:te,op:[-1===g?d.length:g,u+"\n"],changeSource:"libsearch"}),e.next=37,a(te);case 37:b=e.sent,d=P.Z.from(b.content).toString(),p=0,w=Q(d.split("\n")),e.prev=41,w.s();case 43:if((m=w.n()).done){e.next=50;break}if(x=m.value,p+=1,!x.includes(u)){e.next=48;break}return e.abrupt("break",50);case 48:e.next=43;break;case 50:e.next=55;break;case 52:e.prev=52,e.t1=e.catch(41),w.e(e.t1);case 55:return e.prev=55,w.f(),e.finish(55);case 58:i((0,S.$S)({wid:t,line:p}));case 59:case"end":return e.stop()}}),e,null,[[13,26,29,32],[41,52,55,58]])})));return function(t,r){return e.apply(this,arguments)}}()}function ne(e){return(0,R.jsxs)(w.Fragment,{children:["To install a JavaScript package add a"," ",(0,R.jsx)("code",{children:'<script src="'.concat(e.include||"",'"><\/script>')})," to your html file (typically that's ",(0,R.jsx)("code",{children:"index.html"}),").",(0,R.jsx)("br",{}),"After that you'd want to check the ",(0,R.jsx)("a",{href:e.link,children:"documentation"})," ","for usage"]})}function ae(e){return(0,D.LK)("/data/cdnjs/search/".concat(encodeURIComponent(e)))}var ie="Gemfile";function oe(e){var t=e.wid,r=e.pud,n=e.lib,a=e.getFile;return function(){var e=(0,u.Z)(y().mark((function e(i,o){var c,s,u,l,d,p,f,h;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=o().workspace[t].activeFile,s=o().workspace[t].plugins[r].state.files,u="gem '".concat(n.name,"', '").concat(n.version,"'"),Object.keys(s).includes(ie)){e.next=7;break}return i({type:"UPLOAD_FILE",wid:t,path:ie,content:P.Z.from("source 'https://rubygems.org'\n"+u+"\n")}),i((0,S.ZB)({wid:t,path:ie})),e.abrupt("return");case 7:return c!==ie&&i((0,S.ZB)({wid:t,path:ie})),e.next=10,a(ie);case 10:if(l=e.sent,d=P.Z.from(l.content).toString(),p=null,!d.split("\n").find((function(e,t){return p=t+1,e.trim()===u}))){e.next=17;break}return i((0,S.$S)({wid:t,line:p||0})),i((0,j.P)({content:"Package already included",type:"notice",time:3e3})),e.abrupt("return");case 17:f=d.length,h=d.endsWith("\n")?"":"\n",i({type:"OT_FILE_OP",wid:t,path:ie,op:[f,h+u+"\n"],changeSource:"libsearch"}),i((0,S.$S)({wid:t,line:d.split("\n").length}));case 21:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}function ce(e){return(0,R.jsx)(w.Fragment,{children:(0,R.jsxs)("ol",{children:[(0,R.jsxs)("li",{children:["Create a ",(0,R.jsx)("code",{children:"Gemfile"})," file, (we'll do it for you if you click the add button)."]}),(0,R.jsxs)("li",{children:["Then add ",(0,R.jsx)("code",{children:e.name})," to ",(0,R.jsx)("code",{children:"Gemfile"})," on it's own line. If you want to specify a version, then add"," ",(0,R.jsx)("code",{children:e.name})," followed by a version of your choosing."]}),(0,R.jsxs)("li",{children:["After that you'd want to check the"," ",(0,R.jsx)("a",{href:e.link,rel:"external",target:"_blank",children:"documentation"})," ","for usage"]})]})})}function se(e){return(0,D.LK)("/data/rubygems/search/".concat(e))}function ue(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return le(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){(0,v.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fe="package.json",he={name:"reason-nodejs-template",version:"0.1.0",private:!0,files:["src/","bsconfig.json"],dependencies:{},devDependencies:{"bs-platform":"4.0.18"}};function ve(e){var t=e.wid,r=e.pud,n=e.lib,a=e.getFile;return function(){var e=(0,u.Z)(y().mark((function e(i,o){var c,s,u,l,d,p,f,h,g,b,w,m,x,E,O,k;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=o().workspace[t].activeFile,s=o().workspace[t].plugins[r].state.files,Object.keys(s).includes(fe)){e.next=7;break}return u=pe(pe({},he),{},{dependencies:pe(pe({},he.dependencies),{},(0,v.Z)({},n.name,n.version))}),i({type:"UPLOAD_FILE",wid:t,path:fe,content:P.Z.from(JSON.stringify(u,null,"  "))}),i((0,S.ZB)({wid:t,path:fe})),e.abrupt("return");case 7:return c!==fe&&i((0,S.ZB)({wid:t,path:fe})),e.next=10,a(fe);case 10:l=e.sent,d=P.Z.from(l.content).toString(),e.prev=12,p=JSON.parse(d),e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(12),i((0,j.P)({content:"Cannot parse package.json. Make sure it's valid JSON",type:"error",time:3e3})),e.abrupt("return");case 20:if(p.dependencies){e.next=29;break}return f=d.lastIndexOf("}")||0,'  \n"dependencies": {}\n',i({type:"OT_FILE_OP",wid:t,path:fe,op:[f,'  \n"dependencies": {}\n'],changeSource:"libsearch"}),e.t1=P.Z,e.next=27,a(fe);case 27:e.t2=e.sent.content,d=e.t1.from.call(e.t1,e.t2).toString();case 29:e.t3=y().keys(p.dependencies);case 30:if((e.t4=e.t3()).done){e.next=40;break}if((h=e.t4.value).trim()!==n.name){e.next=38;break}i((0,j.P)({content:"Package already included",type:"notice",time:3e3})),g=0,b=ue(d.split("\n"));try{for(b.s();!(w=b.n()).done;)m=w.value,g+=1,m.trim().startsWith('"'+h+'"')&&i((0,S.$S)({wid:t,line:g}))}catch(_){b.e(_)}finally{b.f()}return e.abrupt("return");case 38:e.next=30;break;case 40:if(x=/"dependencies"\s*:\s*{/.exec(d)){e.next=43;break}throw new Error('Expected "dependencies" in package.json');case 43:E=x[0].length+x.index,O=p.dependencies&&Object.keys(p.dependencies),k='    \n"'.concat(n.name,'": "').concat(n.version,'"').concat(O?",":"","\n"),i({type:"OT_FILE_OP",wid:t,path:fe,op:[E,k],changeSource:"libsearch"});case 47:case"end":return e.stop()}}),e,null,[[12,16]])})));return function(t,r){return e.apply(this,arguments)}}()}function ge(e){return(0,R.jsxs)(w.Fragment,{children:[(0,R.jsxs)("ol",{children:[(0,R.jsxs)("li",{children:["If you don't have a ",(0,R.jsx)("code",{children:"package.json"})," file, create one (we'll do it for you if you click the add button)."]}),(0,R.jsxs)("li",{children:["Then add"," ",(0,R.jsxs)("code",{children:['"',e.name,'": "',e.version,'"']})," ","under the ",(0,R.jsx)("code",{children:"dependencies"})," JSON field."]}),(0,R.jsxs)("li",{children:["After that you'd want to check the package's"," ",(0,R.jsx)("a",{href:e.link,target:"_blank",children:"documentation"})," ","for usage"]})]}),(0,R.jsx)("br",{}),"Typically you would add a ",(0,R.jsx)("code",{children:"require"})," to the file where you want to use ",(0,R.jsx)("code",{children:e.name})]})}var be=r(94184),ye=r.n(be);function we(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.Z)(this,r)}}var me=function(e){(0,p.Z)(r,e);var t=we(r);function r(){var e;(0,l.Z)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1,query:e.props.query,hovered:null},e.handleQueryChange=function(t){var r=t.currentTarget.value;e.setState({query:r}),e.updateLibraries(r)},e.listHoverChange=function(t){var r;r=t.currentTarget instanceof window.HTMLUListElement&&t.target instanceof window.HTMLLIElement?parseInt(t.target.dataset.index,10):null,e.setState({hovered:r})},e.moveSelector=function(t){var r;if(40===t.keyCode)r=1;else{if(38!==t.keyCode)return 13===t.keyCode&&null!==e.state.hovered?void e.props.onSelectLibrary(e.props.libraries[e.state.hovered]):void 0;r=-1}null===e.state.hovered?e.setState({hovered:0}):e.state.hovered+r>=0&&e.state.hovered+r<e.props.libraries.length&&e.setState({hovered:e.state.hovered+r}),t.preventDefault()},e.updateLibraries=function(t){if(!t)return e.props.resetSearchState(),void e.setState({loading:!1});e.setState({loading:!0}),e.props.onSearch(t)},e}return(0,d.Z)(r,[{key:"componentDidMount",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.libraries!==e.libraries&&this.setState({loading:!1,hovered:null})}},{key:"render",value:function(){var e=this;return(0,R.jsxs)("div",{onKeyDown:this.moveSelector,className:"jsx-3475785219 libsearch-search",children:[(0,R.jsxs)("div",{className:"jsx-3475785219 libsearch-search-input",children:[(0,R.jsx)("input",{type:"text",placeholder:"search for a package",ref:function(t){return e.inputRef=t},value:this.state.query,onChange:this.handleQueryChange,autoFocus:!0,className:"jsx-3475785219"}),this.state.loading&&(0,R.jsx)("div",{title:"loading",className:"jsx-3475785219 libsearch-search-loading"})]}),0===this.props.libraries.length&&0!==this.props.query.length&&!this.state.loading&&(0,R.jsx)("div",{className:"jsx-3475785219 libsearch-search-no-results",children:"Sorry, no packages found"}),this.props.libraries.length>0&&(0,R.jsx)("ul",{onMouseOver:this.listHoverChange,className:"jsx-3475785219 libsearch-search-result",children:this.props.libraries.map((function(t,r){return(0,R.jsxs)("li",{"data-index":r,onClick:function(){return e.props.onSelectLibrary(t)},className:"jsx-3475785219 "+(ye()("libsearch-search-item",{"libsearch-search-item-hover":e.state.hovered===r})||""),children:[t.name,": ",t.description||"(No description)"]},t.name)}))}),(0,R.jsx)(g.default,{id:"3475785219",children:[".libsearch-search.jsx-3475785219{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;width:100%;overflow:auto;color:var(--foreground-default);}",".libsearch-search-input.jsx-3475785219{width:100%;position:relative;}",".libsearch-search-input.jsx-3475785219 input.jsx-3475785219::-webkit-input-placeholder{color:var(--foreground-dimmer);}",".libsearch-search-input.jsx-3475785219 input.jsx-3475785219::-moz-placeholder{color:var(--foreground-dimmer);}",".libsearch-search-input.jsx-3475785219 input.jsx-3475785219:-ms-input-placeholder{color:var(--foreground-dimmer);}",".libsearch-search-input.jsx-3475785219 input.jsx-3475785219::placeholder{color:var(--foreground-dimmer);}",".libsearch-search-input.jsx-3475785219 input.jsx-3475785219{padding:12px ".concat(30,"px 15px 12px;font-size:15px;width:100%;border-top:none;border-right:none;border-left:none;outline:none;background:var(--background-default);border-bottom:solid 1px var(--foreground-dimmest);color:var(--foreground-default);}"),".libsearch-search-input.jsx-3475785219 input.jsx-3475785219:focus{border-color:var(--accent-primary-default);}",".libsearch-search-loading.jsx-3475785219{position:absolute;top:8.5px;right:0px;width:".concat(30,"px;height:23px;background-image:url(/public/images/loading_dots.gif);background-position:center center;background-repeat:no-repeat;background-size:contain;}"),".libsearch-search-no-results.jsx-3475785219{font-size:15px;margin-top:20px;text-align:center;}",".libsearch-search-result.jsx-3475785219{list-style:none;}",".libsearch-search-item.jsx-3475785219{cursor:pointer;font-size:15px;padding:12px 15px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:var(--foreground-default);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}",".libsearch-search-item-hover.jsx-3475785219{background-color:var(--accent-primary-dimmest);}"]})]})}}]),r}(w.Component),xe=r(18454),Ee=r.n(xe);function Oe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.Z)(this,r)}}var ke=function(e){(0,p.Z)(r,e);var t=Oe(r);function r(){var e;(0,l.Z)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={showSection:e.props.expanded},e.toggleSection=function(){if(e.props.manageOwnState){var t=!e.state.showSection;return e.setState({showSection:t}),void e.props.onChange(t)}e.props.onChange()},e}return(0,d.Z)(r,[{key:"render",value:function(){var e=this.props,t=e.expandable,r=e.title,n=e.staticContent,a=e.children,i=e.expanded,o=e.manageOwnState,c=this.state.showSection,s=o?c:i;return(0,R.jsxs)("div",{className:"jsx-368237033 expandableSection-container",children:[(0,R.jsx)(g.default,{id:"1578082371",children:[".expandableSection-container.jsx-368237033{position:relative;}",".expandableSection-sectionTitle.jsx-368237033{background-color:var(--background-root);color:var(--foreground-default);}",".expandableSection-sectionTitle.jsx-368237033:hover{color:var(--white);}"]}),(0,R.jsx)(g.default,{id:"1742150307",children:[".expandableSection-container.jsx-368237033{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-flex:1;-ms-flex:1;flex:1;}",".expandableSection-sectionTitle.jsx-368237033{font-size:15px;font-weight:400;margin:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:10px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;min-height:35px;}",".expandableSection-sectionTitle.jsx-368237033 svg{margin-right:5px;}",".expandableSection-childrenWrapper.jsx-368237033{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0;overflow-wrap:break-word;-webkit-flex:1;-ms-flex:1;flex:1;}"]}),this.props.scopedStyles,(0,R.jsxs)("div",{style:t?{cursor:"pointer"}:{},onClick:t?this.toggleSection:void 0,className:"jsx-368237033 "+(ye()("expandableSection-sectionTitle",this.props.scopedClassName)||""),children:[t&&(0,R.jsx)(Ee(),{size:this.props.arrowSize,color:this.props.fillArrow?"currentColor":"transparent",direction:s?"bottom":"right",borderWidth:this.props.arrowBorderWidth,borderColor:"currentColor",style:{marginLeft:"".concat(s?"0":"3","px"),marginRight:"".concat(s?"10.5":"14","px")}}),r]}),n,(0,R.jsx)("div",{className:"jsx-368237033 "+(ye()("expandableSection-childrenWrapper",this.props.scopedClassName)||""),children:s&&a})]})}}]),r}(w.Component);ke.defaultProps={expandable:!0,expanded:!0,onChange:function(){},scopedStyles:null,scopedClassName:"",arrowBorderWidth:1,arrowSize:5,manageOwnState:!0};var Se,je,_e,Le=r(67722),Ze=function(e){var t=e.lib,r=e.packageInstructions,n=e.onBack,a=e.onInstall;return(0,R.jsxs)("div",{className:"jsx-1133481176 libsearch-details",children:[(0,R.jsxs)("div",{onClick:n,className:"jsx-1133481176 libsearch-details-back",children:[(0,R.jsx)(Ee(),{size:4.5,direction:"left",color:"currentColor"})," back to search"," "]}),(0,R.jsxs)("div",{className:"jsx-1133481176 libsearch-details-header",children:[(0,R.jsx)("div",{className:"jsx-1133481176 libsearch-details-libname",children:t.name}),(0,R.jsx)("div",{onClick:a,title:"Add package",className:"jsx-1133481176 libsearch-details-cta",children:(0,R.jsx)(Le.Z,{backgroundColor:"var(--background-default)",foregroundColor:"var(--foreground-default)",borderColor:"var(--accent-positive-dimmer)"})})]}),(0,R.jsx)("div",{className:"jsx-1133481176 libsearch-details-description",children:t.description||"This package has no description."}),(0,R.jsx)("div",{className:"jsx-1133481176 libsearch-details-link",children:(0,R.jsx)("a",{href:t.link,rel:"external",target:"_blank",className:"jsx-1133481176",children:"Package homepage"})}),(0,R.jsx)("div",{className:"jsx-1133481176 libsearch-details-seperator"}),(0,R.jsx)(ke,{title:"Manual installation",expanded:!1,arrowSize:3.25,arrowBorderWidth:1.25,children:(0,R.jsx)("div",{className:"jsx-1133481176 libsearch-details-instructions",children:r})}),(0,R.jsx)(g.default,{id:"1133481176",children:[".libsearch-details.jsx-1133481176{padding:12px 15px;height:calc(100% - 43px);overflow-y:auto;overflow-x:hidden;color:var(--foreground-default);}",".libsearch-details-back.jsx-1133481176{cursor:pointer;margin-bottom:20px;}",".libsearch-details-back.jsx-1133481176:hover{color:var(--accent-primary-default);}",".libsearch-details-header.jsx-1133481176{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:20px;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}",".libsearch-details-cta.jsx-1133481176{height:22px;width:22px;cursor:pointer;}",".libsearch-details-title.jsx-1133481176{font-size:16px;}",".libsearch-details-description.jsx-1133481176{margin-bottom:20px;line-height:1.25;}",".libsearch-details-link.jsx-1133481176{margin-bottom:20px;}",".libsearch-details-seperator.jsx-1133481176{background-color:var(--background-root);margin-left:-15px;padding-right:30px;width:100%;height:1px;box-sizing:content-box;margin-bottom:20px;}",".libsearch-details-instructions.jsx-1133481176{max-width:100%;margin-top:10px;font-size:15px;line-height:1.5;}",".libsearch-details-instructions.jsx-1133481176 code{max-width:100%;font-size:80%;background-color:var(--background-root);color:var(--foreground-dimmer);}",".libsearch-details-instructions.jsx-1133481176>div.jsx-1133481176{margin-bottom:10px;}",".libsearch-details-instructions.jsx-1133481176 ol{list-style-position:inside;}",".libsearch-details-instructions.jsx-1133481176 li{margin-bottom:10px;}"]})]})},Pe=r(52973),De=r(74029),Re=r(51157),Ie=r(89107);function Ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.Z)(this,r)}}function Ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(r),!0).forEach((function(t){(0,v.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ne="LIBSEARCH_RESULTS",Fe="LIBSEARCH_QUERY",Ue="LIBSEARCH_SELECT_LIB",Me="LIBSEARCH_INSTALL_SELECTED";function Be(e){var t=e.libraries,r=e.wid;return{type:Ne,libraries:t,wid:r}}function He(e){var t=e.query,r=e.wid;return{type:Fe,query:t,wid:r}}function Ge(e){var t=e.lib,r=e.wid;return{type:Ue,lib:t,wid:r}}function Ve(e){var t=e.wid;return{type:Me,wid:t}}function qe(e){switch(e){case"python":case"python_beta":case"python3":case"python3_beta":case"django":case"pygame":case"tkinter":return n;case"ruby":case"ruby_beta":case"rails":case"sinatra":return c;case"javascript":return a;case"html":return o;case"reactre":case"reactts":case"reactjs":case"gatsbyjs":case"nodejs":case"nodejs_beta":case"nodejs_prybar":case"nextjs":case"express":case"typescript":return i;case"reason_nodejs":return s;default:throw new Error("Unrecognized lang: "+e)}}var We=(0,m.$j)((function(e,t){var r=e.workspace[t.wid].plugins[t.pud].state,n=L().getCanonicalName(r.repl.language);return Te(Te({},r),{},{packman:qe(n),language:n})}),(function(e){return Te(Te({},(0,x.DE)({installSelected:Ve,showMessage:j.P,setSearchQuery:He,setSearchResults:Be,setSelectedLib:Ge},e)),{},{dispatch:e})}))((_e=je=function(e){(0,p.Z)(r,e);var t=Ce(r);function r(){var e;(0,l.Z)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onSearch=function(t){(0,Z.track)(Z.events.PACKAGES_SEARCHED,{query:e.props.query}),e.props.setSearchQuery({query:t,wid:e.props.wid}),e.search(t)},e.search=O()(function(){var t=(0,u.Z)(y().mark((function t(r){var n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.packman.search(r);case 3:n=t.sent,t.next=10;break;case 6:throw t.prev=6,t.t0=t.catch(0),e.props.showMessage({type:"error",content:"Failed to search: ".concat(t.t0.message),time:2e3}),t.t0;case 10:e.props.setSearchResults({libraries:n,wid:e.props.wid});case 11:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),200),e.resetSearchState=function(){e.props.setSearchQuery({query:"",wid:e.props.wid}),e.props.setSearchResults({libraries:[],wid:e.props.wid})},e}return(0,d.Z)(r,[{key:"componentDidMount",value:function(){(0,Z.track)(Z.events.LIBRARIES_SEARCHED,{wid:this.props.wid,language:this.props.language})}},{key:"render",value:function(){var e=this,t=this.props,r=t.selectedLib,n=t.wid;return(0,R.jsxs)("div",{style:this.props.style,className:"jsx-11303655 libsearch",children:[(0,R.jsx)("div",{className:"jsx-11303655 libsearch-header",children:(0,R.jsx)(k.Z,{level:4,children:"Packages"})}),r?(0,R.jsx)(Ze,{lib:r,onInstall:function(){return e.props.installSelected({wid:n})},packageInstructions:this.props.packman.instructions(r),onBack:function(){return e.props.setSelectedLib({lib:null,wid:n})}}):(0,R.jsx)(me,{resetSearchState:this.resetSearchState,onSearch:this.onSearch,onSelectLibrary:function(t){return e.props.setSelectedLib({lib:t,wid:n})},query:this.props.query,libraries:this.props.libraries}),(0,R.jsx)(g.default,{id:"11303655",children:[".libsearch.jsx-11303655{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;background-color:var(--background-default);border-top-right-radius:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);box-shadow:var(--shadow-1);}",".libsearch-header.jsx-11303655{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;height:var(--space-48);padding:var(--space-8) 0;position:relative;color:var(--foreground-default);width:100%;}"]})]})}}]),r}(w.Component),je.defaultProps={style:{}},Se=_e))||Se,ze=(0,Pe.$)({primary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{libraries:[],query:"",selectedLib:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.qg:return Te(Te({},e),t.initialState);case Ne:return Te(Te({},e),{},{libraries:t.libraries});case Fe:return Te(Te({},e),{},{query:t.query});case Ue:return Te(Te({},e),{},{selectedLib:t.lib})}return e},repl:De.E,files:Ie.Z}),Ke=(0,Re.Z)((function(e,t,r,n){return r.type===Me?function(){var r=(0,u.Z)(y().mark((function r(a,i){var o,c,s;return y().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=i().workspace[e].plugins[t].state,c=o.repl,s=o.selectedLib){r.next=3;break}throw new Error("Expected library");case 3:return(0,Z.track)(Z.events.PACKAGES_SELECTED,{package:s.name}),r.next=6,a(qe(c.language).install({wid:e,pud:t,lib:s,getFile:function(r){return a(Ye({wid:e,pud:t,wait:n,path:r}))}}));case 6:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}():null}));function Ye(e){var t=e.wid,r=e.pud,n=e.wait,a=e.path;return function(){var e=(0,u.Z)(y().mark((function e(i,o){var c,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=o().workspace[t].plugins[r].state.files,(s=c[a])&&!1!==s.loaded){e.next=7;break}return setTimeout(i({type:"LOAD_FILE",wid:t,path:a}),0),e.next=6,n((function(e){return("FILE_LOADED"===e.type||"FILE_CACHE_HIT"===e.type)&&e.path===a}));case 6:s=o().workspace[t].plugins[r].state.files[a];case 7:return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}},16792:function(e,t,r){r.r(t),r.d(t,{Component:function(){return v}});var n=r(70917),a=r(65988),i=r(67294),o=r(38934),c=r(53291),s=r(88554),u=r(54151),l=r(14900),d=r(49512),p=r(82457),f=r(223),h=r(35944);function v(e){var t=e.wid,r=(0,c.Z)(),v=null!==r?(0,s.P)(r.language):null,g=null!==r&&null!==v?s.z[v]:[];return i.useEffect((function(){var e=null===r||void 0===r?void 0:r.language;(0,o.track)(o.events.LIBRARIES_SEARCHED,{wid:t,language:e})}),[null===r||void 0===r?void 0:r.language,t]),(0,h.BX)(l.Z,{background:"default",css:(0,n.iv)({justifyContent:"flex-start",borderTopRightRadius:p.TV.borderRadius4,borderBottomRightRadius:p.TV.borderRadius4,height:"100%"},"",""),children:[(0,h.tZ)(d.Z,{css:(0,n.iv)({position:"relative",height:p.TV.space48,justifyContent:"center",padding:p.TV.space12},"",""),children:(0,h.tZ)(f.h,{variant:"subheadBig",level:3,children:"Packages"})}),(0,h.tZ)(u.Z,{filesAffected:g}),(0,h.tZ)(a.default,{id:"641917437",children:[".pkgsearch-header.jsx-641917437{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;height:var(--space-48);padding:var(--space-16) var(--space-8);position:relative;color:var(--foreground-default);width:100%;}"]})]})}},60623:function(e,t,r){r.r(t),r.d(t,{Component:function(){return f}});var n=r(65988),a=r(67294),i=r(38934),o=r(67180),c=r(28955),s=r(20399),u=r(53291),l=r(82100),d=r(84476),p=r(35944);function f(e){var t=e.wid,r=e.style,f=(0,u.Z)(),h=(0,l.I0)();return a.useEffect((function(){f&&(0,i.track)(i.events.PREFERENCES_OPENED,{wid:t,language:f.language})}),[t,f]),(0,p.BX)("div",{style:r,className:"jsx-275685224 workspace-preferences",children:[(0,p.tZ)("div",{className:"jsx-275685224 preferences-header",children:(0,p.tZ)(d.Z,{level:4,children:"Settings"})}),(0,p.tZ)(s.Z,{onBeforePreferencesUpdate:function(e){void 0!==e.isLayoutStacked&&h(function(e,t){return function(r,n){var a=n().workspace[e],i=a.layout,s=a.plugins,u=c.PP(i,s,"editor")||c.PP(i,s,"codemirror")||c.PP(i,s,"blank")||c.PP(i,s,"markdownviewer")||c.PP(i,s,"mediaview"),l=c.PP(i,s,"console")||c.PP(i,s,"terminal2");if(l&&u){var d=c.i3(u,l);if(d){r((0,o.fc)({wid:e,path:d,property:"stacked",to:t}));var p=c.PP(i,s,"webview")||c.PP(i,s,"replboxdisplay");if(p){var f=c.i3(p,l);f&&r((0,o.fc)({wid:e,path:f,property:"stacked",to:!t}))}}}}}(t,e.isLayoutStacked)),h({type:o.Dq,wid:t,updates:e})}}),(0,p.tZ)(n.default,{id:"275685224",children:[".workspace-preferences.jsx-275685224{background:var(--background-default);border-top-right-radius:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);overflow-y:auto;}",".preferences-header.jsx-275685224{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;height:var(--space-48);padding:var(--space-16) var(--space-8);color:var(--foreground-default);width:100%;}"]})]})}},67168:function(e,t,r){r.r(t),r.d(t,{Component:function(){return o}});r(67294);var n=r(10257),a=r(91865),i=r(35944);function o(){var e=(0,n.Z)().replbox;return(0,i.tZ)(a.Z,{replbox:e})}},7941:function(e,t,r){r.r(t),r.d(t,{Component:function(){return o}});r(67294);var n=r(10257),a=r(88822),i=r(35944);function o(){var e=(0,n.Z)().replbox;return(0,i.tZ)(a.Z,{replbox:e})}},97698:function(e,t,r){r.r(t),r.d(t,{Component:function(){return H},receiver:function(){return q},reducer:function(){return V}});var n=r(92809),a=r(30266),i=r(79056),o=r(809),c=r.n(o),s=r(67294),u=r(82100),l=r(14147),d=r(20138),p=r(65988),f=r(50055);var h,v=r(39963),g=r(83587),b=r(53567),y=r(32930),w=r(39084),m=r(16482),x=r(35944),E=function(e){var t=e.style,r=e.clearConsole,n=e.findPrevious,a=e.findNext,o=e.refCallback,c=e.wid,u=e.pud,l=(0,y.Fg)(),d=s.useState(!1),f=(0,i.Z)(d,2),h=f[0],E=f[1];return(0,x.tZ)(w.xW,{stepId:m.H.Output,children:(0,x.BX)("div",{style:t,onKeyDown:function(e){"f"===e.key&&(0,g.jh)(e)&&!e.shiftKey&&(E(!0),e.preventDefault())},className:"jsx-3705234327 "+"".concat(y.RJ," ").concat(l===y.V2.replitSpooky?"spooky":"dark"),children:[(0,x.BX)("div",{style:{},className:"jsx-3705234327 console",children:[(0,x.tZ)("div",{className:"jsx-3705234327 controls",children:(0,x.BX)(b.Ug,{align:"center",wrap:"nowrap",children:[h?(0,x.tZ)(v.Rh,{findPrevious:n,findNext:a,exit:function(){return E(!1)}}):(0,x.tZ)(v.lD,{onClick:function(){return E(!0)}}),(0,x.tZ)(v.Zr,{onClick:r})]})}),(0,x.tZ)("div",{ref:o,className:"jsx-3705234327 xterm-container"}),(0,x.tZ)(k,{wid:c,pud:u})]}),(0,x.tZ)(p.default,{id:"664855680",children:[".xterm .xterm-viewport{overflow-y:auto !important;}"]}),(0,x.tZ)(p.default,{id:"1758466174",children:[".console.jsx-3705234327{height:100%;position:relative;background-color:var(--background-default);border-radius:var(--border-radius-4);overflow:hidden;padding-left:1em;padding-top:10px;z-index:1;}",".controls.jsx-3705234327{position:absolute;top:var(--space-8);right:var(--space-16);z-index:5;}",".xterm-container.jsx-3705234327{width:100%;box-sizing:border-box;height:100%;}"]})]})})},O=(h={},(0,n.Z)(h,-1,"Loading..."),(0,n.Z)(h,-2,"Fetching token"),(0,n.Z)(h,f.api.BootStatus.Stage.ACQUIRING,"Booting Repl"),(0,n.Z)(h,f.api.BootStatus.Stage.PULL_FILES,"Downloading files"),(0,n.Z)(h,f.api.BootStatus.Stage.LOAD_BLOCK,"Downloading files"),(0,n.Z)(h,f.api.BootStatus.Stage.COMPLETE,"Ready"),h),k=function(e){var t=e.wid,r=e.pud,n=(0,d.J)(t,r,"terminal2"),a=(0,i.Z)(n,1)[0],o=a.connectionLoadingStatus,c=a.loadingEngine,u=s.useState(!c),l=(0,i.Z)(u,2),h=l[0],v=l[1],g=s.useState(null),b=(0,i.Z)(g,2),y=b[0],w=b[1],m=s.useState(o.stage in O?o:{stage:-1}),E=(0,i.Z)(m,2),k=E[0],S=E[1],j=s.useState(k.progress||0),_=(0,i.Z)(j,2),L=_[0],Z=_[1],P=s.useRef(k.progress||0),D=s.useRef(null);s.useEffect((function(){o.stage in O&&(k.stage!==o.stage&&(w(k),Z(0),D.current=null),S(o))}),[o]),s.useEffect((function(){if(k.progress&&k.total)if(k.stage===f.api.BootStatus.Stage.LOAD_BLOCK){if(!(L>k.progress)){var e=Date.now(),t=0;if(D.current){var r=e-D.current,n=k.progress-P.current;t=n/r*50}else{t=5e4}D.current=e,P.current=k.progress;var a=k.total,i=setInterval((function(){Z((function(e){var r=e+t;return r>a?a:r}))}),50);return function(){return clearInterval(i)}}}else Z(k.progress)}),[k.progress]);var R=k.stage===f.api.BootStatus.Stage.COMPLETE;if(s.useEffect((function(){if(R){var e=setTimeout((function(){v(!0)}),1e3);return function(){return clearTimeout(e)}}}),[R]),h)return(0,x.tZ)(x.HY,{});var I=0;switch(k.stage){case-2:I=0;break;case-1:I=10;break;case f.api.BootStatus.Stage.ACQUIRING:I=20;break;case f.api.BootStatus.Stage.PULL_FILES:case f.api.BootStatus.Stage.LOAD_BLOCK:I=20+70*(k.total?L/k.total:1);break;case f.api.BootStatus.Stage.COMPLETE:I=100;break;default:!function(e){throw new Error("Unhandled discriminated union member: ".concat(JSON.stringify(e)))}(k.stage)}return(0,x.BX)("div",{style:{opacity:R?0:1},className:"jsx-3665755028 loader-container",children:[(0,x.BX)("div",{className:"jsx-3665755028",children:[y&&(0,x.BX)("div",{className:"jsx-3665755028 prev-status status",children:[O[y.stage],y.total&&" 100%"]},O[y.stage]),(0,x.BX)("div",{className:"jsx-3665755028 current-status status",children:[O[k.stage],k.total&&" ".concat(Math.floor(L/k.total*100),"%")]},O[k.stage])]}),(0,x.tZ)("div",{className:"jsx-3665755028 loader-bar",children:(0,x.tZ)("div",{style:{width:I+"%"},className:"jsx-3665755028 loader-filler"})}),(0,x.tZ)(p.default,{id:"3665755028",children:[".loader-container.jsx-3665755028{position:absolute;left:25%;right:25%;top:47%;background-color:transparent;color:white;-webkit-transition:opacity 0.5s 2s;transition:opacity 0.5s 2s;}",".loader-bar.jsx-3665755028{background:none;border:solid white 1px;border-radius:10px;}",".loader-filler.jsx-3665755028{height:5px;background-color:#fff;-webkit-transition:width cubic-bezier(0.28,0.26,0.33,1) 2s;transition:width cubic-bezier(0.28,0.26,0.33,1) 2s;}",".status.jsx-3665755028{text-align:center;position:absolute;width:100%;top:-2em;opacity:1;}",".current-status.jsx-3665755028{-webkit-animation:fade-in-jsx-3665755028 0.6s;animation:fade-in-jsx-3665755028 0.6s;}",".prev-status.jsx-3665755028{top:-6em;opacity:0;-webkit-transition:top 0.4s,opacity 0.4s;transition:top 0.4s,opacity 0.4s;}","@-webkit-keyframes fade-in-jsx-3665755028{0%{opacity:0;top:0em;}100%{opacity:1;top:-2em;}}","@keyframes fade-in-jsx-3665755028{0%{opacity:0;top:0em;}100%{opacity:1;top:-2em;}}"]})]})},S=r(25286);function j(e){return _.apply(this,arguments)}function _(){return(_=(0,a.Z)(c().mark((function e(t){var r,n,a,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.Z)(t);case 2:return r=e.sent,n=r.xterm,a=r.fitAddon,i=r.searchAddon,o=r.setTheme,n.fit=function(){return a.fit()},n.searchAddon=i,n.setTheme=o,e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=r(67180),Z=r(93096),P=r.n(Z),D=r(60356),R=r(45187),I=r(51218),C=r(10257),A=r(61850),T=r(82672);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function B(e){return!!e&&!(0===e.h.px&&0===e.h.pc||0===e.w.px&&0===e.w.pc)}function H(e){var t=e.wid,r=e.pud,n=e.style,o=e.dimensions,l=(0,D.Z)(),p=(0,d.J)(t,r,"terminal2"),f=(0,i.Z)(p,1)[0],h=f.lite,v=f.preventFocus,g=f.enabled,b=(0,C.Z)(),w=b.fs,m=b.debuggest,O=(0,A.Z)("flag-xterm-file-parser"),k=s.useState(null),_=(0,i.Z)(k,2),Z=_[0],N=_[1],F=s.useRef(null),U=(0,u.I0)(),M=s.useCallback((function(){U((0,L.En)({wid:t,pud:r}))}),[U,t,r]),H=s.useCallback((function(e){Z&&Z.searchAddon.findNext(e)}),[Z]),V=s.useCallback((function(e){Z&&Z.searchAddon.findPrevious(e)}),[Z]),q=s.useCallback((function(){W.current&&W.current.fit()}),[]),W=s.useRef(null);s.useEffect((function(){W.current=Z,q()}),[Z,q]);var z=s.useRef(P()(q,50)).current,K=s.useCallback((function(){Z&&(window.removeEventListener("resize",z),Z.dispose())}),[Z,z]);s.useEffect((function(){return function(){K()}}),[K]),s.useEffect((function(){B(o)&&z()}),[o,z]);var Y=s.useCallback(function(){var e=(0,a.Z)(c().mark((function e(n){var a,i,s,u,d,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&F.current!==n&&(!o||B(o))){e.next=3;break}return!Z||h||v||Z.focus(),e.abrupt("return");case 3:return F.current=n,Z&&K(),e.next=7,I.l.query({query:R.DkS,variables:{replId:l}});case 7:return a=e.sent,i="Repl"===a.data.repl.__typename?a.data.repl:void 0,e.next=11,j({loadFileParserAddon:O,onFileLinkClick:function(e,r,n){return U({wid:t,type:"OPEN_DEEP_LINK",path:e,line:r,col:n})},listFiles:w.listFiles,replSlug:null===i||void 0===i?void 0:i.slug});case 11:s=e.sent,N(s),s.open(n),u=null===i||void 0===i?void 0:i.lang.header,s.clear=function(){s.reset(),u&&s.write("".concat(u.replace(/\n/g,"\n\r"),"\n\r"))},s.clear(),d=s.rows,p=s.cols,U((0,L.H2)({rows:d,cols:p,wid:t})),s.onData((function(e){if(g){var r=(0,S.I)(e),n=m.mainClient.current;n&&"terminated"!==n.state.current?n.sendInput(r):U({type:"CONSOLE_INPUT",wid:t,input:r})}})),s.onResize((function(){U((0,L.H2)({rows:d,cols:p,wid:t}))})),s.attachCustomKeyEventHandler((function(e){return(0,T.h)(s,e)})),h||v||s.focus(),window.addEventListener("resize",z),U(G({wid:t,pud:r,term:s}));case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[U,K,o,z,h,v,l,r,Z,t,g,w,m,O]),$=(0,y.Fg)();return s.useEffect((function(){Z&&Z.setTheme($)}),[Z,$]),(0,x.tZ)(E,{wid:t,pud:r,style:n,clearConsole:M,refCallback:Y,findNext:H,findPrevious:V},"".concat(t).concat(r,"terminal2"))}function G(e){var t=e.wid,r=e.pud,n=e.term;return function(e,a){var i=(0,d.Z)(a(),t,r,"terminal2").bufferedTermData;e({type:"CLEAR_BUFFERED_DATA",wid:t,pud:r});var o,c=U(i);try{for(c.s();!(o=c.n()).done;){var s=o.value;n.write(s)}}catch(u){c.e(u)}finally{c.f()}e({type:"SET_TERM",wid:t,pud:r,termHandle:l.Z.getHandle(n)})}}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{termHandle:null,loadingEngine:!0,bufferedTermData:[],lite:!1,connectionLoadingStatus:{stage:-2},enabled:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L.qg:return F(F({},e),t.initialState);case L.zT:return F(F({},e),{},{termHandle:null,connectionLoadingStatus:{stage:-2}});case L.hq:return F(F({},e),{},{loadingEngine:!0,bufferedTermData:[],connectionLoadingStatus:{stage:-1}});case L.FG:return F(F({},e),{},{loadingEngine:!1});case"DISABLE_CONSOLE":return F(F({},e),{},{enabled:!1});case"ENABLE_CONSOLE":return F(F({},e),{},{enabled:!0});case"SET_TERM":return F(F({},e),{},{termHandle:t.termHandle});case"BUFFER_TERM_DATA":return F(F({},e),{},{bufferedTermData:e.bufferedTermData.concat(t.data)});case"CLEAR_BUFFERED_DATA":return F(F({},e),{},{bufferedTermData:[]});case"UPDATE_ENGINE_LOAD_STATUS":return F(F({},e),{},{connectionLoadingStatus:{stage:t.stage,progress:t.progress,total:t.total}});default:return e}}function q(e,t,r){switch(r.type){case"EVAL_SETUP":return function(e){var t=e.wid,r=e.pud;return function(e,n){var a=(0,d.Z)(n(),t,r,"terminal2"),i=a.termHandle,o=a.preventFocus;if(i&&!o&&i){var c=l.Z.get(i);c&&c.focus()}}}({wid:e,pud:t});case L.fv:return function(e){var t=e.wid,r=e.pud;return function(e,n){var a=(0,d.Z)(n(),t,r,"terminal2").termHandle;if(a){var i=l.Z.get(a);i&&i.clear()}}}({wid:e,pud:t});case L.wP:return function(e){var t=e.wid,r=e.pud,n=e.message;return function(e,a){var i=(0,d.Z)(a(),t,r,"terminal2"),o=i.termHandle;if(i.enabled){var c=n.data;if(n.raw||(c=c.replace(/\n/g,"\n\r"),"error"===n.type&&(c="\x1b[31m".concat(c,"\x1b[00m"))),o){var s=l.Z.get(o);s?s.write(c):e({type:"BUFFER_TERM_DATA",wid:t,pud:r,data:c})}else e({type:"BUFFER_TERM_DATA",wid:t,pud:r,data:c})}}}({wid:e,pud:t,message:r.message});case L.FG:return function(e){var t=e.wid,r=e.pud;return function(e,n){var a=(0,d.Z)(n(),t,r,"terminal2").termHandle;if(a){var i=l.Z.get(a);i&&e((0,L.H2)({rows:i.rows,cols:i.cols,wid:t}))}}}({wid:e,pud:t});case"FIT_TERMINAL":return function(e){var t=e.wid,r=e.pud;return function(e,n){var a=(0,d.Z)(n(),t,r,"terminal2").termHandle;if(a){var i=l.Z.get(a);i&&i.fit()}}}({wid:e,pud:t});default:return null}}},61633:function(e,t,r){r.r(t),r.d(t,{Component:function(){return w},reducer:function(){return y}});var n=r(79056),a=r(92809),i=r(65988),o=r(67294),c=r(20138),s=r(10998),u=r(25517),l=r(10257),d=r(15300),p=r(35944);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v="CONNECT_VNC",g="SET_VNC_URL",b="LOADING_GOVAL_STARTED";function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{vncUrl:"",connectCalled:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return h(h({},e),{},{vncUrl:t.vncUrl});case v:return h(h({},e),{},{connectCalled:!0,vncUrl:t.vncUrl});case b:return h(h({},e),{},{connectCalled:!1});default:return e}}var w=function(e){var t=e.wid,r=e.pud,a=(0,c.J)(t,r,"vnc"),f=(0,n.Z)(a,1)[0].connectCalled,h=(0,l.Z)(),v=h.fs,g=h.container;return o.useContext(d.F)?(0,p.tZ)(d.Y,{}):f?(0,p.BX)("div",{className:"jsx-1356276128",children:[(0,p.tZ)(s.Z,{container:g,fs:v}),(0,p.tZ)(i.default,{id:"1356276128",children:["div.jsx-1356276128{background:var(--background-root);height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]}):(0,p.BX)("div",{className:"jsx-2244211679",children:[(0,p.BX)(u.Z,{children:[(0,p.tZ)(u.Z,{style:{color:"var(--accent-positive-default)"},children:"Run "}),"your repl to see output"]}),(0,p.tZ)(i.default,{id:"2244211679",children:["div.jsx-2244211679{background:var(--background-root);height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]})}},77537:function(e,t,r){r.r(t),r.d(t,{Component:function(){return O},reducer:function(){return w},receiver:function(){return x}});var n=r(79056),a=r(92809),i=r(28955),o=r(67294),c=r(87929),s=r(45187),u=r(67180),l=r(82100),d=r(20138),p=r(51444),f=r(60356),h=r(10257),v=r(67152),g=r(35944);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{canBeClosed:!1,autoReload:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.qg:return y(y({},e),t.initialState);default:return e}}var m=(0,c.Z)(["REFRESH_WEBVIEW","EVAL_ENDED","FILE_CLEAN"]),x=m.receiver,E=m.useReceiver;function O(e){var t=e.wid,r=e.pud,a=(0,l.I0)(),c=(0,f.Z)(),b=(0,d.J)(t,r,"webview"),y=(0,n.Z)(b,1)[0],w=y.canBeClosed,m=y.autoReload,x=(0,s.Qte)(),O=(0,n.Z)(x,2),k=O[0],S=O[1],j=(0,p.Z)().showError;o.useEffect((function(){S.error&&j(S.error)}),[S.error,j]),o.useEffect((function(){if(S.data){var e=S.data.updateRepl.repl.config;a({wid:t,type:"REPL_UPDATED",updates:{config:e}})}}),[S.data,a,t]);var _=o.useRef(null),L=(0,h.Z)().fs;return E((function(e){var t;switch(e.action.type){case"EVAL_ENDED":case"REFRESH_WEBVIEW":null===(t=_.current)||void 0===t||t.refresh();break;case"FILE_CLEAN":var r;if(m)null===(r=_.current)||void 0===r||r.refresh()}return null})),(0,g.tZ)(v.Z,{ref:_,fs:L,trackUrlSelect:function(e){a((0,u.R$)({wid:t,eventKey:"WEB_HOSTING_URL_SELECTED",properties:{url:e},trackOnce:!0}))},canBeClosed:w,onClose:function(){k({variables:{input:{id:c,isServer:!1}}}),a(function(e){var t=e.wid,r=e.pud;return function(e,n){var a=n().workspace[t].layout,o=i.Od(a,r),c=o.path,s=o.to;e((0,u.fc)({wid:t,path:c,to:s,property:null})),e({type:"UNLOAD_PLUGIN",wid:t,pud:r})}}({wid:t,pud:r}))}})}},84472:function(e,t,r){r.d(t,{Z:function(){return St}});var n={};r.r(n),r.d(n,{reciever:function(){return de},reducer:function(){return le}});var a={};r.r(a),r.d(a,{Component:function(){return Ne},receiver:function(){return Ie}});var i={};r.r(i),r.d(i,{Component:function(){return ze},receiver:function(){return Ge}});var o={};r.r(o),r.d(o,{Component:function(){return lt},receiver:function(){return st}});var c={};r.r(c),r.d(c,{reciever:function(){return vt},reducer:function(){return ht}});var s={};r.r(s),r.d(s,{Component:function(){return kt}});var u=r(92809),l=r(30266),d=r(809),p=r.n(d),f=r(57171),h=r(7977),v=r.n(h),g=r(67180),b=r(52973),y=r(64649),w=r(14147),m=r(51157),x=r(74029),E=r(71371),O=r(50055),k=r(9329),S=r(44180),j=r(81493),_=r(20138),L=r(11163),Z=r(48282);function P(e){var t=e.wid,r=e.pud,n=e.code,a=e.clean;return function(){var e=(0,l.Z)(p().mark((function e(i,o){var c,s,u,l,d,f;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=(0,_.Z)(o(),t,r,"goval"),s=c.repl,"goval"===v().get(s.language).engine){e.next=3;break}return e.abrupt("return");case 3:if(n){e.next=12;break}return u=o().services.fs,e.next=7,u.flush();case 7:return l=v().getMainFileName(s.language),e.next=10,u.readFile(l);case 10:(d=e.sent).error||(n=d.content.toString());case 12:f=i(ne({wid:t,pud:r,name:"evaler",service:"eval"})),a&&f.send({clear:{}}),i({type:q,wid:t}),f.send({eval:n});case 16:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}function D(e){var t=e.wid,r=e.pud,n=e.cmd;return function(){var e=(0,l.Z)(p().mark((function e(a){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n.body,e.next="output"===e.t0?3:"error"===e.t0?5:"result"===e.t0?8:"eval"===e.t0?11:"hint"===e.t0?13:"input"===e.t0?17:19;break;case 3:return a((0,g.yY)({wid:t,message:n.output,type:"",raw:void 0})),e.abrupt("return");case 5:return a((0,g.yY)({wid:t,message:n.error,type:"error",raw:void 0})),a({type:W,wid:t,pud:r}),e.abrupt("return");case 8:return a((0,g.yY)({wid:t,message:n.result,type:"result",raw:void 0})),a({type:W,wid:t,pud:r}),e.abrupt("return");case 11:return a({type:q,wid:t}),e.abrupt("return");case 13:if(n.hint&&n.hint.text){e.next=15;break}return e.abrupt("return");case 15:return a((0,g.yY)({wid:t,message:"\x1b[0m\x1b[33m".concat(n.hint.text,"\x1b[0m\r\n"),type:"",raw:!0})),e.abrupt("return");case 17:return a((0,g.yY)({wid:t,message:n.output,type:"",raw:void 0})),e.abrupt("return");case 19:E.Tb(new Error("Unknown eval command ".concat(n.body,". Expected output, error, state or result")));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function R(e,t){return I.apply(this,arguments)}function I(){return(I=(0,l.Z)(p().mark((function e(t,r){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.on("command",(function n(a){r(a)&&(t.off("command",n),e(a))}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){var t=e.wid,r=e.pud;return function(){var e=(0,l.Z)(p().mark((function e(n,a){var i,o,c;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(0,_.Z)(a(),t,r,"goval"),o=i.govalRunState,c=n(ne({wid:t,pud:r,name:"shellrunner",service:"shellrun2"})),!o.shellrunner){e.next=6;break}return c.send({clear:{}}),e.next=6,R(c,(function(e){return"state"===e.body}));case 6:return c.send({runMain:{}}),e.next=9,R(c,(function(e){return"state"===e.body}));case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}function A(e){var t=e.wid,r=e.pud,n=e.input;return function(e){e(ne({wid:t,pud:r,name:"shellrunner",service:"shellrun2"})).send({input:n})}}function T(e){var t=e.wid,r=e.pud,n=e.cmd;return function(e){switch(n.body){case"input":return void e((0,g.yY)({wid:t,message:n.input,type:"output",raw:!0}));case"output":return void e((0,g.yY)({wid:t,message:n.output,type:"output",raw:!0}));case"state":return void(n.state===O.api.State.Stopped?e({type:K,wid:t,pud:r}):(e({type:"CLEAR_CONSOLE",wid:t,pud:r}),e({type:z,wid:t})));default:E.Tb(new Error("Unknown run command ".concat(n.body,". Expected output or state")))}}}var N=r(37119),F=r(38934),U=r(32168),M=r(51595);function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var G="REGISTER_GOVAL_CHANNEL_HANDLE",V="REGISTER_CLEAR_NETWORK_LISTENERS_HANDLE",q="EVALER_STARTED",W="EVALER_ENDED",z="SHELLRUNNER_STARTED",K="SHELLRUNNER_ENDED",Y="PACKAGER_STARTED",$="PACKAGER_ENDED",X="OPTIMISTIC_RUN_STARTED",J="OPTIMISTIC_RUN_ENDED";function Q(e){var t=e.wid,r=e.pud,n=e.prefetchedConnectionMetadata;return function(){var e=(0,l.Z)(p().mark((function e(a,i){var o,c,s,u,l,d,h,g,b,y,m,x,L,Z;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(0,_.Z)(i(),t,r,"goval"),c=o.clientHandle,s=o.repl,u=o.workspaceMounted,o.didDispatchLoadingStarted||a({type:"LOADING_GOVAL_STARTED",wid:t}),u){e.next=4;break}return e.abrupt("return");case 4:return a(re({wid:t,pud:r})),l=w.Z.safeGet(c),d=null,h=function(e){1===e&&(d=a((0,k.P)({content:"Failed to connect, retrying",type:"error",time:null})))},l.getChannel(0).on("command",(function(e){switch(e.body){case"bootStatus":if(!e.bootStatus)return;return e.bootStatus.stage||(e.bootStatus.stage=O.api.BootStatus.Stage.HANDSHAKE),void a(H({type:"UPDATE_ENGINE_LOAD_STATUS",wid:t},e.bootStatus));case"portOpen":if(!e.portOpen)throw new Error("portOpen only handles portOpen commands");var n=e.portOpen,i=n.forwarded,o=n.port;if(!i)return;if(5901===o)return;return void a({type:"PORT_OPEN",wid:t,port:o});case"protocolError":var c,s=(null===(c=e.protocolError)||void 0===c?void 0:c.text)||"protocol error";a({type:"BSOD",wid:t,crasherPud:r,originalError:s});var u=new Error("protocol error");E.$e((function(e){e.setTag("pluginType","goval"),e.setTag("bsod","true"),e.setExtra("message",s),E.Tb(u),(0,j.Q)(u,e)}));break;case"toast":if(!e.toast)return;var l,d=e.toast.text;if(d&&d.startsWith("PANIC:"))return l=/tried to attach(.*)multiple times/.test(d)?new Error("tried to attach to ot multiple times"):new Error(d?"goval panic":"goval panic with no message"),E.$e((function(e){e.setTag("source","goval"),d&&e.setExtra("message",d),E.Tb(l)})),void a((0,k.P)({content:"We ran into an internal error, reloading your connection.",type:"error",time:5e3}));a((0,k.P)({content:d||"The server tried to say something but had no words",type:"error",time:1e4}))}})),g=(0,_.Z)(i(),t,r,"goval"),b=g.gurl,y=(0,S.t)(b),m=Boolean(i().user.userInfo.isLoggedIn),x=function(){var e=(0,_.Z)(i(),t,r,"goval").clientHandle;return w.Z.safeGet(e)!==l},e.next=16,(0,U.u)();case 16:return e.next=18,(0,S.Z)({client:l,repl:s,shouldAbort:x,onRetry:h,overrideClusterMetadata:y,prefetchedConnectionMetadata:n,isLoggedIn:m});case 18:if(d&&a((0,k.S)(d)),!x()){e.next=21;break}return e.abrupt("return");case 21:a((0,k.P)({content:"Connected!",time:1500,type:"confirm"})),Math.random()>.99&&l.startPing(),"goval"===v().get(s.language).engine&&a(ne(H({wid:t,pud:r},(0,N.UM)({language:s.language})))),a(te({wid:t,pud:r})),a({type:"LOADING_GOVAL_COMPLETE",wid:t}),L=l.getToken(),Z=(0,N.dp)(L),a({type:"SET_VNC_URL",wid:t,vncUrl:Z}),window.lastGovalTokenMeta=(0,N.he)(L),a({wid:t,type:"GOVAL_TOKEN",token:L}),l.on("close",(function(e){var n=e.closeReason;window.disconnectedTaint=!0,n===f.KU.ClientCloseReason.Disconnected&&(window.unexpecteddisconnectTaint=!0,a(ee({wid:t,pud:r})),a(Q({wid:t,pud:r})))}));case 32:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}function ee(e){var t=e.wid,r=e.pud,n=e.keepNetworkHandler,a=void 0!==n&&n;return function(e,n){var i=(0,_.Z)(n(),t,r,"goval"),o=i.clientHandle,c=i.clearNetworkListenersHandle,s=i.didDispatchLoadingStarted;if(e({type:"RESET_GOVAL",wid:t,pud:r}),e(ie({wid:t,pud:r})),s||e({type:"LOADING_GOVAL_STARTED",wid:t}),null!=o){var u=w.Z.get(o);null!=u&&(u.close(),!a&&c&&w.Z.safeGet(c)())}}}function te(e){var t=e.wid,r=e.pud;return function(e){var n=null,a=function(){o(),E.n_({category:"redux",message:"onlineHandler fired. starting connection"}),e(Q({wid:t,pud:r})),null!=n&&(e((0,k.S)(n)),n=null)},i=function(){n=e((0,k.P)({content:"Offline: trying to connect",type:"error",time:null})),E.n_({category:"redux",message:"offlineHandler fired. closing connection"}),e(ee({wid:t,pud:r,keepNetworkHandler:!0}))};window.addEventListener("online",a),window.addEventListener("offline",i);var o=function(){window.removeEventListener("online",a),window.removeEventListener("offline",i)};e({type:V,wid:t,clearNetworkListenersHandle:w.Z.getHandle(o)})}}function re(e){var t=e.wid,r=e.pud;return function(e,n){var a=(0,_.Z)(n(),t,r,"goval").clientHandle;if(a){var i=w.Z.get(a);if(i){var o=!0;if(i.setDebugFunc((function(a){switch(a.type){case"breadcrumb":return void E.n_({category:"crosis",message:a.message,data:a.data});case"ping":var i=F.events.GOVAL2_PING;return o&&(i=F.events.GOVAL2_FIRST_PING,o=!1),void M.kg.info(i,{latency:a.latency});case"log":if(!(0,_.Z)(n(),t,r,"goval").adminLogs)return;e({type:"CROSIS_ADMIN_LOG",wid:t,dir:a.log.direction,cmd:a.log.cmd,timestamp:window.performance.now()})}})),(0,_.Z)(n(),t,r,"goval").adminLogs&&(window.crosisclient=i),L.default.query.vcr){var c,s=i.getChannel(0);s.on("command",(function(e){"VCRLog"===e.body&&c&&e.VCRLog&&c(e.VCRLog)})),s.send({startVCR:{}});var u=function(){var e=(0,l.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.send({readVCR:{}}),e.abrupt("return",new Promise((function(e){return c=e})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,l.Z)(p().mark((function e(){var t,r,n,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:if(t=e.sent,(r=t.logfile)&&r.content&&r.path){e.next=6;break}return e.abrupt("return");case 6:n=JSON.stringify({timestamp:"0",direction:"IN",command:{auth:{token:i.getToken()}}}),(a=document.createElement("a")).setAttribute("href","data:text/plain;charset=utf-8,"+encodeURI(n+"\n"+new TextDecoder("utf-8").decode(r.content))),a.setAttribute("download",r.path),document.body.appendChild(a),a.click(),document.body.removeChild(a);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();window.vcr={read:u,download:d}}}}}}function ne(e){var t=e.wid,r=e.pud,n=e.name,a=e.service;return function(e,i){var o=(0,_.Z)(i(),t,r,"goval").channels[a];return null==o?e(function(e){var t=e.wid,r=e.pud,n=e.name,a=e.service;return function(e,i){var o=(0,_.Z)(i(),t,r,"goval").clientHandle,c=w.Z.safeGet(o).openChannel({name:n,service:a});void 0!==n&&e({type:G,wid:t,channelHandle:w.Z.getHandle(c),service:a});var s=ae(a);return c.on("command",(function(n){"toast"===n.body&&n.toast?e((0,k.P)({content:n.toast.text||"The server tried to say something but had no words",type:"error",time:1e4})):e(s({wid:t,pud:r,cmd:n}))})),c}}({wid:t,pud:r,name:n,service:a})):w.Z.safeGet(o)}}var ae=function(e){switch(e){case"eval":return D;case"shellrun2":return T;default:throw new Error("Can't handle command. Unknown service: ".concat(e))}};function ie(e){var t=e.wid,r=e.pud;return function(e,n){var a=(0,_.Z)(n(),t,r,"goval"),i=a.govalRunState,o=a.runstate,c=Object.values(i).includes(!0);"idle"===o&&c?e({type:"EVAL_STARTED",wid:t}):"idle"===o||c||e({type:"EVAL_ENDED",wid:t})}}var oe=r(7444);function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ue(){return{clientHandle:w.Z.getHandle(new f.KU),didDispatchLoadingStarted:!1,workspaceMounted:!1,filerHandle:null,shellerHandle:null,channels:{},clearNetworkListenersHandle:null,govalRunState:{evaler:!1,shellrunner:!1,packager:!1,optimisticState:!1},adminLogs:!1,gurl:"wss://eval.replit.com"}}var le=(0,b.$)({primary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.qg:return se(se({},e),t.initialState);case"GOVAL_CONNECT":return se(se({},ue()),{},{workspaceMounted:!0,gurl:e.gurl,adminLogs:e.adminLogs});case"RESET_GOVAL":return se(se({},ue()),{},{workspaceMounted:e.workspaceMounted,gurl:e.gurl,adminLogs:e.adminLogs});case"LOADING_GOVAL_STARTED":return se(se({},e),{},{didDispatchLoadingStarted:!0});case"LOADING_GOVAL_COMPLETED":return se(se({},e),{},{didDispatchLoadingStarted:!1});case g.zT:return se(se({},e),{},{workspaceMounted:!1});case V:return se(se({},e),{},{clearNetworkListenersHandle:t.clearNetworkListenersHandle});case G:return se(se({},e),{},{channels:se(se({},e.channels),{},(0,u.Z)({},t.service,t.channelHandle))});case"SET_CUSTOM_GURL":return se(se({},e),{},{gurl:t.gurl});case q:return se(se({},e),{},{govalRunState:se(se({},e.govalRunState),{},{evaler:!0})});case W:return se(se({},e),{},{govalRunState:se(se({},e.govalRunState),{},{evaler:!1})});case z:return se(se({},e),{},{govalRunState:se(se({},e.govalRunState),{},{shellrunner:!0})});case K:return se(se({},e),{},{govalRunState:se(se({},e.govalRunState),{},{shellrunner:!1})});case Y:return se(se({},e),{},{govalRunState:se(se({},e.govalRunState),{},{packager:!0})});case $:return se(se({},e),{},{govalRunState:se(se({},e.govalRunState),{},{packager:!1})});case X:return se(se({},e),{},{govalRunState:se(se({},e.govalRunState),{},{optimisticState:!0})});case J:return se(se({},e),{},{govalRunState:se(se({},e.govalRunState),{},{optimisticState:!1})});case"SET_FILER_HANDLE":return se(se({},e),{},{filerHandle:t.handle});case"SET_SHELLER_HANDLE":return se(se({},e),{},{shellerHandle:t.handle});case"START_CROSIS_ADMIN_LOGS":return se(se({},e),{},{adminLogs:!0});default:return e}},repl:x.E,runstate:oe.Z}),de=(0,m.Z)((function(e,t,r,n){switch(r.type){case g.zT:return ee({wid:e,pud:t});case"GOVAL_CONNECT":case"USE_CUSTOM_TOKEN":case"SET_CUSTOM_GURL":return(0,y.Z)(ee({wid:e,pud:t}),Q({wid:e,pud:t,prefetchedConnectionMetadata:r.customConnectionMetadata}));case"REPL_UPDATED":return function(n){r.updates&&0!==Object.keys(r.updates).length&&(r.updates.id||r.updates.title||r.updates.isOwner||r.updates.slug||r.updates.userId||r.updates.language)&&(n(ee({wid:e,pud:t})),n(Q({wid:e,pud:t})))};case g.eJ:return function(e){var t=e.wid,r=e.pud,n=e.rows,a=e.cols;return function(e){e(ne({wid:t,pud:r,name:"shellrunner",service:"shellrun2"})).send({resizeTerm:{cols:a,rows:n}})}}({wid:e,pud:t,rows:r.rows,cols:r.cols});case"RUN_REPL":return function(e){var t=e.wid,r=e.pud,n=e.wait;return function(){var e=(0,l.Z)(p().mark((function e(a,i){var o,c,s,u,l,d,f,h,g;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=i(),c=o.services,s=(0,_.Z)(i(),t,r,"goval"),u=s.repl,l=M.kg.timeStart({language:u.language}),"goval"===v().get(u.language).engine){e.next=5;break}return e.abrupt("return");case 5:return d=(0,N.UM)({language:u.language}),"eval"!==(f=d.service)&&"shellrun2"!==f||a({type:"CLEAR_CONSOLE",wid:t,pud:r}),a({type:"EVAL_SETUP",wid:t}),a({type:X,wid:t}),h=function(){return!(0,_.Z)(i(),t,r,"goval").govalRunState.optimisticState},e.next=12,c.fs.flush();case 12:if(l("prerun flush finished"),!h()){e.next=15;break}return e.abrupt("return");case 15:return e.next=17,(0,Z.Z)(c.container,c.dotReplit);case 17:if(!e.sent){e.next=26;break}return e.next=20,c.packager.installPackages();case 20:if((g=e.sent)&&c.fs.persist(),l("prerun packager install finished",{success:g}),g){e.next=26;break}return a({type:J,wid:t}),e.abrupt("return");case 26:if(!h()){e.next=28;break}return e.abrupt("return");case 28:e.t0=f,e.next="eval"===e.t0?31:"shellrun2"===e.t0?34:37;break;case 31:return e.next=33,a(P({wid:t,pud:r,clean:!0,wait:n}));case 33:return e.abrupt("break",37);case 34:return e.next=36,a(C({wid:t,pud:r}));case 36:return e.abrupt("break",37);case 37:a({type:J,wid:t}),l("run finished");case 39:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}({wid:e,pud:t,wait:n});case g.yB:return P({wid:e,pud:t,code:r.code,clean:r.clean,wait:n});case g.aq:return function(e){var t=e.wid,r=e.pud;return function(){var e=(0,l.Z)(p().mark((function e(n,a){var i,o,c;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(0,_.Z)(a(),t,r,"goval"),o=i.repl,c=i.govalRunState,"goval"===v().get(o.language).engine){e.next=3;break}return e.abrupt("return");case 3:c.packager&&n((0,g.yY)({wid:t,message:"\n\nReplit: Packaging cannot be stopped, please wait...\n\n",type:"error",raw:!1})),n({type:J,wid:t}),["evaler","shellrunner"].forEach((function(e){c[e]&&n(ne(H({wid:t,pud:r},(0,N.rE)(e)))).send({clear:{}})})),c.evaler&&n({type:W,wid:t});case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}({wid:e,pud:t});case"CONSOLE_INPUT":return function(){var n=(0,l.Z)(p().mark((function n(a,i){var o,c;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=(0,_.Z)(i(),e,t,"goval"),c=o.repl,"goval"===v().get(c.language).engine){n.next=3;break}return n.abrupt("return");case 3:a(A({wid:e,pud:t,input:r.input}));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();case q:case W:case z:case K:case Y:case $:case X:case J:return ie({wid:e,pud:t});case"ENABLE_PIPE_MODE":return function(e){var t=e.wid,r=e.pud;return function(){var e=(0,l.Z)(p().mark((function e(n,a){var i,o,c,s,u,l;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(0,_.Z)(a(),t,r,"goval"),o=i.repl,"goval"===v().get(o.language).engine){e.next=3;break}return e.abrupt("return");case 3:c=(0,N.UM)({language:o.language}),s=c.service,e.t0=s,e.next="shellrun2"===e.t0?7:"eval"===e.t0?9:11;break;case 7:return u=n(ne({wid:t,pud:r,name:"shellrunner",service:"shellrun2"})),e.abrupt("break",12);case 9:return u=n(ne({wid:t,pud:r,name:"evaler",service:"eval"})),e.abrupt("break",12);case 11:return e.abrupt("return");case 12:u.send({PTYConfig:{pipeMode:!0}}),l=function e(r){r.ok&&(u.removeListener("command",e),n({type:"PIPE_MODE_ENABLED",wid:t}))},u.addListener("command",l);case 15:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}({wid:e,pud:t});case"DISABLE_PIPE_MODE":return function(e){var t=e.wid,r=e.pud;return function(){var e=(0,l.Z)(p().mark((function e(n,a){var i,o,c,s,u,l;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(0,_.Z)(a(),t,r,"goval"),o=i.repl,"goval"===v().get(o.language).engine){e.next=3;break}return e.abrupt("return");case 3:c=(0,N.UM)({language:o.language}),s=c.service,e.t0=s,e.next="shellrun2"===e.t0?7:"eval"===e.t0?9:11;break;case 7:return u=n(ne({wid:t,pud:r,name:"shellrunner",service:"shellrun2"})),e.abrupt("break",12);case 9:return u=n(ne({wid:t,pud:r,name:"evaler",service:"eval"})),e.abrupt("break",12);case 11:return e.abrupt("return");case 12:u.send({PTYConfig:{pipeMode:!1}}),l=function e(r){r.ok&&(u.removeListener("command",e),n({type:"PIPE_MODE_DISABLED",wid:t}))},u.addListener("command",l);case 15:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}({wid:e,pud:t});default:return null}})),pe=r(68216),fe=r(79056),he=r(67294),ve=r(87929),ge=r(10257),be=r(45631),ye=r(25997),we=r(14695),me=r(91077),xe=r(30268),Ee=r(92953),Oe=r(59725),ke=r(48764).Buffer;function Se(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,Ee.Z)(e);if(t){var a=(0,Ee.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,xe.Z)(this,r)}}var je=function(e){(0,me.Z)(r,e);var t=Se(r);function r(e){var n;return(0,pe.Z)(this,r),n=t.call(this),(0,u.Z)((0,we.Z)(n),"send",void 0),n.send=e,n}return(0,ye.Z)(r,[{key:"write",value:function(e){"initialize"===e.method&&(void 0===e.params&&(e.params={}),e.params.processId=null);var t=JSON.stringify(e),r=ke.byteLength(t,"utf8"),n="Content-Length: ".concat(r,"\r\n\r\n").concat(t);this.send(n)}}]),r}(Oe.AbstractMessageWriter),_e=r(21719),Le=r(26386),Ze=r(79081);function Pe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,Ee.Z)(e);if(t){var a=(0,Ee.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,xe.Z)(this,r)}}var De=function(e){(0,me.Z)(r,e);var t=Pe(r);function r(){var e;(0,pe.Z)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),(0,u.Z)((0,we.Z)(e),"callback",void 0),(0,u.Z)((0,we.Z)(e),"buffer",void 0),(0,u.Z)((0,we.Z)(e),"events",[]),(0,u.Z)((0,we.Z)(e),"nextMessageLength",void 0),e}return(0,ye.Z)(r,[{key:"listen",value:function(e){this.callback=e,this.buffer=new Ze.Z,this.nextMessageLength=-1}},{key:"fireClose",value:function(){(0,_e.Z)((0,Ee.Z)(r.prototype),"fireClose",this).call(this)}},{key:"readMessage",value:function(e){if(!this.buffer||!this.nextMessageLength||!this.callback)return E.Tb(new Error("Expected listen to be called before readMessage")),!1;this.buffer.append(e);for(;;){if(-1===this.nextMessageLength){var t=this.buffer.tryReadHeaders();if(!t)return!0;var r=t["Content-Length"];if(!r)return E.Tb(new Error("Header must provide a Content-Length property.")),!1;var n=parseInt(r,10);if(isNaN(n))return E.Tb(new Error("Content-Length value must be a number.")),!1;this.nextMessageLength=n}var a=this.buffer.tryReadContent(this.nextMessageLength);if(null===a)return!0;this.nextMessageLength=-1;try{var i=JSON.parse(a);this.callback(i)}catch(o){return E.Tb(o),!1}}return!0}}]),r}(Le.AbstractMessageReader);Promise.all([r.e(8231),r.e(6874),r.e(3722)]).then(r.t.bind(r,73722,23)).then((function(e){return e})),r.e(8231).then(r.t.bind(r,8231,23)).then((function(e){return e}));var Re=(0,ve.Z)(["REGISTER_MONACO_EDITOR_HANDLE"]),Ie=Re.receiver,Ce=Re.useReceiver;function Ae(e){return Te.apply(this,arguments)}function Te(){return(Te=(0,l.Z)(p().mark((function e(t){var r,n,a=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:0,e.next=3,t.exec("pwd");case 3:if(null===(n=e.sent).error){e.next=8;break}if(!(r>5)){e.next=7;break}return e.abrupt("return",{error:new Error("Could not get cwd "+n.error),workingDirectory:null});case 7:return e.abrupt("return",Ae(t,r+1));case 8:return e.abrupt("return",{error:null,workingDirectory:n.output.replace("\n","")});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(e){var t,n=he.useState(),a=(0,fe.Z)(n,2),i=a[0],o=a[1],c=(0,ge.Z)().container,s=null===(t=c.getContext())||void 0===t?void 0:t.repl.language,d=(0,be.Z)().preferences.codeIntelligence,f=he.useState(0),h=(0,fe.Z)(f,2),g=h[0],b=h[1];return Ce((function(e){var t=e.action;return"REGISTER_MONACO_EDITOR_HANDLE"!==t.type||i||o(t.editorHandle),null})),he.useEffect((function(){if(i&&d&&s){var e=w.Z.get(i);if(e){var t=!1,n=[];return function(){a.apply(this,arguments)}(),function(){t=!0,(0,F.track)(F.events.LSP_CONNECTION_ENDED,{language:s}),n.forEach((function(e){e()}))}}}function a(){return(a=(0,l.Z)(p().mark((function a(){var i,o,d,f,h,y,w,m,x,E,k,S,j,_,L;return p().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s){a.next=2;break}throw new Error("expected language");case 2:return a.next=4,Promise.all([Promise.all([r.e(8231),r.e(6874)]).then(r.t.bind(r,96874,23)).then((function(e){return e.default})),r.e(8231).then(r.t.bind(r,8231,23)).then((function(e){return e})),Promise.all([r.e(8231),r.e(6874),r.e(3722)]).then(r.t.bind(r,73722,23)).then((function(e){return e})),Ae(c)]);case 4:if(i=a.sent,o=(0,fe.Z)(i,4),d=o[0],f=o[1],h=f.createMessageConnection,y=f.NullLogger,w=o[2],m=w.MonacoLanguageClient,x=w.createConnection,E=w.CloseAction,k=w.ErrorAction,S=w.MonacoServices,j=w.MonacoLanguages,_=o[3],d.Disposable=function e(t){var r=this;(0,pe.Z)(this,e),(0,u.Z)(this,"callOnDispose",void 0),(0,u.Z)(this,"dispose",(function(){r.callOnDispose()})),this.callOnDispose=t},!t){a.next=21;break}return a.abrupt("return");case 21:if(!_.error){a.next=23;break}throw _.error;case 23:L=c.openChannel({service:"lsp"},(function(r){var a=r.channel;if(a&&!t){j.prototype.registerCodeLensProvider=void 0,S.install(e,{rootUri:"file://".concat(_.workingDirectory)});var i=new je((function(e){"open"===a.status&&a.send({input:e})})),o=new De,c=h(o,i,y),u=v().get(s).ext;"js"!==u&&"ts"!==u||(u="{ts,js,tsx,jsx,mjs}");var d=new m({name:"repl.it language client",clientOptions:{documentSelector:[{pattern:"**/*.".concat(u)}],errorHandler:{error:function(){return k.Continue},closed:function(){return E.DoNotRestart}}},connectionProvider:{get:function(e,t){return Promise.resolve(x(c,e,t))}}});d.warn=function(){},d.info=function(){},d.error=function(){},d.log=function(){};var f=d.start().dispose;c.onClose((function(){f.call(d)})),n.push((function(){d.sendRequest=(0,l.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)}))),o.fireClose.call(o)})),(0,F.track)(F.events.LSP_CONNECTION_STARTED,{language:s});var w=a.onCommand((function(e){"output"!==e.body?"state"===e.body&&e.state===O.api.State.Stopped&&((0,F.track)(F.events.LSP_SERVER_DIED,{language:s,disconnects:g,isService:!1}),b((function(e){return e+1}))):"string"===typeof e.output&&o.readMessage(e.output)}));n.push(w)}})),n.push(L);case 25:case"end":return a.stop()}}),a)})))).apply(this,arguments)}}),[i,c,d,s,g]),null}var Fe=r(32535),Ue=r(25108);function Me(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return Be(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Be(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var He=(0,ve.Z)(["REGISTER_MONACO_EDITOR_HANDLE"]),Ge=He.receiver,Ve=He.useReceiver;function qe(e){return We.apply(this,arguments)}function We(){return(We=(0,l.Z)(p().mark((function e(t){var r,n,a=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:0,e.next=3,t.exec("pwd");case 3:if(null===(n=e.sent).error){e.next=8;break}if(!(r>5)){e.next=7;break}return e.abrupt("return",{error:new Error("Could not get cwd "+n.error),workingDirectory:null});case 7:return e.abrupt("return",qe(t,r+1));case 8:return e.abrupt("return",{error:null,workingDirectory:n.output.replace("\n","")});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ze(){var e=function(){var e=(0,ge.Z)().dotReplit,t=(0,he.useState)([]),r=t[0],n=t[1];return(0,he.useEffect)((function(){return e.watch((function(e){if(e.error)e.error===Fe.Y.NotFound&&n([]);else if(e.config.languages){var t=Object.entries(e.config.languages).map((function(e){var t=(0,fe.Z)(e,2),r=t[0],n=t[1];return n.pattern&&n.languageServer&&n.languageServer.startCommand?{languageId:r,globPattern:n.pattern}:null})).filter((function(e){return null!=e}));n(t)}else n([])}))}),[e]),r}(),t=(0,he.useState)(),n=t[0],a=t[1],i=(0,ge.Z)(),o=i.container,c=i.session,s=i.fs,d=(0,be.Z)().preferences;Ve((function(e){var t=e.action;return"REGISTER_MONACO_EDITOR_HANDLE"!==t.type||n||a(t.editorHandle),null}));var f=e&&d.codeIntelligence;return(0,he.useEffect)((function(){if(n&&f){var t=w.Z.get(n);if(t){var a,i=!1,d=[],h=Me(e);try{for(h.s();!(a=h.n()).done;){v(a.value)}}catch(b){h.e(b)}finally{h.f()}return function(){i=!0,d.forEach((function(e){e()}))}}}function v(e){return g.apply(this,arguments)}function g(){return(g=(0,l.Z)(p().mark((function e(n){var a,f,h,v,g,b,y,w,m,x,k,S,j,_,L,Z;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Promise.all([r.e(8231),r.e(6874)]).then(r.t.bind(r,96874,23)).then((function(e){return e.default})),r.e(8231).then(r.t.bind(r,8231,23)).then((function(e){return e})),Promise.all([r.e(8231),r.e(6874),r.e(3722)]).then(r.t.bind(r,73722,23)).then((function(e){return e})),qe(o)]);case 2:if(a=e.sent,f=(0,fe.Z)(a,4),h=f[0],v=f[1],g=v.createMessageConnection,b=v.NullLogger,y=f[2],w=y.MonacoLanguageClient,m=y.createConnection,x=y.CloseAction,k=y.ErrorAction,S=y.MonacoServices,j=y.MonacoLanguages,_=y.testGlob,L=f[3],h.Disposable=function e(t){var r=this;(0,pe.Z)(this,e),(0,u.Z)(this,"callOnDispose",void 0),(0,u.Z)(this,"dispose",(function(){r.callOnDispose()})),this.callOnDispose=t},!i){e.next=20;break}return e.abrupt("return");case 20:if(!L.error){e.next=22;break}throw L.error;case 22:Z=o.openChannel({service:"lsp2"},(function(e){var r=e.channel;if(r&&!i){r.send({startLSP:{language:n.languageId}}),j.prototype.registerCodeLensProvider=void 0;var a="file://".concat(L.workingDirectory);S.install(t,{rootUri:a});var o=new je((function(e){"open"===r.status&&r.send({input:e})})),u=new De,f=g(u,o,b),h=new w({name:"repl.it language client",clientOptions:{documentSelector:[{pattern:n.globPattern}],errorHandler:{error:function(){return k.Continue},closed:function(){return x.DoNotRestart}}},connectionProvider:{get:function(e,t){return Promise.resolve(m(f,e,t))}}});h.onReady().then((function(){if(h.initializeResult){var e=h.initializeResult.capabilities.textDocumentSync;if(e&&"object"===typeof e&&e.save){var t=new Set,r=function(){var e=c.getActiveFile();if(e&&_(n.globPattern,e)&&!t.has(e)){t.add(e);var r=s.watchOtFile(e,{onMoveOrDelete:function(){t.delete(e);var n=d.indexOf(r);-1!==n&&d.splice(n,1)},onFlush:function(){h.sendNotification("textDocument/didSave",{textDocument:{uri:"".concat(a,"/").concat(e)}})}});d.push(r)}};d.push(c.onSessionStateChanged(r)),r()}}else E.Tb(new Error("Expected initialize result after lsp client ready"))})).catch((function(){})),h.warn=function(){},h.info=function(){},h.error=function(){},h.log=function(){};var v=h.start().dispose;f.onClose((function(){v.call(h)})),d.push((function(){h.sendRequest=(0,l.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)}))),u.fireClose.call(u)}));var y=r.onCommand((function(e){"output"!==e.body?"state"===e.body&&e.state===O.api.State.Stopped&&Ue.log("Language server for",n.languageId,"died"):"string"===typeof e.output&&u.readMessage(e.output)}));d.push(y)}})),d.push(Z);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),[n,o,f,e,c]),null}var Ke=r(63805),Ye=function(){function e(){(0,pe.Z)(this,e)}return(0,ye.Z)(e,null,[{key:"get",value:function(e){var t,r;try{t=window.sessionStorage.getItem(e)}catch(n){return null}if(null==t)return null;try{r=JSON.parse(t)}catch(n){return null}return r}},{key:"set",value:function(e,t){try{window.sessionStorage.setItem(e,JSON.stringify(t))}catch(r){}}}]),e}(),$e=r(84647),Xe=r(45187),Je=r(51218),Qe=r(61850),et=r(82100),tt=r(60356);function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var nt="session_id_achv_track";function at(){return(at=(0,l.Z)(p().mark((function e(t){var r,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je.l.query({query:Xe.koB,variables:{replId:t}});case 2:return r=e.sent,n=r.data,e.abrupt("return","Repl"===n.repl.__typename?{language:n.repl.language,title:n.repl.title}:{language:"",title:""});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(){return(it=(0,l.Z)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je.l.mutate({mutation:Xe.v79,variables:{userId:t.id,event:"WS_TYPED"}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(e,t,r,n,a){var i="string"===typeof e.path?(0,$e.r6)(e.path):null;switch(e.type){case"TRACK_WS_EVENT":var o=F.track;e.trackOnce&&(o=F.trackOnce),o(F.events[e.eventKey],function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(r),!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({wid:t,language:r,isMobile:(0,Ke.isMobile)({tablet:!1})},e.properties));break;case"RUN_REPL":(0,F.track)(F.events.PROJECT_RAN,{wid:t,language:r,replId:n,replTitle:a});break;case"CONSOLE_INPUT":"\r"===e.input&&(0,F.track)(F.events.CONSOLE_EVALED,{wid:t,language:r});break;case"STOP_EVAL":(0,F.track)(F.events.WS_EVAL_STOPPED,{wid:t,language:r});break;case"CREATE_FILE":e.isRecreation||(0,F.track)(F.events.PROJECT_MODE_FILE_CREATED,{wid:t,language:r,extension:i});break;case"OPEN_FILE":e.newTab&&(0,F.track)(F.events.FILE_HEADER_TAB_OPENED,{wid:t,language:r,newTab:e.newTab,extension:i}),e.tabIndex&&(0,F.track)(F.events.FILE_HEADER_TAB_REPLACED,{wid:t,language:r,tabIndex:e.tabIndex});break;case"MOVE_FILE":(0,F.track)(F.events.WS_FILE_RENAMED,{wid:t,language:r,extension:i});break;case"DELETE_FILE":(0,F.track)(F.events.WS_FILE_DELETED,{wid:t,language:r,extension:i});break;case"UPLOAD_FILE":if(!e.path||"readme.md"!==e.path.toLowerCase())break;(0,F.track)(F.events.README_CREATED,{wid:t,language:r});break;case"CLOSE_HEADER_TAB":(0,F.track)(F.events.FILE_HEADER_TAB_CLOSED,{wid:t,language:r});break;case"SET_SPLIT_POSITION":(0,F.track)(F.events.WS_LAYOUT_CHANGED,{wid:t,language:r});break;case"SET_GIT_SIDEBAR_VISIBILITY":e.isSidebarVisible&&(0,F.track)(F.events.GIT_CLIENT_SIDEBAR_OPENED,{language:r,wid:t})}}var ct=(0,ve.Z)(),st=ct.receiver,ut=ct.useReceiver;function lt(){var e=(0,tt.Z)(),t=(0,Qe.Z)("flag-achievements-v0"),r=(0,et.v9)((function(e){return e.user.userInfo}));return ut((function(n){var a=n.action,i=n.wid;if("WS_TYPED"===a.eventKey&&t){var o=(new Date).toJSON().substring(0,10),c="".concat(r.id,"_").concat(o);Ye.get(nt)!==c&&(Ye.set(nt,c),function(e){it.apply(this,arguments)}(r))}return a.type,function(e){return at.apply(this,arguments)}(e).then((function(t){ot(a,i,t.language,e,t.title)})),null})),null}var dt=r(10762);function pt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(r),!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ht(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loadingReplbox:!1,loadingGoval:!1,loadingEngine:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.qg:return ft(ft({},e),t.initialState);case g.FG:return ft(ft({},e),{},{loadingEngine:!1});case g.hq:return ft(ft({},e),{},{loadingEngine:!0});case"LOADING_REPLBOX_STARTED":return ft(ft({},e),{},{loadingReplbox:!0});case"LOADING_REPLBOX_ENDED":return ft(ft({},e),{},{loadingReplbox:!1});case"LOADING_GOVAL_STARTED":return ft(ft({},e),{},{loadingGoval:!0});case"LOADING_GOVAL_COMPLETE":return ft(ft({},e),{},{loadingGoval:!1});default:return e}}function vt(e,t,r){switch(r.type){case"LOADING_REPLBOX_STARTED":case"LOADING_GOVAL_STARTED":return function(r,n){(0,_.Z)(n(),e,t,"loadingresolver").loadingEngine||r({type:g.hq,wid:e})};case"LOADING_REPLBOX_ENDED":case"LOADING_GOVAL_COMPLETE":return function(r,n){var a=(0,_.Z)(n(),e,t,"loadingresolver"),i=a.loadingEngine,o=a.loadingGoval,c=a.loadingReplbox;i&&!1===o&&!1===c&&r({type:g.FG,wid:e})};default:return null}}var gt=r(65988),bt=r(94184),yt=r.n(bt),wt=r(68047),mt=r(24969),xt=r(60489),Et=r(50625),Ot=r(35944);function kt(){var e=(0,Ke.isMobile)({tablet:!1}),t=(0,ge.Z)(),r=t.fs,n=t.broadcast,a=t.presence,i=(0,wt.Z)();return i?(0,Ot.BX)("div",{className:gt.default.dynamic([["1303493603",[Et.sF,xt.w_]]])+" "+(yt()("draw",{"is-mobile":e})||""),children:[(0,Ot.tZ)(mt.Z,{fs:r,broadcast:n,presence:a,filePath:i}),(0,Ot.tZ)(gt.default,{id:"1303493603",dynamic:[Et.sF,xt.w_],children:[".draw.__jsx-style-dynamic-selector{position:relative;height:100%;width:100%;z-index:3;}",".draw.is-mobile.__jsx-style-dynamic-selector{--mobile-offset:calc( var(--mobile-header-height,60px) + ".concat(Et.sF,"px );position:absolute;top:var(--mobile-offset);padding-bottom:calc(var(--mobile-offset) + ").concat(xt.w_,"px);}"),".draw.is-mobile.hidden-modal.__jsx-style-dynamic-selector .excalidraw{display:none;}",".floating-run{display:none !important;}",".excalidraw canvas{border-radius:var(--border-radius-4) !important;}"]})]}):null}function St(e){e.register("goval",n),e.register("langserver",a),e.register("langserver2",i),e.register("analytics",o),e.register("infoprovider",dt),e.register("loadingresolver",c),e.register("draw",s)}},31711:function(e,t,r){r.d(t,{t:function(){return a},Z:function(){return f}});var n,a,i=r(79056),o=r(92809),c=r(74298),s=r(19989),u=r(17271);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e.Unloaded="UNLOADED",e.Loading="LOADING",e.Clean="CLEAN",e.Dirty="DIRTY",e.Syncing="SYNCING",e.Err="ERR"}(a||(a={}));var p=(n={},(0,o.Z)(n,a.Unloaded,{FILE_UNLOAD:a.Unloaded,FILE_LOADING:a.Loading}),(0,o.Z)(n,a.Loading,{FILE_UNLOAD:a.Unloaded,FILE_LOADED:a.Clean,FILE_ERROR:a.Err}),(0,o.Z)(n,a.Clean,{FILE_UNLOAD:a.Unloaded,FILE_DIRTY:a.Dirty}),(0,o.Z)(n,a.Dirty,{FILE_UNLOAD:a.Unloaded,FILE_SYNCING:a.Syncing,FILE_DIRTY:a.Dirty}),(0,o.Z)(n,a.Syncing,{FILE_UNLOAD:a.Unloaded,FILE_CLEAN:a.Clean,FILE_DIRTY:a.Dirty,FILE_ERROR:a.Err}),(0,o.Z)(n,a.Err,{FILE_UNLOAD:a.Unloaded}),n);function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.path&&(0,s.isHiddenFile)(t.path))return e;switch(t.type){case"FILE_UNLOAD":case"FILE_LOADING":case"FILE_LOADED":case"FILE_SYNCING":case"FILE_DIRTY":case"FILE_CLEAN":case"FILE_ERROR":if((0,c.GA)(e,t.path).length)return e;var r=e[t.path];if(!r)throw new u.default("unable to perform file state transition: unknown file").setExtras({currentState:r,action:t});if(!p[r])throw new u.default("unable to perform file state transition: file is in an unknown state").setExtras({currentState:r,action:t});var n=p[r][t.type];if(!n)throw new u.default("unable to perform file state transition: invalid state transition").setExtras({currentState:r,action:t});return n===r?e:d(d({},e),{},(0,o.Z)({},t.path,n));case"DELETE_FILE":var l=(0,c.GA)(e,t.path),f=d({},e);return l.length?l.forEach((function(e){delete f[e]})):delete f[t.path],f;case"MOVE_FILE":var h=(0,c.vk)(e,t.path,t.to);if(!h.length)return e;var v=d({},e);return h.forEach((function(t){var r=(0,i.Z)(t,2),n=r[0],a=r[1];delete v[n],v[a]=e[n]})),v;case"CREATE_FILE":if(e[t.path])throw new u.default("unable to perform file state transition: invalid state transition").setExtras({currentState:e[t.path],action:t});return d(d({},e),{},(0,o.Z)({},t.path,t.file&&t.file.loaded?a.Clean:a.Unloaded));default:return e}}},89107:function(e,t,r){r.d(t,{L:function(){return f},Z:function(){return h}});var n=r(79056),a=r(92809),i=r(71371),o=r(24243),c=r(74298),s=r(17271);function u(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f={};function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,r=function(){switch(t.type){case"FILE_UNLOAD":return p(p({},e),{},(0,a.Z)({},t.path,{path:t.path,loaded:!1}));case"FILE_LOADED":case"FILE_CACHE_HIT":return p(p({},e),{},(0,a.Z)({},t.path,p(p({},e[t.path]),t.file)));case"CREATE_FILE":return p(p({},e),{},(0,a.Z)({},t.path,t.file||{path:t.path,loaded:!1}));case"MOVE_FILE":var r=(0,c.vk)(e,t.path,t.to);if(!r.length)return e;var i=p({},e);return r.forEach((function(t){var r=(0,n.Z)(t,2),a=r[0],o=r[1];delete i[a];var c=e[a];if(!c)throw new Error("No source file!");i[o]=p(p({},c),{},{path:o})})),i;case"DELETE_FILE":var u=(0,c.GA)(e,t.path);if(u.length&&e[t.path])throw new s.default("matched children and node while deleting").setExtras({path:t.path,fileState:e});var l=p({},e);return u.length?u.forEach((function(e){delete l[e]})):delete l[t.path],l;case"OT_FILE_OP":if(!t.changeSource)throw new Error("Expected changeSource on action OT_FILE_OP got "+JSON.stringify(t));var d=e[t.path];if(!d)throw new Error("tried to perform an OT op on "+t.path+" but we don't know about that file.");if(!d.loaded)return e;var f=v(o.Z.from(d.content).toString("utf8"),t.op);return p(p({},e),{},(0,a.Z)({},t.path,p(p({},d),{},{content:o.Z.from(f)})));default:return e}}();return t.path&&r!==e&&!e[t.path]&&r[t.path]&&"CREATE_FILE"!==t.type&&i.$e((function(r){r.setExtra("action",t),r.setExtra("prevstate",e),i.Tb(new Error("created file without using CREATE_FILE or FILE_CACHE_HIT"))})),r}function v(e,t){var r,n=e,a=0,i=u(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;if("string"===typeof o)n=n.slice(0,a)+o+n.slice(a),a+=o.length;else if("object"===typeof o&&"number"===typeof o.d)n=n.slice(0,a)+n.slice(a+o.d);else{if("number"!==typeof o)throw new Error("bad ot op: "+o);a+=o}}}catch(c){i.e(c)}finally{i.f()}return n}},25514:function(e,t,r){r.d(t,{U:function(){return o},c:function(){return c}});var n=r(92809);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var o=r(66532).L;function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_WORKSPACE_PREFERENCES":return i(i({},e),t.updates);default:return e}}},74029:function(e,t,r){r.d(t,{N:function(){return o},E:function(){return c}});var n=r(92809);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var o={};function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REPL_UPDATED":return i(i(i({},e),t.updates),{},{config:i(i({},e.config),t.updates.config)});default:return e}}},20493:function(e,t,r){r.d(t,{E:function(){return n},Y:function(){return a}});var n="";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_WORKING_DIRECTORY":return t.path;default:return e}}}}]);
//# sourceMappingURL=9739-24c6d0e6c80e4ab70740.js.map