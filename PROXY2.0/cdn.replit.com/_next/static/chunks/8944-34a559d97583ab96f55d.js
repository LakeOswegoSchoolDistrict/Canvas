(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8944],{88903:function(e,n,t){"use strict";var r=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function c(e){try{s(r.next(e))}catch(n){a(n)}}function i(e){try{s(r.throw(e))}catch(n){a(n)}}function s(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,i)}s((r=r.apply(e,n||[])).next())}))},o=this&&this.__generator||function(e,n){var t,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;c;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(o=(o=c.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){c.label=a[1];break}if(6===a[0]&&c.label<o[1]){c.label=o[1],o=a;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(a);break}o[2]&&c.ops.pop(),c.trys.pop();continue}a=n.call(e,c)}catch(i){a=[6,i],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.Channel=void 0;var a=t(50055),c=function(e){var n=this,t=e.id,c=e.send,i=e.onUnrecoverableError;this.onCommand=function(e){if("closed"===n.status){var t=new Error("Trying to listen to commands on a closed channel");throw n.onUnrecoverableError(t),t}return n.onCommandListeners.push(e),function(){n.onCommandListeners=n.onCommandListeners.filter((function(n){return n!==e}))}},this.send=function(e){if("closed"===n.status){var t=new Error("Calling send on closed channel");throw n.onUnrecoverableError(t),t}if("closing"===n.status)throw t=new Error("Cannot send any more commands after a close request"),n.onUnrecoverableError(t),t;e.channel=n.id,n.sendToContainer(a.api.Command.create(e))},this.request=function(e){return r(n,void 0,void 0,(function(){var n,t=this;return o(this,(function(r){return n=Number(Math.random().toString().split(".")[1]).toString(36),e.ref=n,[2,new Promise((function(r,o){t.requestMap[n]=r;try{t.send(e)}catch(a){delete t.requestMap[n],o(a)}}))]}))}))},this.handleCommand=function(e){n.onCommandListeners.forEach((function(n){return n(e)})),e.ref&&n.requestMap[e.ref]&&(n.requestMap[e.ref](e),delete n.requestMap[e.ref])},this.handleClose=function(e){Object.keys(n.requestMap).forEach((function(t){var r=a.api.Command.fromObject({});r.channelClosed=e,n.requestMap[t](r),delete n.requestMap[t]})),n.status="closed",n.onCommandListeners=[]},this.id=t,this.sendToContainer=c,this.onUnrecoverableError=i,this.status="open",this.requestMap={},this.onCommandListeners=[]};n.Channel=c},8759:function(e,n,t){"use strict";var r=t(25108),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function c(e){try{s(r.next(e))}catch(n){a(n)}}function i(e){try{s(r.throw(e))}catch(n){a(n)}}function s(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,i)}s((r=r.apply(e,n||[])).next())}))},c=this&&this.__generator||function(e,n){var t,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;c;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(o=(o=c.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){c.label=a[1];break}if(6===a[0]&&c.label<o[1]){c.label=o[1],o=a;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(a);break}o[2]&&c.ops.pop(),c.trys.pop();continue}a=n.call(e,c)}catch(i){a=[6,i],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.Client=void 0;var i,s=t(50055),l=t(88903),u=t(18347),h=t(88524),d=t(69475);!function(e){e.Intentional="Intentional",e.Disconnected="Disconnected",e.Error="Error"}(i||(i={}));var f=function(){var e=this;this.open=function(n,t){if(e.chan0Cb){var r=new Error("You must call `close` before opening the client again");throw e.onUnrecoverableError(r),r}if(e.destroyed)throw r=new Error("Client has been destroyed and cannot be re-used"),e.onUnrecoverableError(r),r;e.connectOptions=o({timeout:1e4,reuseConnectionMetadata:!1},n),e.debug({type:"breadcrumb",message:"open",data:{polling:!1}}),e.chan0Cb=t,e.connect({tryCount:0,websocketFailureCount:0})},this.openChannel=function(n,t){var r=n.name?e.channelRequests.filter((function(e){return e.options.name===n.name})):[];if(r.some((function(e){return!e.closeRequested}))){var o=new Error("Channel with name "+n.name+" already opened");throw e.onUnrecoverableError(o),o}if(e.destroyed)throw o=new Error("Client has been destroyed and is unusable"),e.onUnrecoverableError(o),o;var a={options:n,openChannelCb:t,isOpen:!1,channelId:null,cleanupCb:null,closeRequested:!1};return e.channelRequests.push(a),e.connectionState!==d.ConnectionState.CONNECTED||r.length||e.requestOpenChannel(a),function(){a.closeRequested||(a.closeRequested=!0,a.isOpen?e.requestCloseChannel(a):e.connectionState!==d.ConnectionState.CONNECTED&&(e.channelRequests=e.channelRequests.filter((function(e){return e!==a})),a.openChannelCb({error:new Error("Channel closed before opening"),channel:null,context:e.connectOptions?e.connectOptions.context:null})))}},this.requestOpenChannel=function(n){var t=n.options,r=n.openChannelCb;if(e.connectOptions){var o=t.skip;if(!o||!o(e.connectOptions.context)){var a=t.action;if(a||(a=null==t.name?s.api.OpenChannel.Action.CREATE:s.api.OpenChannel.Action.ATTACH_OR_CREATE),n.channelId)e.onUnrecoverableError(new Error("Unexpected channelId"));else{var c="string"===typeof t.service?t.service:t.service(e.connectOptions.context);e.debug({type:"breadcrumb",message:"requestOpenChannel",data:{name:t.name,service:c,action:a}});var i=e.getChannel(0),u=Number(Math.random().toString().split(".")[1]).toString(36);i.send({ref:u,openChan:{name:t.name,service:c,action:a}});var h=i.onCommand((function(t){if(u===t.ref)if(h(),null!=t.openChanRes){var o=t.openChanRes,a=o.id,c=o.state,i=o.error;if(e.debug({type:"breadcrumb",message:"openChanres"}),e.connectOptions)if(c!==s.api.OpenChannelRes.State.ERROR)if("number"===typeof a&&"number"===typeof c){var d=new l.Channel({id:a,onUnrecoverableError:e.onUnrecoverableError,send:e.send});e.channels[a]=d,n.channelId=a,n.isOpen=!0,n.closeRequested&&e.requestCloseChannel(n),n.cleanupCb=r({channel:d,error:null,context:e.connectOptions.context})}else e.onUnrecoverableError(new Error("Expected state and channel id"));else e.onUnrecoverableError(new Error("Channel open resulted with an error: "+(i||"with no message")));else e.onUnrecoverableError(new Error("Expected connectionOptions"))}else e.onUnrecoverableError(new Error("Expected openChanRes on command"))}))}}}else e.onUnrecoverableError(new Error("Expected connectionOptions"))},this.requestCloseChannel=function(n){return a(e,void 0,void 0,(function(){var e,t,r,o,a,i;return c(this,(function(c){switch(c.label){case 0:return n.isOpen?(e=n.channelId,(t=this.getChannel(n.channelId)).status="closing",(r=this.getChannel(0))?(this.debug({type:"breadcrumb",message:"requestChannelClose",data:{id:e,name:n.options.name,service:n.options.service}}),[4,r.request({closeChan:{action:s.api.CloseChannel.Action.TRY_CLOSE,id:n.channelId}})]):(this.onUnrecoverableError(new Error("Tried to request a channel close but there was no chan0")),[2])):(this.onUnrecoverableError(new Error("Tried to request a channel close before opening")),[2]);case 1:if((o=c.sent()).channelClosed)this.debug({type:"breadcrumb",message:"requestChannelClose:chan0Closed",data:{id:e,name:n.options.name,service:n.options.service}});else{if(null==o.closeChanRes)return this.onUnrecoverableError(new Error("Expected closeChanRes")),[2];if(null==(a=o.closeChanRes.id))return this.onUnrecoverableError(new Error("Expected id, got "+a)),[2];if(a!==e)return this.onUnrecoverableError(new Error("Expected id from closeChanRes to be "+e+" got "+a)),[2];this.debug({type:"breadcrumb",message:"requestChannelClose:closeChanRes",data:{id:e,name:n.options.name,service:n.options.service,closeStatus:o.closeChanRes.status}})}return this.channelRequests=this.channelRequests.filter((function(e){return e!==n})),delete this.channels[e],t.handleClose({initiator:"channel",willReconnect:!1}),n.cleanupCb&&n.cleanupCb({initiator:"channel",willReconnect:!1}),n.options.name&&this.connectionState===d.ConnectionState.CONNECTED&&(i=this.channelRequests.find((function(e){return e.options.name===n.options.name})))?(this.requestOpenChannel(i),[2]):[2]}}))}))},this.close=function(){if(e.debug({type:"breadcrumb",message:"user close"}),!e.chan0Cb||!e.connectOptions){var n=new Error("Must call client.open before closing");throw e.onUnrecoverableError(n),n}e.fetchTokenAbortController&&(e.fetchTokenAbortController.abort(),e.fetchTokenAbortController=null),e.connectionMetadata=null,e.handleClose({closeReason:i.Intentional})},this.destroy=function(){e.destroyed=!0,e.debug({type:"breadcrumb",message:"destroy"}),e.connectionState!==d.ConnectionState.DISCONNECTED&&e.close(),e.debug=function(){},e.userUnrecoverableErrorHandler=null,e.channelRequests=[],e.destroyed=!0},this.getChannel=function(n){var t=e.channels[n];if(!t){var r=new Error("No channel with number "+n);throw e.onUnrecoverableError(r),r}return t},this.debug=function(n){e.legacyDebugFunc&&e.legacyDebugFunc(n),e.debugFuncs.forEach((function(e){return e(n)}))},this.setDebugFunc=function(n){e.legacyDebugFunc=n},this.addDebugFunc=function(n){return e.debugFuncs.push(n),function(){var t=e.debugFuncs.indexOf(n);t>-1&&e.debugFuncs.splice(t,1)}},this.setUnrecoverableErrorHandler=function(n){e.userUnrecoverableErrorHandler=n},this.getConnectionMetadata=function(){return e.connectionMetadata},this.connect=function(n){var t=n.tryCount,r=n.websocketFailureCount;return a(e,void 0,void 0,(function(){var e,n,o,a,i,f,b,p,C,E,v,y,w,g,m,S,O,R,k,T=this;return c(this,(function(c){switch(c.label){case 0:if(this.debug({type:"breadcrumb",message:"connecting",data:{connectionState:this.connectionState,connectTries:t,websocketFailureCount:r,readyState:this.ws?this.ws.readyState:void 0,chan0CbExists:Boolean(this.chan0Cb)}}),this.connectionState!==d.ConnectionState.DISCONNECTED)throw e=new Error("Client must be disconnected to connect"),this.onUnrecoverableError(e),e;if(this.ws)throw e=new Error("Unexpected existing websocket instance"),this.onUnrecoverableError(e),e;if(!this.connectOptions)throw e=new Error("Expected connectionOptions"),this.onUnrecoverableError(e),e;if(!this.chan0Cb)return this.onUnrecoverableError(new Error("Expected chan0Cb")),[2];if(this.chan0CleanupCb)return this.onUnrecoverableError(new Error("Unexpected chan0CleanupCb, are you sure you closed")),[2];if(this.channelRequests.some((function(e){return e.isOpen})))return this.onUnrecoverableError(new Error("All channels should be closed when we connect")),[2];if(Object.keys(this.channels).length)return this.onUnrecoverableError(new Error("Found an an unexpected existing channels")),[2];if(this.connectionState=d.ConnectionState.CONNECTING,n=new l.Channel({id:0,onUnrecoverableError:this.onUnrecoverableError,send:this.send}),this.channels[0]=n,this.connectOptions.reuseConnectionMetadata&&null!==this.connectionMetadata)return[3,5];if(this.fetchTokenAbortController)return this.onUnrecoverableError(new Error("Expected fetchTokenAbortController to be null")),[2];o=new AbortController,this.fetchTokenAbortController=o,a=void 0,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.connectOptions.fetchConnectionMetadata(o.signal)];case 2:return a=c.sent(),[3,4];case 3:return i=c.sent(),this.onUnrecoverableError(i),[2];case 4:if(this.fetchTokenAbortController=null,b=(f=a).error===d.FetchConnectionMetadataError.Aborted,o.signal.aborted!==b)return o.signal.aborted?(this.onUnrecoverableError(new Error("Expected abort returned from fetchConnectionMetadata to be truthy when the controller aborts")),[2]):(this.onUnrecoverableError(new Error("Abort should only be truthy returned when the abort signal is triggered")),[2]);if(f.error===d.FetchConnectionMetadataError.Aborted)return[2];if(f.error===d.FetchConnectionMetadataError.Retriable)return this.retryConnect({tryCount:t+1,websocketFailureCount:r,chan0:n,error:new Error("Retriable error")}),[2];if(this.connectionState!==d.ConnectionState.CONNECTING)return this.onUnrecoverableError(new Error("Client was closed before connecting")),[2];if(f.error)return this.onUnrecoverableError(f.error),[2];this.connectionMetadata=f,c.label=5;case 5:return 3===r&&this.debug({type:"breadcrumb",message:"polling fallback"}),C=(p=r>=3)?h.EIOCompat:u.getWebSocketClass(this.connectOptions.WebSocketClass),E=u.getConnectionStr(this.connectionMetadata,p,this.connectOptions.pollingHost),(v=new C(E)).binaryType="arraybuffer",v.onmessage=this.onSocketMessage,this.ws=v,y=!1,w=!1,g=null,v.onerror=function(){g?g(new Error("WebSocket errored")):T.onUnrecoverableError(new Error("Got websocket error but no `onFailed` cb"))},v.onclose=function(e){g?(C===h.EIOCompat?w||(T.connectionMetadata=null):"code"in e&&1008===e.code&&(T.connectionMetadata=null),g(new Error("WebSocket closed before we got READY"))):T.onUnrecoverableError(new Error("Got websocket closure but no `onFailed` cb"))},v.onopen=function(){C!==h.EIOCompat&&(y=!0)},m=function(){},S=function(){},null!==(O=this.connectOptions.timeout)&&(S=function(){T.debug({type:"breadcrumb",message:"cancel timeout"}),clearTimeout(R)},(m=function(){T.debug({type:"breadcrumb",message:"reset timeout"}),clearTimeout(R),R=setTimeout((function(){T.debug({type:"breadcrumb",message:"connect timeout"}),g?g(new Error("timeout")):T.onUnrecoverableError(new Error("Connecting timed out but there was no `onFailed` cb"))}),O)})()),k=n.onCommand((function(e){if(w=!0,m(),null!=e.containerState)if(null!=e.containerState.state){var t=e.containerState.state;T.debug({type:"breadcrumb",message:"containerState",data:t});var r=s.api.ContainerState.State;switch(t){case r.READY:if(k(),S(),!T.connectOptions)return void T.onUnrecoverableError(new Error("Expected connectionOptions"));if(!n)return void T.onUnrecoverableError(new Error("Expected chan0 to be truthy"));if(!T.chan0Cb)return void T.onUnrecoverableError(new Error("Expected chan0Cb to be truthy"));T.handleConnect();var o=T.close;T.close=function(){return setTimeout((function(){o()}),0)},T.chan0CleanupCb=T.chan0Cb({channel:n,error:null,context:T.connectOptions.context}),T.close=o;break;case r.SLEEP:if(!g)return void T.onUnrecoverableError(new Error("Got SLEEP but there was no `onFailed` cb"));g(new Error("Got SLEEP as container state"))}}else T.onUnrecoverableError(new Error("Got containterState but state was not defined"))})),g=function(e){g=null,T.cleanupSocket(),S(),k(),T.retryConnect({tryCount:t+1,websocketFailureCount:y?0:r+1,chan0:n,error:e})},[2]}}))}))},this.retryConnect=function(n){var t=n.tryCount,r=n.websocketFailureCount,o=n.chan0,a=n.error;e.retryTimeoutId?e.onUnrecoverableError(new Error("unexpected existing retryTimeoutId")):e.chan0Cb&&(e.retryTimeoutId=setTimeout((function(){e.chan0Cb?(e.retryTimeoutId=null,e.debug({type:"breadcrumb",message:"retrying",data:{connectionState:e.connectionState,connectTries:t,websocketFailureCount:r,error:a,wsReadyState:e.ws?e.ws.readyState:void 0}}),o.handleClose({initiator:"client",willReconnect:!0}),delete e.channels[0],e.connectionState=d.ConnectionState.DISCONNECTED,e.connect({tryCount:t,websocketFailureCount:r})):e.onUnrecoverableError(new Error("Scheduled retry is called after we closed?"))}),u.getNextRetryDelay(t)))},this.send=function(n){e.debug({type:"log",log:{direction:"out",cmd:n}});var t=s.api.Command.encode(n).finish(),r=t.buffer.slice(t.byteOffset,t.byteOffset+t.length);null!=e.ws?e.ws.send(r):e.onUnrecoverableError(new Error("Calling send on a closed client"))},this.onSocketMessage=function(n){var t=n.data,r=new Uint8Array(t),o=s.api.Command.decode(r);e.debug({type:"log",log:{direction:"in",cmd:o}}),e.getChannel(o.channel).handleCommand(o)},this.handleConnect=function(){if(e.connectionState=d.ConnectionState.CONNECTED,e.debug({type:"breadcrumb",message:"connected!"}),e.ws){var n=function(n){e.connectionState!==d.ConnectionState.DISCONNECTED?(e.debug({type:"breadcrumb",message:"wsclose",data:{event:n}}),e.handleClose({closeReason:i.Disconnected,wsEvent:n})):e.onUnrecoverableError(new Error("Got a close event on socket but client is in disconnected state"))};e.ws.onclose=n,e.ws.onerror=n,e.channelRequests.forEach((function(n){e.requestOpenChannel(n)}))}else e.onUnrecoverableError(new Error("Expected Websocket instance"))},this.handleClose=function(n){if(n.closeReason!==i.Error){if(e.connectionState===d.ConnectionState.DISCONNECTED)return void e.onUnrecoverableError(new Error("handleClose is called but client already disconnected"));if(e.ws&&e.fetchTokenAbortController)return void e.onUnrecoverableError(new Error("fetchTokenAbortController and websocket exist simultaneously"))}e.cleanupSocket(),e.retryTimeoutId&&clearTimeout(e.retryTimeoutId);var t=n.closeReason===i.Disconnected;if(e.channelRequests.forEach((function(n){var r=t&&!n.closeRequested;n.isOpen?(e.getChannel(n.channelId).handleClose({initiator:"client",willReconnect:r}),delete e.channels[n.channelId]):r||n.openChannelCb({channel:null,error:new Error("Failed to open"),context:e.connectOptions?e.connectOptions.context:null});var o=n.cleanupCb,a=n.closeRequested;n.channelId=null,n.isOpen=!1,n.cleanupCb=null,n.closeRequested=!1,o&&o({initiator:"client",willReconnect:r}),(a||n.closeRequested)&&(e.channelRequests=e.channelRequests.filter((function(e){return e!==n})))})),e.channels[0]&&(e.channels[0].handleClose({initiator:"client",willReconnect:t}),delete e.channels[0]),0===Object.keys(e.channels).length||(e.channels={},n.closeReason===i.Error)){if(e.chan0CleanupCb)e.chan0CleanupCb({initiator:"client",willReconnect:t}),e.chan0CleanupCb=null;else if(!t)if(e.chan0Cb)e.chan0Cb({channel:null,error:new Error("Failed to open"),context:e.connectOptions?e.connectOptions.context:null});else if(n.closeReason!==i.Error)return void e.onUnrecoverableError(new Error("open should have been called before `handleClose`"));if(e.connectionState=d.ConnectionState.DISCONNECTED,!t)return e.chan0Cb=null,void(e.connectOptions=null);e.debug({type:"breadcrumb",message:"reconnecting"}),e.connect({tryCount:0,websocketFailureCount:0})}else e.onUnrecoverableError(new Error("channels object should be empty after channelRequests and chan0 cleanup"))},this.cleanupSocket=function(){var n=e.ws;e.debug({type:"breadcrumb",message:"cleanupSocket",data:{hasWs:Boolean(n),readyState:n?n.readyState:null,connectionState:e.connectionState}}),n&&(e.ws=null,n.onmessage=null,n.onclose=null,n.onopen=null,n.onerror=function(){},0!==n.readyState&&1!==n.readyState||(e.debug({type:"breadcrumb",message:"wsclose"}),n.close()))},this.onUnrecoverableError=function(n){if(e.debug({type:"breadcrumb",message:"unrecoverable error",data:{message:n.message}}),e.connectionState!==d.ConnectionState.DISCONNECTED)try{e.handleClose({closeReason:i.Error,error:n})}catch(t){r.error("handleClose errored during unrecoverable error"),r.error(t)}if(!e.userUnrecoverableErrorHandler)throw r.error("Please supply your own unrecoverable error handling function"),n;e.userUnrecoverableErrorHandler(n)},this.ws=null,this.channels={},this.connectOptions=null,this.chan0Cb=null,this.chan0CleanupCb=null,this.connectionState=d.ConnectionState.DISCONNECTED,this.debugFuncs=[],this.userUnrecoverableErrorHandler=null,this.channelRequests=[],this.retryTimeoutId=null,this.fetchTokenAbortController=null,this.destroyed=!1,this.connectionMetadata=null,this.debug({type:"breadcrumb",message:"constructor"})};n.Client=f},68944:function(e,n,t){"use strict";t(36486);var r=t(8759);Object.defineProperty(n,"KU",{enumerable:!0,get:function(){return r.Client}});var o=t(88903);var a=t(69475);Object.defineProperty(n,"gS",{enumerable:!0,get:function(){return a.FetchConnectionMetadataError}})},69475:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FetchConnectionMetadataError=n.ConnectionState=void 0,function(e){e[e.CONNECTING=0]="CONNECTING",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECTED=2]="DISCONNECTED"}(n.ConnectionState||(n.ConnectionState={})),function(e){e.Aborted="Aborted",e.Retriable="Retriable"}(n.FetchConnectionMetadataError||(n.FetchConnectionMetadataError={}))},88524:function(e,n,t){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.EIOCompat=n.splitHref=void 0;var o=t(45983),a=t(10861);function c(e){var n=a.parse(e),t=n.protocol,r=n.slashes,o=n.auth,c=n.host,i=n.pathname;return{uri:a.format({protocol:t,slashes:r,auth:o,host:c,query:{ordered:"1"}}),path:null!=i?i:"/"}}n.splitHref=c;var i=new Map([["opening",0],["open",1],["closing",2],["closed",3]]);function s(e){return"undefined"!==typeof window?new MessageEvent("message",{data:e}):{type:"message",data:e}}function l(e,n){return"undefined"!==typeof window?new Event(e,n):r({type:e},n)}var u=function(){function e(e,n){var t=this;if(this.CLOSED=3,this.CLOSING=2,this.OPEN=1,this.CONNECTING=0,n)throw new Error("Passing protocols is not implemented");var a=c(e),i=a.uri,u=a.path;this.onopen=null,this.onclose=null,this.onmessage=null,this.onerror=null,this.eioSocket=o(i,{path:u,transports:["polling"]}),this.url=e,this.extensions="",this.protocol="",this.bufferedAmount=0,this.readyState=0,this.incomingSequence=0,this.outOfOrderQueue={},this.outgoingSequence=0,this.setReadyState(),this.eioSocket.on("open",(function(){if(t.setReadyState(),null!=t.onopen){var e=l("open");t.onopen.call(t,e)}})),this.eioSocket.on("close",(function(e){if(t.setReadyState(),null!=t.onclose){var n=(o={reason:e,code:1001,wasClean:!1},"undefined"!==typeof window?new CloseEvent("close",o):r({type:"close"},o));t.onclose.call(t,n)}var o})),this.eioSocket.on("message",(function(e){if(t.setReadyState(),null!=t.onmessage){if("string"===typeof e)throw new Error("expected data to be ArrayBuffer not string");var n=new DataView(e).getUint32(0),r=e.slice(4);if(t.incomingSequence===n){t.incomingSequence=n+1;var o=s(r),a=t.onmessage.bind(t);a(o);var c=Object.keys(t.outOfOrderQueue);c.length>0&&(c.sort().forEach((function(e){a(s(t.outOfOrderQueue[+e])),t.incomingSequence=+e+1})),t.outOfOrderQueue={})}else t.outOfOrderQueue[n]=r}})),this.eioSocket.on("error",(function(){if(t.setReadyState(),null!=t.onerror){var e=l("error");t.onerror.call(t,e)}}))}return e.prototype.setReadyState=function(){this.readyState=i.get(this.eioSocket.readyState)},e.prototype.send=function(e){var n=new ArrayBuffer(4+e.byteLength);new Uint8Array(n).set(new Uint8Array(e),4),new DataView(n).setUint32(0,this.outgoingSequence),this.outgoingSequence+=1,this.eioSocket.send(n),this.setReadyState()},e.prototype.close=function(){this.onmessage=null,this.eioSocket.close(),this.setReadyState()},e.prototype.addEventListener=function(){throw new Error("Not Implemented, please use onmessage, onopen, onerror, or onclose")},e.prototype.removeEventListener=function(){throw new Error("Not Implemented")},e.prototype.dispatchEvent=function(){throw new Error("Not Implemented")},Object.defineProperty(e.prototype,"binaryType",{get:function(){return this.eioSocket.binaryType||"blob"},set:function(e){this.eioSocket.binaryType=e},enumerable:!1,configurable:!0}),e.CLOSED=3,e.CLOSING=2,e.OPEN=1,e.CONNECTING=0,e}();n.EIOCompat=u},18347:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getConnectionStr=n.getWebSocketClass=n.getNextRetryDelay=void 0;var r=t(10861);function o(e){return("object"===typeof e||"function"===typeof e)&&(!!e&&("OPEN"in e&&1===e.OPEN))}n.getNextRetryDelay=function(e){var n=Math.floor(500*Math.random()),t=1e3*Math.pow(1.7,e);return Math.min(t,15e3)+n},n.getWebSocketClass=function(e){if(e){if(!o(e))throw new Error("Passed in WebSocket does not look like a standard WebSocket");return e}if("undefined"!==typeof WebSocket){if(!o(WebSocket))throw new Error("Global WebSocket does not look like a standard WebSocket");return WebSocket}throw new Error("Please pass in a WebSocket class or add it to global")},n.getConnectionStr=function(e,n,t){var o=r.parse(e.gurl);if(n){var a=null!==t&&void 0!==t?t:"gp-v2.replit.com";o.hostname=a,o.host=a,o.pathname="/wsv2/"+e.token+"/"+encodeURIComponent(e.gurl)}else o.pathname="/wsv2/"+e.token;return r.format(o)}},36486:function(e,n,t){var r,o,a=t(25108);void 0===(o="function"===typeof(r=function(){"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&i(e,n)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,n){return(i=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,n){return!n||"object"!==typeof n&&"function"!==typeof n?l(e):n}function h(e){var n=s();return function(){var t,r=c(e);if(n){var o=c(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)}}function d(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&null!==(e=c(e)););return e}function f(e,n,t){return(f="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,n,t){var r=d(e,n);if(r){var o=Object.getOwnPropertyDescriptor(r,n);return o.get?o.get.call(t):o.value}})(e,n,t||e)}var b=function(){function n(){e(this,n),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return r(n,[{key:"addEventListener",value:function(e,n,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:n,options:t})}},{key:"removeEventListener",value:function(e,n){if(e in this.listeners)for(var t=this.listeners[e],r=0,o=t.length;r<o;r++)if(t[r].callback===n)return void t.splice(r,1)}},{key:"dispatchEvent",value:function(e){if(e.type in this.listeners){for(var n=this.listeners[e.type].slice(),t=0,r=n.length;t<r;t++){var o=n[t];try{o.callback.call(this,e)}catch(a){Promise.resolve().then((function(){throw a}))}o.options&&o.options.once&&this.removeEventListener(e.type,o.callback)}return!e.defaultPrevented}}}]),n}(),p=function(n){o(a,n);var t=h(a);function a(){var n;return e(this,a),(n=t.call(this)).listeners||b.call(l(n)),Object.defineProperty(l(n),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(l(n),"onabort",{value:null,writable:!0,configurable:!0}),n}return r(a,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"===typeof this.onabort&&this.onabort.call(this,e)),f(c(a.prototype),"dispatchEvent",this).call(this,e)}}]),a}(b),C=function(){function n(){e(this,n),Object.defineProperty(this,"signal",{value:new p,writable:!0,configurable:!0})}return r(n,[{key:"abort",value:function(){var e;try{e=new Event("abort")}catch(n){"undefined"!==typeof document?document.createEvent?(e=document.createEvent("Event")).initEvent("abort",!1,!1):(e=document.createEventObject()).type="abort":e={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(e)}},{key:"toString",value:function(){return"[object AbortController]"}}]),n}();function E(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(a.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"===typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}"undefined"!==typeof Symbol&&Symbol.toStringTag&&(C.prototype[Symbol.toStringTag]="AbortController",p.prototype[Symbol.toStringTag]="AbortSignal"),function(e){E(e)&&(e.AbortController=C,e.AbortSignal=p)}("undefined"!==typeof self?self:t.g)})?r.call(n,t,n,e):r)||(e.exports=o)}}]);
//# sourceMappingURL=8944-34a559d97583ab96f55d.js.map